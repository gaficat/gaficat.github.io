<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>加菲猫的创客工坊</title>
  <icon>https://www.gaficat.com/icon.png</icon>
  <subtitle>今天有什么好的想法呢？</subtitle>
  <link href="https://www.gaficat.com/atom.xml" rel="self"/>
  
  <link href="https://www.gaficat.com/"/>
  <updated>2020-12-02T07:48:22.490Z</updated>
  <id>https://www.gaficat.com/</id>
  
  <author>
    <name>scarleast</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>用telegram订阅twitter</title>
    <link href="https://www.gaficat.com/posts/e857ecd7.html"/>
    <id>https://www.gaficat.com/posts/e857ecd7.html</id>
    <published>2020-12-02T07:15:02.000Z</published>
    <updated>2020-12-02T07:48:22.490Z</updated>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>如何用telegram订阅twitter上某位用户的推文呢？借助IFTTT其实可以轻松实现！</p><a id="more"></a><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>今年早些时候，我订阅了一个搬运王兴饭否的telegram频道，王兴有时候会分享一些东西，确实能拓宽眼界，现在还记得他之前分享的一句名言：“<strong>坐而论道不如起而行之</strong>”。</p><p>最近，之前订阅的telegram频道不更新了，找了一圈，在twitter上找到一个搬运工还在搬运王兴的饭否。但我几乎所有的消息都通过机器人推送到telegram上了，不太希望装太多APP。那么能否用telegram订阅twitter的某个用户呢？当然是可以的，不过需要用到一个第三方工具曲线救国——IFTTT。</p><p>说到telegram机器人，比如我使用阿里云的函数计算每天上午推送前一天的黄金价格；比如每次更新文章自动推送相关部署情况；大家感兴趣吗？感兴趣的话给自己埋一个坑。</p><center>  <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:80%;" src="https://pic.gaficat.com/default/telegram机器人推送消息示例.png"><br>  <div style="color:orange; display:inline-block; color:#999; padding:1px;">telegram机器人推送消息</div></br> </center><h1 id="ToDo"><a href="#ToDo" class="headerlink" title="ToDo"></a>ToDo</h1><p>IFTTT是一个自动化的平台，简单来说，你可以通过APP和网页，设置<strong>如果</strong><code>……</code><strong>然后就</strong><code>……</code>的自动化流程。比如某个RSS更新了，发送邮件通知自己；比如收到某一条webhook，然后做一些处理，总之，IFTTT有各式各样好玩的功能。</p><h2 id="一、总体逻辑"><a href="#一、总体逻辑" class="headerlink" title="一、总体逻辑"></a>一、总体逻辑</h2><p>本次我们利用IFTTT创建一个自动化流程：<strong>如果</strong><code>twitter上的某人发送了推文</code>，<strong>然后就</strong><code>把这条消息推送到telegram上</code>。</p><p>首先创建一个applet，在首页点击creat即可。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E5%88%9B%E5%BB%BAapplets.png" alt="创建IFTTT applets"></p><p>之后，就来到IFTTT创建一个自动化流程的核心步骤了，在这个界面可以看到创建自动化流程的总体逻辑：<strong>如果</strong><code>……</code><strong>然后就</strong><code>……</code>。还是比较简明的，我们点击<code>If This</code>后的<code>Add</code>，设置我们这个自动化流程的触发条件。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E6%95%B4%E4%BD%93%E9%80%BB%E8%BE%91.png" alt="IFTTT的整体逻辑"></p><h2 id="二、触发条件"><a href="#二、触发条件" class="headerlink" title="二、触发条件"></a>二、触发条件</h2><p>我们的整体逻辑是：<strong>如果</strong><code>twitter上的某人发送了推文</code>，<strong>然后就</strong><code>把这条消息推送到telegram上</code>。那么我们的触发条件<code>If This</code>中的内容就应该选择Twitter相关的东西，我们直接搜索twitter，就能找到twitter组件了。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E6%90%9C%E7%B4%A2twitter.png" alt="IFTTT搜索twitter组件"></p><p>进入Twitter组件后，可以看到有非常多的内容，这里我们选择<code>New tweet by a specific user</code>。</p><p><img src="https://pic.gaficat.com/default/IFTTT-twitter%E8%A7%A6%E5%8F%91%E6%9D%A1%E4%BB%B6.png" alt="IFTTT中twitter的功能"></p><p>紧接着，就需要输入我们希望订阅的twitter用户账号，这里我填入的是王兴饭否搬运工的账号（输入的用户账号下面可能会有一条红线，不太清楚原因，不过实际使用不影响）。</p><p><img src="https://pic.gaficat.com/default/IFTTT-twitter%E8%AE%A2%E9%98%85%E7%9B%AE%E6%A0%87%E7%94%A8%E6%88%B7.png" alt="IFTTT中设置twitter订阅目标用户"></p><h2 id="三、执行动作"><a href="#三、执行动作" class="headerlink" title="三、执行动作"></a>三、执行动作</h2><p>设置完触发条件后，会回到IFTTT创建自动化流程的总体页面，就可以添加我们自动化任务需要执行的任务了，点击<code>Then That</code>后的<code>Add</code>即可。</p><p>![IFTTT Then That](<a href="https://pic.gaficat.com/default/IFTTT-THEN">https://pic.gaficat.com/default/IFTTT-THEN</a> THAT.png)</p><p>因为我们希望执行的动作，是往telegram上推送内容，这里就可以直接搜索telegram，选定telegram，进行后续的配置。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E6%90%9C%E7%B4%A2telegram.png" alt="IFTTT搜索telegram组件"></p><p>IFTTT的telegram组件支持多种执行的任务：发送文字、图片、视频和音乐，因为是订阅的twitter以文字和图片为主，这里我选择了图片（选择文字其实也没问题）。</p><p><img src="https://pic.gaficat.com/default/IFTTT-telegram%E7%BB%84%E4%BB%B6.png" alt="IFTTT中telegram的功能"></p><p>紧接着的配置相对简单，分别是：</p><ul><li>推送到的目标：<code>Target chat</code></li><li>照片的URL：<code>Photo URL</code></li><li>说明：<code>caption</code></li></ul><blockquote><p>需要额外说明的是，可以点击<code>Add ingredient</code>添加一些IFTTT内置的内容。</p></blockquote><p><img src="https://pic.gaficat.com/default/IFTTT-telegram%E9%85%8D%E7%BD%AE.png" alt="IFTTT配置telegram组件"></p><h2 id="四、最终确认"><a href="#四、最终确认" class="headerlink" title="四、最终确认"></a>四、最终确认</h2><p>最后，我们需要确认创建的流程是否正确，如果发现有不太对的地方可以直接进行修改。我们这个流程里面可以看到，<strong>IF</strong>选择的触发条件是<code>New tweet by a specific user</code>，<strong>Then</strong>选择的是<code>Send photo</code>，没有问题，所以直接选择<code>Continue</code>。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E6%B5%81%E7%A8%8B%E7%A1%AE%E8%AE%A4.png" alt="IFTTT创建applets整体确认"></p><p>最后，可以对该自动化流程进行改名，这里我就默认不动了，直接点击<code>Finish</code>。</p><p><img src="https://pic.gaficat.com/default/IFTTT-%E6%80%BB%E4%BD%93%E7%A1%AE%E8%AE%A4.png" alt="IFTTT创建applets最终确认"></p><h1 id="实际效果和尾巴"><a href="#实际效果和尾巴" class="headerlink" title="实际效果和尾巴"></a>实际效果和尾巴</h1><p>等我们订阅的twitter用户更新了推文后，我们就可以在telegram上收到消息啦！</p><p><img src="https://pic.gaficat.com/default/twitter2telegram%E6%95%88%E6%9E%9C.png" alt="telegram订阅twitter用户的效果"></p><p>免费用户，IFTTT支持创建四个自动化流程，如果订阅的数量少还好，超过四个就要掏钱了。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h1&gt;&lt;p&gt;如何用telegram订阅twitter上某位用户的推文呢？借助IFTTT其实可以轻松实现！&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="其他" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="教程" scheme="https://www.gaficat.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>工作快满三年的那些惑</title>
    <link href="https://www.gaficat.com/posts/40abbf69.html"/>
    <id>https://www.gaficat.com/posts/40abbf69.html</id>
    <published>2020-11-26T14:37:45.000Z</published>
    <updated>2020-12-02T07:41:40.876Z</updated>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>工作快满三年了，你是否也正经历同事离职、工作逐渐丧失兴趣、职业规划迷茫、个人问题被家人催促的情况？那这篇文章一个问题都没办法帮你解决，哈哈哈，好久没写文章了，水一篇。对，顺带分享两个自己喜欢的音乐，Josh Leake的《A Quiet Departure》和石进的《此去经年》。</p><a id="more"></a><h1 id="过了新鲜劲儿，很多事都索然无味"><a href="#过了新鲜劲儿，很多事都索然无味" class="headerlink" title="过了新鲜劲儿，很多事都索然无味"></a>过了新鲜劲儿，很多事都索然无味</h1><p>我发现，人吧，一旦过了新鲜劲儿，动力就不足了，很多事情都变得索然无味了，无论是感情、工作或是兴趣爱好：</p><ul><li>每100天给她手写信件，时间久了，送信的人觉得平静的生活很难有最早时的兴致去创作内容。收信的人，第一次收到信件的时候，满眼惊喜，次数多了，也就逐渐觉得是理所当然了。</li><li>刚毕业的年轻人，初入职场，单身一人，觉得事业好什么都好，自己的公司很厉害，觉得自己的领导很重视自己，觉得自己能干出行业内有影响力的成果，升职加薪，迎娶白富美，指日可待。时间久了，也就逐渐疲惫了，自己在哪里都只是螺丝钉，这个世界少了谁都会继续下去的。</li><li>兴趣爱好，关于个人博客，讨论最多的就是，哪个博客工具好用？hexo？hugo？wordpress？因为讨论哪个博客工具好用时，是在刚开始写博客的劲头儿上，时间久了，折腾了一通工具，换了各种好看的主题，回头来没有坚持稳定的输出原创内容，访问者寥寥无几，也就坚持不下去了。</li></ul><p>我最近整理了一下自己写过的文章，发现最开始的时候一个月能写十几篇文章，不管是生活中的小事还是工作中遇到的技术问题都会记录下来。而现在呢，一个月也就三四篇文章。之前看到过一个小伙伴说：<strong>“单纯靠兴趣，很难支撑得起坚持写文章的”</strong>。确实，无论坚持下来写博客的，还是坚持写微信公众号的，亦或是做短视频的，大部分人的动力，都是靠流量去赚钱。</p><p>从小到大，你有坚持过一项有一定难度的事情吗？画画、某种乐器、规律的健身、读书、日记或是其他东西？大概率没有吧，有也是断断续续的坚持。坚持的过程本身就是和自己惰性抗争的过程，就是在锻炼自己的执行力。小孩子都知道动画片好看、游戏好玩，但我们不是小孩子了，我们已经不是这次考试贪玩了，下次考试努力把高分考回来就行了。有些多事情，错过一次，就是一年，奔三的人，愈发感到时间经不起浪费。</p><p>总之吧，最近没有太多写文章的素材。TVOC传感器，在知乎上的大兄弟提醒后也提上了日程，等待队友做板子中。即兴伴奏呢？学了很多理论，自己都学的云里雾里的。新鲜好玩的东西呢？买了蒲公英，结果公司升级了网络，禁用了P2P，免费的蒲公英不能切换模式，P2P拉闸。只好写写自己最近的一些生活了，我希望至少写文章这件事不要断，能保持一定的输出频率。</p><h1 id="600天的环城公园和樊登书店"><a href="#600天的环城公园和樊登书店" class="headerlink" title="600天的环城公园和樊登书店"></a>600天的环城公园和樊登书店</h1><p>我和冯冯是在知乎上认识的，就是这么一个“人人都是年入百万”的平台，我觉得自己的圈子太小了，应该扩大自己的圈子，广发相亲贴，结果就是随手在知乎某个相亲贴下的回答，让我认识了冯冯，冯冯被我言语中的幽默和自律迷住了眼睛，等在一起才发现，原来这个人不像他相亲贴说的那样自律、有趣，反而不爱说话，执行力不强，是个大懒鬼，哈哈哈哈哈，后悔也来不及了。</p><p>上个周末，我们一起去了环城公园，冯冯说她喜欢看秋天的银杏，黄色的树叶在树枝上摇摇欲坠，远远看去，树干、地面都是金黄的。途径樊登书店，冯冯说进去看看，书店很安静，店主是个小姑娘，招呼我们随便看后，便自己忙着打包需要寄走的图书。其实，书店的图书没有吸引我，一进店就吸引到我的是播放的BGM，3/4拍的，听着像是某种华尔兹或者圆舞曲，有一丝梦幻、也有一丝忧伤，很能让人安静下来，挺有品味的。挺想结婚的时候我弹这首曲子，然后冯冯顺着旋律，一蹦一蹦像小仙女一样出来。</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  auto="https://y.qq.com/n/yqq/song/000mrJFr2eOOgz.html" mode="circulation" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><p>我们看到一个小桌子上有一些本子，上面是一些人诉说自己的故事，或是希望考上好大学，或是希望家人早日从病痛中康复，也有其他人在那些故事下面用另一种颜色的笔墨写下自己的留言。冯冯说：“我们选两张明信片吧！”</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:30%;"     src="https://pic.gaficat.com/default/600天的明信片.jpg">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">600天的明信片</div></br> </center><p>和冯冯互相给对方写了一段话，等冯冯递给我她写好的明信片，我才发现原来还有印章呢！我选了五个章：</p><ul><li><strong>见字如晤</strong>：我始终觉得书信，亲手将自己的情感用笔墨固定在纸张上，是一件很真诚的事，因为书信需要投入的时间远比电子的文字多得多，希望冯冯看到这张明信片，能想起600天一起路过的樊登书店。</li><li><strong>感谢</strong>：我不是一个很细腻的人，我一直觉得自己很直男，所以在今年前半年，我和冯冯出现了非常大的分歧，给了冯冯许多的伤害。是冯冯的包容，才让我们走了下去，所以，很感谢冯冯。</li><li><strong>此去经年</strong>：我人生第一次挣了工资，第一次买票坐第一排听音乐会，是石进的音乐会。当时还不知道演出结束有返场的环节，返场的第一首曲子，大提琴前三个音一出来，我鸡皮疙瘩就起来了，马上找笔，把<strong>《此去经年》</strong>四个字记了下来。挺巧呢，写明信片，能盖到这个章。</li><li><strong>来日方长</strong>：希望和冯冯能走下去，我们双方，作为对方人生里第一段如此正式的恋爱，如果能一辈子走下去，是一件多么值得欢喜的事情。600天是一个新的开始，和冯冯有了合适的沟通方式，希望能一直走下去，一起过700天、800天、3000天吧。</li><li><strong>欢喜</strong>：有欢，才有喜。以此提醒我和冯冯，不要吵架，不要冷战。那些欢快的日子，让我们更加喜爱对方。</li></ul>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  auto="https://www.xiami.com/song/1813974701" mode="circulation" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><p>我回想起上次和冯冯去环城公园，还是去年陪冯冯打疫苗，我们手牵手，公园很安静，天气很好，冯冯说她特别喜欢住在公园旁边，没事就能悠闲地散散步。今年因为疫情，我和冯冯很长时间都没有见面的机会，沟通出了很多问题。我当然是那个该吃吃，该睡睡的人，但冯冯在感情和工作都不顺利的情况下，度日如年。如果任何一方选择放手，哪还会有这次的故地重游。</p><p>不知道冯冯知不知道，有一个傻子，为了把她追回来，顶着夏日正午的烈阳，狂奔于半勺舒舒和地铁站之间，很害怕自己迟到了，人财两空。（高德百度不讲武德，来骗，来偷袭，我不认识路的老同志，这样好吗？这样不好！最后靠腾讯地图找到了半勺舒舒的店面。庆幸，冯冯还是经受不住红茶蛋糕的诱惑，这个小吃货！）</p><h1 id="奔三的人浪费不起时间，错不起了"><a href="#奔三的人浪费不起时间，错不起了" class="headerlink" title="奔三的人浪费不起时间，错不起了"></a>奔三的人浪费不起时间，错不起了</h1><p>我最近吧，总觉得工作上的事情提不起兴趣，昨天有个同事问我，你当初是为啥来咱们公司的，我说，当时综合了手头上的offer，薪水、工作强度、工作地点等因素吧，这个工作当时是最适合我的。我觉得人生会有很多种可能，你的任何一个决定，都让你之后的轨迹发生改变，也许当初我去了国防科大，拿到了推免的资格，现在正在国防科大读硕士。也许当初我去了海康威视，在机器人的产品线上加班，也看不到希望。也许我当初本硕连读过了，现在刚工作一年，正在兴头上，很开心。很多事都不好说，但是，逐渐我意识到了一个很严重的问题，<strong>随着年龄的增加，你选择的空间不多了。</strong></p><p>我本科毕业的时候就24岁了，我依稀记得刚上大学那会儿，身边的同学很多都小我三岁，你知道这意味着什么吗？这意味着那些比我小三岁的“同龄人”，他们本科毕业，工作三年，发现工作和自己兴趣不对口，再回去考研，和我本科毕业直接考研年龄上是一样的。这意味着那些本科毕业直接考研的同学，都是24岁，他们是硕士，我是本科。我真的经不起错，考研？失败了怎么办？我就白白浪费了一年的时间。所以当初拿到了一个不错的offer就紧紧攥在手里，拿住了。</p><blockquote><p>其实造成我年龄这么大的原因，一方面是我上小学本身比同龄的孩子晚一年，我也不知道真实情况，但听父母说，当初幼儿园老师说，小孩子7岁半再去上一年级没问题，六岁上学不好。另一方面，我复读了一年，浪费了一年的时间。而小时候浪费的时间，终究要让你在未来补回来。但，你能怨谁呢？怨不了谁啊！只能自己想办法，给自己职业规划时，少犯错误吧！</p></blockquote><p>其实你问我你选择现在手里的这份工作后悔吗？我说我肯定不后悔，让我在选择一次，我依然会这么选。因为这段工作经历，让我明白了一些事：</p><ul><li><strong>能认识一些清华北大的人，甚至于有幸跟他们共事一段时间，是一种无悔经历。</strong>因为即使你在北京海淀区上高中，你能进清华北大的概率只有1%，你就能想象接触到清华北大的人，对于一个五线城市出来的孩子有多么不容易了。</li><li><strong>一个被批评不适合做科研的loser，能被清华北大的博士认可是很庆幸的一件事。</strong>我申请本硕连读的时候，面试的老师指着鼻子说我不适合做科研，我做的所有事都是流水线上工人做的，当时真的很憋屈。而在我工作的两年多时间内，我平均每五个季度拿一次绩效Q+。我旁边一位工作了五年的同事，前几天说，他都不知道有绩效这回事儿，因为这个季度Q-，五年来才第一次知道有这回事。所以，真的很感谢我的领导，我是一个很普通的人，我是努力，但也没有那么努力，能这么认可我，真的真的很感激。</li><li><strong>这份工作让我及时明白了，也许我真的没有那么热爱IT行业。</strong>我有过很多择业的选择，比如选择学习艺术（曾经我认为学习艺术就是重复死练不用智商的工作，大猩猩训练训练都能行），选择考公（曾经我认为，我爱钱，我要挣大钱，公务员不行。因为父母都是公务员，小时候我想要玩具，我想要吃必胜客，我都不敢要，印象里，即使父母都是公务员，家里的经济状况也不允许我要很多东西）。这份工作，给了我还算不错的薪水，我能买自己想买的东西，但程序猿，需要为35岁焦虑；研究猿，需要为成果焦虑。内卷的时代，很难有轻松的工作吧。</li></ul><p>我曾经真的认为，自己天赋异禀，我真的有那么喜欢编程，我能靠科技去创业，或者能靠写代码，成为某个团队的leader，但目前来看，和自己预想的完全不一样呀！马上27岁了，很庆幸，人生的第一份工作，能有时间恋爱，有时间练琴，有时间思考自己未来的规划。<strong>总之吧，对我而言，很庆幸人生的第一份工作真的很棒，能有时间停下来好好思考，及时明白了一些事，这是不幸中的万幸吧。</strong>如果当初本硕连读了，我可能要到30岁才能明白自己不那么热爱IT行业，才会开始去做一些打算，那时真的就太晚了。</p><p>当然了，看到这篇文章的大学生们，你们肯定大部分不会有我遇到的年龄问题，本科毕业出去打拼几年，不喜欢在读研。或者直接考研，出去打拼几年，等了解了整个行业的情况，再回头思考职业规划也不迟。对我而言，年龄确实限制了我在非常多方面的选择。</p><h1 id="离职了两个同事，有些惶恐"><a href="#离职了两个同事，有些惶恐" class="headerlink" title="离职了两个同事，有些惶恐"></a>离职了两个同事，有些惶恐</h1><p>很多人都第一份工作都是签的3年的合同，所以3年是一个坎。最近连续有两位同事离职了，一位是极力要求招我的北大博士，另一位是一起共事的东北小伙儿。大家都有自己的规划，北大博士希望自己带更大的团队，在科研上取得更大的成就，而目前在这个团队中，他的精力很难集中在自己专业的研究方向上。东北小伙儿呢，女票要去北京考研，加上公司给的薪水确实比不上北京那边的其他公司，所以索性要去北京挣大钱。</p><blockquote><p>北大博士，我一直叫他星哥。18年秋招，刚刚本硕连读被批的一无是处的我，四处遭受打击。时间已经8月中旬了，我早早就去了学校，留意学校所有宣讲会与我有关的机会，留意其他学校宣讲会与我有关的机会，留意没有去重庆的企业，他们校招可能与我有关的机会。然后，八月底到九月中旬，我没有睡过一个安稳觉，我以为我拿着一沓比赛获奖证书，优秀的工程能力能成为offer收割机，然而两周的时间，面试几乎都没收到太多。最终，我收到了星哥的面试邀请。</p><p>我记得和星哥就简单聊了聊大学做的事、看过一些什么书，聊了聊我的笔试开放题，很愉快的就结束了。面试后，虽然还没有到最终VP面试给到offer的环节，星哥也还是说了一些自己的看法，觉得我应该去北京闯闯，我的履历有很多机会。</p><p>你一直以为，面试官就是尖酸刻薄，问几个难倒你的问题就结束了，事实上并不是。</p><p>我后来问星哥，为什么当时会给我offer，让我进入下一轮，我没有任何网络安全的经验。星哥说：“其实我看了你的笔试题我就确定要你了，你的开放题很有想法，至少你对物联网是非常了解的，没有了解的话，写不出那样的答案。其实我们阅卷，一眼就看出来大部分是百度查出来的，你的答案太突出了。”</p></blockquote><p>当然，最终还是和星哥成为了同事。星哥作为我们的实验室负责人，我们工作没有做到位，出了问题，星哥帮我们顶着；做研究出成果时，星哥带着我们，推我们往前走。所以我觉得星哥是一个很好的领导，一个很好的同事。</p><p>总之吧，突然就有一种人心惶惶的感觉了。总以为身边这些同事，会陪你走过五年十年，有可能你是第一个离开的，结果一下子别人先离开了，还一下子走两个。一个是给了你信心，从谷底把你往上拉的领导；一个是一起共事做项目的小伙伴，有些说不上的滋味。另一方面，就觉得，这些人说走就走了，大领导也留不住，身为同事也很难做一些什么，这个世界，不是离了谁就转不了的。别人走了，你呢？你的五年规划，十年规划是什么？有了规划，执行的如何？</p><p>我觉得虽然自己有很多的打算，比如说弹琴，比如说折腾一些电子设计的东西，但是都不能变现，它们目前都只能算自己业余的爱好。一旦目前这份工作丢掉了，自己瞬间就失去经济能力了，东北小伙儿技术能力很强，北大博士有学历，我自己呢？还是很惶恐吧。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>不知道是各种泻药文章看多了还是怎么，总之吧，似乎除了公务员、国企、事业单位，其他人就都是打工人，工作就是为了挣钱，都不配活着了，就都得35岁等着送外卖开滴滴，被人看不起。</p><p>身边的同事倒是都挺乐观的，谁知道未来10年、20年会怎么样呢？干好手头的工作，未雨绸缪一些事儿吧，做自己人生的老板，老板，哪有安逸舒适的。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h1&gt;&lt;p&gt;工作快满三年了，你是否也正经历同事离职、工作逐渐丧失兴趣、职业规划迷茫、个人问题被家人催促的情况？那这篇文章一个问题都没办法帮你解决，哈哈哈，好久没写文章了，水一篇。对，顺带分享两个自己喜欢的音乐，Josh Leake的《A Quiet Departure》和石进的《此去经年》。&lt;/p&gt;</summary>
    
    
    
    <category term="生活" scheme="https://www.gaficat.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="生活" scheme="https://www.gaficat.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>大调和小调，你还可以这样理解</title>
    <link href="https://www.gaficat.com/posts/bac5f5bf.html"/>
    <id>https://www.gaficat.com/posts/bac5f5bf.html</id>
    <published>2020-11-05T15:03:47.000Z</published>
    <updated>2020-11-26T13:59:10.339Z</updated>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>本文整理自官大为的视频，介绍了调式、大调和小调的概念（一张频率的分布图很清楚的说明了调式的关键是<strong>排列方式</strong>），并举例对比了大调和小调在音响效果上的区别。</p><a id="more"></a><h1 id="口水话"><a href="#口水话" class="headerlink" title="口水话"></a>口水话</h1><p>我记得2019年和2020年的目标，都是希望自己能在即兴伴奏上有一些突破，起码是入门。机缘巧合，无意间看到了邓垚老师即兴伴奏的课，不同于其他的课程，邓垚老师的课，灌输了很多关于即兴伴奏的基础概念，让我对于即兴伴奏有了框架、整体上的认识，这是很多课程上没有的。没有一些常识性的基础概念、框架结构，直接讲细节的和弦，很容易陷入不知道在学什么的一种状态。所以，邓垚老师的课极大程度上激发了我对于即兴伴奏探索的欲望。</p><p>我其实在网上看各种关于钢琴即兴伴奏的课程有一段时间了，无论邓垚老师的课、姜创钢琴的课、冰咖啡的流行音乐和声学还是宋大叔的键盘和声学等等，但是目前整个人处于听不出来和声进行、不会给乐曲配和声以及看着容易上手稀碎的迷茫状态。在学习到小调的时候，三种小调复杂的和弦让我突然间就产生了一个<strong>非常强烈疑问</strong>，所有的即兴伴奏课程，都在讲三和弦、七和弦，讲大调的正三和弦，讲小调的各种和弦。<strong>几乎所有人都在强调和弦在大小调上的重要性，那调到底是什么？大调到底是什么？小调到底是什么？区分开他们有什么作用？为什么不同的调式听起来感情色彩不一样？</strong></p><p>所以就有了今天的文章，我在网上查了一些各种调式的文章，发现大部分关于调式的解释，都在说大小调，都照着乐理书说全全半全全全半的排列，但是这到底有什么含义，并没有说清楚。前段时间刷好和弦的视频，发现了一个关于调式的系列，从一个独特的角度阐述了调式的概念。我把视频内容中的一些重点整理出来，供自己日后翻看吧~</p><h1 id="什么是调式？"><a href="#什么是调式？" class="headerlink" title="什么是调式？"></a>什么是调式？</h1><p>当我们翻阅《The New Grove Dictionary of Music and Musicians》时，关于调式的文章长达80000多字，而哈利·波特与魔法石也只有70000多字。<strong>调式在不同的时期、不同的文化都有不同的意义，用一句话来说：调式就是一个音阶中，音与音之间的排列模式。我们常见的调式，就是大调和小调。</strong></p><h1 id="什么是大调？"><a href="#什么是大调？" class="headerlink" title="什么是大调？"></a>什么是大调？</h1><p>大调就是我们最熟悉的Do Re Mi Fa Sol La Si Do的排列模式，不是说这些音，而是排列模式。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:30%;"     src="https://pic.gaficat.com/default/C大调音阶.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">C大调音阶</div></br> </center><p>那么，为什么Do Re Mi Fa Sol La Si Do听起来像Do Re Mi Fa Sol La Si Do呢？或者说，为什么只要其中有一个音不对，我们就听起来感觉怪怪的呢？比如下面这样：</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-rKJXwUPX" style="margin-bottom: 20px; width: "></div>        <script>          var ap_rKJXwUPX = new APlayer({            element: document.getElementById("mmedia-rKJXwUPX"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "弹错音的大调",              author: "官大为",              url: "https://music.gaficat.com/%E5%BC%B9%E9%94%99%E9%9F%B3%E7%9A%84%E5%A4%A7%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_rKJXwUPX);        </script><p>我们在小学二年级就学过，声音的高低是由于物体振动频率不同，这就可以解释上面的现象了：将Do Re Mi Fa Sol La Si Do的频率（音高）放在一条竖线上，就会长下面这个样子。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:25%;"     src="https://pic.gaficat.com/default/C大调官大为示意图.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">C大调排列方式</div></br> </center><p>我们发现，上面这些音，他们频率之间的距离其实是不一样的，比如Do和Re之间的距离要宽一些，Mi和Fa之间的距离要窄一些。乐理上，就把Mi和Fa这种频率距离比较近的音，称为半音；把Do和Re这种频率距离比较远的音称为全音。Do Re Mi Fa Sol La Si Do这几个音之间有七个间隔，排列方式就是：全音 全音 半音 全音 全音 全音 半音。现在，我们就可以从任何一个音起，构造一个听起来像是Do Re Mi Fa Sol La Si Do的音阶。</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-SGisWmuU" style="margin-bottom: 20px; width: "></div>        <script>          var ap_SGisWmuU = new APlayer({            element: document.getElementById("mmedia-SGisWmuU"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "任意音构成大调音阶",              author: "官大为",              url: "https://music.gaficat.com/%E4%BB%BB%E6%84%8F%E9%9F%B3%E6%9E%84%E6%88%90%E7%9A%84%E5%A4%A7%E8%B0%83%E9%9F%B3%E9%98%B6.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_SGisWmuU);        </script><p>结论就是：只要我们找到八个音，这八个音之间的间隔，<strong>按照全全半全全全半方式排列，构成的音阶，我们就把这个音阶成为大调。</strong></p><h1 id="什么是小调"><a href="#什么是小调" class="headerlink" title="什么是小调"></a>什么是小调</h1><p>一旦我们有了一个大调音阶，要产生一个小调音阶就相对简单了。比如上述的例子，我们只需要在C大调的基础上，把第三、第六、第七个音降低半音，我们就得到了一个新的排列模式，我们把这个新的排列模式称为小调。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:25%;"     src="https://pic.gaficat.com/default/C大调和小调的音阶.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">C小调音阶</div></br> </center><p>当然了，你会说，那小调的排列方式到底是什么呀？小调相对复杂，有自然小调、和声小调和旋律小调，本片文章篇幅有限，就将在下一篇继续说明。</p><h1 id="大调-VS-小调"><a href="#大调-VS-小调" class="headerlink" title="大调 VS 小调"></a>大调 VS 小调</h1><p>C大调音阶听起来就是下面这样：</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-bdaGoIEU" style="margin-bottom: 20px; width: "></div>        <script>          var ap_bdaGoIEU = new APlayer({            element: document.getElementById("mmedia-bdaGoIEU"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "C大调音阶",              author: "官大为",              url: "https://music.gaficat.com/C%E5%A4%A7%E8%B0%83%E9%9F%B3%E9%98%B6.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_bdaGoIEU);        </script><p>C小调音阶听起来就是下面这样：</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-aQdcJyOr" style="margin-bottom: 20px; width: "></div>        <script>          var ap_aQdcJyOr = new APlayer({            element: document.getElementById("mmedia-aQdcJyOr"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "C小调音阶",              author: "官大为",              url: "https://music.gaficat.com/C%E5%B0%8F%E8%B0%83%E9%9F%B3%E9%98%B6.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_aQdcJyOr);        </script><p>我们听到的歌曲，其实都是基于各种调式创作出来的，基于大调创作的歌曲听起来开心、明朗，基于小调创作的歌曲听起来忧伤、唯美。我们用同一首儿歌示例，谱子一样，小调只是把第三、第六、第七降低半音。基于大调的儿歌听起来是这样的：</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:30%;"     src="https://pic.gaficat.com/default/大调儿歌谱子.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">大调儿歌的谱子</div></br> </center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-bbRKBLsu" style="margin-bottom: 20px; width: "></div>        <script>          var ap_bbRKBLsu = new APlayer({            element: document.getElementById("mmedia-bbRKBLsu"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "基于大调的儿歌",              author: "官大为",              url: "https://music.gaficat.com/C%E5%A4%A7%E8%B0%83%E5%84%BF%E6%AD%8C.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_bbRKBLsu);        </script><p>基于小调的儿歌听起来是这样的：</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:30%;"     src="https://pic.gaficat.com/default/小调儿歌谱子.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">小调儿歌的谱子</div></br> </center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-nhoyEbRy" style="margin-bottom: 20px; width: "></div>        <script>          var ap_nhoyEbRy = new APlayer({            element: document.getElementById("mmedia-nhoyEbRy"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "基于小调的儿歌",              author: "官大为",              url: "https://music.gaficat.com/C%E5%B0%8F%E8%B0%83%E5%84%BF%E6%AD%8C.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_nhoyEbRy);        </script><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>我从小就开始学钢琴了，当然， 只是作为兴趣。和所有人一样，古典钢琴，学习的路径就是哈农、各种练习曲和大汤，自始至终，学钢琴对我而言都是极其枯燥的。当然了，父母有他们的说辞，小孩子哪里懂什么是兴趣，不逼你一下，你怎么可能学得出来？</p><p>但是当我成年，有了自学能力，能够自己做选择后发现：会一种乐器带给人的乐趣，不是你对于某种演奏的技艺有多高超（同一首曲子你弹100遍，腻不腻？）。而是我听到好听的歌曲，甚至于不需要谱子，能够用自己熟悉的乐器演奏、自弹自唱或是给别人弹伴奏，无论是钢琴、吉他、笛子、小提起或者是其他的乐器。对于音乐的喜爱，才是我们学习乐器的动力。但，从来没有人教我们，后来我知道了，这个东西叫乐理，叫视唱练耳，叫和声学。</p><p>和声学真的很有魅力，就像上面的儿歌，同一段音乐，仅仅变动了三个音，仅仅降低了半音，就能让一段旋律产生不一样的感情。如果把音乐比作语言，给你心爱的姑娘朗诵哈姆雷特，无论你朗诵的多么动人，多么熟练，心爱的姑娘只会拍拍手，朗诵的不错——这是古典钢琴，你的练习能让你的朗诵技巧很棒，音色很好听，但只是朗诵别人的作品。那如果是俏皮地念给她听你刚写的情诗呢？——这是即兴伴奏，这是和声学，教你写作，写自己的情诗。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h1&gt;&lt;p&gt;本文整理自官大为的视频，介绍了调式、大调和小调的概念（一张频率的分布图很清楚的说明了调式的关键是&lt;strong&gt;排列方式&lt;/strong&gt;），并举例对比了大调和小调在音响效果上的区别。&lt;/p&gt;</summary>
    
    
    
    <category term="音乐" scheme="https://www.gaficat.com/categories/%E9%9F%B3%E4%B9%90/"/>
    
    <category term="乐理" scheme="https://www.gaficat.com/categories/%E9%9F%B3%E4%B9%90/%E4%B9%90%E7%90%86/"/>
    
    
    <category term="乐理" scheme="https://www.gaficat.com/tags/%E4%B9%90%E7%90%86/"/>
    
    <category term="音乐" scheme="https://www.gaficat.com/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>今天想聊聊灰犀牛</title>
    <link href="https://www.gaficat.com/posts/c1d9e34b.html"/>
    <id>https://www.gaficat.com/posts/c1d9e34b.html</id>
    <published>2020-10-20T14:26:04.000Z</published>
    <updated>2020-10-20T15:52:40.350Z</updated>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>人们用“黑天鹅”来比喻难以预测的极小概率事件。比如，泰坦尼克号、911等。<strong>而“灰犀牛”就是与“黑天鹅”互斥补充的概念，比喻的是经常被人视而不见的大概率风险。</strong>想象一下，在非洲大草原，一只体型庞大，行动迟缓、远远看起来似乎没有任何威胁的灰犀牛，正在慢悠悠散步，但当你毫无戒备地靠近它的领地，它被突然间激怒，向你狂奔而来，你便无处躲避。</p><a id="more"></a><h1 id="口水话环节"><a href="#口水话环节" class="headerlink" title="口水话环节"></a>口水话环节</h1><blockquote><p>周六，通勤的公交车依然有很多人，到达公司，发现我所在的楼层只有我一个。呵，挺新奇，竟然只有我一个人加班。最近降温很厉害，我整个人蜷缩着，昨天那股“半天干完活就回家”的意愿早就不知道跑哪儿去了。在公司就看看bilibili，刷刷v2ex，再点几个经常浏览的网站，一上午时间就过去了。吃了饭，本来心想回去休息半个小时，就开始干活儿，工作量不小呢！结果想到那么多的事情没做，一点动力都没有，午休起来都下午四点了。得，去上个厕所，结果回来发现忘带门卡，被锁在了门外了，钥匙也在里面，家也回不去了。就这么一瞬间，我有些崩溃了，一屁股坐在公司门口，心想自己怎么就活成这个窝囊样。自己这个萎靡不振样子，有一些像丢了钱包的江阳。</p><p>国考前几天开始报名了，看了看职位表，就马上一通操作猛如狗，然后，一个能报的都没有。我想到各种35岁危机的说法，有些不安。又想到女票的父母因为自己不是公务员，不太愿意让女票跟自己相处。满脑子就只有一个念头：“这世道，除了公务员，就不配活着了呗？除了公务员，所有人35岁之后就都去送外卖，当保安了呗？所有职业都低公务员一等呗？”但，呵？你还挺高兴，不愿意考公务员？你看看你有资格考试不？</p></blockquote><p>我最近过的有些焦虑，一方面，我已经参加工作快三年了，跟同事聊天，发现大家到了这个时间点，都有些疲倦、迷茫了，对手头的工作提不起兴趣。另一方面，想到自己可能遭遇35岁的危机，挺无能为力。那怎么办呢？正在做的工作似乎已经触及行业的天花板了，大幅的加薪很困难。自己的兴趣很难在短期内转化成变现的能力。就连参加铁饭碗考试的资格都没有。怎么办呢？</p><p>前段时间，看到一个关于灰犀牛的视频，想想自己的现状，嗯，记录下来吧，当作是读书笔记了。</p><h1 id="什么是灰犀牛？"><a href="#什么是灰犀牛？" class="headerlink" title="什么是灰犀牛？"></a>什么是灰犀牛？</h1><p>说到灰犀牛，就一定要提到它的反义词——“黑天鹅”。</p><blockquote><p>据说在十七世纪以前，欧洲人只见过白色的天鹅，所以他们就认为全世界的天鹅都是白色的。后来随着他们开发澳大利亚，在当地看见第一只黑色的天鹅起，这个原本看似绝不可动摇的信条就给彻底颠覆了。此即所谓的“黑天鹅事件”，它原意旨在说明，人类总是过度地相信经验，殊不知一只黑天鹅的出现，就足以颠覆以往的认知。</p></blockquote><p>后来，人们用<strong>“黑天鹅”来比喻难以预测的极小概率事件</strong>。比如，泰坦尼克号、911等。<strong>而“灰犀牛”就是与“黑天鹅”互斥补充的概念，比喻的是经常被人视而不见的大概率风险。</strong></p><blockquote><p>想想一下，在非洲大草原，一只体型庞大，行动迟缓、远远看起来似乎没有任何诶西安的灰犀牛，正在慢悠悠散步，但当你毫无戒备地靠近它的领地，它被突然间激怒，向你狂奔而来，你便无处躲避。</p></blockquote><p>与难以预测的“黑天鹅”不同，<strong>灰犀牛式的重大危机往往早就呈现出各种端倪。</strong></p><h1 id="应对灰犀牛时的五个阶段"><a href="#应对灰犀牛时的五个阶段" class="headerlink" title="应对灰犀牛时的五个阶段"></a>应对灰犀牛时的五个阶段</h1><ul><li>抵制否认阶段</li><li>混日子阶段</li><li>判断性质阶段</li><li>惊恐阶段</li><li>行动阶段或崩溃阶段</li></ul><h2 id="抵制否认阶段"><a href="#抵制否认阶段" class="headerlink" title="抵制否认阶段"></a>抵制否认阶段</h2><p><strong>人们会拒绝承认不安的事实，这是一种自我保护机制。</strong>比如我们的父母，逐渐衰老，身体会出现各种各样的小毛病，但当我们提出，带他们去体检时，他们的第一反应往往都是，“我身体好着呢，不需要体检”。</p><blockquote><p>我们小时候，暑假就只顾着玩，到了快开学发现作业没写完，咋办？肯定是先否定，我咋可能啥也没写，肯定写了一些的，差的不多。</p></blockquote><h2 id="混日子阶段"><a href="#混日子阶段" class="headerlink" title="混日子阶段"></a>混日子阶段</h2><p><strong>这一阶段，人们往往会得过且过，想办法把问题推到将来。</strong>想想我们自己吧，一边被各种贩卖焦虑搞得真的挺焦虑，35岁怎么办，一方面每天按部就班，回到家，抖音、微博、知乎刷不停，得过且过，就混呗。</p><blockquote><p>否定完，然后就心想，反正还有几天，往后拖吧，最后几天再补。</p></blockquote><h2 id="判断性质阶段"><a href="#判断性质阶段" class="headerlink" title="判断性质阶段"></a>判断性质阶段</h2><p><strong>这一阶段，人们往往会对灰犀牛危机的性质进行判断，并会对该做什么进行争吵，从而浪费大量的时间和绝佳的机会。</strong></p><blockquote><p>混着混着，到了快开学的前几天，就该判断性质了，到底差了多少没写，要不要补，先补哪个。</p></blockquote><h2 id="惊恐"><a href="#惊恐" class="headerlink" title="惊恐"></a>惊恐</h2><p><strong>这一阶段有多惊恐，取决于我们在前面三个阶段浪费了多少时间。</strong></p><blockquote><p>判断完性质，可不就挺惊恐麽。天老爷，差这么多没写，咋整？</p></blockquote><h2 id="行动阶段或崩溃阶段"><a href="#行动阶段或崩溃阶段" class="headerlink" title="行动阶段或崩溃阶段"></a>行动阶段或崩溃阶段</h2><p><strong>惊恐过后，行动阶段和崩溃阶段往往是同时存在的。</strong></p><blockquote><p>最后，只能一把鼻涕一把泪，熬夜写作业呗？当然也有那种欠太多，死猪不怕开水烫，崩溃等死的时候。</p></blockquote><h1 id="如何应对灰犀牛？"><a href="#如何应对灰犀牛？" class="headerlink" title="如何应对灰犀牛？"></a>如何应对灰犀牛？</h1><ul><li>承认危机的存在</li><li>判断灰犀牛事件的性质</li><li>动起来</li><li>不要浪费危机</li><li>成为发现并控制灰犀牛式危机的人</li></ul><h2 id="承认危机的存在"><a href="#承认危机的存在" class="headerlink" title="承认危机的存在"></a>承认危机的存在</h2><p><strong>承认危机，就要时刻防范群体思维，并以接受的态度对待不同的声音和观点。</strong>我认为做到这一点是相当困难的，首先，我们天生就有群体思维，比如法不责众，大家都是那样的， 我就跟着大家就行。那么，在这种情况下，能够跳出群体思维，对事情本身进行思考，保持自己的想法就非常困难了。其次，我们在面对自己不利的东西时，会本能地编造出一万种理由逃避，试图自欺欺人，拒绝自己意识到的危机。</p><h2 id="判断灰犀牛事件的性质"><a href="#判断灰犀牛事件的性质" class="headerlink" title="判断灰犀牛事件的性质"></a>判断灰犀牛事件的性质</h2><p><strong>判断灰犀牛事件的性质，分析事情的起因，列出Todo</strong>。承认危机的存在后，要立即处理所有的危机一定很难。所以需要有这样一个阶段，给自己思考的时间，好好想想事情的原因是什么，应该怎么做，并衡量各种Todo的轻重缓急，制定应对灰犀牛的方案。</p><h2 id="动起来"><a href="#动起来" class="headerlink" title="动起来"></a>动起来</h2><p><strong>一定要动起来，动起来不一定能解决问题，但混日子、等待一定解决不了问题。</strong>行动、解决问题也是一件很困难的事情，我们因为不擅长或者其他原因，才造成了灰犀牛危机，那么要解决它势必很困难，否则就不会出现灰犀牛了。当我们感觉Todo非常困难时，可以想想哪一些比较小的举措可以做。但无论如何，一定要动起来。也可以自己制定一种流程，当恐惧、惰性阻止自己行动时，能强迫自己向前。</p><h2 id="不要浪费危机"><a href="#不要浪费危机" class="headerlink" title="不要浪费危机"></a>不要浪费危机</h2><p><strong>乱世出英雄，请抓住我们经历的“乱世”，无论任何危机，总会有人能获益。</strong>有时候灾难是无法避免的，阻止危机的最佳时机，可能就是灾难发生之后。当所有人都心怀恐惧，不敢动弹时，我们如果能立刻振作起来，抓住这次危机，也许会有意想不到的机遇。</p><h2 id="成为发现并控制灰犀牛式危机的人"><a href="#成为发现并控制灰犀牛式危机的人" class="headerlink" title="成为发现并控制灰犀牛式危机的人"></a>成为发现并控制灰犀牛式危机的人</h2><p><strong>敢于同大多数人背道而驰，愿意激励他人一起行动。</strong>成为这样的人，需要大量的训练。虽然我们不知道灰犀牛式危机，会在什么时候以什么方式降临，但我们依然能够尽力防范。比如给住宅配备消防用品、上车系安全带、多学习新的知识、锻炼身体等等。这些看起来不足为奇的举动，往往能让我们扛过灰犀牛的危机。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>每一只负面的黑天鹅都是由许许多多的灰犀牛聚集而成的，真正的危险往往就在我们身边，常常被我们忽视。但往往最危险的，就是这些灰犀牛，因为当头一棒的黑天鹅逼迫你必须去做一些事，而看似无关紧要的灰犀牛，等真正积累，出现大问题的时候，往往焦虑不已，而行动或是崩溃，往往就在一念之间。如果我们能积极应对每一个灰犀牛，那么对我们不利的很多黑天鹅，很可能就被扼杀在摇篮中了。</p><p>35岁焦虑，是我们当代年轻人必然的问题。体制外的羡慕体制内的想进去。体制内的，不甘心永远在基层给别人打工，想着努力晋升当领导。当领导的，行事谨慎，担心扫黑除恶，反腐倡廉，羡慕体制外生意人的自由。人人都有焦虑，但重要的是，承认35岁会遇到的灰犀牛后，无论通过自己，或是另一半、父母，不要过度焦虑，坦然、积极接受遇到的危机并真的动起来。只有动起来，才有好起来的可能吧！</p><h1 id="原视频"><a href="#原视频" class="headerlink" title="原视频"></a>原视频</h1>        <style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style>        <div class="bbplayer">        <iframe class="bbplayer" id="mmedia-oflTYcJk" src="//player.bilibili.com/player.html?bvid=BV1pz4y1o74P&page=1&high_quality=1&danmaku=false"            allowfullscreen="no"            scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe>        </div>        <script>            document.getElementById("mmedia-oflTYcJk").style.height=document.getElementById("mmedia-oflTYcJk").scrollWidth*0.76+"px";            window.onresize = function(){              document.getElementById("mmedia-oflTYcJk").style.height=document.getElementById("mmedia-oflTYcJk").scrollWidth*0.76+"px";            };        </script>        ]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h1&gt;&lt;p&gt;人们用“黑天鹅”来比喻难以预测的极小概率事件。比如，泰坦尼克号、911等。&lt;strong&gt;而“灰犀牛”就是与“黑天鹅”互斥补充的概念，比喻的是经常被人视而不见的大概率风险。&lt;/strong&gt;想象一下，在非洲大草原，一只体型庞大，行动迟缓、远远看起来似乎没有任何威胁的灰犀牛，正在慢悠悠散步，但当你毫无戒备地靠近它的领地，它被突然间激怒，向你狂奔而来，你便无处躲避。&lt;/p&gt;</summary>
    
    
    
    <category term="奇怪的知识" scheme="https://www.gaficat.com/categories/%E5%A5%87%E6%80%AA%E7%9A%84%E7%9F%A5%E8%AF%86/"/>
    
    
    <category term="奇怪的知识" scheme="https://www.gaficat.com/tags/%E5%A5%87%E6%80%AA%E7%9A%84%E7%9F%A5%E8%AF%86/"/>
    
    <category term="生活" scheme="https://www.gaficat.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>如何用51单片机控制舵机加减速</title>
    <link href="https://www.gaficat.com/posts/5d933848.html"/>
    <id>https://www.gaficat.com/posts/5d933848.html</id>
    <published>2020-10-12T14:58:53.000Z</published>
    <updated>2020-11-05T13:41:13.477Z</updated>
    
    <content type="html"><![CDATA[<p>本文介绍使用如何51单片机控制舵机转动、加减速。</p><a id="more"></a><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><blockquote><p>这边文章是2016年上大学的时候写的，当时还不太懂做一个自己的网站，这篇文章写在了新浪博客上，排版阅读体验极差，重新把他整理处理出来，我的网站SEO还行，希望帮助更多人吧。</p></blockquote><p>关于舵机，网络和书本上，很难找到详细的资料，我在2015年准备中国工程机器人暨国际公开赛的时候，做了一个采用舵机驱动的车型搬运机器人。由于当时知识有限，使用90系列51单片机，无法生成满足舵机精度要求的PWM，导致一个舵机的控制问题花费了近半年时间，并没有按照预期参加比赛（这个也真的不怪谁，不走个弯路）。</p><p>关于舵机的控制，我查询过一些资料，也请教过实验室的老师，但是结果都很不满意。舵机乱转，转速控制不精确，出现过各种问题。最终，硬是通过砸钱和砸时间（20块一个的PWM调制器不知道烧了多少- -！这个反正烧的不是我的，不心疼，但是90块一个舵机，加上60块一个的航模PWM舵机调制器还是砸了几百块进去的），和小伙伴通过实验，反复测试得到的结果，在这里分享出来，希望能帮助到感兴趣的铁子们。</p><h1 id="舵机VS减速电机"><a href="#舵机VS减速电机" class="headerlink" title="舵机VS减速电机"></a>舵机VS减速电机</h1><p>我们知道，普通的减速电机也能转，舵机也能转，那这两个玩意儿有什么区别？</p><p>舵机，按照转动的方式，可以分为180°和360°连续旋转舵机。</p><ul><li><p>180°舵机，顾名思义，就是只能旋转180°的舵机，我们可以通过PWM，精确的控制舵机旋转的角度。舵机从0°转到180°就不能继续转了，只能往回去转。另外，180°舵机无法调速，就是说，他始终会以最快速度，朝着你设定的角度旋转，直到旋转到目标角度刹停。因此，180°舵机在航模（控制飞机机翼）、双足机器人等很多场景中都有使用。</p></li><li><p>360°连续旋转舵机，顾名思义，就是可以朝着顺时针或者逆时针的方向，按照一定的速度一直转。可以通过PWM，控制舵机的旋转方向和速度，因此，也常常用于车型机器人的驱动上。360°舵机是无法控制旋转的角度的，只可以控制转和停、正转和反转以及转速。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:40%;"     src="https://pic.gaficat.com/default/舵机.jpeg">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">360°舵机</div></br> </center></li></ul><p>减速电机，其实类似于360°连续旋转舵机，也常用小车的动力，就通电就一直转呗，断电就停呗。一般在某宝上面买的什么寻迹机器人，都是使用的减速电机。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:60%;"     src="https://pic.gaficat.com/default/ 减速电机.jpg">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">减速电机</div></br> </center><p>减速电机和舵机的区别是：</p><ul><li>硬件上：由于舵机内置有电路，因此我们做机器人设计电路的时候，仅需要设计好阴阳极和PWM信号输入的接口，非常简单。而普通的减速电机在设计电路的时候，则需要考虑到驱动芯片，就比较复杂了。淘宝上有现成的l298n驱动模块，买回来可以直接用了。</li><li>控制难度上，舵机对于PWM的精度要求非常高，而电机相对就不高。</li><li>价格方面：通常来说，舵机的价格是普通减速电机的很多倍，就记得之前带一个中学的学生参加机器人比赛，结果土豪学校用的舵机是300块一个的磁传感舵机。一个机器人，四个轮子就1200出去了，真的有钱。</li><li>转动效果上：减速电机转速高，扭矩小（说人话，如果车轻，跑的飞快，车重就跑不动）。舵机通常转速一般，扭矩大（说人话，车重车轻影响不大，始终能以一个固定的最大速度跑）。</li><li>个人认为最核心的差别：<strong>舵机是带刹停的。</strong>什么意思？如果减速电机需要停止转动，那就断电呗。但是假如一个小车在斜坡上，那减速电机就很难让小车刹住，断电就滑下去了嘛。反观舵机就比较容易实现了，只需要给一个固定的PWM就能刹住了。因为舵机的停，实际上是通电的，舵机本身是有力量保持住停止的这个状态的。<strong>快速响应的拖刹，给定高电平1.5ms的pwm，舵机会立刻刹住以及其充沛的动力这一点是减速电机做不到的。</strong></li></ul><h1 id="PWM"><a href="#PWM" class="headerlink" title="PWM"></a>PWM</h1><p>上一段中，我提到可以通过PWM，控制舵机转动。咱不做百度百科的搬运工，复制一堆看不懂的东西去解释概念。这里，只要知道，控制舵机，输出一个周期为20ms-30ms（最好20ms），高电平为0.5ms-2.5ms的信号即可，这个信号具体控制舵机的范围如下：</p><ul><li><strong>对于180°舵机而言，PWM高电平0.5-2.5ms每一个值对应一个角度，比如0.5ms对应转动到0°的位置，那1.5ms就对应转动到90°的位置，那2.5ms就对应转动到180°的位置。</strong></li><li><strong>对于360°舵机而言，PWM高电平0.5-1.5ms为正转区间，1.5-2.5ms为反转区间，1.5ms为舵机刹车点，调速的区间通常在1.5ms左右0.1ms宽度的范围内。</strong>举个例子，我使用的舵机，高电平0.5ms-1.37ms为以最大速度正转，正转的调速高电平区间为1.37ms-1.47ms（高电平越靠近1.5ms，舵机转速越慢），高电平1.53ms-2.5ms为以最大速度反转，反转调速高电平区间为：1.53-1.63ms（高电平越靠近1.5ms，舵机转速越慢），刹车高电平区间为：1.47-1.53ms。</li></ul><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:80%;"     src="https://pic.gaficat.com/default/PWM.jpeg">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">PWM示意图</div></br> </center><p>关于硬件上的设计，无非是保证供电的稳定和预留出PWM的接口，这里就不详细说明了，这里附上一张原理图，感兴趣的小伙伴可以研究一下。如果舵机反向电流很大，建议加上光耦隔离。</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:50%;"     src="https://pic.gaficat.com/default/舵机控制原理图.jpeg">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">舵机控制原理图</div></br> </center><h1 id="STC90系列能控制360°舵机吗？"><a href="#STC90系列能控制360°舵机吗？" class="headerlink" title="STC90系列能控制360°舵机吗？"></a>STC90系列能控制360°舵机吗？</h1><p>这里对360°舵机如果通过51单片机的程序进行控制做详细的说明。如何使用51单片机产生我们需要的PWM？用定时器嘛！当然，我一开始也是这么想的，看看下面这段程序：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;reg51.h&gt;</span></span><br><br><span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> i=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">int</span> n;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ste360</span><span class="hljs-params">(n)</span></span>&#123;<br>  TMOD=<span class="hljs-number">0X01</span>;<br>  TL0=<span class="hljs-number">0XF6</span>; <span class="hljs-comment">// 0.01ms</span><br>  TH0=<span class="hljs-number">0XFF</span>;<br>  TR0=<span class="hljs-number">1</span>;<br>  EA=<span class="hljs-number">1</span>;<br>  ET0=<span class="hljs-number">1</span>;<br>  P1=<span class="hljs-number">0X00</span>; <br><span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-keyword">void</span> _pwm() interrupt <span class="hljs-number">1</span> &#123;<br>  TH0=<span class="hljs-number">0xff</span>; <span class="hljs-comment">// 0.01ms</span><br>  TL0=<span class="hljs-number">0xF6</span>;<br>i++;<br><br><span class="hljs-keyword">if</span>(i&lt;=n)&#123;<br>P1=<span class="hljs-number">0XFF</span>; <span class="hljs-comment">// 1.37&lt;&lt;1.47-1.54&lt;&lt;1.63</span><br>&#125; <span class="hljs-keyword">else</span> P1=<span class="hljs-number">0x00</span>;<br><br><span class="hljs-keyword">if</span>(i&gt;=<span class="hljs-number">2000</span>)&#123;<br>i=<span class="hljs-number">1</span>;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>看起来程序好像没有什么问题，ste360(n)这个函数，n就可以控制pwm高电平的时间，我设定定时器为每0.01ms进入一次中断，所以，要想得到1.5ms高电平，是不是n填写150就行了？答案是否定的，虽然程序逻辑是没有问题的，计算出来确实是1.5ms，但是现实中，很有可能是高电平为3ms+，为什么？这个问题困惑了我挺久，我和一位学长也讨论过，他认为：编译过程中，会将我们写的c文件，编译成汇编文件，然后转成机器语言，这个过程中可能会有误差。而我觉得，主要是晶振本身是有误差，其次，这样反复的进入中断，细小的误差会被无限的放大。最后，可能STC90系列的单片机设计有缺陷？我也不确定。因为同样是使用c，stm32上pwm的精度高的离谱。所以，使用STC90系列单片机（所有只有8位定时器的51单片机）来控制舵机，在我看来，是完全不可行的（我在很长一段时间里，极力优化代码，尝试过各种思路，但是结果只能说有提升，但是远远达不到控制舵机的要求）。当然了，还是要有点朋克精神，铁子们也可以自己写点小程序，打在示波器上看看，STC90系列的单片机能不能生成满足精度要求的PWM。</p><h1 id="STC12系列能控制360°舵机吗？"><a href="#STC12系列能控制360°舵机吗？" class="headerlink" title="STC12系列能控制360°舵机吗？"></a>STC12系列能控制360°舵机吗？</h1><p>不能用定时器，那怎么办？stc12系列的51单片机是自带8位pwm波形发生器，是不是可以用12系列的单片机实现？看程序：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;reg51.h&gt;</span></span><br><br>sfr CCON=<span class="hljs-number">0xD8</span>;<br><span class="hljs-comment">//CF CR - - | - - CCF1 CCF0</span><br><span class="hljs-comment">//-----------------------------</span><br><span class="hljs-comment">//CF:PCA计数阵列溢出标志.计数值翻转时由硬件置位。</span><br><span class="hljs-comment">//CR:PCA计数阵列运行控制位。</span><br><span class="hljs-comment">//CCF1:PCA模块1中断标志。当出现匹配或者捕获时由硬件置位。</span><br><span class="hljs-comment">//CCF0:PCA模块0中断标志。当出现匹配或者捕获时由硬件置位。</span><br>           /<br>sfr CCAP0L=<span class="hljs-number">0xEA</span>;<span class="hljs-comment">//PCA模块0的捕捉/比较寄存器低8位</span><br>sfr CCAP0H=<span class="hljs-number">0xFA</span>;<span class="hljs-comment">//PCA模块0的捕捉/比较寄存器高8位</span><br><br>sfr CCAPM0=<span class="hljs-number">0xDA</span>;<span class="hljs-comment">//PCA模块0的工作模式寄存器</span><br><span class="hljs-comment">//---------------------------------------</span><br><span class="hljs-comment">//7   6   5     4     3   2    1    0</span><br><span class="hljs-comment">//- ECMn CAPPn CAPNn MATn T0Gn PWMn ECCFn</span><br><span class="hljs-comment">//----------------------------------------</span><br><span class="hljs-comment">//ECOMn:使能比较器，1时使能比较器功能</span><br><span class="hljs-comment">//CAPPn：正捕获，1时使能上升沿捕获</span><br><span class="hljs-comment">//CAPNn：负捕获，1时使能下降沿捕获</span><br><span class="hljs-comment">//MATn:匹配:1时，PCA计数器的值与模块的比较/捕获寄存器的值匹配将置位CCON寄存器中断标志位CCFn</span><br><span class="hljs-comment">//T0Gn:翻转，1时，工作在PCA告诉输出模式，PCA计数器的值与模块的比较/捕获寄存器的值匹配将是CEXn脚翻转</span><br><span class="hljs-comment">//PWMn:脉宽调节输出模式，1时，使能CEXn脚用做PWM输出</span><br><span class="hljs-comment">//EECFn:使能CCFn中断，使能寄存器CCON中的捕获/比较标志CCFn，用来产生中断</span><br>sfr PCA_PWM0=<span class="hljs-number">0xF2</span>;<span class="hljs-comment">//PCA模块0,PWM寄存器</span><br><span class="hljs-comment">//-----------------------------------</span><br><span class="hljs-comment">//        7 6 5 4   3 2   1    0   </span><br><span class="hljs-comment">//PCA_PWMn:- - - - | - - EPCnH EPCnL</span><br><span class="hljs-comment">//-----------------------------------</span><br>sfr CCAP1L=<span class="hljs-number">0xEB</span>;<br>sfr CCAP1H=<span class="hljs-number">0xFB</span>;<br>sfr CCAPM1=<span class="hljs-number">0xDB</span>;<br>sfr PCA_PWM1=<span class="hljs-number">0xF3</span>;<span class="hljs-comment">//</span><br>sbit CR=<span class="hljs-number">0xDE</span>;<span class="hljs-comment">//因为只有能和8整除的才能位寻址，所以能些0xDE，看起来有冲突，实际上不会。</span><br>sfr AUXR1=<span class="hljs-number">0xA2</span>;<span class="hljs-comment">//PWM引脚位置 串口2位置 双DPTR选择 AD转换结果存放方式调整 SPI位置调整</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ini_T0</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>    TMOD=<span class="hljs-number">0x02</span>;<span class="hljs-comment">//T0方式2</span><br>    TH0=<span class="hljs-number">0xb2</span>; <span class="hljs-comment">//12MH时</span><br>    TL0=<span class="hljs-number">0xb2</span>;<br>    TR0=<span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">//频率为50HZ 周期的1/50=0.02s,将0.02S分成256分：0.02/256=0.000078125S=0.078125ms</span><br><span class="hljs-comment">//0.078125为一份的时间 一共256份</span><br><span class="hljs-comment">//CCAP0L=223;CCAP0H=223;为2.5ms //243时约为1ms (0.9375)</span><br><span class="hljs-comment">//CCAP0L=249;CCAP0H=248;为0.5ms //236时为1.5ms (1.484375)</span><br>                                <span class="hljs-comment">//230为2ms (2.03125)</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>   ini_T0();  <span class="hljs-comment">//方式2，0.078125ms溢出，每溢出一次CL加1</span><br>    CMOD=<span class="hljs-number">0x04</span>;<span class="hljs-comment">//定时器0溢出率作为时钟输入</span><br>    <span class="hljs-comment">//CIDL - - -  CPS2 CPS1 CPS0 ECF</span><br>    <span class="hljs-comment">//--------------------------------</span><br>    <span class="hljs-comment">//CIDL:计数阵列空闲控制，0时，空闲模式下PCA计数器继续工作；1时空闲模式PCA停止工作。</span><br>    <span class="hljs-comment">//----------------------------------------------</span><br>    <span class="hljs-comment">//CPS2 CPS1 CPS0: PCA计数脉冲选择</span><br>    <span class="hljs-comment">//000:系统时钟，FOSC/12</span><br>    <span class="hljs-comment">//001:系统时钟，FOSC/2</span><br>    <span class="hljs-comment">//010:定时器0的溢出，可实现可调频率PWM输出</span><br>    <span class="hljs-comment">//011:ECI/P3.4脚的外部时钟输入(最大速率FOSC/2)</span><br>    <span class="hljs-comment">//100:系统时钟,FOSC</span><br>    <span class="hljs-comment">//101:系统时钟/4,FOSC/4</span><br>    <span class="hljs-comment">//110:系统时钟/6,FOSC/6</span><br>    <span class="hljs-comment">//111:系统时钟/8,FOSC/8</span><br>    <span class="hljs-comment">//-----------------------------------------------</span><br>    <span class="hljs-comment">//ECF:PCA计数溢出中断使能:1时，使能寄存器CCON CF位的中断。0时禁止该功能。</span><br>    CL=<span class="hljs-number">0x00</span>;<span class="hljs-comment">//清零自由递增计数的16位定时器的值</span><br>    CH=<span class="hljs-number">0x00</span>;<span class="hljs-comment">//CH0为00  看结构图，CL前面是永远是0</span><br>  <br>    <span class="hljs-comment">//CCAP0L=223;//装入比较初值</span><br>    <span class="hljs-comment">//CCAP0H=223;</span><br>    PCA_PWM0=<span class="hljs-number">0x00</span>; <span class="hljs-comment">//EPC0H=0,EPC0L=0</span><br>    CCAPM0=<span class="hljs-number">0x42</span>;<span class="hljs-comment">//设置ECOM1=1,PWM1=1.</span><br>  <br>    <span class="hljs-comment">//CCAP1L=223;</span><br>    <span class="hljs-comment">//CCAP1H=223;</span><br>    PCA_PWM1=<span class="hljs-number">0x00</span>;<span class="hljs-comment">//EPC1H=0,EPC1L=0</span><br>    CCAPM1=<span class="hljs-number">0x42</span>;<span class="hljs-comment">//设置ECOM1=1,PWM1=1.</span><br>    CR=<span class="hljs-number">1</span>;<span class="hljs-comment">//CR=1,启动PCA阵列计数。  看151页，其中和CMOD的CIDL位有关，又和IDLE有关，看183页。</span><br>  <br>  <br>    <span class="hljs-comment">//AUXR1=0xc0;//PWM0从P1.3切换到P4.2</span><br>       <span class="hljs-comment">//PWM1从P1.4切换到P4.3</span><br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>    &#123;<br>    <span class="hljs-comment">//========================两舵机停止，中位调节用</span><br>        CCAP0L=<span class="hljs-number">236</span>;<span class="hljs-comment">//装入比较初值</span><br>        CCAP0H=<span class="hljs-number">236</span>;<br>        CCAP1L=<span class="hljs-number">230</span>;<span class="hljs-comment">//装入比较初值</span><br>        CCAP1H=<span class="hljs-number">230</span>;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>至于怎么调整pwm的高电平，修改上面CCAPXL和CCAPXH就可以了。是不是大功告成了呢？并没有！测试中我在示波器上发现，CCAPXH和CCAPXL的值每改变1，PWM高电平改变0.07ms左右。那么问题来了，在前面我提到过，360°舵机调速的区间，只有0.1ms(1.47-1.37=0.1），这个0.07，是可以让舵机实现正转反转，以及停止，但是没办法调速，循迹小车是需要控制车子两侧的轮子产生转速差来控制方向的，没法调速，就没法实现循迹。造成这个问题的原因是什么？8位的pwm模块，8位的pwm，上面程序中的注释中有这样一段:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//频率为50HZ 周期的1/50=0.02s,将0.02S分成256分：0.02/256=0.000078125S=0.078125ms</span><br><br><span class="hljs-comment">//0.078125为一份的时间 一共256份</span><br></code></pre></td></tr></table></figure><p>很清楚了吧！频率50HZ就是周期为20ms的PWM，8位的计数器，最大值是256，精度只能到0.07ms左右。</p><h1 id="51单片机还能控制360°舵机吗？"><a href="#51单片机还能控制360°舵机吗？" class="headerlink" title="51单片机还能控制360°舵机吗？"></a>51单片机还能控制360°舵机吗？</h1><p>那么是不是51单片机控制不了360°舵机呢？当然还是可以控制的，关键要选择一款好芯片。我最终发现了<code>STC15W4K32S4</code>系列单片机，这个系列的芯片带6路15位的PWM波形发生器，也有16位的定时器，自动重装模式能够实现8~16位的PWM。真的挺服STC的产品线的，他还有一个STC15系列单片机，不带PWM波形发生器。我真以为它15打头的全系都不带PWM波形发生器。</p><p>具体的程序在这里我就不列出来了，<code>STC15W4K32S4</code>自带pwm波形发生器的示例代码在<a href="http://www.stcmcudata.com/datasheet/stc/STC-AD-PDF/STC15.pdf">官方文档</a>的1056页，自动重装模式实现8~16位PWM的示例代码在<a href="http://www.stcmcudata.com/datasheet/stc/STC-AD-PDF/STC15.pdf">官方文档</a>的991页。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">//对于15位PWM波形发生器而言，频率为50HZ 周期的1/50=0.02s,将20ms分成32768份：20/32768≈0.0006ms</span><br><br><span class="hljs-comment">//0.0006为一份的时间 一共32768份</span><br></code></pre></td></tr></table></figure><p>所以，15位的PWM波形发生器，精度足够生成能够控制舵机的PWM了。</p><h1 id="舵机供电很重要"><a href="#舵机供电很重要" class="headerlink" title="舵机供电很重要"></a>舵机供电很重要</h1><p>前面所述，360°舵机的控制基本上能通过<code>STC15W4K32S4</code>系列单片机或者其他带15、16位PWM波形生成器的单片机解决，其实180°舵机相似，程序都是一样的。但是，尤其需要注意一下供电的问题，舵机要求的电压为6v-7.2v，你也许会发现5v其实舵机也能转，但是，低电压会带来很多未知的问题，比如舵机乱转，曾经有一段时间，我陷入舵机乱转的怪圈，我以为是我程序的问题，但是示波器显示没问题，以至于我以为是舵机坏了。实际上，是电池的问题，电池用的时间长了，电压不足，让舵机乱转。所以，建议使用航模sss电池，这个电池是11.2V的，使用降压模块，降成7.2v，给舵机供电，降成5v给单片机和传感器供电就行了。</p><h1 id="尾巴（听我一句劝环节）"><a href="#尾巴（听我一句劝环节）" class="headerlink" title="尾巴（听我一句劝环节）"></a>尾巴（听我一句劝环节）</h1><p>其实，舵机的控制，很简单，保证硬件上供电的稳定，保证软件上，能输出稳定、精度够高的PWM就足够了。个人觉得，这里面最大的坑，莫过于我们学习单片机的过程中，资料太过老旧。我学习51单片机那会儿，教程中使用的STC89、90系列的单片机，速度慢、外设少、价格高。也许当你抱着学习的心态去对待，没有太大的问题。但我相信，能看到这里的我相信，大概率是都对机器人制作感兴趣，刚学单片机（51），然后舵机控制遇到了问题；大概率都是希望通过单片机这样一个工具，去实现自己的一些创意，去做一些小玩意儿出来的。<strong>这种情况下，一款老旧的芯片，会给你带来很多不必要的麻烦。</strong></p><blockquote><p>PWM这一个场景为例，就像文本所述，从STC90系列单片机到STC12系列单片机，单片机本身外设太差导致PWM的精度始终达不到要求。当我使用<code>STC15W4K32S4</code>让舵机稳定转起来的时候，心里面真的长舒一口气。当我学习STM32F103时，在示波器上看到无比精准的PWM时，除了吃惊，还有一点想笑，自己要是不学51单片机，直接用STM32，哪有这么多事？</p></blockquote><p>但，听我一句劝吧：<strong>作为电子设计的初学者，选择一个性能合适的芯片真的很重要。注意，我这里说的是合适。</strong>比如本文提到的舵机控制的场景：</p><ul><li>我们可以使用51单片机（<code>STC15W4K32S4</code>）实现，前提是，你真的吃透51单片机，看得懂数据手册上不同寄存器是啥意思，<code>STC15W4K32S4</code>能输出精度够用的PWM。</li><li>我们可以使用arduino实现，那我们就不需要懂寄存器什么的，我们照着各种教程的程序，改一改就能实现，arduino能输出精度很够用的PWM。</li><li>我们可以使用STM32库开发实现，前提是，我们起码知道怎么调库函数，各种库函数是在干什么，STM32能输出精度完美的PWM。</li><li>我们可以使用STM32 HAL开发实现，配置一下功能，自动生成工程，稍微改动代码，就能实现，STM32能输出精度完美的PWM。</li><li>我们可以使用Mbed开发实现，前提是你英文水平还行，起码看得懂英文文档，Mbed支持的ARM芯片能输出精度完美的PWM。</li><li>我们可以使用树莓派实现。前提是你稍微掌握一点linux的基本知识，学一点python，甚至用C语言都能实现，树莓派能输出精度完美的PWM。</li></ul><p>跳出舒适圈，是一件很不容易的事儿，特别是抛弃自己学会的东西，去学一个新的东西。我自己在最初的学习过程中，十分畏惧新的东西，所以想在这里把自己的经验分享出来：</p><ul><li>arduino上手真的比51单片机容易，做个简单的项目真的比51单片机好用。</li><li>STM32也没有想象中那么复杂，51单片机学习需要10天，STM32一个月也就会用了吧。</li><li>树莓派没有什么上来就linux，听起来的那么复杂，linux和windows一样，就是个操作系统，我们在上面写程序跑就行了，python写代码比C语言简单多了。</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文介绍使用如何51单片机控制舵机转动、加减速。&lt;/p&gt;</summary>
    
    
    
    <category term="电子设计" scheme="https://www.gaficat.com/categories/%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="其他" scheme="https://www.gaficat.com/categories/%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="教程" scheme="https://www.gaficat.com/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="电子设计" scheme="https://www.gaficat.com/tags/%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1/"/>
    
  </entry>
  
  <entry>
    <title>给你的fluid主题加入一言吧！</title>
    <link href="https://www.gaficat.com/posts/11640910.html"/>
    <id>https://www.gaficat.com/posts/11640910.html</id>
    <published>2020-09-27T12:41:41.000Z</published>
    <updated>2020-09-27T12:42:21.014Z</updated>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>你是否想过，在别人访问你网站的时候，能动态的展示一句话呢？这句话可能是根据访客的地理位置、时间、天气返回的诗句，可能是网抑云上生而为人我很抱歉的评论？本篇文章介绍了如何给hexo的fluid主题的打字机特效插入Hitokoto和今日诗词，实现上面效果。</p><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>你是否想过，在别人访问你网站的时候，能动态的展示一句话呢？这句话可能是根据访客的地理位置、时间、天气返回的诗句，可能是网抑云上生而为人我很抱歉的评论？本文介绍的<a href="https://hitokoto.cn/">Hitokoto</a>和<a href="https://www.jinrishici.com/">今日诗词</a>（这俩玩意儿在本文的后续中就称作<strong>一言</strong>吧），就是干这个事儿的。</p><p>一言的API，实际上是提供了一个JavaScript脚本，向网页html文件中的某个位置插入这个JavaScript脚本，就会在用户访问页面的时候自动调用，获取相应的语句并显示出来。之前，我网站的主题没有什么动态效果，副标题是直接显示的，所以我简单看了一下主题的源码，在副标题的位置很顺利插入了<a href="https://www.jinrishici.com/">今日诗词</a>。但我最近给hexo更换了新的主题（<a href="https://github.com/fluid-dev/hexo-theme-fluid">fluid</a>），这个主题的是自带打字机特效的（就是像打字一样，把一串文本一个一个显示出来），副标题的显示本身就是通过一个JavaScript脚本实现的，在一个JavaScript脚本中，就没办法直接插入一言提供的JavaScript脚本了。</p><p>本篇文章介绍了如何给hexo的fluid主题的打字机特效（打字机特效就是下面这个动图显示的效果），插入一言，先来看一下效果吧~</p><div id="mmedia-iaINbMCi"></div><script src="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.js"></script>      <script>        var dp_iaINbMCi = new DPlayer({            container: document.getElementById('mmedia-iaINbMCi'),            autoplay: false,            theme: '#b7daff',            loop: false,            lang: navigator.language,            screenshot: false,            hotkey: true,            preload: 'auto',            logo: '',            volume: 0.7,            mutex: true,            video: { url: 'https://pic.gaficat.com/default/%E6%89%93%E5%AD%97%E6%9C%BA%E4%B8%80%E8%A8%80%E6%95%88%E6%9E%9C.mov', pic: '', thumbnails: '', type: 'auto'},                                    contextmenu: [{text: 'hexo-tag-mmedia', link: 'https://github.com/MonoLogueChi/hexo-tag-mmedia'}],            highlight: [],            undefined        });        dp_iaINbMCi.on("fullscreen", function () { if (/Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { screen.orientation.lock("landscape"); }});              </script>        <p>当然啦，也可以直接访问本站的<a href="https://www.gaficat.com/">首页</a>，查看实际的效果：随机调用<a href="https://hitokoto.cn/">Hitokoto</a>和<a href="https://www.jinrishici.com/">今日诗词</a>其中一个显示副标题。</p><h1 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h1><h2 id="JS脚本不能插入另一个JS脚本"><a href="#JS脚本不能插入另一个JS脚本" class="headerlink" title="JS脚本不能插入另一个JS脚本"></a>JS脚本不能插入另一个JS脚本</h2><p>我完全不懂前端，一点不会JavaScript，所以一开始的想法是，在原来打字机特效的JavaScript脚本里面插入一言的JavaScript脚本不就行了？我也不改代码啥的，对吧！然而，这样肯定是不行的。</p><p>首先，一个JavaScript脚本在html里面的格式如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>alert(<span class="hljs-string">&quot;我的第一个 JavaScript&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>那么下面这样的格式肯定是有问题的：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>    &lt;script&gt;alert(<span class="hljs-string">&quot;这是一言的JavaScript&quot;</span>);&lt;/script&gt;<br>    alert(<span class="hljs-string">&quot;这是打字机特效的JavaScript&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>那咋样是允许的呢？下面这样：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是一言的JavaScript&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;我的打字机特效的JavaScript&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="全局变量咋共享？"><a href="#全局变量咋共享？" class="headerlink" title="全局变量咋共享？"></a>全局变量咋共享？</h2><p>按照上一小节说的，JavaScript允许的格式，是一言的JavaScript和打字机特效的JavaScript并列各自运行。那这两个JavaScript显示内容的逻辑是什么样的？</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是一言的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我先获取今日随机的一句话&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我获取到随机的一句话了，现在我显示这个内容&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是打字机特效的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我设置要显示的内容为副标题&quot;</span>);<br>    alert(<span class="hljs-string">&quot;现在我显示相关内容&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>那这样搞，打字机是动态显示的，一言是静态直接显示内容的，这不就乱套了吗？能不能先把一言的JavaScript脚本跑一遍，然后获取到的结果存到一个全局变量里面，最后打字机特效的JavaScript脚本里面用这个全局变量不就行了嘛？逻辑就是下面这样：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> global_somthing=<span class="hljs-string">&quot;&quot;</span>;<br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是一言的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我先获取今日随机的一句话&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把global_somthing赋值为刚才获取到的一句话&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;接下来是打字机特效的JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把要显示的内容设为global_somthing变量&quot;</span>);<br>  alert(<span class="hljs-string">&quot;现在我开始动态显示&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>然而，理想很丰满，现实很残酷，一言提供的JavaScript脚本，是直接在脚本里面显示结果的，<strong>我暂时没有找到办法，实现上面的逻辑，把一言JavaScript脚本获取到的结果，存到一个全局变量里面，给打字机特效的JavaScript使用。</strong></p><blockquote><p>这里我是真不懂，有大神可以指正哈。我感觉，不同JavaScript脚本之间的关系，不像python上不同的函数的关系，它更像是不同python文件各自跑起来之间的关系，是在不同的进程中的，他们之间的变量要共享，也许有办法，但是我这种小白肯定是没辙了。</p></blockquote><h2 id="Hitokoto终于搞定"><a href="#Hitokoto终于搞定" class="headerlink" title="Hitokoto终于搞定"></a>Hitokoto终于搞定</h2><p>Hitokoto提供的JavaScript逻辑是这样的:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>    alert(<span class="hljs-string">&quot;这是Hitokoto的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我先通过http获取随机的一句话&quot;</span>);<br>    alert(<span class="hljs-string">&quot;现在我显示global_somthing的内容&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>所以我想，打字机的特效是一个JavaScript，一言也是JavaScript，我给他们整合到一起不就成了？逻辑就是下面这样：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是我们整合的JavaScript&quot;</span>);<br>  <span class="hljs-keyword">var</span> global_somthing=<span class="hljs-string">&quot;&quot;</span>;<br><br>    alert(<span class="hljs-string">&quot;接下来是Hitokoto JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我先通过http获取随机的一句话&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把global_somthing赋值为刚才获取到的一句话&quot;</span>);<br><br>  alert(<span class="hljs-string">&quot;接下来是打字机特效的JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把要显示的内容设为global_somthing变量&quot;</span>);<br>  alert(<span class="hljs-string">&quot;现在我开始动态显示&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>结果当然是可行的，没有任何问题。</p><h2 id="今日诗词终于搞定"><a href="#今日诗词终于搞定" class="headerlink" title="今日诗词终于搞定"></a>今日诗词终于搞定</h2><p>那只使用Hitokoto感觉挺亏的，毕竟今日诗词提供的内容也挺棒的，也把今日诗词做一波整合呗？今日诗词的JavaScript逻辑是这样的：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是今日诗词的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我定义了一大堆的函数，用来获取相关内容&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是今日诗词的JavaScript&quot;</span>);<br>  alert(<span class="hljs-string">&quot;我调用上一个JavaScript脚本中定义的函数，显示相关内容&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>乍一看，这玩意儿跟Hitokoto长得不一样啊？你为啥不弄成Hitokoto那种逻辑，我整合也好整合，是吧。但是，相信今日诗词有他自己的考虑，我们暂时不吐槽他，想办法解决呗。</p><blockquote><p>我虽然看不懂今日诗词的JavaScript，但是感觉因为今日诗词是根据时间、IP地点、季节等信息，智能地返回一句诗词，所以不像Hitokoto直接通过http随机获取一句就完事了，他可能需要在访客端执行一些东西，才能完整的显示这些信息。</p></blockquote><p>那咋整麽，死马当活马医呗，所以我的逻辑是：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是今日诗词的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我定义了一大堆的函数，用来获取相关内容&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是我们整合的JavaScript&quot;</span>);<br>  <span class="hljs-keyword">var</span> global_somthing=<span class="hljs-string">&quot;&quot;</span>;<br><br>  alert(<span class="hljs-string">&quot;接下来是今日诗词JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我直接调用今日诗词JavaScript定义的获取诗句的函数A&quot;</span>);<br>  alert(<span class="hljs-string">&quot;我把global_somthing赋值为函数A的执行结果&quot;</span>);<br><br>    alert(<span class="hljs-string">&quot;接下来是打字机特效的JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把要显示的内容设为global_somthing变量&quot;</span>);<br>  alert(<span class="hljs-string">&quot;现在我开始动态显示&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>结果当然也是可行的，那在之前的小节，不是说过，不同JavaScript脚本之间的变量没办法共享吗？这里为啥可以不同的JavaScript脚本调用对方定义的函数？这里我感觉吧，懂的自然懂，不懂的跟我一样，一脸懵逼。总之呢，这么做，确实是可行的。</p><h2 id="随机调用Hitokoto和今日诗词"><a href="#随机调用Hitokoto和今日诗词" class="headerlink" title="随机调用Hitokoto和今日诗词"></a>随机调用Hitokoto和今日诗词</h2><p>那，打字机特效已经能和Hitokoto、今日诗词做整合了，那我想随机调用这俩种的一个，显示出来，咋处理呢？加一个随机数判断就完事了。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是今日诗词的JavaScript&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我定义了一大堆的函数，用来获取相关内容&quot;</span>);<br>&lt;/script&gt;<br><br>&lt;script&gt;<br>  alert(<span class="hljs-string">&quot;这是我们整合的JavaScript&quot;</span>);<br>  <span class="hljs-keyword">var</span> global_somthing=<span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">Math</span>.random() &lt; <span class="hljs-number">0.5</span>)&#123;<br>    alert(<span class="hljs-string">&quot;接下来是Hitokoto JavaScript的内容&quot;</span>);<br>        alert(<span class="hljs-string">&quot;我先通过http获取随机的一句话&quot;</span>);<br>        alert(<span class="hljs-string">&quot;我把global_somthing赋值为刚才获取到的一句话&quot;</span>);<br>  &#125;<span class="hljs-keyword">else</span>&#123;<br>    alert(<span class="hljs-string">&quot;接下来是今日诗词JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我直接调用今日诗词JavaScript定义的获取诗句的函数A&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把global_somthing赋值为函数A的执行结果&quot;</span>);<br>  &#125;<br><br>    alert(<span class="hljs-string">&quot;接下来是打字机特效的JavaScript的内容&quot;</span>);<br>    alert(<span class="hljs-string">&quot;我把要显示的内容设为global_somthing变量&quot;</span>);<br>  alert(<span class="hljs-string">&quot;现在我开始动态显示&quot;</span>);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>实际测试，这个逻辑很完美。</p><h2 id="文章页的标题能不显示一言吗？"><a href="#文章页的标题能不显示一言吗？" class="headerlink" title="文章页的标题能不显示一言吗？"></a>文章页的标题能不显示一言吗？</h2><p>按照上一节的逻辑，已经可以正常使用打字机特效显示一言了，但是我发现，hexo的fluid，打字机特效没有做太多的判断，会把文章页的文章名也判定为副标题，所以就会出现一个问题，首页、标签页、分类页、文章页都会显示打字机特效，但文章页的文章名也会判定为副标题，也会跟一长串一言显示的内容，这个肯定是我们不希望看到的。</p><p>其实，这篇文章讲了这么多，截止目前，这么多代码最终都是要加到hexo主题的ejs文件中的，ejs文件我们可以理解为hexo主题的模板，这个模板可以根据hexo的结构，针对不同的页面做不同的布局，添加不同的JavaScript脚本。那么，就打字机特效这个场景，我们可以在ejs模板中，针对首页、标签页、分类页、文章页做不同的处理，比如首页我就显示网站的副标题+一言，其他页面我就只显示副标题。那么，打字机ejs模板的逻辑就是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs ejs">&lt;% if(is_home()) &#123; %&gt;<br>  &lt;script&gt;<br>    alert(&quot;这是今日诗词的JavaScript&quot;);<br>    alert(&quot;我定义了一大堆的函数，用来获取相关内容&quot;);<br>  &lt;&#x2F;script&gt;<br><br>  &lt;script&gt;<br>    alert(&quot;这是我们整合的JavaScript&quot;);<br>    var global_somthing&#x3D;&quot;&quot;;<br>    if(Math.random() &lt; 0.5)&#123;<br>      alert(&quot;接下来是Hitokoto JavaScript的内容&quot;);<br>      alert(&quot;我先通过http获取随机的一句话&quot;);<br>      alert(&quot;我把global_somthing赋值为刚才获取到的一句话&quot;);<br>    &#125;else&#123;<br>      alert(&quot;接下来是今日诗词JavaScript的内容&quot;);<br>      alert(&quot;我直接调用今日诗词JavaScript定义的获取诗句的函数A&quot;);<br>      alert(&quot;我把global_somthing赋值为函数A的执行结果&quot;);<br>    &#125;<br><br>    alert(&quot;接下来是打字机特效的JavaScript的内容&quot;);<br>    alert(&quot;我把要显示的内容设为global_somthing变量&quot;);<br>    alert(&quot;现在我开始动态显示&quot;);<br>  &lt;&#x2F;script&gt;<br>&lt;% &#125; else &#123; %&gt;<br>    &lt;script&gt;<br>  alert(&quot;这是打字机特效的JavaScript&quot;);<br>    alert(&quot;我设置要显示的内容为副标题&quot;);<br>    alert(&quot;现在我显示相关内容&quot;);<br>&lt;&#x2F;script&gt;<br>&lt;% &#125; %&gt;<br></code></pre></td></tr></table></figure><p>上面代码中的<code>is_home()</code>就是hexo提供的<a href="https://hexo.io/zh-cn/docs/helpers.html">辅助函数</a>，上面逻辑，最终就会实现我的网站当前的效果，只有主页使用打字机特效显示一言的效果，其他页面正常使用打字机特效，显示副标题内容。</p><h1 id="ToDo"><a href="#ToDo" class="headerlink" title="ToDo"></a>ToDo</h1><ol><li>找到fluid主题的打字机特效ejs模板文件。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">scarleastdeMacBook-Pro:gaficat_blog scarleast$ sublime themes/hexo-theme-fluid-1.8.3/layout/_partial/plugins/typed.ejs<br></code></pre></td></tr></table></figure><ol start="2"><li>复制我修改好的ejs文件。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs ejs">&lt;% if(theme.fun_features.typing.enable &amp;&amp; page.subtitle !&#x3D;&#x3D; false)&#123; %&gt;<br>  &lt;%- js_ex(theme.static_prefix.typed, &quot;&#x2F;typed.min.js&quot;) %&gt;<br><br>  &lt;% if(is_home()) &#123; %&gt;<br>    &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;<br>        !function(e)&#123;var n,t&#x3D;&#123;&#125;,o&#x3D;&quot;jinrishici-token&quot;;function i()&#123;return document.getElementById(&quot;jinrishici-sentence&quot;)||0!&#x3D;document.getElementsByClassName(&quot;jinrishici-sentence&quot;).length&#125;function c()&#123;t.load(function(e)&#123;var n&#x3D;document.getElementById(&quot;jinrishici-sentence&quot;),t&#x3D;document.getElementsByClassName(&quot;jinrishici-sentence&quot;);if(n&amp;&amp;(n.innerText&#x3D;e.data.content),0!&#x3D;&#x3D;t.length)for(var o&#x3D;0;o&lt;t.length;o++)t[o].innerText&#x3D;e.data.content&#125;)&#125;function r(e,n)&#123;var t&#x3D;new XMLHttpRequest;t.open(&quot;get&quot;,n),t.withCredentials&#x3D;!0,t.send(),t.onreadystatechange&#x3D;function(n)&#123;if(4&#x3D;&#x3D;&#x3D;t.readyState)&#123;var o&#x3D;JSON.parse(t.responseText);&quot;success&quot;&#x3D;&#x3D;&#x3D;o.status?e(o):console.error(&quot;今日诗词API加载失败，错误原因：&quot;+o.errMessage)&#125;&#125;&#125;t.load&#x3D;function(n)&#123;return e.localStorage&amp;&amp;e.localStorage.getItem(o)?function(e,n)&#123;return r(e,&quot;https:&#x2F;&#x2F;v2.jinrishici.com&#x2F;one.json?client&#x3D;browser-sdk&#x2F;1.2&amp;X-User-Token&#x3D;&quot;+encodeURIComponent(n))&#125;(n,e.localStorage.getItem(o)):function(n)&#123;return r(function(t)&#123;e.localStorage.setItem(o,t.token),n(t)&#125;,&quot;https:&#x2F;&#x2F;v2.jinrishici.com&#x2F;one.json?client&#x3D;browser-sdk&#x2F;1.2&quot;)&#125;(n)&#125;,e.jinrishici&#x3D;t,i()?c():(n&#x3D;function()&#123;i()&amp;&amp;c()&#125;,&quot;loading&quot;!&#x3D;document.readyState?n():document.addEventListener?document.addEventListener(&quot;DOMContentLoaded&quot;,n):document.attachEvent(&quot;onreadystatechange&quot;,function()&#123;&quot;complete&quot;&#x3D;&#x3D;document.readyState&amp;&amp;n()&#125;))&#125;(window); <br>    &lt;&#x2F;script&gt;<br><br>    &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;<br>      if(Math.random() &lt; 0.5)&#123;<br>        jinrishici.load(function(result) &#123;<br>          var typed &#x3D; new Typed(&#39;#subtitle&#39;, &#123;<br>          strings: [<br>            &#39;  &#39;,<br>            &quot;&lt;%- data.subtitle %&gt;&amp;nbsp;&quot; + &quot;&lt;br&gt;&lt;br&gt;&quot; + result.data.content + &quot;&lt;br&gt;&quot; + &quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;—&quot; + &#39;【&#39; + result.data.origin.dynasty + &#39;】&#39; + result.data.origin.author + &#39;《&#39; + result.data.origin.title + &#39;》&#39;,<br>          ],<br>          cursorChar: &quot;&lt;%- theme.fun_features.typing.cursorChar %&gt;&quot;,<br>          typeSpeed: &lt;%- theme.fun_features.typing.typeSpeed %&gt;,<br>          loop: &lt;%- theme.fun_features.typing.loop %&gt;,<br>          &#125;);<br>          typed.stop();<br>          $(document).ready(function () &#123;<br>            $(&quot;.typed-cursor&quot;).addClass(&quot;h2&quot;);<br>            typed.start();<br>          &#125;); <br>        &#125;); <br>      &#125;else&#123;<br>        fetch(&#39;https:&#x2F;&#x2F;v1.hitokoto.cn&#39;)<br>        .then(response &#x3D;&gt; response.json())<br>        .then(data &#x3D;&gt; &#123;<br>          if(data.from_who)&#123;<br>            var typed &#x3D; new Typed(&#39;#subtitle&#39;, &#123;<br>              strings: [<br>                &#39;  &#39;,<br>                &quot;&lt;%- data.subtitle %&gt;&amp;nbsp;&quot; + &quot;&lt;br&gt;&lt;br&gt;&quot; + data.hitokoto + &quot;&lt;br&gt;&quot; + &quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;— &quot; + data.from_who +&#39;《&#39; + data.from + &#39;》&#39;,<br>              ],<br>              cursorChar: &quot;&lt;%- theme.fun_features.typing.cursorChar %&gt;&quot;,<br>              typeSpeed: &lt;%- theme.fun_features.typing.typeSpeed %&gt;,<br>              loop: &lt;%- theme.fun_features.typing.loop %&gt;,<br>            &#125;);<br>            <br>          &#125;else&#123;<br>            var typed &#x3D; new Typed(&#39;#subtitle&#39;, &#123;<br>              strings: [<br>                &#39;  &#39;,<br>                &quot;&lt;%- data.subtitle %&gt;&amp;nbsp;&quot; + &quot;&lt;br&gt;&lt;br&gt;&quot; + data.hitokoto + &quot;&lt;br&gt;&quot; + &quot;&amp;nbsp;&amp;nbsp;&amp;nbsp;— &quot; + &#39;《&#39; + data.from + &#39;》&#39;,<br>              ],<br>              cursorChar: &quot;&lt;%- theme.fun_features.typing.cursorChar %&gt;&quot;,<br>              typeSpeed: &lt;%- theme.fun_features.typing.typeSpeed %&gt;,<br>              loop: &lt;%- theme.fun_features.typing.loop %&gt;,<br>            &#125;);<br>          &#125;<br>          typed.stop();<br>          $(document).ready(function () &#123;<br>            $(&quot;.typed-cursor&quot;).addClass(&quot;h2&quot;);<br>            typed.start();<br>          &#125;);  <br>        &#125;)<br>        .catch(console.error)<br>      &#125;<br>    &lt;&#x2F;script&gt;<br>  &lt;% &#125; else &#123; %&gt;<br>    &lt;script&gt;<br>      var typed &#x3D; new Typed(&#39;#subtitle&#39;, &#123;<br>        strings: [<br>          &#39;  &#39;,<br>          &quot;&lt;%- data.subtitle %&gt;&amp;nbsp;&quot;,<br>        ],<br>        cursorChar: &quot;&lt;%- theme.fun_features.typing.cursorChar %&gt;&quot;,<br>        typeSpeed: &lt;%- theme.fun_features.typing.typeSpeed %&gt;,<br>        loop: &lt;%- theme.fun_features.typing.loop %&gt;,<br>      &#125;);<br>      typed.stop();<br>      $(document).ready(function () &#123;<br>        $(&quot;.typed-cursor&quot;).addClass(&quot;h2&quot;);<br>        typed.start();<br>      &#125;);<br>    &lt;&#x2F;script&gt;<br>  &lt;% &#125; %&gt;<br><br><br>&lt;% &#125; %&gt;<br><br></code></pre></td></tr></table></figure><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>hexo的好处是，可以直接使用markdown来写文章，无需关注复杂的前端，因为有大神给你写好了各种主题。但是，没有主题是完美的，因为每个人的需求都不一样，你可能需要在网站的底下加上又拍云的logo，来蹭一波免费的额度；你可能看到了某个有意思的功能，需要修改一些代码，才能实现一些好玩的东西。</p><p>很感谢<a href="https://github.com/fluid-dev/hexo-theme-fluid">fluid</a>主题的开发者们，这个主题简洁、美观。并且我这样一个前端小白，提过很多很简单的Issues，这个主题的开发者也很耐心的作了回复。希望我这篇文章能帮到一些铁子吧，毕竟看到挺多铁子都提了关于整合Hitokoto的Issues。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h1&gt;&lt;p&gt;你是否想过，在别人访问你网站的时候，能动态的展示一句话呢？这句话可能是根据访客的地理位置、时间、天气返回的诗句，可能是网抑云上生而为人我很抱歉的评论？本篇文章介绍了如何给hexo的fluid主题的打字机特效插入Hitokoto和今日诗词，实现上面效果。&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="hexo" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/hexo/"/>
    
    
    <category term="hexo" scheme="https://www.gaficat.com/tags/hexo/"/>
    
    <category term="教程" scheme="https://www.gaficat.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>记录chrome禁止cookie导致无法显示iframe的问题</title>
    <link href="https://www.gaficat.com/posts/1d5c6ccb.html"/>
    <id>https://www.gaficat.com/posts/1d5c6ccb.html</id>
    <published>2020-09-21T07:17:09.000Z</published>
    <updated>2020-09-21T08:22:39.633Z</updated>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>这篇文章记录了因设置禁止chrome的cookie，导致部分iframe无法渲染显示（bilibili、网易云音乐等<code>iframe</code>分享无法显示）的问题。</p><a id="more"></a><h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>最近升级了一下hexo的版本，结果惊奇地发现我网站所有的bilibili、网易云<code>iframe</code>分享都不能显示了，在重新安装nodejs，hexo，重新安装各种插件，重新配置各种主题之后，问题依然没有解决，我以为是hexo升级炸了。</p><p>结果阴差阳错，用手机打开了自己的网站，发现都好使呢啊？加上想起来前两天用语雀，bilibili的视频也无法播放，直觉告诉我，应该不是hexo的锅，应该是chrome浏览器的锅，结果使用safari和firefox都能正常显示bilibili、网易云的<code>iframe</code>分享，确定，一定是chrome的问题。</p><h1 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h1><p>我在之前设置过chrome的cookie，禁止第三方cookie:</p><center>    <img style="border-radius: 0.3125em;    box-shadow: 0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.08);zoom:40%;"     src="https://pic.gaficat.com/default/阻止cookie.png">    <br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">阻止cookie的设置</div></br> </center><p>就是这个设置，导致bilibili、网易云分享的<code>iframe</code>无法正常显示，不太清楚，为什么youtube是好使的。</p><blockquote><p><strong>这里的无法正常显示，只是我们自己的chrome浏览器无法正常显示，可以尝试使用其他浏览器或者使用手机的浏览器，在不是无痕模式的前提下访问试试看以定位问题。我当时真的坚定的认为是自己的hexo有问题，折腾了好长时间。</strong></p></blockquote><h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>我们其实可以根据需要，允许一部分cookie，比如允许bilibili的播放器：</p><center><img src="https://pic.gaficat.com/default/允许cookie.png" alt="允许cookie的设置" style="zoom:30%;" /><br>    <div style="color:orange; border-bottom: 1px solid #d9d9d9;    display: inline-block;    color: #999;    padding: 2px;">允许cookie的设置</div></br></center><p>注意到地址栏的那个小眼睛图标了吗？当chrome浏览器禁止cookie之后，无法使用cookie的网站就会在地址栏出现那个小眼睛。点击那个小眼睛，就可以看到我们允许的cookie和禁止的cookie，bilibili的<code>iframe</code>播放器就是<code>player.bilibili.com</code>，允许它的cookie，我们的chrome就又能正常显示这些网站的<code>iframe</code>了。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>真是自己都记不得自己什么时候设置过cookie，可能一开始为了防止自己的隐私泄露吧。我真的一度认为是自己hexo出问题了或者我的chrome浏览器出问题了。一个小坑，分享给不知道的小伙伴吧。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h1&gt;&lt;p&gt;这篇文章记录了因设置禁止chrome的cookie，导致部分iframe无法渲染显示（bilibili、网易云音乐等&lt;code&gt;iframe&lt;/code&gt;分享无法显示）的问题。&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="其他" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="教程" scheme="https://www.gaficat.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>给你的hexo插入音乐视频</title>
    <link href="https://www.gaficat.com/posts/353df0b0.html"/>
    <id>https://www.gaficat.com/posts/353df0b0.html</id>
    <published>2020-09-17T13:28:29.000Z</published>
    <updated>2020-09-22T08:15:49.863Z</updated>
    
    <content type="html"><![CDATA[<p>本文介绍一个hexo插件:<code>hexo-tag-mmedia</code>，方便插入音乐、视频、bilibili等资源。</p><a id="more"></a><h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>在hexo上插入音乐一般使用插件<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>，插入视频通常使用<a href="https://github.com/MoePlayer/hexo-tag-dplayer">hexo-tag-dplayer</a>或者直接使用bilibili分享的iframe嵌在文章内即可。但<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>和<a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a>存在冲突，将导致网站的rss摘要出现问题。</p><p>我在很早之前就关注了<a href="https://seekbetter.me/">寻我</a>（一个博客聚合的网站），站长给了我非常多的首页推荐，我的网站在那里被很多人看到，很感谢那位不知姓名的站长。</p><p>但是最近发现，寻我上我文章的摘要没有了，所有排查了一下<code>rss</code>，发现摘要变成了下面这样：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">&lt;summary type=&quot;html&quot;&gt;&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot;&lt;/summary&gt;<br></code></pre></td></tr></table></figure><p>分析了几个小时，发现这种现象的原因是<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>和<a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a>这两个插件存在冲突，具体原理我不太清楚，但不使用<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>插件或者修改博客根目录下的<code>_config.yml</code>文件均能解决：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">aplayer:</span><br>  <span class="hljs-attr">asset_inject:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>虽然<code>rss</code>就恢复正常了，但要么不使用aplayer无法给文章插入音乐；或者修改<code>_config.yml</code>，文章中<code>aplayer</code>的引用无效。都不是完美的解决方法。</p><h1 id="hexo-tag-mmedia"><a href="#hexo-tag-mmedia" class="headerlink" title="hexo-tag-mmedia"></a>hexo-tag-mmedia</h1><p><a href="https://github.com/u2sb/hexo-tag-mmedia">hexo-tag-mmedia</a>是一个聚合的媒体插入插件，安装这一个插件，相当于安装了以下的插件：</p><ul><li><a href="https://github.com/DIYgod/APlayer">Aplayer</a>：一个用的很多的音乐播放插件</li><li><a href="https://github.com/metowolf/MetingJS">Meting</a>：一个网易云音乐、百度、腾讯、搜狗、虾米的音乐播放插件</li><li><a href="https://github.com/DIYgod/DPlayer">Dplayer</a>：一个视频播放插件</li><li><a href="https://www.bilibili.com/">Bilibili</a>：一个插入bilibili视频的插件</li><li><a href="https://www.u2sb.top/docs/hexo-tag-mmedia/">YouTube</a>（开发中）</li><li><a href="https://github.com/zhw2590582/ArtPlayer">ArtPlayer</a>（开发中）</li></ul><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol><li>删除已安装的几个插件，以防冲突。</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm uninstall hexo-tag-aplayer<br>npm uninstall hexo-tag-dplayer<br>npm uninstall hexo-tag-bilibili<br></code></pre></td></tr></table></figure><ol start="2"><li>安装hexo-tag-mmedia </li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-tag-mmedia --save<br></code></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>如果不需要自定义设置，不需要修改 <code>_config.yml</code> ，直接使用即可：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">mmedia:</span><br>  <span class="hljs-attr">aplayer:</span><br>    <span class="hljs-attr">cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js</span><br>    <span class="hljs-attr">style_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css</span><br>    <span class="hljs-attr">default:</span><br>  <span class="hljs-attr">meting:</span><br>    <span class="hljs-attr">cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js</span><br>    <span class="hljs-attr">api:</span><br>    <span class="hljs-attr">default:</span><br>  <span class="hljs-attr">dplayer:</span><br>    <span class="hljs-attr">cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.js</span><br>    <span class="hljs-attr">style_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.css</span><br>    <span class="hljs-attr">hls_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/hls.j/dist/hls.min.js</span><br>    <span class="hljs-attr">dash_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/dashjs/dist/dash.all.min.js</span><br>    <span class="hljs-attr">shaka_dash_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/shaka-player/dist/shaka-player.compiled.js</span><br>    <span class="hljs-attr">flv_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/flv.js/dist/flv.min.js</span><br>    <span class="hljs-attr">webtorrent_cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/webtorrent/webtorrent.min.js</span><br>    <span class="hljs-attr">default:</span><br></code></pre></td></tr></table></figure><p><code>default</code>可以设置默认参数：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">meting:</span><br>  <span class="hljs-attr">cdn:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js</span><br>  <span class="hljs-attr">api:</span><br>  <span class="hljs-attr">default:</span><br>    <span class="hljs-attr">order:</span> <span class="hljs-string">random</span><br></code></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>注意复制代码的时候，不要把代码块的格式复制进去了，我之前使用typora，复制下面的代码，结果死活不渲染，郁闷了挺久。</p><h3 id="Aplayer"><a href="#Aplayer" class="headerlink" title="Aplayer"></a>Aplayer</h3><p>这是一个播放音乐的插件，个人感觉不是特别好用，因为歌曲模式会自动循环播放，歌单模式，hexo-tag-mmedia支持暂时不完善。</p><h4 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h4><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure">&#123;% aplayer title author url [picture_url, narrow, autoplay, width:xxx, lrc:xxx] %&#125;<br></code></pre></td></tr></table></figure><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">&#123;% aplayer <span class="hljs-string">&quot;大调&quot;</span> <span class="hljs-string">&quot;官大为&quot;</span> <span class="hljs-string">&quot;https://music.gaficat.com/%E5%A4%A7%E8%B0%83.mp3&quot;</span> %&#125;<br></code></pre></td></tr></table></figure><h4 id="字段说明"><a href="#字段说明" class="headerlink" title="字段说明"></a><strong>字段说明</strong></h4><table><thead><tr><th>配置项</th><th>默认</th><th>说明</th></tr></thead><tbody><tr><td>title</td><td>必须</td><td>曲目标题，第一个参数</td></tr><tr><td>author</td><td>必须</td><td>曲目作者，第二个参数</td></tr><tr><td>url</td><td>必须</td><td>音乐文件地址</td></tr><tr><td>picture_url</td><td>none</td><td>音乐对应的图片地址</td></tr><tr><td>narrow</td><td><code>false</code></td><td>袖珍风格，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td>autoplay</td><td><code>false</code></td><td>自动播放，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td>width:xxx</td><td><code>100%</code></td><td>播放器宽度</td></tr><tr><td>lrc</td><td>none</td><td>歌词地址</td></tr></tbody></table><h4 id="效果"><a href="#效果" class="headerlink" title="效果"></a><strong>效果</strong></h4>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-bEitGWmL" style="margin-bottom: 20px; width: "></div>        <script>          var ap_bEitGWmL = new APlayer({            element: document.getElementById("mmedia-bEitGWmL"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "大调",              author: "官大为",              url: "https://music.gaficat.com/%E5%A4%A7%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_bEitGWmL);        </script><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a><strong>其他</strong></h4><p>AplayerList似乎有bug，我暂时没有使用。</p><hr><h3 id="MetingJS"><a href="#MetingJS" class="headerlink" title="MetingJS"></a>MetingJS</h3><p>这是一个插入各家音乐平台音乐的插件，个人觉得非常好用，特别是qq音乐的独家竟然也可以放，太顶了。</p><h4 id="格式（下面两个都可以）"><a href="#格式（下面两个都可以）" class="headerlink" title="格式（下面两个都可以）"></a>格式（下面两个都可以）</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;% meting &quot;001Mf4Ic1aNYYK&quot; &quot;tencent&quot; &quot;album&quot; &quot;order:random&quot; &quot;listmaxheight:180px&quot; %&#125;<br><br>&#123;% meting &quot;auto:https://y.qq.com/n/yqq/song/001Mf4Ic1aNYYK.html&quot; %&#125;<br></code></pre></td></tr></table></figure><h4 id="字段说明-1"><a href="#字段说明-1" class="headerlink" title="字段说明"></a>字段说明</h4><table><thead><tr><th align="left">字段</th><th align="left">默认</th><th>描述</th></tr></thead><tbody><tr><td align="left">id</td><td align="left">必须</td><td>音乐 id，第一个参数</td></tr><tr><td align="left">server</td><td align="left">必须</td><td>音乐平台，第二个参数，可选： <code>netease</code> , <code>tencent</code> , <code>kugou</code> , <code>xiami</code> , <code>baidu</code></td></tr><tr><td align="left">type</td><td align="left">必须</td><td>音乐类型，第三个参数，可选： <code>song</code> , <code>playlist</code> , <code>album``search</code> , <code>artist</code></td></tr><tr><td align="left">auto</td><td align="left">无</td><td>有 auto 选项时前三个参数不需要填写，否则为必填，如格式中的第二个。</td></tr><tr><td align="left">autoplay</td><td align="left"><code>false</code></td><td>自动播放，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td align="left">fixed</td><td align="left"><code>false</code></td><td>吸底模式，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td align="left">mini</td><td align="left"><code>false</code></td><td>迷你模式，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td align="left">listfolded</td><td align="left"><code>false</code></td><td>默认折叠列表，带有此参数表示 <code>true</code> ，不带表示 <code>false</code></td></tr><tr><td align="left">mutex</td><td align="left"><code>true</code></td><td>互斥，如不需互斥 <code>&quot;mutex:false&quot;</code></td></tr><tr><td align="left">theme</td><td align="left"><code>#2980b9</code></td><td>主题颜色</td></tr><tr><td align="left">loop</td><td align="left"><code>all</code></td><td>循环模式 ，可选值 <code>all</code> , <code>one</code> , <code>none</code></td></tr><tr><td align="left">order</td><td align="left"><code>list</code></td><td>播放顺序，可选值 <code>list</code> , <code>random</code></td></tr><tr><td align="left">preload</td><td align="left"><code>auto</code></td><td>预加载模式 ，可选 <code>none</code> , <code>metadata</code> , <code>auto</code></td></tr><tr><td align="left">volume</td><td align="left"><code>0.7</code></td><td>默认音量，可选 <code>0-1</code></td></tr><tr><td align="left">lrctype</td><td align="left"><code>0</code></td><td>歌词类型</td></tr><tr><td align="left">listmaxheight</td><td align="left"><code>340px</code></td><td>播放器最大高度</td></tr><tr><td align="left">storagename</td><td align="left">metingjs</td><td></td></tr></tbody></table><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clojure">&#123;% meting <span class="hljs-string">&quot;002nf0kI0YUPR9&quot;</span> <span class="hljs-string">&quot;tencent&quot;</span> <span class="hljs-string">&quot;song&quot;</span> <span class="hljs-string">&quot;loop:none&quot;</span>  %&#125;<br></code></pre></td></tr></table></figure><blockquote><p> 这里qq音乐举例，最顶的是qq音乐独家的也能播放，id是后面链接中.html前面的一串字符：<a href="https://y.qq.com/n/yqq/song/002nf0kI0YUPR9.html">https://y.qq.com/n/yqq/song/002nf0kI0YUPR9.html</a></p></blockquote><h4 id="效果-1"><a href="#效果-1" class="headerlink" title="效果"></a>效果</h4>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  id="002nf0kI0YUPR9" server="tencent" type="song" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><hr><h3 id="Dplayer"><a href="#Dplayer" class="headerlink" title="Dplayer"></a>Dplayer</h3><p>这是一个播放视频的插件。</p><h4 id="格式-1"><a href="#格式-1" class="headerlink" title="格式"></a>格式</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&#123;<span class="hljs-meta">%</span> dplayer <span class="hljs-string">&quot;url:KeyCastOW.mp4&quot;</span> <span class="hljs-string">&quot;id:DDEC4F882C0B66FAD&quot;</span> <span class="hljs-string">&quot;addition:addition0&quot;</span> <span class="hljs-string">&quot;addition:addition1&quot;</span> <span class="hljs-meta">%</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="字段说明-2"><a href="#字段说明-2" class="headerlink" title="字段说明"></a>字段说明</h4><table><thead><tr><th align="left">配置项</th><th align="left">默认</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">url</td><td align="left">必填</td><td align="left">视频地址</td></tr><tr><td align="left">pic</td><td align="left"></td><td align="left">封面</td></tr><tr><td align="left">thumbnails</td><td align="left"></td><td align="left">缩略图</td></tr><tr><td align="left">type</td><td align="left"><code>auto</code></td><td align="left">视频格式，可选 <code>auto</code> <code>hls</code> <code>dash</code> <code>shakaDash</code> <code>flv</code> <code>webtorrent</code></td></tr><tr><td align="left">id</td><td align="left"></td><td align="left">弹幕 id，建议使用视频的 CRC 或 MD5，再或使用 UUID</td></tr><tr><td align="left">api</td><td align="left"></td><td align="left">弹幕 api</td></tr><tr><td align="left">token</td><td align="left"></td><td align="left"></td></tr><tr><td align="left">maximum</td><td align="left"><code>10000</code></td><td align="left">最大弹幕数</td></tr><tr><td align="left">user</td><td align="left"><code>DIYgod</code></td><td align="left">弹幕发送用户名</td></tr><tr><td align="left">bottom</td><td align="left"><code>15%</code></td><td align="left">弹幕底端距离</td></tr><tr><td align="left">unlimited</td><td align="left"><code>true</code></td><td align="left"></td></tr><tr><td align="left">addition</td><td align="left"></td><td align="left">额外弹幕，可重叠加多个</td></tr><tr><td align="left">suburl</td><td align="left"></td><td align="left">字幕地址</td></tr><tr><td align="left">subtype</td><td align="left"><code>webvtt</code></td><td align="left">字幕类型，可选 <code>webvtt</code> <code>ass</code></td></tr><tr><td align="left">subbottom</td><td align="left"><code>40px</code></td><td align="left">字幕底端距离</td></tr><tr><td align="left">subfontSize</td><td align="left"><code>20px</code></td><td align="left">字幕字体大小</td></tr><tr><td align="left">subcolor</td><td align="left">#fff</td><td align="left">字幕字体颜色</td></tr><tr><td align="left">autoplay</td><td align="left"><code>false</code></td><td align="left">自动播放，带有此参数表示 true，不带表示 false</td></tr><tr><td align="left">loop</td><td align="left"><code>false</code></td><td align="left">循环，带有此参数表示 true，不带表示 false</td></tr><tr><td align="left">screenshot</td><td align="left"><code>false</code></td><td align="left">截屏按钮，带有此参数表示 true，不带表示 false，此参数会造成跨域</td></tr><tr><td align="left">hotkey</td><td align="left"><code>true</code></td><td align="left">热键控制</td></tr><tr><td align="left">mutex</td><td align="left"><code>true</code></td><td align="left">互斥</td></tr><tr><td align="left">theme</td><td align="left"><code>#b7daff</code></td><td align="left">主题颜色</td></tr><tr><td align="left">lang</td><td align="left"></td><td align="left">语言，不指定会根据浏览器环境自动识别</td></tr><tr><td align="left">preload</td><td align="left"><code>auto</code></td><td align="left">预加载，可选 <code>none</code> <code>metadata</code> <code>auto</code></td></tr><tr><td align="left">logo</td><td align="left"></td><td align="left">logo 地址</td></tr><tr><td align="left">volume</td><td align="left">0.7</td><td align="left">默认音量 <code>0-1</code></td></tr><tr><td align="left">contextmenu</td><td align="left"></td><td align="left">右键菜单，可叠加</td></tr><tr><td align="left">highlight</td><td align="left"></td><td align="left">高光点，可叠加多个，例如 <code>&quot;highlight:&#123;time: 20, text: &#39;这是第 20 秒&#39;&#125;&quot;</code></td></tr><tr><td align="left">code</td><td align="left"></td><td align="left">额外代码，不懂不要填，需要写的请参考源码</td></tr></tbody></table><h4 id="示例（不知道就不要乱加，直接丢链接进去最好使）"><a href="#示例（不知道就不要乱加，直接丢链接进去最好使）" class="headerlink" title="示例（不知道就不要乱加，直接丢链接进去最好使）"></a>示例（不知道就不要乱加，直接丢链接进去最好使）</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&#123;<span class="hljs-meta">%</span> dplayer <span class="hljs-string">&quot;url:https://pic.gaficat.com/default/UpTown%20Spot.mp4&quot;</span> <span class="hljs-meta">%</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="效果（来一段大狗吧）"><a href="#效果（来一段大狗吧）" class="headerlink" title="效果（来一段大狗吧）"></a>效果（来一段大狗吧）</h4><div id="mmedia-fvRZOqGn"></div><script src="https://cdn.jsdelivr.net/npm/dplayer/dist/DPlayer.min.js"></script>      <script>        var dp_fvRZOqGn = new DPlayer({            container: document.getElementById('mmedia-fvRZOqGn'),            autoplay: false,            theme: '#b7daff',            loop: false,            lang: navigator.language,            screenshot: false,            hotkey: true,            preload: 'auto',            logo: '',            volume: 0.7,            mutex: true,            video: { url: 'https://pic.gaficat.com/default/UpTown%20Spot.mp4', pic: '', thumbnails: '', type: 'auto'},                                    contextmenu: [{text: 'hexo-tag-mmedia', link: 'https://github.com/MonoLogueChi/hexo-tag-mmedia'}],            highlight: [],            undefined        });        dp_fvRZOqGn.on("fullscreen", function () { if (/Android|webOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) { screen.orientation.lock("landscape"); }});              </script>        <hr><h3 id="Bilibili"><a href="#Bilibili" class="headerlink" title="Bilibili"></a>Bilibili</h3><p>可以直接通过bilibili的iframe插入bilibili视频，当然也可以通过这种方式插入bilibili视频。</p><h4 id="格式-2"><a href="#格式-2" class="headerlink" title="格式"></a>格式</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&#123;<span class="hljs-meta">%</span> bilibili <span class="hljs-string">&quot;aid:43218022&quot;</span> <span class="hljs-string">&quot;quality:high&quot;</span> <span class="hljs-string">&quot;danmaku:false&quot;</span> <span class="hljs-string">&quot;allowfullscreen&quot;</span> <span class="hljs-meta">%</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="字段说明-3"><a href="#字段说明-3" class="headerlink" title="字段说明"></a>字段说明</h4><table><thead><tr><th align="left">配置项</th><th align="left">默认</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">bvid</td><td align="left">none</td><td align="left">视频 bv 号，bvid、aid 和 av 必填一项，推荐使用 bvid</td></tr><tr><td align="left">aid</td><td align="left">none</td><td align="left">视频 av 号</td></tr><tr><td align="left">av</td><td align="left">none</td><td align="left">视频链接地址，不要带分 P 信息，与 aid 同时填写会被覆盖，不推荐使用</td></tr><tr><td align="left">page</td><td align="left"><code>1</code></td><td align="left">分 P，填写 av 时才会生效</td></tr><tr><td align="left">quality</td><td align="left"><code>low</code></td><td align="left">视频质量，可选 <code>high</code> <code>low</code></td></tr><tr><td align="left">danmaku</td><td align="left"><code>false</code></td><td align="left">开启弹幕，带有此参数表示 true，不带表示 false</td></tr><tr><td align="left">allowfullscreen</td><td align="left"><code>true</code></td><td align="left">是否允许全屏</td></tr><tr><td align="left">width</td><td align="left"><code>100%</code></td><td align="left">宽度</td></tr><tr><td align="left">max_width</td><td align="left"><code>800px</code></td><td align="left">最大宽度</td></tr><tr><td align="left">margin</td><td align="left"><code>auto</code></td><td align="left">位置，css 属性，例： <code>&quot;margin:auto&quot;</code> <code>&quot;margin:0 0 0 auto&quot;</code></td></tr></tbody></table><h4 id="示例（来一段自己弹得）"><a href="#示例（来一段自己弹得）" class="headerlink" title="示例（来一段自己弹得）"></a>示例（来一段自己弹得）</h4><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">&#123;<span class="hljs-meta">%</span> bilibili <span class="hljs-string">&quot;bvid:BV11b411S7qB&quot;</span> <span class="hljs-string">&quot;quality:high&quot;</span> <span class="hljs-string">&quot;danmaku:false&quot;</span> <span class="hljs-string">&quot;allowfullscreen&quot;</span> <span class="hljs-meta">%</span>&#125;<br></code></pre></td></tr></table></figure><h4 id="效果-2"><a href="#效果-2" class="headerlink" title="效果"></a>效果</h4>        <style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style>        <div class="bbplayer">        <iframe class="bbplayer" id="mmedia-tOFQldpI" src="//player.bilibili.com/player.html?bvid=BV11b411S7qB&page=1&high_quality=1&danmaku=false"            allowfullscreen="no"            scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe>        </div>        <script>            document.getElementById("mmedia-tOFQldpI").style.height=document.getElementById("mmedia-tOFQldpI").scrollWidth*0.76+"px";            window.onresize = function(){              document.getElementById("mmedia-tOFQldpI").style.height=document.getElementById("mmedia-tOFQldpI").scrollWidth*0.76+"px";            };        </script>        <h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>还在为插入音频、视频烦恼吗？<a href="https://github.com/u2sb/hexo-tag-mmedia">hexo-tag-mmedia</a>真的可以了解一下。</p><p>经过我实际测试，<a href="https://github.com/u2sb/hexo-tag-mmedia">hexo-tag-mmedia</a>和<a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a>并不冲突，当然啦，也许可以通过自行设置feed模板来解决<a href="https://github.com/MoePlayer/hexo-tag-aplayer">hexo-tag-aplayer</a>和<a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a>冲突的问题，但，既然有这么好的聚合插件，我为啥还要用别的呢，所有插件装一遍，太麻烦了。</p><p>就这样，晚安！</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文介绍一个hexo插件:&lt;code&gt;hexo-tag-mmedia&lt;/code&gt;，方便插入音乐、视频、bilibili等资源。&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="hexo" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/hexo/"/>
    
    
    <category term="hexo" scheme="https://www.gaficat.com/tags/hexo/"/>
    
    <category term="教程" scheme="https://www.gaficat.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>语雀webhook的那些坑</title>
    <link href="https://www.gaficat.com/posts/ff5ccbe6.html"/>
    <id>https://www.gaficat.com/posts/ff5ccbe6.html</id>
    <published>2020-09-15T15:21:31.000Z</published>
    <updated>2020-09-18T03:20:43.471Z</updated>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>由于语雀webhook官方的文档，没有关于其字段的说明，本文记录下各种消息的示例，方便大家开发时参考。</p><a id="more"></a><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>我其实是notion的用户，但是因为网络的原因，国内和其他人合作还是需要国内的文档协作工具，就了解到了语雀。查询了语雀官方的webhook文档，发现除了说他有这个功能，如何开启这个功能以外，关于推送消息各个字段的说明，压根儿没有。我都主动来查webhook了，还不会设置callback地址之类的吗？我肯定是想查字段什么意思啊！真的不太懂语雀这个文档。</p><p>我的需求是：语雀知识库内的所有文档、评论和评论回复。其增、改、删除操作，都能交由我自己的webhook函数做一些处理，推送到server酱上，因为很多时候别人更新了文档，我自己并不知道，不能及时回复。</p><h1 id="语雀webhook的一些说明"><a href="#语雀webhook的一些说明" class="headerlink" title="语雀webhook的一些说明"></a>语雀webhook的一些说明</h1><p>语雀的webhook支持对具体知识库进行设置，可以推送的内容如下：</p><ul><li>发布文档（publish）：新建一个文档，点击发布的时候推送一条webhook消息。</li><li>更新文档（update）：更新文档后，点击发布的时候推送一条webhook消息。</li><li>删除文档（delete）：删除文档，将推送一条webhook消息。</li><li>新增评论（comment_create）：新增品论后，将推送一条webhook消息。</li><li>更新评论（comment_update）：更新评论后，将推送一条webhook消息。</li><li>删除评论（comment_delete）：删除评论后，将推送一条webhook消息。</li><li>新增评论回复（comment_reply_create）：对某一条评论进行回复后，将推送一条webhook消息。</li><li>更新评论回复（comment_reply_update）：对某一条评论的回复更新后，将推送一条webhook消息。</li><li>删除评论回复（comment_reply_delete）：删除某一条评论的回复后，将推送一条webhook消息。</li></ul><p>开启推送，在<code>知识库-&gt;设置-&gt;开发者</code>中，进行相关的设置就行了，可以设置多个callback地址，每个callback地址可以自由选择上述中的某几个或者全部进行推送。</p><center><img src="https://pic.gaficat.com/default/开启语雀webhook.png" alt="开启语雀webhook" style="zoom: 40%;" /></center><h1 id="webhook消息的示例"><a href="#webhook消息的示例" class="headerlink" title="webhook消息的示例"></a>webhook消息的示例</h1><h2 id="发布文档"><a href="#发布文档" class="headerlink" title="发布文档"></a>发布文档</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>    <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>    <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>    <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>    <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>      <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">3</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.088Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;books_count&quot;</span>: <span class="hljs-number">5</span>,<br>      <span class="hljs-attr">&quot;public_books_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>    <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;!doctype html&gt;&lt;div class=\&quot;lake-content-editor-core lake-engine lake-typography-traditional\&quot; data-lake-element=\&quot;root\&quot; data-selection-undefined=\&quot;%7B%22path%22%3A%5B%5B4%2C0%2C0%2C4%5D%2C%5B4%2C0%2C0%2C4%5D%5D%2C%22active%22%3Atrue%7D\&quot;&gt;&lt;p data-lake-id=\&quot;b791fecaceb7f4797bb8db8ea980d83b\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;span&gt;这是文章的内容&lt;/span&gt;&lt;/p&gt;&lt;h1 data-lake-id=\&quot;32cf8b61bf32d3ce61e3918c025210a3\&quot; id=\&quot;D4wZf\&quot; style=\&quot;padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 28px; line-height: 36px;\&quot;&gt;一级标题&lt;/h1&gt;&lt;p data-lake-id=\&quot;c2217c5c3a0ca3e2964daf6e9d9d6372\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;strong&gt;加粗&lt;/strong&gt;&lt;/p&gt;&lt;p data-lake-id=\&quot;aa28e7cfeb7ea314fb2017c4d3d0301a\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;em&gt;斜体&lt;/em&gt;&lt;/p&gt;&lt;ul data-lake-id=\&quot;9cbd73bdb6680f9f7eb9fde5217a2ffc\&quot; start=\&quot;-\&quot; lake-indent=\&quot;0\&quot; style=\&quot;list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\&quot;&gt;&lt;li data-lake-id=\&quot;5a58e37ebb365f1905bde74c98d19061\&quot;&gt;list&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">17</span>,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span>,<br>    <span class="hljs-attr">&quot;publish&quot;</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;publish&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;publish&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>    <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>    <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>    <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>    <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>      <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">3</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;books_count&quot;</span>: <span class="hljs-number">5</span>,<br>      <span class="hljs-attr">&quot;public_books_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>    <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;更新了文章&lt;br /&gt;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;更新了文章&lt;br /&gt;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;!doctype html&gt;&lt;div class=\&quot;lake-content-editor-core lake-engine lake-typography-traditional\&quot; data-lake-element=\&quot;root\&quot; data-selection-undefined=\&quot;%7B%22path%22%3A%5B%5B2%2C0%2C4%5D%2C%5B2%2C0%2C4%5D%5D%2C%22active%22%3Atrue%7D\&quot;&gt;&lt;p data-lake-id=\&quot;e17bcb083075181b3ca5ecd490e0fdf8\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;span style=\&quot;color: rgb(245, 34, 45);\&quot;&gt;更新了文章&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=\&quot;b791fecaceb7f4797bb8db8ea980d83b\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;span&gt;这是文章的内容&lt;/span&gt;&lt;/p&gt;&lt;h1 data-lake-id=\&quot;32cf8b61bf32d3ce61e3918c025210a3\&quot; id=\&quot;D4wZf\&quot; style=\&quot;padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 28px; line-height: 36px;\&quot;&gt;一级标题&lt;/h1&gt;&lt;p data-lake-id=\&quot;c2217c5c3a0ca3e2964daf6e9d9d6372\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;strong&gt;加粗&lt;/strong&gt;&lt;/p&gt;&lt;p data-lake-id=\&quot;aa28e7cfeb7ea314fb2017c4d3d0301a\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;em&gt;斜体&lt;/em&gt;&lt;/p&gt;&lt;ul data-lake-id=\&quot;9cbd73bdb6680f9f7eb9fde5217a2ffc\&quot; lake-indent=\&quot;0\&quot; style=\&quot;list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\&quot;&gt;&lt;li data-lake-id=\&quot;5a58e37ebb365f1905bde74c98d19061\&quot;&gt;list&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:58.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span>,<br>    <span class="hljs-attr">&quot;publish&quot;</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;update&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;update&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>    <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;trash-ETZ6JpfD&quot;</span>,<br>    <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>    <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>    <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>      <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">2</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:07.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;books_count&quot;</span>: <span class="hljs-number">5</span>,<br>      <span class="hljs-attr">&quot;public_books_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>    <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;更新了文章&lt;br /&gt;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;更新了文章&lt;br /&gt;这是文章的内容\n&lt;a name=\&quot;D4wZf\&quot;&gt;&lt;/a&gt;\n# 一级标题\n**加粗**&lt;br /&gt;_斜体_\n\n- list\n&quot;</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;!doctype html&gt;&lt;div class=\&quot;lake-content-editor-core lake-engine lake-typography-traditional\&quot; data-lake-element=\&quot;root\&quot; data-selection-undefined=\&quot;%7B%22path%22%3A%5B%5B2%2C0%2C4%5D%2C%5B2%2C0%2C4%5D%5D%2C%22active%22%3Atrue%7D\&quot;&gt;&lt;p data-lake-id=\&quot;e17bcb083075181b3ca5ecd490e0fdf8\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;span style=\&quot;color: rgb(245, 34, 45);\&quot;&gt;更新了文章&lt;/span&gt;&lt;/p&gt;&lt;p data-lake-id=\&quot;b791fecaceb7f4797bb8db8ea980d83b\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;span&gt;这是文章的内容&lt;/span&gt;&lt;/p&gt;&lt;h1 data-lake-id=\&quot;32cf8b61bf32d3ce61e3918c025210a3\&quot; id=\&quot;D4wZf\&quot; style=\&quot;padding: 7px 0px; margin: 0px; font-weight: 700; font-size: 28px; line-height: 36px;\&quot;&gt;一级标题&lt;/h1&gt;&lt;p data-lake-id=\&quot;c2217c5c3a0ca3e2964daf6e9d9d6372\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;strong&gt;加粗&lt;/strong&gt;&lt;/p&gt;&lt;p data-lake-id=\&quot;aa28e7cfeb7ea314fb2017c4d3d0301a\&quot; style=\&quot;font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word; margin: 0px;\&quot;&gt;&lt;em&gt;斜体&lt;/em&gt;&lt;/p&gt;&lt;ul data-lake-id=\&quot;9cbd73bdb6680f9f7eb9fde5217a2ffc\&quot; lake-indent=\&quot;0\&quot; style=\&quot;list-style-type: disc; margin: 0px; padding-left: 23px; font-size: 14px; color: rgb(38, 38, 38); line-height: 1.74; letter-spacing: 0.05em; outline-style: none; overflow-wrap: break-word;\&quot;&gt;&lt;li data-lake-id=\&quot;5a58e37ebb365f1905bde74c98d19061\&quot;&gt;list&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:06.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:07.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/trash-ETZ6JpfD&quot;</span>,<br>    <span class="hljs-attr">&quot;publish&quot;</span>: <span class="hljs-literal">false</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;delete&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;delete&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="新增评论"><a href="#新增评论" class="headerlink" title="新增评论"></a>新增评论</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857182</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;新增了一条&lt;strong&gt;评论&lt;/strong&gt;&lt;/p&gt;&lt;h1&gt;评论中的一级标题&lt;/h1&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857182&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_create&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_create&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="更新评论"><a href="#更新评论" class="headerlink" title="更新评论"></a>更新评论</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857182</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;更新了评论，删除了一级标题&lt;/p&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:45:09.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857182&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_update&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_update&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="删除评论"><a href="#删除评论" class="headerlink" title="删除评论"></a>删除评论</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857182</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;更新了评论，删除了一级标题&lt;/p&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:44:46.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:45:09.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:45:54.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857182&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_delete&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_delete&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="新增评论回复"><a href="#新增评论回复" class="headerlink" title="新增评论回复"></a>新增评论回复</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857191</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-number">857190</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;新增评论回复&lt;/p&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:55.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">2</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857191&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_create&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_create&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="更新评论回复"><a href="#更新评论回复" class="headerlink" title="更新评论回复"></a>更新评论回复</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857191</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-number">857190</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;更新评论回复&lt;/p&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:35.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:55.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">2</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857191&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_update&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_update&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="删除评论回复"><a href="#删除评论回复" class="headerlink" title="删除评论回复"></a>删除评论回复</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;data&quot;</span>: &#123;<br>    <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">857191</span>,<br>    <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>    <span class="hljs-attr">&quot;parent_id&quot;</span>: <span class="hljs-number">857190</span>,<br>    <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&lt;p data-lake-id=\&quot;a20d224c568e48b9d67847a2c66a8c01_p_0\&quot;&gt;更新评论回复&lt;/p&gt;&quot;</span>,<br>    <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;mood&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:25.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:35.000Z&quot;</span>,<br>    <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;to_user_id&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-literal">null</span>,<br>    <span class="hljs-attr">&quot;user&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;User&quot;</span>,<br>      <span class="hljs-attr">&quot;login&quot;</span>: <span class="hljs-string">&quot;flamingcrystal&quot;</span>,<br>      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;Flaming Crystal&quot;</span>,<br>      <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;avatar_url&quot;</span>: <span class="hljs-string">&quot;https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1573519967166-e0d21489-4ab5-49b6-8893-7e77c44cd2b5.jpeg&quot;</span>,<br>      <span class="hljs-attr">&quot;followers_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;following_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2019-11-12T00:53:12.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.user&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.comment_detail&quot;</span>,<br>    <span class="hljs-attr">&quot;commentable&quot;</span>: &#123;<br>      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">13230337</span>,<br>      <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;qddytu&quot;</span>,<br>      <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;这是文章的标题&quot;</span>,<br>      <span class="hljs-attr">&quot;book_id&quot;</span>: <span class="hljs-number">1782464</span>,<br>      <span class="hljs-attr">&quot;book&quot;</span>: &#123;<br>        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">1782464</span>,<br>        <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;Book&quot;</span>,<br>        <span class="hljs-attr">&quot;slug&quot;</span>: <span class="hljs-string">&quot;tx5fs5&quot;</span>,<br>        <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;示例知识库&quot;</span>,<br>        <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;点滴学习，随时记录&quot;</span>,<br>        <span class="hljs-attr">&quot;creator_id&quot;</span>: <span class="hljs-number">593074</span>,<br>        <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;items_count&quot;</span>: <span class="hljs-number">2</span>,<br>        <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">&quot;watches_count&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.966Z&quot;</span>,<br>        <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:46:55.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:39:58.000Z&quot;</span>,<br>        <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>        <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;v2.book&quot;</span><br>      &#125;,<br>      <span class="hljs-attr">&quot;user_id&quot;</span>: <span class="hljs-number">593074</span>,<br>      <span class="hljs-attr">&quot;format&quot;</span>: <span class="hljs-string">&quot;lake&quot;</span>,<br>      <span class="hljs-attr">&quot;body&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_draft&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;body_html&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>      <span class="hljs-attr">&quot;public&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;view_status&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;read_status&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;likes_count&quot;</span>: <span class="hljs-number">0</span>,<br>      <span class="hljs-attr">&quot;comments_count&quot;</span>: <span class="hljs-number">1</span>,<br>      <span class="hljs-attr">&quot;content_updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;deleted_at&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;created_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:40:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;updated_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:47:43.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:43:57.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;first_published_at&quot;</span>: <span class="hljs-string">&quot;2020-09-15T10:42:28.000Z&quot;</span>,<br>      <span class="hljs-attr">&quot;word_count&quot;</span>: <span class="hljs-number">21</span>,<br>      <span class="hljs-attr">&quot;user&quot;</span>: <span class="hljs-literal">null</span>,<br>      <span class="hljs-attr">&quot;_serializer&quot;</span>: <span class="hljs-string">&quot;webhook.doc_detail&quot;</span>,<br>      <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu&quot;</span><br>    &#125;,<br>    <span class="hljs-attr">&quot;path&quot;</span>: <span class="hljs-string">&quot;flamingcrystal/tx5fs5/qddytu#reply-857191&quot;</span>,<br>    <span class="hljs-attr">&quot;action_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_delete&quot;</span>,<br>    <span class="hljs-attr">&quot;webhook_subject_type&quot;</span>: <span class="hljs-string">&quot;comment_reply_delete&quot;</span>,<br>    <span class="hljs-attr">&quot;actor_id&quot;</span>: <span class="hljs-number">593074</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>由于官方没有对各个字段的说明，所以我们也只能先把webhook的具体内容记录下来，再做具体分析。我自己折腾的时候，也是借助<a href="https://webhook.site/">webhook.site</a>，手动更新知识库，一条一条对，太麻烦了，希望能帮到其他遇到这个坑的帖子吧。</p><p>个人认为path、action_type之类的字段比较重要吧，其他的什么自己去研究下就行了。</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h1&gt;&lt;p&gt;由于语雀webhook官方的文档，没有关于其字段的说明，本文记录下各种消息的示例，方便大家开发时参考。&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="语雀" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/%E8%AF%AD%E9%9B%80/"/>
    
    
    <category term="教程" scheme="https://www.gaficat.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>生活的意义？我想聊聊IKIGAI</title>
    <link href="https://www.gaficat.com/posts/1a376f79.html"/>
    <id>https://www.gaficat.com/posts/1a376f79.html</id>
    <published>2020-08-26T15:02:27.000Z</published>
    <updated>2020-10-20T14:31:15.749Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>睡眼惺忪地向前走，独特的幽香突然就充盈了整个鼻腔，整个人也随之精神了起来。四处打探，发现不远就是桂花院，嗯，是桂花香。忍不住再贪婪地猛吸两口清香的空气，然后就开心地上学去了。</p></blockquote><p>我小时候生活的院子里有一棵桂花树，上面说的是便是它，那是一棵两三个人才能抱得住的桂花树，枝叶繁茂，整个院子都在它的树荫之下，我们把那个院子称为桂花院。桂花是一种非常独特的植物，平时看起来并不起眼，你甚至会忘记它的存在。但一夜之间，它会用独特的香气会瞬间唤起你的记忆。嗅觉过后，便是远看遍地金黄，近看颗粒分明的桂花瓣，静静铺满整个地面，吸引着你的视觉。小时候总是习惯绕着走，舍不得踩上去。<strong>我的乡愁，大概是桂花吧！</strong></p><h1 id="开头的碎碎念"><a href="#开头的碎碎念" class="headerlink" title="开头的碎碎念"></a>开头的碎碎念</h1><p>前面是一些题外话，上班的园区种着几棵三指粗的桂花树，平时在园区散步并没有注意到路边的这些植物，最近桂花开了，气味唤起了记忆，挺奇妙，所以这篇文章开头提一嘴。</p><p>我有很长时间没有更新文章了，七月份在准备公务员考试，本来计划着考完试就好好更新文章，结果这两个月经历了挺多事。其实说是准备考试，实际上因为和女朋友吵架主动冷战，根本静不下心。铁子们，真的<strong>家和万事兴</strong>。有一段稳定的感情，对工作、生活都挺重要的，不然无尽头的争吵你做啥事都一点心思没有。当然，考试的结果你们也猜到了，肯定没有过，毕竟我是个普通人，我的智商碾压不了别人付出的努力。进面210分，我考了190分，意料之中吧。</p><p>和冯冯吵了半年的架，不完全统计，光冷战就经历了141天。其实根本的原因，是我对她有一些负面的情绪，我以为自己能消化，没想到越积越多，根本消化不了。所以情侣之间，有心结，有负面情绪，一定得以双方都接受的方式去沟通解决，毕竟是恋爱是两个人的事，一个人消化不来的。不过还是很庆幸吧，虽然很多做法对女票伤害很深，她还是原谅我啦，我们现在和好如初，很感激她。</p><h1 id="这篇文章想说啥？"><a href="#这篇文章想说啥？" class="headerlink" title="这篇文章想说啥？"></a>这篇文章想说啥？</h1><p>这篇文章，我想聊聊<strong>IKIGAI</strong>。IKIGAI是我看DannyData视频提到的一个概念，其实当时看到这个概念就想写一篇文章了，但一直拖到了现在。<strong>IKIGAI翻译自日语，意思是生活的意义</strong>。这其实不是一个很空的话题，相反，我觉得它非常的现实，对我们安排自己实际的日常生活、学习很重要。</p><p>以我自己为例子，我最近想干很多事，但似乎每天什么事也没干，时间就没有了：</p><ul><li><p>比如我喜欢电子设计，那折腾一些电子设计的小玩意儿我就很开心，我想在这花一些时间；</p></li><li><p>比如给别人弹钢琴伴奏，也许是一个能赚钱，那为了这个事投入一些精力，理所当然，我想在这花一些时间；</p></li><li><p>比如我觉得自己折腾或者对生活的看法，以文章的形式展现出来，会帮助到其他人，我想在这花一些时间。</p></li></ul><p>你看，折腾电子设计需要时间，学习即兴伴奏需要时间，写文章需要时间。每一个点都需要大量时间，那每天晚上回到家，如何安排这些事，就成了问题。<strong>当你完全没有优先级的时候，就会发现，自己什么都不想做，时间就在思想斗争中流逝了。</strong></p><p>你也许会说，那你应该向罗老师学习一下时间管理呀。也许真有用，但我还是想和各位聊聊IKIGAI。</p><h1 id="聊聊IKIGAI"><a href="#聊聊IKIGAI" class="headerlink" title="聊聊IKIGAI"></a>聊聊IKIGAI</h1><p>IKIGAI说的实际上是四个事：你热爱什么、你擅长做的是、你能靠什么赚钱、世界需要的事。对我而言：</p><ul><li>我喜欢电子设计，电子设计就是我热爱的事。</li><li>给别人弹钢琴伴奏，也许是一个能赚钱，那学习即兴伴奏也许是未来能赚钱的事。</li><li>写文章，让更多人看到，能让他们少走弯路，那这个就是世界需要的事。</li><li>啥？你问为啥没有擅长的事，作为社畜，惨遭社会毒打，我真不知道自己擅长啥。大概，吃喝？</li></ul><center><img src="https://pic.gaficat.com/default/IKIGAI.png" alt="IKIGAI" style="zoom: 67%;" /></center><p>IKIGAI说的四个事，实际上就是上面这张图里的四个大圆圈，如果只满足其中一个圆，那肯定离生活圆满比较远。如果是同时满足两个圆呢？</p><ul><li><strong>做自己热爱且擅长的事，能让人保持热情。</strong>比如我喜欢电子设计，事实上我自认为自己还挺擅长的，所以我对这件事一直比较有热情。</li><li><strong>做自己擅长且能赚钱的事，那就很专业，变身职业达人。</strong>那这个我就没资格说了，我不是职业达人，T.T~</li><li><strong>做世界需要且能赚钱的事，就能获得成就感和自我价值。</strong>比如我从事网络安全的研究工作，与黑产对抗，并且公司给我发钱，那我就很有成就感。</li><li><strong>做自己热爱并且世界需要的事，高尚且受人尊重。</strong>比如乡村教师、守卫边疆的战士。</li></ul><p>现实生活中，有很多找到了自己IKIGAI的人，无论是魅族合作的晓芳窑蔡晓芳先生；还是曾经在NBA大展身手的篮球巨星姚明。他们找到了自己的IKIGAI，自己的钟爱之事、擅长之能、必履之责、营生之业，真的很让人羡慕。</p><p>当然啦，作为社畜的我们，生存都已经很困难了，哪还有时间分清IKIGAI说的这四件事对应到自己身上到底是什么，然后去找交集、付诸行动呢？我自己也是这样。但虽然生活艰难，人间不值得。我还是认为应该花时间弄清楚自己的IKIGAI，毕竟搞清楚自己的IKIGAI，就会活的通透些。生活已经这么苦了，再苦能怎样，苦中作乐，说不定能让自己的生活柳暗花明呢！</p><h1 id="坐而论道不如起而行之"><a href="#坐而论道不如起而行之" class="headerlink" title="坐而论道不如起而行之"></a>坐而论道不如起而行之</h1><p>我们普通人，很难像精英一样找到自己四个圈的交集，去追求完美的IKAGAI，自己喜欢的事赚不了钱，赚钱的事自己不喜欢，都很正常。如果一定要舍弃一样，我个人会舍弃掉世界需要的事（自己如果有空余时间，那当然可以去做，你会获得认同感），相比其他的事，这件事优先级低。我就是一个俗人，身为凡人的我，多赚钱，让自己和家人生活质量更好，这是我能真切感受到的。</p><p>所以我个人认为应该专注于自己热爱的事、擅长的事以及能赚钱的事，努力找到这三个圈的交集。因为这三件圈的交集，能让你保持热情，能让你赚到钱，改善你的生活。吃都吃不饱，房都买不起房，女票都找不到，谈何社会需要我去做一些事，谈何社会责任感，认同感。</p><p>那么，<strong>第一步，找到自己喜欢的事，自己的爱好。</strong>进入社会，遭遇工作、感情的不如意，太正常了。这个时候，太需要一件能宣泄自己情绪的事了，这件事可以是一种乐器，可以是唱歌，可以是画画，可以是书法、可以是拼积木，可以是做菜等等。</p><p>接下来，<strong>第二步，当我们在尝试不同兴趣爱好的时候，很容易就能找到喜欢之事和擅长之事的交集。</strong>比如突然发现自己是吉他小天才，上手就各种和弦弹得飞起。突然发现自己做菜很棒，不同菜品伸手就来。人天生就是懒惰的，就是不喜欢学习的。那么在兴趣的推动下，我们就能很容易克服天性，去学习一件事情，结果，后来意外发现这件事自己比别人上手快，有天赋，自然就会对这些事充满热情。</p><p>最后呢，<strong>第三步，擅长、热爱的事，逐渐的就能转化成一些能赚钱的事。</strong>比如摄影，可以向杂志投稿获取稿费。比如厨艺，拍短视频，像麻辣德子，就可能流量变现。比如乐器，就能分享自己学习的过程，知识付费。总之，随着你眼界不断的开拓，你就会发现越来越多赚钱的途径。</p><blockquote><p>言论：<strong>当然，你只能赚到你认知范围内的钱。但愿我的读者们能看清未来的趋势，这样就能多一些准备。凡事预则立。</strong>——今天看到的一篇文章：<a href="https://tumutanzi.com/archives/16741">土木坛子</a></p></blockquote><p>坐而论道不如起而行之，我还是希望大家动起来，去寻找自己的兴趣。因为兴趣是一切的起点，随着了解的越多，你就越能扩大自己的认知范围，认知范围大，你就能赚到更多的钱，能改善自己的生活。没有这个起点，哪有后续。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p><strong>我自己的生活也是一地鸡毛，我觉得我没有资格对别人如何生活指手画脚，但还是希望把自己的想法分享出来，也许有人也认同呢？</strong></p><p>写这篇文章的目的，是希望大家能动起来，找到自己的兴趣，擅不擅长不重要，能不能赚钱不重要，毕竟，还没有开始动呢，对吧！切忌一开始把赚钱看的太重了，因为当你把钱看的很重的时候，一旦你做的那件事，短时间内很难转化出赚钱的方法，或者你看不到赚钱的希望，就很容易产生放弃的念头。</p><blockquote><p>言论：一开始学习即兴伴奏我动力很足，觉得自己喜欢，也擅长，并且未来无论是去钢伴演出还是教学生，可以转化成赚钱的途径。但后来，生活所迫，太希望把这件事转化成赚钱的手段而忘记了初衷（那就是爱好），一旦遇到困难，退缩，厌倦的心态就产生了。——我自己</p></blockquote><p>冯冯最近开始找自己的爱好了，这一点是我挺吃惊的。因为我跟冯冯说过很多次了，去找一个自己的兴趣爱好，不然当生活遇到负面情绪，只能对另一半发火。冯冯现在开始唱歌，开始学习剪辑视频，虽然一开始不是很熟练，但是乐在其中。我问她：“你说剪视频能转化成啥赚钱的途径不?除了UP主。”</p><p>冯冯说：“唔，好像没啥了？不过，只是<strong>当成一种兴趣嘛，自己消遣喜欢，不也挺好吗？为什么啥都要和钱扯上关系呢？</strong>”</p><p>每个人的IKIGAI都不一样，有的人找到一个符合自己圈就很困难了，有的人可以轻松的找到四个圈。但无论是一个还是四个，还是希望看文章的各位，都能想想自己的IKIGAI，快快动起来吧。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;睡眼惺忪地向前走，独特的幽香突然就充盈了整个鼻腔，整个人也随之精神了起来。四处打探，发现不远就是桂花院，嗯，是桂花香。忍不住再贪婪地猛吸两口清香的空气，然后就开心地上学去了。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我小时候生活的院子里有一棵桂花</summary>
        
      
    
    
    
    <category term="奇怪的知识" scheme="https://www.gaficat.com/categories/%E5%A5%87%E6%80%AA%E7%9A%84%E7%9F%A5%E8%AF%86/"/>
    
    
    <category term="奇怪的知识" scheme="https://www.gaficat.com/tags/%E5%A5%87%E6%80%AA%E7%9A%84%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>concurrent和requests的那些坑</title>
    <link href="https://www.gaficat.com/posts/f471d42d.html"/>
    <id>https://www.gaficat.com/posts/f471d42d.html</id>
    <published>2020-08-11T10:55:52.000Z</published>
    <updated>2020-09-16T03:17:50.937Z</updated>
    
    <content type="html"><![CDATA[<h1 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h1><p>这篇文章记录了一下python concurrent.future和requests的一些坑，不是程序猿的铁子们直接关掉吧。</p><h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>最近在写一个爬虫，需要爬5000000个IP，待爬的IP以<code>IP,PORT</code>的形式存储在一个100Mb的文件中。这么粗略算一下，一秒钟一个IP，5000000个IP需要差不多57天，这肯定不行啊，得用多线程。但是使用的过程中，发现还是遇到了很多坑，这里分享出来，以免其他小伙伴踩我踩过的坑吧。</p><h1 id="先说结论"><a href="#先说结论" class="headerlink" title="先说结论"></a>先说结论</h1><p>节约大家时间，先说结论吧！我遇到了以下几个坑：</p><ul><li><p><strong>不要一次将大文件的内容读到一个列表中</strong>。5000000个IP，虽然文件看起来只有100Mb，但程序直接怼到列表中，内存爆了。尽量读一行处理一行，即使用以下的形式读文件：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;file&quot;</span>) <span class="hljs-keyword">as</span> f:<br><span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> line:<br>print(f)<br></code></pre></td></tr></table></figure></li></ul><ul><li><p><strong>使用多线程时，处理函数一定一定一定一定不要阻塞，concurrent.futures只有当所有子线程运行结束后，才会释放资源</strong>。</p></li><li><p><strong>requests库在处理某些请求时会阻塞卡死。</strong>上面刚说多线程不要阻塞，这里就阻塞了。实际上是这次我爬取的过程中，发现了部分奇葩的IP，使用requests的timeout参数对它们无效，会始终阻塞。</p></li><li><p><strong>可以了解一下eventlet库的Timeout</strong>。如果实在无法解决某些处理流程中（比如上面requests）的阻塞，建议使用eventlet库的Timeout。</p></li></ul><h1 id="曲折历程"><a href="#曲折历程" class="headerlink" title="曲折历程"></a>曲折历程</h1><h2 id="读IP干爆内存"><a href="#读IP干爆内存" class="headerlink" title="读IP干爆内存"></a>读IP干爆内存</h2><p>一开始要做这个爬虫的时候，我想要用多线程，自然而然想到了<code>concurrent.futures</code>，参考说明文档的示例，我写了<strong>第一版程序</strong>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> concurrent.futures<br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_url</span>(<span class="hljs-params">ip, port</span>):</span><br>    <span class="hljs-keyword">try</span>:<br>        r = requests.get(<span class="hljs-string">&quot;http://&#123;&#125;:&#123;&#125;/path&quot;</span>.foramt(ip, port), timeout=<span class="hljs-number">3</span>)<br>        <span class="hljs-keyword">return</span> r.text<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-keyword">with</span> concurrent.futures.ThreadPoolExecutor(max_workers=<span class="hljs-number">100</span>) <span class="hljs-keyword">as</span> executor:<br>        <span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;123.txt&quot;</span>) <span class="hljs-keyword">as</span> f:<br>            <span class="hljs-comment"># submit所有IP</span><br>            future_dict = &#123;executor.submit(get_url, line.strip().split(<span class="hljs-string">&quot;,&quot;</span>)[<span class="hljs-number">0</span>], line.strip().split(<span class="hljs-string">&quot;,&quot;</span>)[<span class="hljs-number">1</span>]): line.strip().split(<span class="hljs-string">&quot;,&quot;</span>) <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f&#125;<br>            print(len(future_dict))<br>            <br>        <span class="hljs-comment"># 等待所有线程执行完毕</span><br>        <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> concurrent.futures.as_completed(future_dict):<br>            ip_port = future_dict[future]<br>            <span class="hljs-keyword">try</span>:<br>                data = future.result()<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:<br>                print(<span class="hljs-string">&#x27;%r generated an exception: %s&#x27;</span> % (ip_port, exc))<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-comment"># print(data)</span><br>                <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure><p>我当时发现，内存直接被干爆了。为什么？其实程序中的<strong>18行</strong>已经有答案了。<code>concurrent.future</code>官方的示例中，会将所有<code>future</code>对象存到一个字典中，然后再等待所有线程执行完毕。虽然用了<code>for line in f</code>这种形式迭代，但5000000的<code>future</code>对象，还是太大了。</p><p>那咋办嘛？就控制<code>future_dict</code>的长度呗，规定一个长度，执行完毕直接释放内存，所以我使用了<code>Queue</code>，保证传入<code>future_dict</code>的内容大小始终可控，<strong>第二版代码</strong>如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> concurrent.futures<br><span class="hljs-keyword">import</span> queue<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> ctime<br><br>ip_queue = queue.Queue(<span class="hljs-number">100</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_url</span>(<span class="hljs-params">ip, port</span>):</span><br>    <span class="hljs-keyword">try</span>:<br><br>        r = requests.get(<span class="hljs-string">&quot;http://&#123;&#125;:&#123;&#125;/path_info&quot;</span>.format(ip, port),<br>                         timeout=<span class="hljs-number">5</span>)<br>        <span class="hljs-keyword">return</span> r.text<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-keyword">return</span> e<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    future_dict = &#123;&#125;<br>    <span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;./ipfile&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ip_queue.full():<br>                ip_queue.put(line.strip().split(<span class="hljs-string">&quot;,&quot;</span>))<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">with</span> concurrent.futures.ThreadPoolExecutor(max_workers=<span class="hljs-number">100</span>) <span class="hljs-keyword">as</span> executor:<br>                    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> ip_queue.empty():<br>                        <span class="hljs-keyword">try</span>:<br>                            ip_port = ip_queue.get(block=<span class="hljs-literal">False</span>)<br>                            future_dict[executor.submit(get_url, ip_port[<span class="hljs-number">0</span>], ip_port[<span class="hljs-number">1</span>])] = ip_port<br>                        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                            print(e)<br><br>                    <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> concurrent.futures.as_completed(future_dict, timeout=<span class="hljs-number">30</span>):<br>                        ip_port = future_dict[future]<br>                        <span class="hljs-keyword">try</span>:<br>                            data = future.result()<br>                        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:<br>                            print(<span class="hljs-string">&#x27;%r generated an exception: %s&#x27;</span> % (ip_port, exc))<br>                        <span class="hljs-keyword">else</span>:<br>                            print(data)<br>                    future_dict.clear()<br><br>    print(<span class="hljs-string">&quot;finish&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><h2 id="跑着跑着就被系统kill了"><a href="#跑着跑着就被系统kill了" class="headerlink" title="跑着跑着就被系统kill了"></a>跑着跑着就被系统kill了</h2><p>就像预期的，上面第二版的程序在刚开始运行的时候可以正常跑，但是跑一段时间后，会没有任何提示，直接被系统kill掉。为什么呢？通过<code>htop</code>监控程序运行过程中的状态，我发现内存会明显随着运行时间的边长也增大。</p><p>既然使用了<code>Queue</code>，程序中该清理释放内存的地方（比如<code>future_dict</code>都做了相应的的处理），那为什么内存还会出问题呢？其实，有两点：**<code>concurrent.future</code>的内存释放机制和卡死的requests请求。**</p><h3 id="concurrent-future的内存释放机制"><a href="#concurrent-future的内存释放机制" class="headerlink" title="concurrent.future的内存释放机制"></a>concurrent.future的内存释放机制</h3><p>第二版有一个<strong>致命</strong>的地方：<strong>我们使用了with的方式开了一个<code>Executor</code>，第35行虽然设置了超时，但是concurrent.future只会等所有子线程执行完成后才会<code>return</code>并释放内存，可以仔细读一下下图的相关说明。</strong></p><center><img src="https://pic.gaficat.com/default/concurrent内存清理机制.png" alt="concurrent内存清理机制" style="zoom: 50%;" /></center><blockquote><p>第二版程序的35行设置了超时，所以程序执行的逻辑是：<code>ip_queue</code>第一次满之后，开一个<code>executor</code>，对<code>ip_queue</code>中的ip进行处理，但由于一些未知的异常，导致某一些子线程没有在30秒的时间内执行完，这时主线程会报超时的错误，不等第一个<code>executor</code>所有的子线程执行完，释放内存，就直接进入下一轮。如果第一轮的子线程能处理好所有异常，在之后退出，那么不会有内存问题，因为虽然提前进入了第二轮，某个时段存在两个甚至多个<code>executor</code>，但前面的<code>executor</code>总会退出的，内存总会释放的，对吧。</p><p>但事实和我们想的不一样，子线程实际上是在执行<code>get_url()</code>函数，若<code>get_url()</code>函数本身逻辑有问题，没有办法处理所有的异常被挂起，那么就会有相当的<code>executor</code>挂着，不能释放，当内存占用到一定程度，操作系统自然就会kill掉我们的程序了。</p></blockquote><h3 id="requests卡死？挂起？"><a href="#requests卡死？挂起？" class="headerlink" title="requests卡死？挂起？"></a>requests卡死？挂起？</h3><p>正常来说，我们第二版的代码里面，<code>requests</code>是设了超时的，但为什么<code>get_url()</code>函数就卡死了呢？其实部分IP，可能它返回的内容非常大，requests默认的get，会将其临时保存在内存中，那假如我们爬虫同时遇到10个返回100Mb内容的IP，1个Gb的内容，1M的带宽，算算要多久才能下完？当然就卡住了。带宽越大，下得越快，线程越多，内存炸的也就更快。</p><p>咋办呢？其实requests提供了流的模式，使用方式参照官方的文档吧，这里贴一个官方例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> requests<br><br>r = requests.get(<span class="hljs-string">&#x27;https://httpbin.org/stream/20&#x27;</span>, stream=<span class="hljs-literal">True</span>)<br><br><span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> r.iter_lines():<br><br>    <span class="hljs-comment"># filter out keep-alive new lines</span><br>    <span class="hljs-keyword">if</span> line:<br>        decoded_line = line.decode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>        print(json.loads(decoded_line))<br></code></pre></td></tr></table></figure><p>根据需求改动下，实时写入文件就行了。</p><h2 id="设置子线程的超时异常？"><a href="#设置子线程的超时异常？" class="headerlink" title="设置子线程的超时异常？"></a>设置子线程的超时异常？</h2><p>上面分析了被系统kill的原因，实际上还是内存炸了，所以修改了代码，<strong>第三版程序</strong>如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> concurrent.futures<br><span class="hljs-keyword">import</span> queue<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> ctime<br><br>ip_queue = queue.Queue(<span class="hljs-number">100</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_url</span>(<span class="hljs-params">ip, port</span>):</span><br>    <span class="hljs-keyword">try</span>:<br><br>        r = requests.get(<span class="hljs-string">&quot;http://&#123;&#125;:&#123;&#125;/path_info&quot;</span>.format(ip, port),<br>                         timeout=<span class="hljs-number">5</span>, stream=<span class="hljs-literal">True</span>)<br>        <span class="hljs-keyword">return</span> next(r.iter_lines())<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-keyword">return</span> e<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    future_dict = &#123;&#125;<br>    <span class="hljs-keyword">with</span> concurrent.futures.ThreadPoolExecutor(max_workers=<span class="hljs-number">10</span>) <span class="hljs-keyword">as</span> executor:<br>        <span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;./ipfile&quot;</span>) <span class="hljs-keyword">as</span> f:  <br>            <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:<br>                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ip_queue.full():<br>                    ip_queue.put(line.strip().split(<span class="hljs-string">&quot;,&quot;</span>))<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> ip_queue.empty():<br>                        <span class="hljs-keyword">try</span>:<br>                            ip_port = ip_queue.get(block=<span class="hljs-literal">False</span>)<br>                            future_dict[executor.submit(get_url, ip_port[<span class="hljs-number">0</span>], ip_port[<span class="hljs-number">1</span>])] = ip_port<br>                        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                            print(e)<br><br>                    <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> concurrent.futures.as_completed(future_dict, timeout=<span class="hljs-number">30</span>):<br>                        ip_port = future_dict[future]<br>                        <span class="hljs-keyword">try</span>:<br>                            data = future.result()<br>                        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:<br>                            print(<span class="hljs-string">&#x27;%r generated an exception: %s&#x27;</span> % (ip_port, exc))<br>                        <span class="hljs-keyword">else</span>:<br>                            print(data)<br>                    future_dict.clear()<br><br>    print(<span class="hljs-string">&quot;finish&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><p>结果呢，还是没能如愿，程序依然会出现卡死的现象。后来我分析原因，是部分IP不太正常，会一直返回内容，类似摄像头，所以永远不可能接收完内容，那这个子线程就一直挂着了。咋办？我就想，能不能设置子线程的超时，后来发现了一个库：<code>eventlet</code>。</p><p>所以最终，<strong>第四版程序</strong>的样子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> requests.auth <span class="hljs-keyword">import</span> HTTPBasicAuth<br><span class="hljs-keyword">import</span> concurrent.futures<br><span class="hljs-keyword">import</span> queue<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> ctime<br><span class="hljs-keyword">import</span> eventlet<br><br>eventlet.monkey_patch()<br><br>ip_queue = queue.Queue(<span class="hljs-number">200</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_url</span>(<span class="hljs-params">ip, port</span>):</span><br>    <span class="hljs-keyword">with</span> eventlet.Timeout(<span class="hljs-number">20</span>):<br>        <span class="hljs-keyword">with</span> requests.Session() <span class="hljs-keyword">as</span> s:<br>            <span class="hljs-keyword">try</span>:<br>                r = s.get(<span class="hljs-string">&quot;http://&#123;&#125;:&#123;&#125;/path_info&quot;</span>.format(ip, port),<br>                           timeout=(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>))<br>                s.close()<br>                <span class="hljs-keyword">return</span> r.text<br>            <span class="hljs-keyword">except</span> eventlet.timeout.Timeout <span class="hljs-keyword">as</span> e:<br>                print(<span class="hljs-string">&quot;eventlet timeout:&quot;</span>, e)<br>                s.close()<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                s.close()<br>                <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">multithread_attach</span>():</span><br>    future_dict = &#123;&#125;<br>    <span class="hljs-keyword">with</span> concurrent.futures.ThreadPoolExecutor(max_workers=<span class="hljs-number">100</span>) <span class="hljs-keyword">as</span> executor:<br>        ip_port = <span class="hljs-string">&quot;&quot;</span><br>        <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> ip_queue.empty():<br>            <span class="hljs-keyword">try</span>:<br>                ip_port = ip_queue.get(block=<span class="hljs-literal">False</span>)<br>                <span class="hljs-comment"># print(ip_port)</span><br>                future_dict[executor.submit(attach_tools, ip_port[<span class="hljs-number">0</span>], ip_port[<span class="hljs-number">1</span>])] = ip_port<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>                print(e)<br>        print(<span class="hljs-string">&quot;time:&#123;&#125;&quot;</span>.format(ctime()), <span class="hljs-string">&quot;200&quot;</span>, <span class="hljs-string">&quot;start attach&quot;</span>)<br>        print(<span class="hljs-string">&quot;last ip:&quot;</span>, ip_port)<br><br>        <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> concurrent.futures.as_completed(future_dict):<br>            ip_port = future_dict[future]<br>            <span class="hljs-keyword">try</span>:<br>                data = future.result()<br>            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:<br>                print(<span class="hljs-string">&#x27;%r generated an exception: %s&#x27;</span> % (ip_port, exc))<br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">pass</span><br>        print(<span class="hljs-string">&quot;time:&#123;&#125;&quot;</span>.format(ctime()), <span class="hljs-string">&quot;200&quot;</span>, <span class="hljs-string">&quot;finish attach&quot;</span>)<br>        print(<span class="hljs-string">&quot;last ip:&quot;</span>, ip_port, <span class="hljs-string">&quot;\n&quot;</span>)<br>    <span class="hljs-keyword">del</span> future_dict<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span>():</span><br>    <span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;./ipfile&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ip_queue.full():<br>                ip_queue.put(line.strip().split(<span class="hljs-string">&quot;,&quot;</span>))<br>            <span class="hljs-keyword">else</span>:<br>                multithread_attach()<br><br>    multithread_attach()<br>    print(<span class="hljs-string">&quot;finish&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>其实，收获最大的是concurrent.future的内存处理机制吧，这个坑肯定是不踩不知道的，python好像主动停止正在运行的子线程也比较麻烦，所以eventlet这个库，在某些场景给子线程设置超时也是一种挺好的方式。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;摘要&quot;&gt;&lt;a href=&quot;#摘要&quot; class=&quot;headerlink&quot; title=&quot;摘要&quot;&gt;&lt;/a&gt;摘要&lt;/h1&gt;&lt;p&gt;这篇文章记录了一下python</summary>
        
      
    
    
    
    <category term="教程" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="python" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/python/"/>
    
    
    <category term="python" scheme="https://www.gaficat.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>目睹有人在我面前倒下时，我在想什么</title>
    <link href="https://www.gaficat.com/posts/a1558b50.html"/>
    <id>https://www.gaficat.com/posts/a1558b50.html</id>
    <published>2020-07-16T13:56:15.000Z</published>
    <updated>2020-09-16T03:05:14.593Z</updated>
    
    <content type="html"><![CDATA[<p><strong>你有想过在一米左右的距离，亲眼目睹有人在你面前倒下吗？</strong></p><p>前几天，同事在群里分享了一个视频，是某互联网公司的程序员，倒在地上呻吟，旁边人在议论，到底打120还是怎么办，园区有没有医生。当时的感受是，一方面觉得IT行业的从业者压力真的很大，另一方面觉得人与人之间很冷漠，甚至都没有一个人扶起那个在地上呻吟的人。</p><p>我在一家网络安全公司的研究部门工作，弹性工作制，每天打满9个小时卡就行了，没有KPI压力，没有领导的压力。所以，基本上在领导给的大方向内，有所产出即可，这就是我们的工作内容。至于如何完成工作，可以按照自己的想法，可以大家一起讨论请教，没有人强迫。所以，我个人始终很难理解，IT行业真的有那么多的代码要写吗？真的要每天加班到那么晚吗？我一直觉得身边的人，工作状态都很好，<strong>我真的没有想到，自己离视频里，目睹一个人在自己面前突然倒的场景这么近。</strong></p><h1 id="那个男人倒下了"><a href="#那个男人倒下了" class="headerlink" title="那个男人倒下了"></a>那个男人倒下了</h1><p>我工作的地方，IT公司非常集中，最近天气预报一直有雨，没有办法骑自己的小摩托，这几天就只好坐公交通勤。公交一路开过去，会经过华为、阿里云、三星、中软国际等等IT或者外包企业。公交车上的人，有像我这样双肩包格子衫的IT男，也有露腰热裤精致包包的漂亮小姐姐。</p><p>我一般喜欢在坐车的时候往车厢最后面走，因为最后面通常会有人下车，大概率会混到一个座。今天上班路上，如愿以偿，我又混到了一个座，一路上我都在发呆，“士不可以不弘毅啥意思来着？”、“坐而论道不如起而行之出处是什么？反正肯定不是王兴的饭否。”、“昨天那个问我iBeacon的少年，我不回他了吧，真是超级简单的问题啊，自己查查百度都能查到的，非要来问别人”。</p><p>“扑通通”，突然挺闷几声异响瞬间打断了我的思绪，我甚至还没来得及聚集自己的目光，看清楚发生了什么，就只感觉前方的车厢开始骚动，定睛一看，我发现前方1米左右走廊的地上，侧卧着一个人，旁边的人很慌乱。</p><blockquote><p>侧卧的人，30岁左右，一件深蓝色工装外套，黑色工装裤，联想电脑包，银色眼镜，头发蓬乱，皮肤黝黑。没有呻吟，没有抽搐，就很安静的倒在走廊上。</p></blockquote><p>这时候旁边一个打扮清爽，五官清秀的男生没有丝毫犹豫，几乎是男人倒下的瞬间，马上反应了过来，一边示意周围人帮忙喊司机停车，一边弯下腰拍那个倒下男人的肩膀，确认他是否清醒，周围的人便大声呼喊司机停车。确认男人神智清醒后，那个男生和旁边的人一起，将男人扶起，坐到座位上，整个过程不到20秒。</p><p>我就在不到一米左右距离的座位上，目睹了整个过程，没有做任何事，内心似乎没有一丝波澜，整件事跟我没有任何关系一样。我当时在想什么？我第一时间想到的是，夏天的公交司机，开车非常毛躁，估计是没站稳摔了一跤吧？肯定自己就爬起来了。见那个男人第一时间没起来，我又在想，是不是没吃早饭就急着赶车上班，低血糖晕了？该不会和前几天同事发的那个视频一样，突然就猝死吧？是不是要耽误很多时间啊？我是不是应该下车啊？我应不应该过去帮他啊？万一他出事了，他的家人讹我咋办？</p><h1 id="怎么搞成这个样子了"><a href="#怎么搞成这个样子了" class="headerlink" title="怎么搞成这个样子了"></a>怎么搞成这个样子了</h1><p>我不知道自己为什么突然就变成了一个这么冷漠的人。我想起了自己小时候的两件事。</p><blockquote><p>有一天和父亲回家，前方两三米的地方，眼睁睁就看着一个老大爷从站着，到身子一点点向后倾斜，最后一屁股就从马路牙子上倒在了马路上。父亲当时想都没有想，拉着我就去扶老爷爷起来，那个老爷爷面容慈祥，满头银丝，扶起他我记得花了挺大的力气。扶老爷爷坐在路旁后，我们问他用不用打120，老爷爷说不用，自己坐一会儿缓缓就行了。确认老爷爷没有大碍后，我和父亲就离开了，父亲说：“你认识那个老爷爷吗？他是我们家属院的XXX，可能刚才没站稳吧。本身认识加上那个老爷爷平时身体不错，所以爸爸才没有犹豫，带你去扶他。”</p></blockquote><blockquote><p>我记得还有一次，那是一个夏天的傍晚，我和父母去江边遛弯，回家的路上，看到路边趴着一个流浪的老妪。夏天的闷热，我们穿着短袖短裤都难以忍耐，但那个老妪却裹着厚厚棉袄（那件满是破洞的棉袄，棉花都看不出白色了）。傍晚光线昏暗，加上她黑黑的皮肤和脏臭的衣服混在一起，根本分不清头发、脸庞和身子。我记得当时还挺害怕的，就想快点走开，这时候父母拉住了我，说我们要帮帮她。于是我去不远的小卖部买了牛奶和面包（花的是我自己的私房钱，因为做好事，虽然花自己的前，但我也可开心了），店员问我为什么买牛奶面包，我说那边有个老奶奶饿的走不动了，我想帮她。我把牛奶面包买回来便递给父母，觉得自己任务完成了，我还是很怕那个老妪，但父母说：“你自己去拿给那个老奶奶，我们在你后面看着你，你很安全。”我没办法，只能壮着胆子去。我故作镇定走过去，把牛奶面包放到那个老奶奶面前，拔腿就想跑，全程只看着她前方的地面，不敢看她长什么样子。她看到我们拿来了吃的，说了句不知道是哪的方言，我知道那是谢谢。</p><p>最后她似乎连拿起食物，撕开包装的力气都没有，我也没有管那么多，只是觉得自己任务完成了，一身轻，马上就跑开了。</p><p>其实，我现在想起这件事，我意识到一件很荒唐的事情，那个老妪的对面，就是我们当地一家非常不错的医院，就在街对面。一条街，一边是医院灯火通明的高楼；另一边是光线昏暗的拆迁区，一个夏天裹着棉袄的流浪老妪没有人管。</p></blockquote><p>所以，我从小受到的教育，都是竭尽自己的所能去帮助别人，一直以来，我也都是那么做的。但不知不觉，我的世界观就被改变了，媒体大肆报道某某学生帮助老人反被讹，慢慢让你就对这个世界失望，不敢去做正确的事情了。父母，恋人，逐渐也都说，“你别去给别人添乱，保护好自己就行了，别管别人的事。”</p><p>我真的一直有一个帮助别人的心，我记得上大学那会儿，我还花了几千块，参加学校急救的培训。手机里那张我被同伴练手，胳膊榜上绷带挂了彩，我自己还开心的不行的照片不知道还找不找得到了。我印象很深的是，老师在教授每个技能的时候，首先都是告诉我们，<strong>先保护好自己，再去救人</strong>。比如确认一个人是不是还活着，要去摸脉搏，这个时候不能直接从正面上手，抓着脖子摸。而是握拳，伸出食指和中指，用指腹贴到被救人靠近你自己这一侧的脖子上。为什么不贴到另一侧，因为一旦被人从正面拍到，你的手势极有可能被认为是在掐被救人的脖子，你自己知道你是在摸脉搏，但是你解释不清楚。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>我真的希望自己做一个很纯粹的人，像那个长相清秀的男生一样，遇到需要帮助的人毫不犹豫。但，也许我变了吧，当你掌握了急救的技巧，拿了证书，真遇到了事，却并不敢去救人，想到的全是自保，真的是一件很痛苦的事。</p><p>那个30岁的男人，背后是妻子，孩子，四个老人。大概率他的父母、妻子、孩子不会知道自己的儿子、丈夫、父亲今天上班突然倒下了。他回家可能依然会说：</p><ul><li>爸妈，我很好，工作虽然辛苦，但是薪水还行。</li><li>老婆，我很好，发奖金了给你买喜欢的那件连衣裙。</li><li>儿子，我很好，好好学习（长大像你爸一样当程序员然后猝死），爸爸给你买PS4。</li></ul><p>越来越多的男人，就在我们眼前没有征兆倒下了，这是行业的悲哀还是这代人的悲哀？</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;&lt;strong&gt;你有想过在一米左右的距离，亲眼目睹有人在你面前倒下吗？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;前几天，同事在群里分享了一个视频，是某互联网公司的程序员，倒在地上呻吟，旁边人在议论，到底打120还是怎么办，园区有没有医生。当时的感受是，一方面觉得IT行业的从业者压力</summary>
        
      
    
    
    
    <category term="生活" scheme="https://www.gaficat.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="生活" scheme="https://www.gaficat.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>大学的那些老师们</title>
    <link href="https://www.gaficat.com/posts/4de16deb.html"/>
    <id>https://www.gaficat.com/posts/4de16deb.html</id>
    <published>2020-07-04T18:25:11.000Z</published>
    <updated>2020-09-16T03:01:41.692Z</updated>
    
    <content type="html"><![CDATA[<h1 id="怎么想起这个话题了"><a href="#怎么想起这个话题了" class="headerlink" title="怎么想起这个话题了"></a>怎么想起这个话题了</h1><p>最近感触很深，你很认真的去做一件事的时候，虽然会有键盘侠来烦你，但是总还是有支持你的人。当生活艰难的你，因为梦想不能支撑自己活下去而灰心的时候，突然看到你精心做的事，得到其他人的认可，真的还是内心很暖的。希望大家加油吧，<strong>坐而论道，不如起而行之</strong>，只要你用心做，会有人看到你的努力，看到你的工匠精神。</p><blockquote><p>我的<a href="https://www.gaficat.com/posts/bb4e922e.html">朋克风格TVOC传感器</a>，第一批样品做出来以后，本来以为没人买的，结果还是很快就卖完了。但是毕竟没有批量做一个东西，所以当时发现手工焊接难以保证精度的问题，没有有效的办法解决，所以就没有继续打样了。</p></blockquote><blockquote><p>但是，其实第一批打样卖完了以后，还是陆续有人来问，那个可爱的传感器还有没有卖的。最让我觉得暖心的是，很多人，在我明确表示没办法保证质量、焊接精度等问题，没有继续生产的计划，可以买其他人做的东西之后。依然选择很支持，我就认准你的，你之后做出来告诉我。真的谢谢你们！</p></blockquote><center><img src="https://pic.gaficat.com/default/TVOC支持的人.jpg" alt="TVOC支持的人" style="zoom:50%;" /></center><p>所以，思绪就转到大学了，那群实验室一起做东西的小伙伴。毕竟我做的TVOC传感器，硬件都是杜哥（大学时候做机器人比赛的队友）做的，这小东西真是太精致了。杜哥最近从某嵌入式公司离职了，回到了家乡重庆，大家都意识到了，身在异乡，真TMD不容易！后来想着想着，就突然想到了以前的一位大学老师，人是真的挺皮的。然后想到，我们当时的老师好像都挺有意思的，所以写一篇文章，回忆一下大学的那些老师吧！</p><h1 id="黄QQ"><a href="#黄QQ" class="headerlink" title="黄QQ"></a>黄QQ</h1><p>黄老师，我们都叫他黄QQ。没错，我首先想到的老师就是他，为啥呢？因为他真是最能和我们实验室小伙伴打成一片的老师了，准确来说，并不像一个老师，而像是一个学长。</p><p>我记得他的第一节课，课前我们一直在小声嘀咕，查了课表，这老师名字没听过啊？重庆大学博士？然后大家都没留意到，门口那个拿了一瓶可乐、骨骼惊奇、跟第一排同学聊天的人。直到后来上课了，这个少年捏着瓶子，抿了一口快乐水，就开始上课。黄QQ的课，大概讲了一些算法扫盲的内容，比如什么神经网络，蚁群算法之类的，最经典的，就是“你们信不信，我用Excel给你们实现一个神经网络”。</p><p>而真正和黄QQ有很多交集的起因，是一节课上，黄QQ得意的说：“你们大学期间就要抓紧时间多去认识一些姑娘呀！比如你们有嵌入式硬件上的技术，传媒学院那边有很多的女生，有各种创意和想法，你们就可以一起去碰撞一下想法，把一些东西转换成现实，甚至于去创业，对吧！”后来，我还在我的邮件里面，翻到了这个：</p><center><img src="https://pic.gaficat.com/default/传媒合作的邮件.png" alt="传媒合作的邮件" style="zoom:40%;" /></center><blockquote><p>你真的难以想象，只是我们后来才知道的，这个酷爱肥宅快乐水，身材消瘦，甚至有一些佝偻的工科男，竟然能找到一个传媒的老师当媳妇儿，嗨呀，就气啊！我TM好歹也是180的汉子啊，母胎单身了多少年了，哪有传媒的小姐姐，我要去撩小姐姐！</p></blockquote><p>我记得第一次去传媒那边找小姐姐，是他们期中的一个课程设计，是要求小姐姐们分成小组，每一个小组想一个创意，我们具体实现，她们完成一些外观上的设计和实现。有智能椅子，就是你坐上去，根据你重量的不同，发出不同声音的。有《一束光，一座城》，就是不同灯光打上去，会有不一样的造型。我就记得，当时去了以后，发现有一个小姐姐特别笑起来特别惊艳，就真的让你觉得不灵不灵那种，后来才知道，那是黄QQ的老婆。怎么讲呢，黄QQ也是刚博士毕业，黄QQ的老婆小谢年纪估计也不大，所以大家在一起真的感觉像是同龄人，不像是你见到其他的教授，需要俯身倾耳以请那样。</p><p>后来我们分到的小姐姐们，他们的题目是我们需要做一个点阵做成的屏幕，随着观众掌声逐渐增大，逐渐展现出一个图形。</p><center><img src="https://pic.gaficat.com/default/IMG_20161118_144228.jpg" alt="焊接滑稽" style="zoom:33%;" /></center><p>我们真是妥妥的直男啊，小姐姐们骗我们说她们是大四的，让我们叫学姐，我们那时候也是老实，哎。她们的组长，我们都叫她敏哥，主要是性格真的挺活泼的，像个男生一样，后来我们聊天，她说：“我其实也是一个特别内向的人，和你一样，只不过，都是被逼的，你没有办法，周围环境逼着必须去主动一些，所以就变成现在这样啦！”</p><p>对，回归正题，我们的目的不是去撩小姐姐嘛，有一次黄QQ就带我们去吃火锅，我现在还记得那是我第一次吃火锅见到猪脑，简直是噩梦~所以你说为啥想起大学老师第一个就想起黄QQ了，毕竟，大学有几个老师带你们去吃过火锅呢，对吧！吃着吃着，小谢就说：“唉，你耍朋友了嘛（重庆把搞对象称作耍朋友）？”我说：“没呢，这不跟着黄老师，就是想去撩传媒的小姐姐嘛，谢老师你那有合适的不？”她说：“有呀！小胡啊，你知道不？就是那个大眼睛，长头发，个子高高的，是我们班长。”我当然知道了，当时一起去的李哥（大学时的老乡），一眼就相中了人家。我说：“哎，其实我也挺想有这样一段关系的，不过吧，大三了，马上就该操心读研或者工作了，也拿捏不好时间。”黄QQ说：“哎呀，吃饭的时间总是有的嘛！”</p><p>黄QQ其实带我们做了非常多有意思的项目，很多东西改变了我对于单片机的看法，这代码还能这么写？我思维里，一直觉得那帮老教授，也就只会照着90年代的PPT念书，新的东西，比如STM32之类的，他们不会懂的。但我记得当时NRF的无线模块，7个模块组网给人折腾坏了，怎么弄调不好，结果黄QQ亲自上手，一晚上就搞定了，会写代码的博士，你得服啊！</p><p>啥？你们问我后来和小胡成没成？当然没有了，我后来混进了人家的班群，然后招摇过市的在人家班群里撩那个小姐姐，我觉得那时候我还挺讨厌的，虽然大家都知道在开玩笑，但毕竟不是每个女孩子都喜欢这样。不过后来我们关系还不错，她也喜欢石进，《夜的钢琴曲五》，我很快就练会了，还答应教她弹两只老虎，只是后来。。。。。。</p><p>我觉得我一直都是一个渴望纯粹感情的人，但我是一个非常矛盾的人。我后来细想，其实大学期间，我有过非常多的机会，有家里很有钱的本地姑娘；有每天晚上在琴房对面画画，然后来琴房找我的阿飘；有实验室撞倒的卡哇伊；也有琴房撞见练小提琴的计算机小姐姐~但总是在最后的时候，一念之间，我还是会选择把精力放在学业上，对我来说，虽然渴望感情，但我没有进到一所顶尖的大学，我需要在大学更努力，才能在之后有更好的生活吧。父亲是重感情的人，他在事业和感情之间选择了母亲，他本应该取得更大的成功的，所以，那时的我极力的想走父亲没有走的那条路，不希望感情影响了自己的前途。</p><p>认识黄QQ，真的很庆幸，他不仅仅在学业上给我们了很多的思路，更重要的，是他作为一个学长，一个过来人，告诉我们，要好好健身，要好好学习英语，对了，还有要好好撩妹，因为人生啊，除了学业、事业，还有很多更重要的事~但为啥黄QQ都把肉送到我嘴边了，我还给吐出去了，到底是什么学业让我那么着迷呢？这就得说我大学期间的另一件事了。</p><h1 id="书记"><a href="#书记" class="headerlink" title="书记"></a>书记</h1><blockquote><p>我啊，哎，说出来也是个笑话，上学那会儿拿着全学院只有两个人拿的奖学金进了大学，最后第一学期高数就挂科了，绩点呵呵。其实，我觉得大学的这些课程，对我而言，没什么用处，我希望以后去做产品，我喜欢撸代码，讲道理，模电数电，自控，信号，我撸代码学他有什么用？哦，数电好像有用。。然后呢，专业分流了，人去年专业分流，物联网最低2.3，这咋整，我绩点才刚过2。</p></blockquote><p>上面这段是我从自己的QQ空间里面翻到的，确实是，高中四年的生活给我憋坏了，上了大学，我就想做自己想做的事，在这些事儿上努力，做出一些成绩。我们大学进去的时候是大类，需要在大二下半学期进行专业分流，这么多学生，咋分流，绩点呗！那我最感兴趣的事情就是物联网，也是猫着物联网工程专业才报的当时的学院，不然就去当时全校最顶尖的专业了，我的高考成绩是完全绰绰有余的。但，大学期间，实验室的撸代码生活翘了太多课了，我对于考前的突击也完全不当事儿，60分万岁，反正我拿过奖学金了，证明了我的应试能力了。那正常的专业分流，肯定没办法给我分到物联网工程了，咋办呢？</p><blockquote><p>我作死，去试着给胡院长发邮件，结果，人院长第二天一早就回我了！！这还真没想到啊！让我提交自己的简历和相关证明，参加专业分流特殊情况申请面试。我一直以为这些领导都很高冷的，感受到了人间温暖有木有！我就记得我的简历上，写满了大一干了那些生，什么51啊，32啊，openwrt啊，linux啊，路由器啊，拿了什么奖学金啊，当了班学长啊，什么创新实验项目啊，在协会担任职务啊什么什么的。怀着忐忑的心，我去参加了面试。</p></blockquote><blockquote><p>当时面试的有7，8个人吧，我最后一个进去，前面出来的人，脸色都不太好，我心一紧，这凉了啊！当我进了面试的地方（自动化学院的会议室），领导老师做了一排，我就呆呆的进去了，瞬间瞎尿了，有木有啊！有木有啊！！我真是抖着进去的。心中默念，“莫慌，莫慌！”，我开始了自我介绍，我吓得其实都有点逻辑混乱，急得跟文森特一样结巴了!!最让人暖心的是，书记，院长，老师们都微笑的看着我，不断的给我说，你别紧张，别慌，慢慢说。我自己的简述其实并不好，但是，书记和院长还是不断的引导我，我逐渐把自己这一年的经历，自己成绩下滑严重的原因阐述清楚，并表达了自己对物联网专业和物联网行业自己的一点看法。我记得书记听我说完后，没有什么犹豫，直接说：“嗯，这孩子还是对这个有些认识的，确实是自己在努力做着相关的事，前几个”，转过头看着胡院长，摇了摇头，然后转过来看着我：“你不是说你有梦想吗？那我们给你这个圆梦的机会！”那一刻，我人都傻了，幸福来的太突然。当然了，书记发表了看法，胡院长也要发表看法，胡院长很刁钻，问：“你说你马上要去参加robocup？”“嗯！5月29日出发，去日照比赛”“你有什么目标没？”“全国一等奖！”胡院长哈哈一笑，“那你还是要好好努力！”旁边的老师说：“其实二等奖就不错了！”胡院长转过头，认真到：“说是这么说，但是目标还是要定高嘛！”然后转过头看着我：“你加油，我们等你把一等奖拿回来，然后明年还可以去参加飞思卡尔”所有人笑笑，刚刚还十分紧张的面试，一下子轻松了好多。就业办的老师这时候也说：“你看，你基础那么好，入学的时候拿着“IT精英奖学金”，结果现在，成绩上还是要努力，你现在都对你未来职业的规划这么清楚，那等你毕业的时候，找工作还了得~2333333”。最后，书记说：“那就这样，你还是要多锻炼，太紧张了！”我说：“这个面试会改变我的一生啊！毕竟，我真的喜欢物联网！”这次面试，我其实是抖着进去，笑着出来的。这次面试我记一辈子，书记的肯定，我记一辈子！！</p></blockquote><p>我记得那天阳光很灼人，但其实心情在面试完了的那一刻豁然开朗。我顶着大太阳，跑去蜜雪冰城买了一杯喝的，惊魂未定地回到寝室，空气里弥漫着能继续追梦的味道，那是我大学最开心的几个小时。怎么讲呢，其实我觉得改变我人生轨迹的，就是那一次面试。那次面试如果没有通过，我可能被分到全学院最差且自己不喜欢的专业去，就不会有后来认识那么多有意思的老师，能涉足到那么多物联网相关技术的后续了。</p><p>我其实至今都不知道当时面试给我机会的老师叫什么，我就知道旁边人叫他书记，他也是坐在最中间的。但是真的很感谢他，当时的我正经历着低估，虽然嘴上说希望拿一等奖，但实际上，当时做机器人，遇到了很多的阻力，并且是当时无法解决的。那次面试，书记的话，真的给了自己很大的信心。可能多年后，他们都不会记得，曾经会有这么一次面试，有过这么一个学生。但是，这真的改变了我的人生，我真的到现在都很喜欢物联网技术，很庆幸有后两年吸取各种知识的经历，感谢那位书记。</p><h1 id="王教授"><a href="#王教授" class="headerlink" title="王教授"></a>王教授</h1><p>我说过，我觉得大学的课程，没有什么用，可能是受郭天祥的蛊惑吧。但是呢，王老师真的是我大学期间，见过的最崇敬的老师了。王老师的课是无线传感器网络，本来各种的路由算法相当的枯燥，但是王老师总是能用相当容易理解的比喻，让我们明白是怎么回事。比如MIMO啊，无线传感网的休眠机制啊等等。在那个时候，其他所有老师都在念PPT，你遇到这么一个在教学上如此出色的老师，并且他讲的是你感兴趣的领域，那真的可能是最幸福的一段时光了吧。</p><p>王老师一条腿好像不太灵活，我们也不太敢问，我就记得，王老师拖着一条腿和有些发福的身躯，在重庆夏天的讲台上讲课，每节课他头发都湿透了，现在记忆很深刻的，就是他拿一小块卫生纸擦汗的情形，这么一位教授，如此拼命的给本科生讲课，值得人尊敬。</p><p>当然了，我当时对于计算机网络，对于物联网技术是知之甚少的，我记得当时我有一个愿望，用手机发出一条命令，点亮一个LED灯。虽然现在看，我有100种方式实现，不过那时候，我连socket是什么都不知道。所以当我摸着石头过河，提出相当多疑问的时候，能够听懂我在问什么，然后直接回答我或者告诉我们你问的是什么，你应该查什么的老师，只有王老师了。我当然也尝试问过其他老师，其他老师也会很耐心的跟你解答，但真的，听不懂~</p><p>当然了，我也申请了本硕连读，导师就是王老师，我希望未来的硕士学习生涯，继续深入了解无线传感器网络，或是研究当时感兴趣的OpenWRT。不过呢，最终倒在了最后的面试上，我至今都觉得，大三那会儿，我是相当膨胀的，我觉得面试这种事情，经历过专业分流，还有人能质疑我？不过呢，真有老师能质疑你。</p><blockquote><p>研究生嘛，研究生就是发论文，发英文SCI的，你看你这英语4级都，哦，四级过了，那六级，对吧。</p></blockquote><p>我至今都记得那位面试我的老师，她眼中的不屑，我们当时做的比赛，是三届学生共同的努力，被她说的一文不值，我们当然可以选择难度低的项目，去取得更好的名次，但我们就是选择困难的项目，一届一届的传承下去，那大概是我从大学就养成的偏执吧。</p><h1 id="飞哥"><a href="#飞哥" class="headerlink" title="飞哥"></a>飞哥</h1><p>飞哥是我们的系主任，是个有些黑，身材有些圆的人。话说我们系几乎所有的老师都是教授了，身为系主任的他，却每年都错过教授的职称，感觉挺尴尬的吧。飞哥就是那种一本正经的学院派，当时讲计算机网络，是真滴听不懂，什么子网掩码，RIP协议之类的。为什么提飞哥呢？主要是当时本硕连读没了，整个人非常的低落，但是飞哥还是给了我挺多的鼓励的，比如当时确定毕设题目的时候，飞哥回我的邮件：</p><center><img src="https://pic.gaficat.com/default/飞哥的信.png" alt="飞哥的信" style="zoom: 50%;" /></center><p>我当时为了自己的毕设是投入了相当多的心血的，光是各种传感器的节点就花了2000多块，对于我而言，学生生涯可能很快就结束了，无忧无虑去专注于某种技术，不用担心自己生计的日子就到头了。所以很想集当时自己最大的技术实力，做一个系统出来，就是从天猫精灵的语音控制，到ZigBee的传感网，到蓝牙的传感网等等的一套异构网络智能家居解决方案，算是结束自己学生生涯的一个告别仪式吧。别人可能是拍毕业照，参加毕业典礼，我，可能就是这么一套设计吧。</p><h1 id="魏老师"><a href="#魏老师" class="headerlink" title="魏老师"></a>魏老师</h1><p>这个老师，是韩国回来的。我印象最深的，就是他说：“我跟你们讲，我当年，李敏镐是我校友！！！”当时全班女生那个尖叫~确实，他是从韩国留学回来的，方向是物联网安全。</p><p>这个老师，你任何时候见他，他都是笑眯眯的，总是给人一种笑面虎的感觉。当然不是说人家不好，只是个人的一种主观感受。他的方向是物联网安全，所以会涉及一些密码学上的东西，那当然也是听得云里雾里啊，什么AES，DES乱七八糟的，总之印象里，有一个学期，他的课都是在讲各种加密算法。</p><p>这谁知道呢，阴差阳错的，他的课我也没有好好听过，结果后来从事这方面工作了。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>还是很庆幸，我的大学遇到了这么一群老师，我记得黄QQ当时上课说，你们的代课老师，都是全校最豪华的阵容了，啥？你们不信？你们啊！你看，你们的老师全部都是教授，当然有副教授，但很快也都是教授了。所以如果真的还有亲戚朋友问，你当时那个学校好不好？值不值得去？我会很坚定的告诉你，很值得！学风严，老师学术水平出色，没有架子，非常真诚，很关心学生，因材施教。城市好，美女多。这么好的地方，你为啥不去？</p><p>我想到，既然写了大学的老师，我是不是可以再水一篇文章，将自己大学期间的那些小伙伴们，比如抱了一大堆零食的志博；比如现在依然帮忙做硬件的杜哥(我打算之后回一趟学校，和当年那些小伙伴聚一聚，还有，想念8151的琴房，想去拍张照)。是不是还可以再水一篇文章，讲讲那些年我遇到的小姐姐们，也不知道他们现在怎么样了，不然周末约着去爬山，也不知道还有没有机会。你们期待嘛？期待的话给自己挖个坑。</p><p>前两天看Zealer的视频，关于众筹的，说国外的众筹平台，偏向于极客的风格，他们很重视参与感，你做的棒，你有你的故事，我就花钱支持你，没关系。我参与其中，帮你找BUG，改善产品。而中国的众筹，偏向于我花钱就要买一个好用实惠的产品。所以给了自己一个启示，也许，像我这样，专注于设计和创造产品的人，在中国根本没办法活下去，我们没有国外的创客文化，你得承认客观的差距。</p><p>怎么讲呢，感觉自己最近思维有一些混乱，因为遇到了一些事，这也是一直没有发文章的一个原因。不过很庆幸的是，从后台看到，每天都有一部分的访客，是直接访问我的网站的，没有从其他的推荐平台上引流过来，心里面真的很暖，谢谢你们的关注！无论是朋克风格TVOC传感器，还是我的网站（虽然没有开评论，但也看得到被人关注），真的谢谢你们，你们的关注和支持，让即使被大环境打击的有点泄气的我，依然有坚持下去的动力。我也许没有办法成为一名做产品的极客，然后靠自己的这个梦想活下去，但，加油吧！</p><p>7月我还有一些其他事，忙碌的一个月，网站肯定是没有时间更新文章啦，大家，理解万岁~七月期间也就不用反复刷我的网站啦，大家时间都很宝贵，提前还是告诉大家一声。七月底我会回来的，也积累了一些题目了，那些坑，继续往后填吧！</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;怎么想起这个话题了&quot;&gt;&lt;a href=&quot;#怎么想起这个话题了&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="生活" scheme="https://www.gaficat.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="生活" scheme="https://www.gaficat.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>Mbed OS 6踩坑手册——全新串口API</title>
    <link href="https://www.gaficat.com/posts/6b047738.html"/>
    <id>https://www.gaficat.com/posts/6b047738.html</id>
    <published>2020-06-13T16:09:55.000Z</published>
    <updated>2020-09-16T03:09:16.298Z</updated>
    
    <content type="html"><![CDATA[<h1 id="哪来的坑？"><a href="#哪来的坑？" class="headerlink" title="哪来的坑？"></a>哪来的坑？</h1><p>前两天，Mbed OS 6发布了，在一脸期待的打开IDE，看看有什么好玩的东西后，我惊奇地发现：之前所有的工程一片红，所有串口程序，都跑不通了，<code>printf</code>也不好使了，<code>%f</code>打印不出小数（浮点数）了。</p><h1 id="Mbed-OS-5串口程序"><a href="#Mbed-OS-5串口程序" class="headerlink" title="Mbed OS 5串口程序"></a>Mbed OS 5串口程序</h1><p>一个典型的Mbed OS 5的串口程序是这样的：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;mbed.h&quot;</span></span><br><br><span class="hljs-function">Serial      <span class="hljs-title">pc</span><span class="hljs-params">(PA_9, PA_10)</span></span>; <span class="hljs-comment">// TX, RX</span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;  <br>    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) &#123;<br>pc.<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;float test:%f\\r\\n&quot;</span>, <span class="hljs-number">0.5</span>);<br>thread_sleep_for(<span class="hljs-number">1000</span>);   <span class="hljs-comment">// wait 200 millisecond</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>参考文档：<a href="https://os.mbed.com/docs/mbed-os/v5.15/apis/serial.html">https://os.mbed.com/docs/mbed-os/v5.15/apis/serial.html</a></p></blockquote><p>Mbed OS 5中，<code>printf</code>是使用的标准库的，所以我们按照C语言正常的写法，是没有任何问题的。</p><h1 id="Mbed-OS-6-BufferedSerial-And-UnbufferedSerial"><a href="#Mbed-OS-6-BufferedSerial-And-UnbufferedSerial" class="headerlink" title="Mbed OS 6 BufferedSerial And UnbufferedSerial"></a>Mbed OS 6 BufferedSerial And UnbufferedSerial</h1><p>Mbed OS 6对串口部分的接口做了升级，分为<a href="%5B%5D()">BufferedSerial</a>和<a href="%5B%5D()">UnbufferedSerial</a>。</p><p><code>BufferedSerial</code>的性能要优于<code>UnbufferedSerial</code>并具有较少的CPU负载和较少的延迟问题。只有RAM不足且无法承受缓冲或需要更多控制串行端口并从IRQ使用它的应用程序才应使用<code>UnbufferedSerial</code>。</p><p>这里我就用<code>BufferedSerial</code>做相关的示例：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;mbed.h&quot;</span></span><br><br><span class="hljs-function">BufferedSerial      <span class="hljs-title">pc</span><span class="hljs-params">(PA_9, PA_10)</span></span>; <span class="hljs-comment">// TX, RX</span><br><br><span class="hljs-function">FileHandle *<span class="hljs-title">mbed::mbed_override_console</span><span class="hljs-params">(<span class="hljs-keyword">int</span> fd)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> &amp;pc;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">while</span>(True)&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%f\\r\\n&quot;</span>, <span class="hljs-number">0.1</span>);<br>thread_sleep_for(<span class="hljs-number">1000</span>);  <span class="hljs-comment">// wait 1000 millisecond</span><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>我们的第一反应是，Mbed OS 6的串口接口变得更加复杂了，需要通过C++代码，将<code>BufferedSerial</code>的实例<code>pc</code>传递给系统I/O的重定向，之后才能调用<code>printf</code>，将希望的内容通过串口打印到控制台。</p><p>但是其实你会发现，上面的代码，打印不出小数了，会出现下面的状况：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c">f<br>f<br>f<br>f<br>f<br></code></pre></td></tr></table></figure><h2 id="无法用printf打印小数原因"><a href="#无法用printf打印小数原因" class="headerlink" title="无法用printf打印小数原因"></a>无法用<code>printf</code>打印小数原因</h2><p>这个问题让我很抓狂，因为google直接搜索，搜不到相关的解释。于是开始研究官方的说明文档，最终下面三篇文档解决了我的疑惑：</p><ul><li><a href="https://os.mbed.com/docs/mbed-os/v5.15/tutorials/optimizing.html#printf-and-reducing-memory">Mbed 内存优化</a></li><li><a href="https://github.com/ARMmbed/mbed-os/tree/master/platform/source/minimal-printf#size-comparison">Mbed minimal-print</a></li><li><a href="https://os.mbed.com/docs/mbed-os/v6.0/program-setup/advanced-configuration.html#configuration-parameters-in-mbed-app-json-mbed-lib-json">Mbed 配置系统</a></li></ul><h3 id="Mbed-OS-6开始默认使用minimal-printf"><a href="#Mbed-OS-6开始默认使用minimal-printf" class="headerlink" title="Mbed OS 6开始默认使用minimal-printf"></a>Mbed OS 6开始默认使用<code>minimal-printf</code></h3><p>首先，我无意间看到<a href="%5B%5D()">Mbed 内存优化</a>的文档中提及，如果我们的程序不需要64位整数或浮点打印希望优化flash，Mbed OS提供了<code>minimal-printf</code>库。之后，出于随缘的好奇心，我查阅了<a href="%5B%5D()">Mbed minimal-print</a>的文档。</p><p><code>minimal-printf</code>是Mbed为了减少flash的占用，提供的一个替代<code>printf</code>家族的库。它直接向串口/stdio输出而不使用<code>malloc</code>，所有的标志和精度修饰符都将被忽略。如果发生写入错误，没有对错误的处理。支持以下的格式化输出：</p><ul><li>%d: signed integer [h, hh, (none), l, ll, z, j, t].</li><li>%i: signed integer [h, hh, (none), l, ll, z, j, t].</li><li>%u: unsigned integer [h, hh, (none), l, ll, z, j, t].</li><li>%x: unsigned integer [h, hh, (none), l, ll, z, j, t], printed as hexadecimal number (e.g., ff).</li><li>%X: unsigned integer [h, hh, (none), l, ll, z, j, t], printed as hexadecimal number (e.g., FF).</li><li>%f: floating point (<strong>disabled by default</strong>).</li><li>%F: floating point (<strong>disabled by default</strong>, treated as %f).</li><li>%g: floating point (<strong>disabled by default</strong>, treated as %f).</li><li>%G: floating point (<strong>disabled by default</strong>, treated as %f).</li><li>%c: character.</li><li>%s: string.</li><li>%p: pointer (e.g. 0x00123456).</li></ul><p>注意上面的加粗，所有的浮点型数据默认都是禁用的。并且，Mbed OS 6为了尽可能减少对flash的占用，默认使用<code>minimal-printf</code>，</p><center><img src="https://pic.gaficat.com/default/Mbed6默认minimal-printf.png" alt="Mbed6默认minimal-printf" style="zoom: 50%;" /></center><h2 id="如何启用对浮点数输出的功能？"><a href="#如何启用对浮点数输出的功能？" class="headerlink" title="如何启用对浮点数输出的功能？"></a>如何启用对浮点数输出的功能？</h2><p><a href="%5B%5D()">Mbed minimal-print</a>的文档中提到了两种方法：</p><p>第一种配置<code>printf</code>家族的库为标准库。修改<code>mbed_app.json</code>文件中的应用程序配置，将<code>target.printf_lib</code>的值覆盖为<code>std</code>（即不使用<code>minimal-printf</code>，使用标准库），如下所示：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json">&quot;target_overrides&quot;: &#123;<br>        &quot;*&quot;: &#123;<br>            &quot;target.printf_lib&quot;: &quot;std&quot;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p>第二种方法是，启用<code>minimal-printf</code>对浮点数输出的功能，修改<code>mbed_app.json</code>文件：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json">&quot;target_overrides&quot;: &#123;<br>        &quot;*&quot;: &#123;<br>            &quot;target.printf_lib&quot;: &quot;minimal-printf&quot;,<br>            &quot;platform.minimal-printf-enable-floating-point&quot;: true,<br>            &quot;platform.minimal-printf-set-floating-point-max-decimals&quot;: 6,<br>            &quot;platform.minimal-printf-enable-64-bit&quot;: false<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>platform.minimal-printf-enable-floating-point：是否启用浮点数输出</li><li>platform.minimal-printf-set-floating-point-max-decimals：浮点数输出的精度</li><li>platform.minimal-printf-enable-64-bit：是否启用64位长整数型输出</li></ul><h2 id="配置文件在哪？"><a href="#配置文件在哪？" class="headerlink" title="配置文件在哪？"></a>配置文件在哪？</h2><p>我们知道了问题所在了，那就对配置文件做一些修改，但是，<code>mbed_app.json</code>这个配置文件在哪里？其实，<a href="%5B%5D()">Mbed 配置系统</a>的文档中有相关的说明：</p><p>我们可以在工程的根目录下，新建一个<code>mbed_app.json</code>文件，然后将上一小节所述的配置，写到<code>mbed_app.json</code>文件中，再次编译，bingo！</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>其实，这个坑，一度想让我去官方的论坛留言，但还是有一些运气成分吧，还是搞明白了怎么回事。</p><p>当然还有一些遗憾，比如：如果我有多个串口，怎么让每个串口都能用printf呢？我完全不懂c++，所以这个问题，搭建感兴趣吗？感兴趣的话，就当是给自己埋的一个坑吧！之后搞明白了再继续更新。</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;哪来的坑？&quot;&gt;&lt;a href=&quot;#哪来的坑？&quot; class=&quot;headerlink&quot; title=&quot;哪来的坑？&quot;&gt;&lt;/a&gt;哪来的坑？&lt;/h1&gt;&lt;p&gt;前两天，Mbed OS</summary>
        
      
    
    
    
    <category term="电子设计" scheme="https://www.gaficat.com/categories/%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="Mbed" scheme="https://www.gaficat.com/categories/%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1/Mbed/"/>
    
    
    <category term="电子设计" scheme="https://www.gaficat.com/tags/%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="Mbed" scheme="https://www.gaficat.com/tags/Mbed/"/>
    
  </entry>
  
  <entry>
    <title>Mbed——我心中完美物联网OS</title>
    <link href="https://www.gaficat.com/posts/ee759d6d.html"/>
    <id>https://www.gaficat.com/posts/ee759d6d.html</id>
    <published>2020-06-12T16:29:24.000Z</published>
    <updated>2020-09-16T03:09:37.918Z</updated>
    
    <content type="html"><![CDATA[<h1 id="我是怎么知道Mbed的？"><a href="#我是怎么知道Mbed的？" class="headerlink" title="我是怎么知道Mbed的？"></a>我是怎么知道Mbed的？</h1><p>我希望用舵机做一个开灯神器（就是喊一声“天猫精灵，开灯！”，贴在传统墙壁开关上的舵机就转一下，开灯）很久了，大家感兴趣嘛？感兴趣我这里给自己挖一个坑，后续专门写一篇文章，讲具体的辛酸历程。</p><p>总之呢，折腾的过程中，我很好奇，我的Mac电脑，应该如何把arduino的固件烧录到我的STM32F103C8T6中？在查询资料的过程中，我看到了一个视频，视频中老外为了尽快生成一个固件，使用<strong>Mbed</strong>在线的编辑工具，在线编译了一个固件出来。这波操作给我惊呆了，印象中，想要用STM32点亮一盏LED灯，代码量还是比较多的，你要开各种总线时钟，你要对引脚做各种配置。但老外只用了几行代码，就类似于下面几行代码就完事儿，这？</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-function">DigitalOut <span class="hljs-title">led1</span><span class="hljs-params">(PB_5)</span></span>;led1=<span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><h1 id="何为Mbed-OS"><a href="#何为Mbed-OS" class="headerlink" title="何为Mbed OS"></a>何为Mbed OS</h1><p>Mbed是ARM亲自操刀（傻了吧？芯片架构是人家设计的，人家再来亲自操刀OS，那肯定是专业团队~）的一款物联网OS，针对的芯片是Arm Cortex系列的，其设计的full profile（我也不知道该怎么翻译）是RTOS，提供了一个抽象层，以便开发人员可以编写在任何启用了Mbed的板上运行的C / C ++应用程序。</p><p>说人话，啥意思？按照传统，我们在STM32上写一个程序是什么过程？首先是在<strong>windows</strong>上，装<strong>keil</strong>或者<strong>iar</strong>，然后看着ST的数据手册，即使用库开发，依然需要配置大量的时钟、总线等等（有人说STM32Cube，你看下一句话）。这个时候，如果跟你说，换个公司的芯片，你给我换Ti的Cortex-M3，你是不是就要骂娘了？</p><p>类似于Arduino，Mbed是一个针对Arm Cortex系列芯片的框架，作为开发者的我们，使用Mbed，可以获得以下好处：</p><ul><li>优秀的多平台开发环境，Mac上终于可以写STM32的程序啦！Mbed有配套的本地开发IDE、CLI工具，支持Windows、Mac以及linux。同时也提供在线的编辑、编译环境。也支持将Mbed的工程导出，导成VS Code，Keil，IAR的工程都可以。</li><li>极少的代码量，一行代码初始化IO口、串口等外设，再也无需关注复杂的数据手册、钻研库开发啦！硬件层均由OS完成，各种复杂的驱动？专业团队，高兴送走！</li><li>OS提供丰富的API，多线程、信号量等等，我们只需要关注最上层的业务逻辑。</li><li>再也不用为换芯片型号、厂商担心啦（我曾经参加一个3天时间的比赛，后来两天时间都在学TI TIVA系列芯片，移植点亮一盏LED）！使用Mbed,一套逻辑代码，ST的芯片好使，NXP的芯片好使，TI的芯片也好使。</li></ul><h2 id="优秀的多平台开发环境"><a href="#优秀的多平台开发环境" class="headerlink" title="优秀的多平台开发环境"></a>优秀的多平台开发环境</h2><p>多平台开发环境，意味着我们可以在Windows，MacOS，Linux甚至树莓派上做嵌入式的开发。</p><p>我在工作之前，一直使用windows系统，windows是一个非常好的操作系统（主要是打游戏舒服）。但是不能否认的是，存在相当一部分人，使用苹果电脑。你当然可以说那我装个虚拟机或者MacBook装个双系统就好了呀？但就像我这样的人，就觉得我花了大价钱，买了苹果的设备了，我还返回去用Windows，我这不是吃饱了没事干吗？</p><blockquote><p>其实，工作以后，我购入最满意的东西，就是我的MacBook，它足够的轻，续航足够长，屏幕素质优秀（屏幕好真的，用过才知道）。晚上回家或是上班，随手掏出来，记笔记，改代码，写博客，真的有欲望做这些事。再也不用望着几斤重的游戏本，呼哧呼哧，连打开的欲望都没有了。</p></blockquote><p>但是，购入MacBook后，我就再没有碰过STM32了，因为没有Keil这样的IDE，传统观念里面，在Mac上玩单片机相当的麻烦（有人用VS Code搭建过开发环境嘛？）。Mbed就解决了这个问题，用它的在线编辑器和编译环境，你只需要一个浏览器，就能玩转单片机了。</p><center><img src="https://pic.gaficat.com/default/Mbed%E5%9C%A8%E7%BA%BF%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.png" alt="Mbed在线开发环境" style="zoom: 25%;" /></center><p>当然了，可支持导出到我们熟悉的IDE。</p><center><img src="https://pic.gaficat.com/default/%E5%B7%A5%E7%A8%8B%E5%8F%AF%E5%AF%BC%E5%87%BA.png" alt="工程可导出" style="zoom:50%;" /></center><h2 id="极少的代码量"><a href="#极少的代码量" class="headerlink" title="极少的代码量"></a>极少的代码量</h2><p>Mbed的代码量能少到什么程度呢？我们以点亮一盏LED为例，STM32库开发，代码是这样的：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;led.h&quot;</span>  </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;SysTick.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">LED_GPIO_Config</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">/*定义一个GPIO_InitTypeDef类型的结构体*/</span><br>GPIO_InitTypeDef GPIO_InitStructure;<br><br><span class="hljs-comment">/*开启GPIOB和GPIOE的外设时钟*/</span><br>RCC_APB2PeriphClockCmd( RCC_APB2Periph_GPIOC|RCC_APB2Periph_GPIOB, ENABLE); <br><br><span class="hljs-comment">/*选择要控制的GPIOB引脚*/</span>   <br>GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0|GPIO_Pin_1|GPIO_Pin_2;<br><br><span class="hljs-comment">/*设置引脚模式为通用推挽输出*/</span><br>GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;   <br><br><span class="hljs-comment">/*设置引脚速率为50MHz */</span>   <br>GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; <br><br><span class="hljs-comment">/*调用库函数，初始化GPIOB0*/</span><br>GPIO_Init(GPIOC, &amp;GPIO_InitStructure);<br><br>GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;<br><br>GPIO_Init(GPIOB, &amp;GPIO_InitStructure);<br><br><span class="hljs-comment">/* 关闭所有led灯*/</span><br>GPIO_ResetBits(GPIOC, GPIO_Pin_0|GPIO_Pin_1|GPIO_Pin_2);<br>GPIO_ResetBits(GPIOB, GPIO_Pin_0);<br><br>Delay_ms(<span class="hljs-number">1000</span>);<br><br>GPIO_SetBits(GPIOC, GPIO_Pin_0|GPIO_Pin_1|GPIO_Pin_2);<br>GPIO_SetBits(GPIOB, GPIO_Pin_0);<br>Delay_ms(<span class="hljs-number">1000</span>);<br><br>&#125;<br></code></pre></td></tr></table></figure><p>Mbed的代码长这样：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;mbed.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">LED_GPIO_Config</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-function">DigitalOut  <span class="hljs-title">led1</span><span class="hljs-params">(PB_6)</span></span>;   <span class="hljs-comment">// on-board LED</span><br><br>led1 = <span class="hljs-number">1</span>;<br>thread_sleep_for(<span class="hljs-number">200</span>);   <span class="hljs-comment">// wait 200 millisecond</span><br>led1 = <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>代码量少了多少，一眼可见吧？这个例子只是初始化一个IO口，其他的比如串口，PWM，SPI，CAN等等外设，Mbed都会像初始化一个IO一样，非常简单。</p><h2 id="丰富的API"><a href="#丰富的API" class="headerlink" title="丰富的API"></a>丰富的API</h2><p>不同于Arduino，Arduino的代码结构是有两个主要的函数，一个是初始化的，一个是大循环。我们的很多项目中，大循环的形式，效率相当底下，这也是我不太喜欢使用Arduino的原因。</p><p>Mbed提供了丰富的API，如RTOS的API，外设的API，数据存储的API，甚至于网络相关的API（如DNS，NetworkSocket）等等。</p><h2 id="优秀的跨平台能力"><a href="#优秀的跨平台能力" class="headerlink" title="优秀的跨平台能力"></a>优秀的跨平台能力</h2><p>这里列出Mbed支持的厂商吧，单是这长长的一列，你用的cortex架构芯片，哪个不是这些厂商出的？</p><center><img src="https://pic.gaficat.com/default/%E8%B7%A8%E5%B9%B3%E5%8F%B0%E8%83%BD%E5%8A%9B.png" alt="优秀的跨平台能力" style="zoom: 50%;" /></center><p>比如当我们针对ST公司的芯片，开发出一个产品。这时候需要更换另一个公司的芯片时，只需要改一下引脚即可，底层的驱动完全不用我关心，是不是从未有过如此爽快的体验？</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>Mbed真的极大的拉低了硬件开发的门槛。以前我有一个创意，我可能会因为要再看一遍野火的《STM32库开发实战指南》，再熟悉一下各种结构体，各种外设应该怎么配置，想到如此复杂的过程，很快就放弃了。但现在，我有一个想法，用Mbed，我可以很快实现我的想法，即使我半年一年没接触过硬件的开发了，我已经不熟悉某一款芯片了，也没问题，好的工具真的能激发人创作的欲望。</p><p>其实我始终认为，硬件的开发，对于我们学生或者极客而言，IDE、OS都是工具，我们的目的是借助这些硬件实现我们的创意，无论是机器人还是我想做的开灯神器（手动滑稽），我们不应该把精力浪费在这些工具上。我们希望用最快的速度，最少的弯路，先把自己的创意实现了，再去关注原理（甚至于某些情况下，原理我们都不用关注）。而不是把百分之八十以上的时间，花在学习芯片本身应该如何使用，驱动应该怎么写上。等你做完这些事，也就没有心境去完成你的创意了。硬件的开发，门槛不应该被拉的这么高。</p><blockquote><p> 我印象最深刻的，就是大学那会儿我因为要生成一个控制舵机的PWM，从STC89C52，到STC12C5A60S2，到STC15系列，整整折腾了半年时间。大家感兴趣吗？感兴趣的话，我就再给自己挖一个坑，之后写一篇文章，痛述当年的心酸历程。</p></blockquote><p>前段时间，我在知乎上看到一个回答，说中国嵌入式行业的学生们，并不像CS专业的学生，始终接触最新的技术，去努力提升自己，而是用着十几年前的IDE，循规蹈矩的做一些事。我在大学也是做机器人的，也是用着十几年前的IDE过来的。中国的学生、极客，在这方面真的很吃亏。不是我们不思进取，而是我们从一个做机器人、电子设计或是物联网的念头开始，了解到单片机这个概念。我们希望学习各种知识，但我们接触到的信息，就是郭天祥多年前的51单片机教程，然后去学习一款性能并不怎么样的芯片。就是野火的《STM32库开发实战指南》，花费很长的学习周期，学会调库，但是各种结构体，依然让人非常的抓狂。不是嵌入式的同学们不愿意接触最新的东西，而是我们压根都不知道，还有Mbed这种东西呢？还有Platformio这种东西呢？硬件还能这么玩呢？我们身边的老师不知道有这些东西，我们的学长不知道有这些东西。我们就只能用最笨的办法，最老的工具，最浪费时间的方式，走很多的弯路，浪费非常多不必要的时间和精力。</p><p>这种现状，导致了我们参加一个比赛、或是实现一个创意，百分之八十的时间都是在熟悉芯片的使用，熟悉各种传感器、电机的原理，折腾驱动，而真正做产品，实现功能的时间非常少。Mbed勾起了我重新玩单片机的热情，所以我非常想把这样一个工具告诉所有正在接触单片机、希望用单片机实现一些创意的人，它真的把硬件开发的门槛降得非常低。</p><p>我不奢求我这样一个单片机的爱好者，写这样一篇文章，就能改变现状。我只希望自己把折腾的过程，走过的弯路，整理成文字，祈祷文章中的关键字，能被百度、谷歌收录，有更多的人看到我的文章。我之后会出一系列的文章，比如我在使用Mbed的过程中遇到的一些问题，或者时我用Mbed实现的一些小创意。无论你是从博客还是知乎等平台看到我的文章，都请大家RSS订阅或者关注走一波吧，原创不易，但愿至少当你在百度或者google搜索的时候，不至于冒出来的全是一堆英文链接吧！</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;我是怎么知道Mbed的？&quot;&gt;&lt;a href=&quot;#我是怎么知道Mbed的？&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="电子设计" scheme="https://www.gaficat.com/categories/%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="Mbed" scheme="https://www.gaficat.com/categories/%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1/Mbed/"/>
    
    
    <category term="电子设计" scheme="https://www.gaficat.com/tags/%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1/"/>
    
    <category term="Mbed" scheme="https://www.gaficat.com/tags/Mbed/"/>
    
  </entry>
  
  <entry>
    <title>学乐器不是为了成为人体播放器！</title>
    <link href="https://www.gaficat.com/posts/e4dcbcaf.html"/>
    <id>https://www.gaficat.com/posts/e4dcbcaf.html</id>
    <published>2020-05-18T15:19:41.000Z</published>
    <updated>2020-09-22T08:18:32.074Z</updated>
    
    <content type="html"><![CDATA[<p>最近看了官大卫的关于音乐的TEDx，很认同他的观点：<strong>这个世界已经不需要更多的人体音乐播放器</strong>。我觉得觉得一定要写这样一篇文章，给自己和所有人看，如果进来了，真的看完吧，铁子，这篇文章里的例子挺有意思的。</p><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>最近看youtube的视频，看到了江老师和Eric邀请VK.克（超喜欢他的《花水月》和《雪舞》啊！）做关于视奏的节目，发现这些音乐家其实生活里也都挺逗的，并不像舞台上那么高冷。看的过程中，突然对钢琴的视奏有了兴趣，江老师的一点我认为说的特别对，“很多人学琴的时候，都是先费力的识谱，记住每个音该弹哪儿，之后丢掉谱子，依靠肌肉记忆，练会一个曲子”。这不说的是我吗？！而经验丰富的钢琴伴奏，通常会对旋律的调式、琴键的位置非常熟悉，他们看到前几个音大致就能推测出后面几个音走势是什么样的。这其实是一种对音乐的综合能力，不仅仅是演奏本身技巧上的东西。</p><p>后来因为这样一个视谱的视频，从江老师到官大卫，最后我翻到了官大卫关于音乐的TEDx。其实你会发现，音乐很有意思，他也有理性在里面，通过升降某个音的频率，我们会得到情感完全不一样的旋律。它也有感性在里面，作曲家会把自己的情感抒发到旋律里面。我真的很同意官大卫的观点——<strong>这个世界已经不需要更多的人体音乐播放器。</strong></p><p>先贴上官大卫TEDx的视频吧，感兴趣的小伙伴可以看看原视频，很多小伙伴应该看不到youtube上的视频，我就放一个bilibili搬运工的吧：</p>        <style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style>        <div class="bbplayer">        <iframe class="bbplayer" id="mmedia-VvesnWHj" src="//player.bilibili.com/player.html?aid=12970201&page=1&high_quality=1&danmaku=false"            allowfullscreen="no"            scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe>        </div>        <script>            document.getElementById("mmedia-VvesnWHj").style.height=document.getElementById("mmedia-VvesnWHj").scrollWidth*0.76+"px";            window.onresize = function(){              document.getElementById("mmedia-VvesnWHj").style.height=document.getElementById("mmedia-VvesnWHj").scrollWidth*0.76+"px";            };        </script>        <h1 id="音乐的理性"><a href="#音乐的理性" class="headerlink" title="音乐的理性"></a>音乐的理性</h1><p>音乐是有它的规律在里面的。我们熟知的音乐家、作曲家，绝不会因为灵光乍现，在完全不懂音乐规律的前提下，创作出一首曲子来。那么就用一个小例子，告诉大家音乐的规律。</p><p>一首歌的旋律其实是建立在音阶之上的，我们可以不知道音阶是什么，但是大家一定见过下面这个东西：</p><center><img src="https://pic.gaficat.com/default/官大卫TEDX大调五个音.png" alt="官大卫TEDX大调五个音" style="zoom: 20%;" /></center><p>Do Re Mi Fa Sol这五个音，其实有非常多的歌都是建立在这五个音之上的，比如我们都听过的一首圣诞歌曲：</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-PbrlIjVf" style="margin-bottom: 20px; width: 50%;"></div>        <script>          var ap_PbrlIjVf = new APlayer({            element: document.getElementById("mmedia-PbrlIjVf"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "大调",              author: "官大为",              url: "https://music.gaficat.com/%E5%A4%A7%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_PbrlIjVf);        </script><p>我们在听到这首歌的时候，会觉得是一段非常欢快的旋律，非常的明亮，让人开心。那么声音的高低是由振动频率决定的，我们可以把刚才听到的这一段旋律中Mi这个音的频率降低百分之六，我们就会得到一段非常忧伤的音乐。</p><center><img src="https://pic.gaficat.com/default/官大为TEDX小调五个音.png" alt="官大为TEDX小调五个音" style="zoom:20%;" /></center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-OgBdwsSd" style="margin-bottom: 20px; width: 50%;"></div>        <script>          var ap_OgBdwsSd = new APlayer({            element: document.getElementById("mmedia-OgBdwsSd"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "小调",              author: "官大为",              url: "https://music.gaficat.com/%E5%B0%8F%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_OgBdwsSd);        </script><p>那如果我们把第二个音Re的频率降低百分之六，刚才的旋律会变成什么味道呢？没错，你会得到一段咖喱味十足的旋律。</p><center><img src="https://pic.gaficat.com/default/官大为TEDX咖喱味五个音.png" alt="官大为TEDX咖喱味五个音" style="zoom:20%;" /></center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-rQQTEquk" style="margin-bottom: 20px; width: 50%;"></div>        <script>          var ap_rQQTEquk = new APlayer({            element: document.getElementById("mmedia-rQQTEquk"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "咖喱味儿",              author: "官大为",              url: "https://music.gaficat.com/%E5%92%96%E5%96%B1%E9%A3%8E%E5%91%B3%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_rQQTEquk);        </script><p>前面两个都是降低频率，当然也可以升高某些音的旋律，比如把第四和第五个音，Fa和Sol的频率升高百分之六，我们就会得到一段虚无缥缈的旋律。</p><center><img src="https://pic.gaficat.com/default/官大为TEDX虚无五个音.png" alt="官大为TEDX虚无五个音" style="zoom:20%;" /></center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-ctUMrQTU" style="margin-bottom: 20px; width: 50%;"></div>        <script>          var ap_ctUMrQTU = new APlayer({            element: document.getElementById("mmedia-ctUMrQTU"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "缥缈",              author: "官大为",              url: "https://music.gaficat.com/%E7%BC%A5%E7%BC%88%E8%B0%83.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_ctUMrQTU);        </script><p>那现在我觉得提高百分之六不够，我希望把Fa和Sol的频率升高百分之十二，我们会得到怎样的旋律呢？我们会得到一段非常中国风的旋律。</p><center><img src="https://pic.gaficat.com/default/官大为TEDX中国风五个音.png" alt="官大为TEDX中国风五个音" style="zoom:20%;" /></center>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <div id="mmedia-JnRWeBUB" style="margin-bottom: 20px; width: 50%;"></div>        <script>          var ap_JnRWeBUB = new APlayer({            element: document.getElementById("mmedia-JnRWeBUB"),            narrow: false,            autoplay: false,            showlrc: false,            music: {              title: "中国风",              author: "官大为",              url: "https://music.gaficat.com/%E4%B8%AD%E5%9B%BD%E9%A3%8E.mp3",              pic: "",              lrc: ""            },            undefined          });          window.aplayers || (window.aplayers = []);          window.aplayers.push(ap_JnRWeBUB);        </script><p>我从小到大学了十几年钢琴，后来在大学也上过什么音乐鉴赏课，但是从来没有老师跟我说过这样的规律。可能老师们自己学过枯燥的乐理，知道大调明亮、欢快、有力，小调忧伤，五声音阶是中国风的感觉。但是，他们不会给你讲，把这些非常有意思的东西分享给你，除非你是真正音乐专业的学生。但是，难道我们真的感觉不到，这才是音乐真正有魅力的地方吗？</p><h1 id="音乐是一种语言，为了表达情感"><a href="#音乐是一种语言，为了表达情感" class="headerlink" title="音乐是一种语言，为了表达情感"></a>音乐是一种语言，为了表达情感</h1><p>想起来之前看过官大卫关于视奏的视频，想温故知新。官大卫举了一个很有意思的例子，视谱厉害的人，看谱子就像看下面这段话：</p><blockquote><p>一二三四五六七八九十</p></blockquote><p>而你视谱，看到的谱子是这样的：</p><blockquote><p>明饿傻定红我这米玩改</p></blockquote><p>举这个例子其实想说，音乐也是一种语言，谱子是音乐的文字。那麽把音乐比作学语言，比如英语，学英语的时候，老师讲有“听、说、读、写”四个部分。音乐的“听、说、读、写”是什么呢？听，要听得明白音的高低，音程是什么，和声的走向是什么。说，要能用音乐表达自己的情感，你可以说你学过十几年钢琴，但是你写过歌吗？你有过即兴演奏吗？读，视谱能力，看到谱子能快速的分析出调性、曲式等信息。写，演奏能力，写得快，写的规范工整，不就和我们学琴的时候，期望的弹得快，弹得准一样吗？</p><p>我们不难发现，<strong>现在学习音乐，只是在学习“写”的能力。</strong>我们学习语言，汉语、英语或是其他语言，显然不仅仅是为了写得快，写得好。当然有专门学书法的，但是学语言，肯定还是希望能利用这种语言能更好的和其他人交流。我们可以学习演讲，锻炼自己的胆量；我们也可以学习写作，散文或是流水账，记录、抒发自己的心境；我们甚至可以专门学习书法，修心养性。这些都是学语言，那么学乐器、学音乐，不关心语言本身——不关心这种语言的的语法是什么；不关心规律是什么；不关心应该怎么用它去和别人交流，抒发自己的情感；只求记住每个字的笔画，准确、快速写出来。这就和我们学乐器的初衷大相径庭了。</p><p>照着谱子，我们的ipod可以播放任何的曲子，不管多快多慢，它会比人更加准确。<strong>那么我们学乐器的初衷是什么呢？</strong>是成为人体ipod，照着谱子，播放一些曲子吗？我觉得不是，我们不应该关注我会用这个乐器，发出什么声音，而是应该是学会用音乐这种语言，借助某种乐器，把自己的情绪表达出来。这个过程是有趣的，就像我们写作一样，我们不需要每个人都成为莫言那样的作家，因为每个人都有写作的权利，不管是给自己的女朋友写情书，还是给家人写信。而是<strong>把音乐当成一种语言，用音乐去交流，这才应该是我们学习乐器的初衷，是我们学习音乐的初衷。</strong></p><h1 id="尾巴（大部分是官大为讲的）"><a href="#尾巴（大部分是官大为讲的）" class="headerlink" title="尾巴（大部分是官大为讲的）"></a>尾巴（大部分是官大为讲的）</h1><blockquote><p>音乐其实是一种语言，是一种关于振动频率和时间差的语言，和所有的语言一样，他有自己的字母、单词、语法。<strong>我们不需要上帝给我们特别的音乐基因，才能成为音乐家或者作曲家，才能去写歌。我们要做的，其实是去了解音乐的语法、规律。语言的意义，永远不是它发出了什么声音，而是它表达了什么情感。</strong></p></blockquote><blockquote><p>事实上，现在音乐专业的教育，也是有问题的，音乐学院希望把学习乐器的学生，训练成非常优秀的演奏家，训练成非常厉害的音乐执行者，或者说的难听一点，试图把学生训练成一台人体ipod。ipod的功能，就是你可以把乐谱丢给它，它可以一五一十的把音乐播放出来。但是你把乐谱拿走，让ipod用音乐来表达自己想法，任何ipod都做不到。那么在之前，也许很有必要，经过苦练才能听到难度极高的曲子。但现在，只要动一动手机，搜一搜，你可以听到最顶级的演奏家，演奏李斯特，演奏巴赫，演奏肖邦。我们还需要音乐系每年产出这么多的毕业生，重复着同样的音乐吗？</p></blockquote><p>其实，无论是音乐系的学乐器的学生，还是作为一个兴趣爱好，学乐器的我们，都太过于重视苦练，而忽视了<strong>创造</strong>。我们把一个依靠创造力并且非常有意思的东西，变成了一个依靠无尽的重复，无比枯燥的东西。当然不是说苦练不重要，苦练、学习前人的音乐重要，他让我们掌握演奏中的发力技巧，让我们具备创造时，弹出来的基本功。但是，一切都是希望让我们更了解音乐的本质，因为了解了音乐的本质，才能让我们用音乐这种语言，去表达我们自己的想法，创造不一样的东西，改变世界。</p><center><img src="https://pic.gaficat.com/default/苦练和创造.png" alt="苦练和创造" style="zoom:25%;" /></center><p><strong>因为这个世界已经不需要更多的人体音乐播放器，我们需要的是更多勇于创造的音乐家！</strong></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;最近看了官大卫的关于音乐的TEDx，很认同他的观点：&lt;strong&gt;这个世界已经不需要更多的人体音乐播放器&lt;/strong&gt;。我觉得觉得一定要写这样一篇文章，给自己和所有人看，如果进来了，真的看完吧，铁子，这篇文章里的例子挺有意思的。&lt;/p&gt;
&lt;h1 id=&quot;背景&quot;&gt;&lt;a</summary>
        
      
    
    
    
    <category term="音乐" scheme="https://www.gaficat.com/categories/%E9%9F%B3%E4%B9%90/"/>
    
    <category term="乐理" scheme="https://www.gaficat.com/categories/%E9%9F%B3%E4%B9%90/%E4%B9%90%E7%90%86/"/>
    
    
    <category term="音乐" scheme="https://www.gaficat.com/tags/%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>看到蜘蛛人，我想到了什么</title>
    <link href="https://www.gaficat.com/posts/ab4902bc.html"/>
    <id>https://www.gaficat.com/posts/ab4902bc.html</id>
    <published>2020-05-14T16:21:06.000Z</published>
    <updated>2020-09-16T03:03:32.370Z</updated>
    
    <content type="html"><![CDATA[<p>最近还是挺开心的，一是Q1绩效被定为Q+了，刚调过薪水，再涨xx%，着实开心啊（一个部门30个人，一个季度一个Q+，百分之九十都是博士，入职不到两年，这是我第二次Q+，很多资源领导确实挺偏袒我的）。二是虽然有一段时间没更新文章了，但现在每天会有一部分小伙伴直接访问网站，很感谢这些小伙伴的关注，不更一点内容都不好意思啦。当然，你们有的可能只是想找点乐子，就跟看老罗带货直播翻车的笑话一样。</p><h1 id="蜘蛛人"><a href="#蜘蛛人" class="headerlink" title="蜘蛛人"></a>蜘蛛人</h1><blockquote><p>上班的时候，听到窗外叮咚一阵异响。抬头一望，看到窗外整齐地下来了一排蜘蛛人，蜘蛛人先掏出刷子，给玻璃刷上泡沫，之后，相互传递水枪，冲走泡沫，最后换另一种刷子，刮干净水渍。一面玻璃不超过30秒，相当熟练。</p></blockquote><p>本来觉得物业找蜘蛛人擦外窗很正常，没打算写一篇文章。但是中午吃完饭，准备回去继续上班的时候，一个蜘蛛人整坐在路边的树荫下歇息，年纪不大，十七八岁，脱掉鞋子，脚放在鞋子上。特别开心的望着正在擦窗子的同伴，吆喝着注意安全。也就是那么一瞬间，我们两四目相对。忽然觉得，就在这么一个园区里面。有像我们一样，朝九晚五，拿着固定薪水的人。也有高空作业，挣危险钱的蜘蛛人。也许他很羡慕我们这样坐办公室的人，没有风吹日晒，但是其实他也不知道，我们也有自己的苦恼。换位思考，我们也有羡慕的人，但我们羡慕、想成为的人也会有自己的苦恼。</p><p>我忽然想起以前高中的时候我写的日记，也记录着当时看到的一些人。</p><h1 id="街头艺人"><a href="#街头艺人" class="headerlink" title="街头艺人"></a>街头艺人</h1><p>老远边听出了那是《二泉映月》，旋律十分忧伤，十分连贯。</p><p>放学回家的我，骑着车急匆匆地从他身边驶过，突然一个急刹停了下来，这麽连贯的旋律？一定隐藏着一段非同寻常的故事吧！</p><p>那是一位70岁左右的老人，长胡子，蓬头散发，衣衫褴褛，很像街边乞食的乞丐。老人忘我地演奏者二胡，旋律依然忧伤、连贯。母亲是民歌演唱家，我从小，便在歌剧团里，听着各种乐器长大。老人的演奏水平，确实十分高超，因为隔壁住在一个老头，年龄大了，耳朵不好使了，音都拉不准了，磕磕绊绊的。</p><p>老人周围散落着些照片，照片有些泛黄，看得出有些年头了。照片上是老人年轻时与许多不同人的合影。</p><p>我掏出身上所有的钱(事实上我不喜欢给乞丐钱，我认为人一定要靠自己努力去赚钱，而不是乞讨，所以，面对一般的乞丐，我会从边上冷冷的走过，并不是我没有爱心，我觉得，他不值得让我去施舍。）放进了老人面前的碗中，老人冲我一笑“好好学习！”，听得出，是河南口音。</p><p>从小到大，家长、老师给我说过了无数次“好好学习”，可老人的话，却让心辛酸，我认识到正在学习的我是最幸福的，老人学得一身手艺，年轻时，一定很出名，如今却靠街头卖艺为生。</p><h1 id="搬运工"><a href="#搬运工" class="headerlink" title="搬运工"></a>搬运工</h1><p>刚好赶上搬家，父亲便找了几个搬运工。</p><p>搬运工们似乎有着用不完的力气，家里的许多包裹，家电，是我和父亲两个人都搬不动的，而看着搬运工们面对狭窄的楼道，门框，灵活的应对，面对不懂的家具，总有不同的搬法，暗自觉得，搬个东西还能这样啊？人咋这么聪明呢？</p><p>家里有架钢琴，几位搬运工通力合作，抬起钢琴艰难地向前挪动，每迈出一步，都感到整个楼房震动一下，能感受到他们肩上的分量。由于是下楼，走在前面的搬运工不免吃力些，可走在后面的却不停的埋怨，走在前面的便说了：“你个猪头！我走在前面，吃了大亏，你还埋怨？”众人一笑，抬起钢琴，继续下楼。望着钢琴，几个搬运工议论着“你说这么重的个东西，要多少钱啊？”“估计你一年也挣不来。”“我们就是天亮了干活，天黑了睡觉，每天整个百十块钱就行了，当然买不起。”众人一笑，继续卖力地干起活来。</p><p>搬运工们正搬着东西，楼下装满货物的车子与小区路中间的树有3米宽。这时来了一辆红色轿车，车主是个化了浓妆的女人，探出脑袋，“诶！那几个，把你们车子移开。！”神情和口气充满了蔑视，我示意她从旁边绕过去，她便没说什么，绕了过去。搬运工们便对我说：“你说这旁边火车都过得去，她一个汽车过不去？”我只是笑笑，不知道如何回答。</p><p>我的几大箱书，压得搬运工很吃力，他们便开玩笑道：“你要是能把这几大箱书全部装进脑子，那就好了！”</p><p>职业无贵贱，我很佩服靠自己劳动生活的那些生活底层的人们，他们，其实也是一群乐观，有尊严，勤劳，单纯的人。</p><h1 id="理发师"><a href="#理发师" class="headerlink" title="理发师"></a>理发师</h1><p>进门便看见了他，十八九岁，着装整齐，十分精神，与旁边那些杀马特们截然不同。</p><p>洗完头便坐了下来。“你好！”他走了过来，准备为我理发，我一愣，理了这么久的发，头一回见打招呼的理发师，印象中理发师通常是理发过程中与顾客聊聊。</p><blockquote><p>“刚放学？我看你穿着校服！”</p><p>“是啊！”“在哪上学？”</p><p>“XX中学”</p><p>“嗯，好地方……”</p></blockquote><p>理发师似乎想说些什么，有欲言又止。</p><blockquote><p>“其实，如果我继续上学，我是今年应届考生，只可惜我选择的学校不好，在X县那边，父母最终不让我上学了，我便学了这手艺。”</p></blockquote><p>他的话，流露出一些伤感。</p><blockquote><p>“现在，有的大学生毕了业，照样找不到工作，你学了这手艺，起码将来不用为工作发愁了，也挺好的！”</p><p>“也许您从电视上、报纸上看到许多这样的事，但是大学生找不到工作的毕竟是少数，再说，等你上了大学，你会明白，大学其实是个十分美好的地方。哎，只可惜我与大学无缘。只有当你不入了社会，你才会发现，上不上大学，差别其实很大的。”</p></blockquote><p>理发师的话，让我再次不知道说什么好，他便继续为我理发。</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>这是一个两极分化非常严重的社会，富人的纸醉金迷你想象不到，穷人的饮水栖衡你也想象不到。我们呢？虽然对未来有规划，一定程度的压力和焦虑，也能刺激我们进步。但和他们相比，正在看这篇文章的你我，我们还行吧？我们有什么理由不快乐呢？</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;最近还是挺开心的，一是Q1绩效被定为Q+了，刚调过薪水，再涨xx%，着实开心啊（一个部门30个人，一个季度一个Q+，百分之九十都是博士，入职不到两年，这是我第二次Q+，很多资源领导确实挺偏袒我的）。二是虽然有一段时间没更新文章了，但现在每天会有一部分小伙伴直接访问网站，很感</summary>
        
      
    
    
    
    <category term="生活" scheme="https://www.gaficat.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="生活" scheme="https://www.gaficat.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>Typora自定义命令自动上传图片</title>
    <link href="https://www.gaficat.com/posts/6f888707.html"/>
    <id>https://www.gaficat.com/posts/6f888707.html</id>
    <published>2020-05-12T08:29:08.000Z</published>
    <updated>2020-09-16T03:19:13.682Z</updated>
    
    <content type="html"><![CDATA[<h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>Typora是我非常喜欢的Markdown编辑器，之前的一个更新，Typora支持了“上传图像”的功能（即写文章时，插入图片自动将其上传至图床），我们可以直接借助IPic、uPic、PicGo等程序，配合Typora自动将图片上传至又拍云等对象存储平台。但是，官方的文档晦涩难懂，我尝试进行了一些配置，但始终还是不好使，那咋办嘛？</p><p>其实，将本地图片上传至图床，这个过程本质上来说就是一条HTTP请求，但是如果这个过程还需要在后台一直开着一个图床软件或者安装一些命令行工具（更何况很多工具也是收费的），代价就有些大了。庆幸的是，Typora支持不借助这些图床工具，通过自定义命令（脚本）的方式，完成自动上传图片的功能。</p><p>那么，能不能自己写一个十几行代码的脚本来适配Typora呢？当然可以了。</p><h1 id="一起开始吧"><a href="#一起开始吧" class="headerlink" title="一起开始吧"></a>一起开始吧</h1><p>以Typora自定义命令上传图片为例，当我们从我们插入一张图片时，发生了什么？我们在Typora插入一张本地的图片后，Typora会调用预先设置的自定义命令（通常是运行一个脚本）来上传图片，自定义命令（脚本）上传完图片后输出（注意这里有坑）相应的URL，Typora会读取该URL，并自动把本地图片地址替换为相应的URL。所以只要配置得当，我们在写作时，只需要准备好素材，直接对素材<code>command + c</code>、<code>command + v</code>了。</p> <center><img src="https://pic.gaficat.com/default/Typora自定义命令上传图片的流程.jpg" alt="Typora自定义命令上传图片的流程" style="zoom: 50%;" /></center><p>综上所述，如果我们要通过自定义命令来上传图片，只需要三步：</p><ul><li>编写能够上传图片至相应的图床或者对象存储的脚本</li><li>在偏好设置中进行相应的设置</li><li>测试是否正常</li></ul><h2 id="编写脚本（上传至又拍云对象存储）"><a href="#编写脚本（上传至又拍云对象存储）" class="headerlink" title="编写脚本（上传至又拍云对象存储）"></a>编写脚本（上传至又拍云对象存储）</h2><p>一开始我尝试使用Python实现，但是发现Typora的自定义脚本，似乎并不能完美的调用Python脚本（也可能是自己没处理好一些参数之类的东西）。无奈，面向搜索引擎，现学现卖，最终用shell脚本实现了通过REST API上传图片至又拍云对象存储的功能，结果发现代码量出奇的少，脚本如下所示。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><br><span class="hljs-comment"># 各类配置信息</span><br>bucket=<span class="hljs-string">&quot;sample&quot;</span> <span class="hljs-comment"># 云存储服务的名称</span><br>remote_path=<span class="hljs-string">&quot;default/&quot;</span> <span class="hljs-comment"># 上传默认的路径</span><br>auth=<span class="hljs-string">&quot;xxxxxxx&quot;</span> <span class="hljs-comment"># 操作员名和操作员密码按照operator:password拼接Base64编码</span><br>base_url=<span class="hljs-string">&quot;https://xxx.xxx.xx/&quot;</span> <span class="hljs-comment"># 对象存储绑定的域名</span><br><br><span class="hljs-comment"># 上传图片</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>; <span class="hljs-keyword">do</span><br>    curl https://v0.api.upyun.com/<span class="hljs-string">&quot;<span class="hljs-variable">$bucket</span>&quot;</span>/<span class="hljs-string">&quot;<span class="hljs-variable">$remote_path</span>&quot;</span> -H <span class="hljs-string">&quot;Authorization: Basic &quot;</span><span class="hljs-string">&quot;<span class="hljs-variable">$auth</span>&quot;</span> --upload-file <span class="hljs-string">&quot;<span class="hljs-variable">$i</span>&quot;</span><br><span class="hljs-keyword">done</span><br><br><span class="hljs-comment"># 输出结果</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Upload Success:&quot;</span><br><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span>; <span class="hljs-keyword">do</span><br>    IFS=<span class="hljs-string">&#x27;/&#x27;</span> <span class="hljs-built_in">read</span> -r -a array &lt;&lt;&lt; <span class="hljs-string">&quot;<span class="hljs-variable">$file</span>&quot;</span><br>    id=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;#array[@]&#125;</span>&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$base_url</span>&quot;</span><span class="hljs-string">&quot;<span class="hljs-variable">$remote_path</span>&quot;</span><span class="hljs-string">&quot;<span class="hljs-variable">$&#123;array[$id-1]&#125;</span>&quot;</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><p>脚本相对简单（具体API可以参考<a href="https://help.upyun.com/docs/storage/">又拍云官网</a>），分为三部分：</p><ul><li>各类配置信息。又拍云对象存储相关的信息。</li><li>上传图片。使用<code>curl</code>命令调用REST API上传图片。</li><li>输出结果。适配Typora，输出结果。</li></ul><p>我们在写一个脚本的时候，大体上关注三部分内容，输入、处理过程和输出。处理过程是自己实现的所以还好，但Typora上传图片自定义命令的<strong>传参和输出</strong>是真的奇坑。</p><ul><li><p>传参。Typora上传图片调用自定义命令时，会将待上传的图片作为命令行参数，传入脚本。如<code>bash upload.sh 1.jpg 2.jpg</code>，这里具体有几张待上传的图片不确定，所以参数长度是不固定的，你的脚本必须上传所有作为参数传入的图片。Typora并没有在文档中直接说明这一点（传参的方式、长度），真的给我坑坏了。</p></li><li><p>输出。事实上，Typora并不关心我们脚本中上传图片的具体过程如何，它只关心我们脚本的最终输出。Typora要求脚本输出结果的方式简单粗暴，直接<code>echo</code>（其他语言比如Python的<code>print</code>）。注意，直接<code>echo</code>也是有格式要求的，脚本需要首先输出<code>Upload Success:</code>，之后，一行对应一个URL，具体格式如下：</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs groovy">Upload <span class="hljs-attr">Success:</span><br><span class="hljs-attr">https:</span><span class="hljs-comment">//sample.com/1.jpg</span><br><span class="hljs-attr">https:</span><span class="hljs-comment">//sample.com/2.jpg</span><br></code></pre></td></tr></table></figure></li></ul><p>这里，我使用shell脚本，将图片上传至又拍云。事实上，你可以使用任何变成语言，上传图片至任意的平台。只要你脚本处理好传入的参数，上传完所有图片，最终的输出结果是上面的格式即可。</p><h2 id="偏好设置"><a href="#偏好设置" class="headerlink" title="偏好设置"></a>偏好设置</h2><p>Typora上传脚本支持的自定义命令，可以在偏好设置中选择。上传服务选择Custom Command，自定义命令就是我们插入图片后，Typora调用的命令。如刚才我们的脚本名称为upload.sh，自定义命令就可以设为<code>bash upload.sh</code>，注意替换upload.sh的路径为绝对路径。</p><center><img src="https://pic.gaficat.com/default/typora自定义图床偏好设置.png" alt="typora自定义图床偏好设置" style="zoom: 50%;" /></center><h2 id="测试是否正常"><a href="#测试是否正常" class="headerlink" title="测试是否正常"></a>测试是否正常</h2><p>完成脚本和偏好设置后，就可以测试脚本是否正常了。打开偏好设置，直接点击<code>验证图片上传选项</code>。</p><center><img src="https://pic.gaficat.com/default/typora验证图片上传选项.png" alt="typora验证图片上传选项" style="zoom:50%;" /></center><p>如果你看到下面这个久违的画面后，那么恭喜你，万事大吉。</p><center><img src="https://pic.gaficat.com/default/typora图片上传成功.png" alt="typora图片上传成功" style="zoom:50%;" /></center><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>市面上确实有很多功能丰富的Markdown编辑器，但所见即所得、小巧轻量的Typora依然是我最喜欢的。图片上传功能的加入，极大方便了写作的过程，想想之前，写文章需要手动将图片拖到图床APP，再把URL复制到文章中，就两个字，“繁琐”。</p><p>最后，用Typora写作，自定义命令上传图片，自己写一个脚本，十几行代码，卸载掉各种图床工具，插入图片直接<code>command + v</code>，写作原本就该这么简单嘛！</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="教程" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    <category term="typora" scheme="https://www.gaficat.com/categories/%E6%95%99%E7%A8%8B/typora/"/>
    
    
    <category term="教程" scheme="https://www.gaficat.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>幺舅是怎么追到舅妈的</title>
    <link href="https://www.gaficat.com/posts/a02d6da.html"/>
    <id>https://www.gaficat.com/posts/a02d6da.html</id>
    <published>2020-05-02T17:50:36.000Z</published>
    <updated>2020-09-16T03:07:32.819Z</updated>
    
    <content type="html"><![CDATA[<p>因为和女票分手了，所以五一回家休整两天。结果聊着聊着，麻麻就跟我聊幺舅追舅妈的故事了，我觉得实在是有趣，就记录下来吧。</p><h1 id="幺舅？何许人？"><a href="#幺舅？何许人？" class="headerlink" title="幺舅？何许人？"></a>幺舅？何许人？</h1><p>我有一个幺舅，是家里最小的，排行老五，人很高，身材很壮。喜欢打篮球、钓鱼的缘故，全身黝黑。平时话不是很多，主要是因为家里的其他舅舅和姨妈太能说了，身为老五的他，就整天被数落。怎么还没有对象，怎么还不成家，怎么有升职的机会自己没抓住。嗯，这里应该插一句嘴，我应该也和幺舅一样，被说的太多了，所以话也很少。</p><p>我印象里，过年特别喜欢回妈妈家过年，很大一部分因素，是因为幺舅。</p><blockquote><p>幺舅很舍得给我们买礼物。小时候看四驱兄弟，特别想要一辆四驱车，我至今记得，自己平时攒钱，一毛一毛的攒，攒了多久自己都忘记了。当时攒够了四块六，实在等不及了，就跑去小卖部，掏出一把毛票子，跟老板说，我只有四块六，能卖给我那个5块钱的四驱车吗？老板满脸不在乎的表情，“行行行”，数也不数，便把钱拨到柜子里，把四驱车递给我。我记得那是我第一辆四驱车，魔鬼司令。后来呢，春节回去，幺舅带我去街上买东西，看我望着街边玩具店里的四驱车，没说什么，直接就给我买了一个。我记得好像是30块钱。那辆车是跳跃者的外壳，我记得惊喜的拆开包装，看到有雪花纹的马达，满心惊喜。事实证明，车这玩意儿吧，越贵肯定越好呀！5块的四驱车，我还能跟在后面屁颠屁颠的跑，冲啊！魔鬼司令！哎哟，就这么中二。30的四驱车，我就只能看着它在地上跟老鼠一样乱窜，一脸无奈，太快了！</p></blockquote><blockquote><p>幺舅似乎很喜欢跟我们小孩子玩。我还记得幺舅偷偷带我去玩街机，我那时候小，只记得里面有一个BOSS，是机器人，跳起来，半蹲，手臂摆一个poss。后来回家了，我也跟在幺舅后面，学机器人的动作，幺舅看到我在学，也跟我一起笔画，看我们两个谁更像，然后笑的咯咯咯的。</p></blockquote><blockquote><p>幺舅很爱我们这帮小崽子们。我有一个表姐，有一次在学校被小混混调戏了。幺舅本身很壮，叫了一帮兄弟去学校堵小混混，在那之后，再没有人敢惹表姐。</p></blockquote><blockquote><p>幺舅至今都没考过驾照，不过喜欢骑摩托，我记得我上小学那会，他花了一万多块买了一辆摩托，那个时候爸爸的夏利车应该才几万块钱。所以幺舅成了整个县城最靓的仔，我特别喜欢坐在摩托后面，跟幺舅去兜风，虽然是真的抖，屁股是真滴麻，但是，真的拉风，可嘚瑟了。</p></blockquote><img src="https://pic.gaficat.com/default/嘚瑟的表情.jpg" alt="嘚瑟的表情" style="zoom:33%;" /><h1 id="闷骚的人骚起来，这还了得"><a href="#闷骚的人骚起来，这还了得" class="headerlink" title="闷骚的人骚起来，这还了得"></a>闷骚的人骚起来，这还了得</h1><p>我本身也是一个话少的人，我觉得我跟幺舅挺像的，所以家里人应该都挺为我们这种性格的人担心的，怕找不到女票。但是，我的舅妈，比我幺舅<strong>小了十几岁</strong>，而且，从认识到结婚，只有<strong>短短的两个月时间</strong>。所以，相信你也好奇，这老牛是咋吃上嫩草了的？</p><h2 id="缘分呐"><a href="#缘分呐" class="headerlink" title="缘分呐"></a>缘分呐</h2><p>有一天，我大舅在街上走着，看着街上有一家店，怎么店里比平时多了一个姑娘。那时候的小县城，人员流动很少，乡里乡亲的基本都认识，大舅就去打听，这姑娘哪来的呀？长得挺漂亮的，有没对象啊？能不能给幺舅介绍介绍？于是这一打听才知道，人家是从深圳回来的，休假回来玩两天。没错，这段姻缘就这么开始了。</p><h2 id="首战告负"><a href="#首战告负" class="headerlink" title="首战告负"></a>首战告负</h2><p>后来呢，当天就托熟人介绍，一起让幺舅和舅妈见一面，认识认识。舅妈后来跟我们说：“那时候，根本没看上你们幺舅，长得又黑，眼睛近视又没带眼镜，又是一个眯眯眼，哎，可真是。”</p><p>可是幺舅喜欢啊，这小了十几岁，这么年轻的小姑娘，当然喜欢啊！钻石王老五这么多年了！咋办呀，要电话呀！结果，虽然第一顿饭没舅妈没看上幺舅。但是，幺舅有朋友啊！</p><blockquote><p>“下午吃饭的那个男的，问你要电话，给吗？”</p><p>“那个人，长得又黑，眼睛又小，不行还是算了吧？”</p></blockquote><p>有些时候，身边有个能说会道，拉的下脸的朋友还是好啊，幺舅托的朋友，就开始软磨硬泡，你说这又不是给了电话就成了是不是？认识一下嘛，多个朋友多条路，巴拉巴拉。</p><p>总之啊，就还是把舅妈的电话要到手了。</p><h2 id="啥？我车票被取消了？"><a href="#啥？我车票被取消了？" class="headerlink" title="啥？我车票被取消了？"></a>啥？我车票被取消了？</h2><p>假期很快就过去了，舅妈准备回深圳工作了。谁也想不到，为了和舅妈多见几次，幺舅偷偷把舅妈回深圳的票退了。</p><p>由于县城交通闭塞，没有通火车，所以舅妈得先坐四个小时的汽车，到另一个县，才能倒火车去深圳。幺舅早早就打听好了，就提前安排朋友，来回开了8个小时车，偷偷把舅妈的车票退了。这舅妈知道了，也无奈啊，人家就想多和你待两天啊，没办法啊，那就再待两天吧。</p><p>后来呀，不会开车的幺舅，不可能骑摩托送舅妈去另一个县倒火车吧，就又借了朋友的车，把舅妈送上火车，这才算初次终了。</p><h2 id="煲得了电话粥才有爱啊"><a href="#煲得了电话粥才有爱啊" class="headerlink" title="煲得了电话粥才有爱啊"></a>煲得了电话粥才有爱啊</h2><p>舅妈回深圳了，幺舅就跟没魂了一样。咋办呀？聊天呗！那段时间，幺舅就天天上班挂着QQ，跟舅妈聊天。QQ不回，就短信继续聊。短信不尽兴，就煲电话粥。其实你很难想象，一个平时那么话说的男生，遇到了自己心仪的姑娘，能有那么多的话。幺舅那一个月，给舅妈打了<strong>3000块钱</strong>的电话。</p><p>我自己其实也深有体会，和有的姑娘，一晚上有的没的，能聊好多。和有的姑娘吧，每一秒钟都是煎熬，关键是，女生们还喜欢你跟她们聊，即使没话说，还逼着你打电话，这谁顶得住。所以呀，煲得了电话粥才是真爱呢。毕竟两口子在一起几十年，恋爱的时候都觉得没话说，那之后的几十年还怎么过？</p><h2 id="丈母娘总是一种可怕的生物"><a href="#丈母娘总是一种可怕的生物" class="headerlink" title="丈母娘总是一种可怕的生物"></a>丈母娘总是一种可怕的生物</h2><p>也许是被幺舅的真心感动了，后来舅妈就决定从深圳回去。虽然两个人相爱了，但是舅妈的家里人不同意啊！人长得五大三粗的，黑不溜秋，眼睛又小，这以后有了小崽子，可不也是这个怂样子？加上年龄又大，这大十几岁，都快喊人家爹了，还怎么嫁？</p><blockquote><p>其实，虽然幺舅形象上不是特别帅气的那种。但是人是真的不错，讲义气，大方，工作也好。在那个小县城，国家电网，也是相当有牌面了。舅妈如果回去，可能是没有正式工作的。</p></blockquote><p>舅妈当时说，那我不管，你们跟我好好说，我就跟你们好好说。你们不然我跟他过，越不让， 我就偏去反着来。结果，还是扭不过舅妈，丈母娘同意了。</p><h2 id="我幺舅的新娘可是从深圳专门为他跑回来的"><a href="#我幺舅的新娘可是从深圳专门为他跑回来的" class="headerlink" title="我幺舅的新娘可是从深圳专门为他跑回来的"></a>我幺舅的新娘可是从深圳专门为他跑回来的</h2><p>幺舅和舅妈的感情是美满的，我印象里是表姐说：“你们知道不，幺舅要结婚了，新娘可是专门从深圳跑回来，为了幺舅的！”那个时候大家都不知道，平时闷闷的幺舅，暗地里，还有这么一段追美人的经历呢。</p><p>现在呀，幺舅和舅妈有一个女儿一个儿子，女儿快上高中了，儿子也上小学了。舅妈也有了正式的工作，两个人的感情一直很好。舅妈现在说起这段往事，也还是很开心。因为在她自己的姊妹里面，过得是最好的，幸福是自己倔强出来的。</p><p>幺舅和舅妈的新房子今年也刚刚装修好，今天在新家做了第一顿饭，没错，就在我们家楼上。哈哈哈，从此和幺舅多了一个身份，邻居！</p><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>其实，和幺舅一样，每一个看似内向，看似话少，看似五大三粗的人，内心都是很温柔的。也许他的话少，只是针对不同的人。面对自己的挚爱，他嘴里有世界上最美的情话。</p><p>也不是讲什么大道理，毕竟自己也已经分手了。有谁想听听我的分手经验，来亲身试试不？不过，我还是一个相当理想主义的人，还是想说说我的看法。我认为一段感情，或者婚姻，两个人本身，是大过金钱或是其他东西的。就像幺舅和舅妈当初，舅妈不嫌弃幺舅丑，“话少”，幺舅也不嫌弃舅妈没有正式工作。即使家人反对，只要双方认准，对方是我要的人，对方能给我幸福，所有条件，在日后都能一起努力创造的，事实上也正是如此！要相信你的眼光，人，永远比冷冰冰的条件温暖靠谱。不然男女之间还谈什么恋爱？两家父母合计一下两家的状况，直接结婚呗？</p><p>工科的男生啊，通常家境本身都不是特别优越（也不至于贫寒，大部分是普通家庭吧），都是靠自己的努力，希望让家庭过的更好（你问我为啥？条件好的还搞什么IT，接老子的班啊！）。即使满身光环，清华北大的博士，生活也相当的艰辛，有许多的压力，这就是当今社会。这就是人往高处走，水往低处流。<strong>但是，希望看到这篇文章的你我，不卑不亢。依靠自己的努力，让自己在一个陌生的城市立足，让自己和自己的家庭过的更好，不丢人。希望你我，即使被生活的重担压得喘不过气，也还能相信爱情，能够用真心去面对另一半，想起TA，依然嘴角上扬，胸口温热。</strong></p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;因为和女票分手了，所以五一回家休整两天。结果聊着聊着，麻麻就跟我聊幺舅追舅妈的故事了，我觉得实在是有趣，就记录下来吧。&lt;/p&gt;
&lt;h1 id=&quot;幺舅？何许人？&quot;&gt;&lt;a href=&quot;#幺舅？何许人？&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="生活" scheme="https://www.gaficat.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="生活" scheme="https://www.gaficat.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>当你老了，又成了谁的累赘</title>
    <link href="https://www.gaficat.com/posts/ee24dc2e.html"/>
    <id>https://www.gaficat.com/posts/ee24dc2e.html</id>
    <published>2020-04-28T15:55:29.000Z</published>
    <updated>2020-09-21T08:41:46.499Z</updated>
    
    <content type="html"><![CDATA[<p>又是我自己发牢骚的文章，通过博客推荐进来的直接<strong>command+w</strong>吧！</p>            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">            <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>            <script src="https://cdn.jsdelivr.net/npm/meting/dist/Meting.min.js"></script>            <meting-js  id="000hZcT11t4UWu" server="tencent" type="song" autoplay="false" mutex="true" listmaxheight="340px" preload="auto" theme="#ad7a86" loop="none"></meting-js><p>我是故事FM的忠实听众，之前听过一期关于社工介绍自己工作的节目，有的老人生活状况可以用毫无尊严形容——行动不便，满墙满地都是排泄物，人老了，活着的意义是什么。</p><h1 id="怎么突然想聊这个话题了"><a href="#怎么突然想聊这个话题了" class="headerlink" title="怎么突然想聊这个话题了"></a>怎么突然想聊这个话题了</h1><p>今天父亲联系我，给奶奶买一个轮椅，也不知道怎么，虽然和爷爷奶奶辈的亲人感情不是那么深，但心里还是挺难过的，因为印象里，奶奶除了腿脚不好，生活清淡，身体其实还行，没想到有些事来得比你想象得快，奶奶不仅腿脚不好，肺也不行了，完全走不了路了，这可能是我给奶奶买的最后几件东西了。我参加工作已经两年了，但除了工作上干的还不错以外，生活状态、心里状态、处理感情更多还是个孩子。主要是家里的长辈还把你当成孩子，你有得依靠，就不愿意去承担一些责任，当小孩子多好呀。</p><blockquote><p>前年春节，会奶奶家过年，除夕，父亲说：“你大伯今天要去街上置办一些东西，你也跟着去吧！”我心想，闲着也是闲着，就去呗。</p><p>“你知道你在家玩的好好的，为啥你爸要你跟我来不？”</p><p>“大概是各个地方过节都有一些不一样习俗吧，我们一直不老家这边生活，习俗什么的我都不清楚，以前都是大伯你们处理，我也是家里的男丁，这些事我得提前了解，以便未来逐渐接过你们手上的棒子吧？”</p><p>“哈哈哈哈哈哈，对！”</p></blockquote><blockquote><p>我小时候特别喜欢回妈妈家过年，因为回妈妈家，家里的长辈们会做一大桌子菜，一大家子十几号人，大家一起做一顿年夜饭，可不热闹。小孩子嘛，都喜欢热闹。</p><p>但是这两年，长辈们逐渐干不动了，腰不好，腿不好，关节炎，每个人都有每个人的毛病，明显感受到，这几年年夜饭，没有以前丰盛，人也没有以前齐了。长辈们开玩笑，这以后年夜饭呀，该你们这小辈们接手了，以后你们做成什么样子，我们就光跟着吃。那，同辈人中，年龄比较小的我，当然是，哥哥姐姐都不吭气，我就更不接茬了。没错，我们这一辈儿，哥哥姐姐们都是有小孩的人了，都还是小孩子的状态。我，女朋友都没谈呢，当个小孩的心态，就更心安理得了。</p></blockquote><p>就像上面的两个场景，其实许多时候，我已经意识到我需要转变自己的心态了。但是，人吧，总是习惯看别人。哥哥姐姐比我年长，尚且依然是小孩子模样，工作、家庭都靠着家里人。我，起码大学以后，所有事都相当独立，我靠着自己的努力，在一个陌生的城市立下足，我比他们成熟。可是啊，一个人的成熟很容易，一个人的生活本身就很平淡，过好自己一个人的生活很容易。困难的是，去承担起家庭的责任，成家、年夜饭、人情世故或是送走一些亲人。时间就是过得这么悄无声息，不知不觉，他们都老了。印象里，你还是小孩子，他们也依然健硕。然而，可能就是某一个瞬间，你突然就意识到，你的父辈们干不动了，你的爷爷辈们风烛残年了。你突然之间就没有人能依赖了，反而，他们逐渐的，要依赖你了，你需要挑起担子了，你不是小孩子了。当这一刻来临的时候，你是那么手足无措。</p><h1 id="假如我年少有为不自卑"><a href="#假如我年少有为不自卑" class="headerlink" title="假如我年少有为不自卑"></a>假如我年少有为不自卑</h1><p>今天看DannyData的视频，视频里，听着硅谷投资人vincent侃侃而谈，忽然觉得：同样都是这个年纪，为什么别人就可以911、特斯拉想买就买，掌握你这辈子都不会有财富。</p><p>我在想，如果我像他们一样，也年少有为，能够给我的家人提供最好的医疗条件；能不卑不亢，自信的面对工作和生活；能够吸引同样优秀的异性，和她成家，一起成长，担起家庭的重担。是不是一切不会像现在这么难，现在除了自己过得很舒服以外，无论是经济上还是其他方面，自己似乎都帮不上太多的忙。</p><p>是不是每个人，二十六七这个年纪，都已经承担起了家庭的责任呢？或者说，穷人的孩子早当家，用这种谎话来安慰自己。</p><h1 id="是不是只有经历一些离合才能长大"><a href="#是不是只有经历一些离合才能长大" class="headerlink" title="是不是只有经历一些离合才能长大"></a>是不是只有经历一些离合才能长大</h1><p>我高中时的一位同桌，是一个智商特别高、长得还挺帅的小伙。就是那种，不需要怎么努力，随便听听课，再复杂的数学题，拿过去就给你解的人。我印象特别深的一件事是，他为了给自己女票买蛋糕，省了一天的午饭，结果他看着女票吃蛋糕，自己饿得不行，不知不觉就啃起了蛋糕配的塑料勺。女生盯着他笑，说看你饿的，都开始啃勺子了，他呢，就嘿嘿一笑。</p><p>当然啦，他俩的事儿，班主任是知道的，只不过呢，班主任并不管，他俩成绩都不错。后来一次期中考试，他在旁边突然就啜泣起来，他说他外婆去世了。之后，我的记忆力里，只有他红着眼说他外婆和他感情特别深，我和班主任看着他女票陪他回家的背影。</p><p>在那之后呢？明显感觉他长大了，他不像以前那么无忧无虑了，变得多了几丝深沉。成绩还是和以前一样好，只是和女票分了手。现在呢，在国外，偶尔发发朋友圈，生活很自在。</p><h1 id="我的奶奶"><a href="#我的奶奶" class="headerlink" title="我的奶奶"></a>我的奶奶</h1><p>为什么想起高中同桌了，因为我清楚得记得，在他失去外婆最难过的日子里，他女票始终陪着他。其实挺羡慕他的，高中，双方父母都知道，同学们都知道，老师们也都知道，在最艰难的时刻，有人搀扶着。我呢，本来有着一个很懂事、温柔的女票，但因为一些事分开了。这个节骨眼儿上，奶奶唯一的心愿，是看她孙子结婚，然后盼着自己能看到重孙子，自己也就没有遗憾了。可是，我除了工作，一无所有，什么都处理不好。</p><p>其实，我和爷爷奶奶感情不深，为什么？我是爸爸妈妈带大的，我和爸爸妈妈生活在一个城市，爷爷奶奶生活在一个城市，外公生活在一个城市。所以没有长期一起生活的经历，必然不会有很深的感情。我印象里，奶奶有来我们的城市照顾我一段时间，有一次端午节，奶奶买了粽子，我咬了一口就说，怎么是白的，我要吃豆沙的。奶奶就带着咬了一口的粽子找老板，说能换成豆沙的不。没错，奶奶那辈人，省钱省习惯了，即使是8毛钱的粽子。</p><blockquote><p>我是妈妈一个人从小婴儿带到上学的，我听妈妈说，小时候因为我们生活在那种类似四合院的地方，妈妈是全职太太，所以并没有带我见太多人。有一次带我出去买菜，遇到熟人，别人叫了一下我的名字，我立马就躲到妈妈后面去了。我大概是从小，就有些自闭了？</p><p>所以啊，一个家庭，如果男生女生，都是一个人到这个城市，生活起来必定相当的困难，并且会对你们的孩子有一些影响。如果你们都很宅，不怎么懂社交的话。</p></blockquote><p>我不知道为什么，虽然和爷爷奶奶感情不是那么深。但可能是血缘关系，在他们生命的尽头，总想着满足他们的心愿。甚至于把他们的一些心愿，当成自己的使命或者任务。奶奶从盼着我上大学，到盼着我工作，如今生命的最后一段时间，盼着我带对象回家，但是，我怕是，哎，我不知道五一回去我要怎么圆我的谎。或者骗自己，满足老人的心愿，也是自己在主动从小孩子的状态转变出去，开始承担一些责任？</p><h1 id="我的爷爷"><a href="#我的爷爷" class="headerlink" title="我的爷爷"></a>我的爷爷</h1><p>我的爷爷很早就去世了，我的印象里，那天放学回家，爸爸妈妈都不见了，后来跟我打电话，说爷爷在家属院门口，跟别人起了冲突，突然心梗了。他们紧急会老家了，我因为要准备考试，等考完试再会老家。我就记得，放下电话，那个周末我整整打了两天街头篮球，然后通关了植物大战僵尸。我不知道那个时候为什么我那么痴迷游戏，可能我和大多数人不一样，大多数男生是上了大学才开始打游戏。我打游戏最疯狂的一段时间是初中高中，你敢想象整个高三，甚至于后来复读，我每周都还会雷打不动的玩LOL吗？</p><p>其实说起爷爷，我最清楚的记忆，是日记本上，08年10月29日。</p><blockquote><p>我和父亲坐出租车直接到了杨凌中学门口，刚好看到爷爷从巷子里出来，往大伯家去。事先没有告诉爷爷我们要回来，父亲说：“快去，给你爷爷一个惊喜。”我不知道哪里来了一股子劲儿，边跑边喊：“爷爷！爷爷！”爷爷愣住了，显然没反应过来，这哪个孙子喊我爷爷呢？我回头指了指刚下车的父亲，爷爷恍然大悟，“魏禾回来啦！”说着就重重的拍了拍我，虽然爷爷身体一直不好，但是那双有力的手，成了永恒的记忆。</p></blockquote><h1 id="尾巴"><a href="#尾巴" class="headerlink" title="尾巴"></a>尾巴</h1><p>现在已经凌晨两点了，其实脑子不是很清醒，就突然觉得，奶奶也快要离开了，一切都来的这么快，自己没准备好，原本以为能满足她心愿的计划，现在看来也。</p><p>我想之后，我会选择一个很爱我的人，而不是一个条件很好的人。虽然站在父母的角度，条件好了，感情可以培养。条件不好，你的生活很艰难。但是我觉得，有爱，家和万事兴，条件也是可以培养的。更重要的是你年老的时候，子女离你远去，朋友早去了另一个世界。你的枕边人，不是爱你或者你爱之人，40年后哪还有什么条件好，没有爱，没有彼此包容的耐心，你成了谁的累赘，活着又有什么尊严呢？</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;又是我自己发牢骚的文章，通过博客推荐进来的直接&lt;strong&gt;command+w&lt;/strong&gt;吧！&lt;/p&gt;

            &lt;link rel=&quot;stylesheet&quot;</summary>
        
      
    
    
    
    <category term="生活" scheme="https://www.gaficat.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="生活" scheme="https://www.gaficat.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
</feed>
